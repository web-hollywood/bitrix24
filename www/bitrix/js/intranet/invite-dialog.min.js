(function(){if(!!BX.InviteDialog){return}BX.InviteDialog={bInit:false,popup:null,arParams:{},lastTab:"invite",lastUserTypeSuffix:"",sonetGroupSelector:null,popupHint:{}};BX.InviteDialog.Init=function(e){if(e){BX.InviteDialog.arParams=e}if(BX.InviteDialog.bInit){return}BX.InviteDialog.bInit=true};BX.InviteDialog.selectCallback=function(e,t,i){if(!BX.findChild(BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-item-post"),{attr:{"data-id":e.id}},false,false)){BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-item-post").appendChild(BX.create("span",{attrs:{"data-id":e.id},props:{className:"feed-add-post-destination feed-add-post-destination-sonetgroups"+(typeof window["arExtranetGroupID"]!="undefined"&&BX.util.in_array(e.entityId,window["arExtranetGroupID"])?" feed-add-post-destination-extranet":"")},children:[BX.create("input",{attrs:{type:"hidden",name:"SONET_GROUPS[]",value:e.id}}),BX.create("input",{attrs:{type:"hidden",name:"SONET_GROUPS_NAME["+e.id+"]",value:e.name}}),BX.create("span",{props:{className:"feed-add-post-destination-text"},html:e.name}),BX.create("span",{props:{className:"feed-add-post-del-but"},events:{click:function(t){BX.SocNetLogDestination.deleteItem(e.id,"sonetgroups",BX.InviteDialog.sonetGroupSelector);BX.PreventDefault(t)},mouseover:function(){BX.addClass(this.parentNode,"feed-add-post-destination-hover")},mouseout:function(){BX.removeClass(this.parentNode,"feed-add-post-destination-hover")}}})]}))}BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-input-post").value="";BX.InviteDialog.setLinkName(BX.InviteDialog.sonetGroupSelector)};BX.InviteDialog.unSelectCallback=function(e,t,i){var o=BX.findChildren(BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-item-post"),{attribute:{"data-id":""+e.id+""}},true);if(o!=null){for(var n=0;n<o.length;n++){BX.remove(o[n])}}BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-input-post").value="";BX.InviteDialog.setLinkName(BX.InviteDialog.sonetGroupSelector)};BX.InviteDialog.openDialogCallback=function(){BX.PopupWindow.setOptions({popupZindex:2100});BX.style(BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-input-box-post"),"display","inline-block");BX.style(BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-tag-post"),"display","none");BX.focus(BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-input-post"))};BX.InviteDialog.closeDialogCallback=function(){if(!BX.SocNetLogDestination.isOpenSearch()&&BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-input-post").value.length<=0){BX.style(BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-input-box-post"),"display","none");BX.style(BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-tag-post"),"display","inline-block");BX.InviteDialog.disableBackspace()}};BX.InviteDialog.searchBefore=function(e){return BX.SocNetLogDestination.searchBeforeHandler(e,{formName:BX.InviteDialog.sonetGroupSelector,inputId:"invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-input-post"})};BX.InviteDialog.search=function(e){if(e.keyCode==16||e.keyCode==17||e.keyCode==18||e.keyCode==20||e.keyCode==244||e.keyCode==224||e.keyCode==91||e.keyCode==9){return false}if(typeof BX.SocNetLogDestination.createSonetGroupTimeout!="undefined"&&BX.SocNetLogDestination.createSonetGroupTimeout!=null){clearTimeout(BX.SocNetLogDestination.createSonetGroupTimeout)}return BX.SocNetLogDestination.searchHandler(e,{formName:BX.InviteDialog.sonetGroupSelector,inputId:"invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-input-post",linkId:"invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-tag-post",sendAjax:false})};BX.InviteDialog.disableBackspace=function(e){if(BX.SocNetLogDestination.backspaceDisable||BX.SocNetLogDestination.backspaceDisable!=null){BX.unbind(window,"keydown",BX.SocNetLogDestination.backspaceDisable)}BX.bind(window,"keydown",BX.SocNetLogDestination.backspaceDisable=function(e){if(e.keyCode==8){BX.PreventDefault(e);return false}});setTimeout(function(){BX.unbind(window,"keydown",BX.SocNetLogDestination.backspaceDisable);BX.SocNetLogDestination.backspaceDisable=null},5e3)};BX.InviteDialog.setLinkName=function(e){if(BX.SocNetLogDestination.getSelectedCount(e)<=0){BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-tag-post").innerHTML=BX.message("inviteDialogDestLink1")}else{BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-tag-post").innerHTML=BX.message("inviteDialogDestLink2")}};BX.InviteDialog.showMessage=function(e,t){if(BX("invite-dialog-error-block")){BX("invite-dialog-error-block").style.display="none"}if(BX("intranet-dialog-tabs")){if(typeof t!="undefined"&&t&&t.length>0){BX("intranet-dialog-tabs").parentNode.appendChild(BX.create("div",{props:{className:"webform-round-corners webform-error-block"},attrs:{id:"invite-dialog-error-block"},style:{"margin-top":"10px"},children:[BX.create("div",{props:{className:"webform-corners-top"},children:[BX.create("div",{props:{className:"webform-left-corner"}}),BX.create("div",{props:{className:"webform-right-corner"}})]}),BX.create("div",{props:{className:"webform-content"},attrs:{id:"invite-dialog-error-content"},html:t}),BX.create("div",{props:{className:"webform-corners-bottom"},children:[BX.create("div",{props:{className:"webform-left-corner"}}),BX.create("div",{props:{className:"webform-right-corner"}})]})]}))}BX("intranet-dialog-tabs").parentNode.appendChild(BX.create("table",{children:[BX.create("tr",{children:[BX.create("td",{props:{className:"invite-dialog-inv-form",style:"min-height:100px; min-width: 420px; vertical-align:center; text-align: center;font-size: 13px;"},html:e})]}),BX.create("tr",{children:[BX.create("td",{props:{className:"invite-dialog-inv-form",style:"min-height:100px; min-width: 420px; vertical-align:center; text-align: center;font-size: 13px;"},html:"<span class='popup-window-button popup-window-button-accept'>"+BX.message(BX.InviteDialog.lastTab=="add"?"BX24_INVITE_DIALOG_CONTINUE_ADD_BUTTON":"BX24_INVITE_DIALOG_CONTINUE_INVITE_BUTTON")+"</span>",events:{click:function(){B24.Bitrix24InviteDialog.ShowForm()}}})]})],props:{style:"min-height:100px; min-width: 420px; margin: 0 0 9px 0;"}}));BX.cleanNode(BX("intranet-dialog-tabs"),true)}};BX.InviteDialog.showError=function(e){if(BX("invite-dialog-error-block")){BX("invite-dialog-error-block").style.display="block";if(BX("invite-dialog-error-content")){BX("invite-dialog-error-content").innerHTML=e}}};BX.InviteDialog.bindInviteDialogStructureLink=function(e){if(typeof e=="undefined"||e==null){return}BX.bind(e,"click",function(t){if(!t)t=window.event;if(inviteDialogDepartmentPopup===null){inviteDialogDepartmentPopup=new BX.PopupWindow("invite-dialog-department-popup",e,{offsetTop:1,autoHide:true,angle:{position:"top",offset:50},content:BX("INVITE_DEPARTMENT_selector_content"),zIndex:1200,buttons:[]})}if(!inviteDialogDepartmentPopup.isShown()){inviteDialogDepartmentPopup.setBindElement(BX("invite-dialog-"+BX.InviteDialog.lastTab+"-structure-link"));inviteDialogDepartmentPopup.show()}BX.PopupMenu.destroy("invite-dialog-usertype-popup");if(BX.SocNetLogDestination.popupWindow!=null){BX.SocNetLogDestination.popupWindow.close()}if(BX.SocNetLogDestination.popupSearchWindow!=null){BX.SocNetLogDestination.popupSearchWindow.close()}if(BX.SocNetLogDestination.createSocNetGroupWindow!=null){BX.SocNetLogDestination.createSocNetGroupWindow.close()}return BX.PreventDefault(t)})};BX.InviteDialog.bindInviteDialogSonetGroupLink=function(e){if(typeof e=="undefined"||e==null){return}BX.bind(e,"click",function(e){var t=BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-container-post");if(t){t.style.display="block"}if(BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-container-post")){var i=BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-container-post").getAttribute("data-selector-name");if(typeof i!="undefined"&&i.length>0){BX.SocNetLogDestination.obElementBindMainPopup[i].node=BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-container-post");BX.SocNetLogDestination.obElementBindSearchPopup[i].node=BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-container-post");BX.SocNetLogDestination.openDialog(i);BX.PopupMenu.destroy("invite-dialog-usertype-popup");if(inviteDialogDepartmentPopup!=null){inviteDialogDepartmentPopup.close()}BX.PreventDefault(e)}}})};BX.InviteDialog.onInviteDialogUserTypeSelect=function(e){if(e!="extranet"){e="employee"}BX.InviteDialog.lastUserTypeSuffix=e=="employee"?"":"-extranet";BX.InviteDialog.sonetGroupSelector=BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-container-post").getAttribute("data-selector-name");BX("invite-dialog-"+BX.InviteDialog.lastTab+"-usertype-block-employee").style.display=e=="employee"?"block":"none";if(BX("invite-dialog-"+BX.InviteDialog.lastTab+"-usertype-block-extranet")){BX("invite-dialog-"+BX.InviteDialog.lastTab+"-usertype-block-extranet").style.display=e=="employee"?"none":"block"}if(e=="extranet"){BX("invite-dialog-"+BX.InviteDialog.lastTab+"-extranet-sonetgroup-container-post").style.display="block";BX("invite-dialog-"+BX.InviteDialog.lastTab+"-sonetgroup-container-post").style.display="none";BX.SocNetLogDestination.obAllowAddSocNetGroup[BX("invite-dialog-"+BX.InviteDialog.lastTab+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-container-post").getAttribute("data-selector-name")]=true}else{BX("invite-dialog-"+BX.InviteDialog.lastTab+"-sonetgroup-container-post").style.display="block";BX("invite-dialog-"+BX.InviteDialog.lastTab+"-extranet-sonetgroup-container-post").style.display="none"}if(BX("intranet-dialog-tab-content-"+BX.InviteDialog.lastTab)){BX("intranet-dialog-tab-content-"+BX.InviteDialog.lastTab).setAttribute("data-user-type",e)}BX.PopupMenu.destroy("invite-dialog-usertype-popup");if(BX.InviteDialog.lastTab=="add"&&BX("invite-dialog-mailbox-container")){BX("invite-dialog-mailbox-container").style.display=e=="extranet"?"none":"block"}};BX.InviteDialog.bindInviteDialogUserTypeLink=function(e,t){t=!!t;if(typeof e=="undefined"||e==null){return}BX.bind(e,"click",function(i){BX.PopupMenu.destroy("invite-dialog-usertype-popup");var o=[{text:BX.message("inviteDialogTitleEmployee"),id:"invite-dialog-usertype-popup-employee-title",className:"menu-popup-no-icon",onclick:function(){BX.InviteDialog.onInviteDialogUserTypeSelect("employee")}}];if(t){o.push({text:BX.message("inviteDialogTitleExtranet"),id:"invite-dialog-usertype-popup-extranet-title",className:"menu-popup-no-icon",onclick:function(){BX.InviteDialog.onInviteDialogUserTypeSelect("extranet")}})}var n={offsetLeft:-14,offsetTop:4,zIndex:1200,lightShadow:false,angle:{position:"top",offset:50},events:{onPopupShow:function(e){}}};BX.PopupMenu.show("invite-dialog-usertype-popup",e,o,n)})};BX.InviteDialog.bindInviteDialogChangeTab=function(e){if(typeof e=="undefined"||e==null){return}BX.bind(e,"click",function(t){if(!t)t=window.event;var i=e.getAttribute("data-action");if(i.length>0){BX.InviteDialog.lastTab=i;for(var o=0;o<arTabs.length;o++){if(arTabs[o].id=="intranet-dialog-tab-"+BX.InviteDialog.lastTab){BX.addClass(arTabs[o],"popup-window-tab-selected")}else{BX.removeClass(arTabs[o],"popup-window-tab-selected")}}for(o=0;o<arTabsContent.length;o++){if(arTabsContent[o].id=="intranet-dialog-tab-content-"+BX.InviteDialog.lastTab){BX.addClass(arTabsContent[o],"popup-window-tab-content-selected")}else{BX.removeClass(arTabsContent[o],"popup-window-tab-content-selected")}}if(BX("invite-dialog-"+i+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-container-post"))BX.InviteDialog.sonetGroupSelector=BX("invite-dialog-"+i+BX.InviteDialog.lastUserTypeSuffix+"-sonetgroup-container-post").getAttribute("data-selector-name");if(BX.SocNetLogDestination.popupWindow!=null){BX.SocNetLogDestination.popupWindow.close()}if(BX.SocNetLogDestination.popupSearchWindow!=null){BX.SocNetLogDestination.popupSearchWindow.close()}if(BX.SocNetLogDestination.createSocNetGroupWindow!=null){BX.SocNetLogDestination.createSocNetGroupWindow.close()}if(inviteDialogDepartmentPopup!=null){inviteDialogDepartmentPopup.close()}BX.PopupMenu.destroy("invite-dialog-usertype-popup");var n=window.BX?window:window.top.BX?window.top:null;if(n){n.B24.Bitrix24InviteDialog.popup.setTitleBar(n.BX.message("BX24_INVITE_TITLE_"+(i=="invite"||i=="self"?"INVITE":"ADD")))}}return BX.PreventDefault(t)})};BX.InviteDialog.getEmail1=function(){var e="";if(BX("ADD_EMAIL")){e=BX("ADD_EMAIL").value}return e};BX.InviteDialog.getEmail2=function(){var e="";if(BX("ADD_MAILBOX_ACTION")&&BX("ADD_MAILBOX_ACTION").value=="connect"&&BX("ADD_MAILBOX_USER_connect")){var t=BX("ADD_MAILBOX_USER_connect").options[BX("ADD_MAILBOX_USER_connect").selectedIndex].value;var i=typeof BX("ADD_MAILBOX_DOMAIN_connect").options!="undefined"?BX("ADD_MAILBOX_DOMAIN_connect").options[BX("ADD_MAILBOX_DOMAIN_connect").selectedIndex].getAttribute("data-service-id"):BX("ADD_MAILBOX_SERVICE_connect").value;if(typeof i!="undefined"&&parseInt(i)>0&&typeof arConnectMailServicesDomains[i]!="undefined"){e=t+"@"+arConnectMailServicesDomains[i]}}return e};BX.InviteDialog.setEmail2=function(e,t){if(t.length>0){if(e.length<=0){BX("ADD_SEND_PASSWORD").disabled=false;BX("ADD_SEND_PASSWORD_EMAIL").innerHTML="<br>("+BX.util.htmlspecialchars(t)+")"}}else{if(e.length<=0){BX("ADD_SEND_PASSWORD_EMAIL").innerHTML="";BX("ADD_SEND_PASSWORD").checked=false;BX("ADD_SEND_PASSWORD").disabled=true}else{BX("ADD_SEND_PASSWORD").disabled=false;BX("ADD_SEND_PASSWORD_EMAIL").innerHTML="<br>("+BX.util.htmlspecialchars(e)+")"}}};BX.InviteDialog.setEmail1=function(e,t){if(e.length>0){BX("ADD_SEND_PASSWORD_EMAIL").innerHTML="<br>("+BX.util.htmlspecialchars(e)+")";BX("ADD_SEND_PASSWORD").disabled=false}else{if(t.length>0){BX("ADD_SEND_PASSWORD").disabled=false;BX("ADD_SEND_PASSWORD_EMAIL").innerHTML="<br>("+BX.util.htmlspecialchars(t)+")"}else{BX("ADD_SEND_PASSWORD_EMAIL").innerHTML="";BX("ADD_SEND_PASSWORD").checked=false;BX("ADD_SEND_PASSWORD").disabled=true}}};BX.InviteDialog.bindSendPasswordEmail=function(){if(BX("ADD_SEND_PASSWORD_EMAIL")&&BX("ADD_SEND_PASSWORD")){if(BX("ADD_EMAIL")){BX.bind(BX("ADD_EMAIL"),"keyup",function(){var e=BX.InviteDialog.getEmail1();var t=BX.InviteDialog.getEmail2();BX.InviteDialog.setEmail1(e,t)})}if(BX("ADD_MAILBOX_USER_connect")){BX.bind(BX("ADD_MAILBOX_USER_connect"),"change",function(){var e=BX.InviteDialog.getEmail1();var t=BX.InviteDialog.getEmail2();BX.InviteDialog.setEmail2(e,t)})}if(BX("ADD_MAILBOX_DOMAIN_connect")){BX.bind(BX("ADD_MAILBOX_DOMAIN_connect"),"change",function(){var e=BX.InviteDialog.getEmail1();var t=BX.InviteDialog.getEmail2();BX.InviteDialog.setEmail2(e,t)})}}};BX.InviteDialog.bindInviteDialogSubmit=function(e){if(typeof e=="undefined"||e==null){return}BX.bind(e,"click",function(t){if(!t)t=window.event;if(BX.SocNetLogDestination.popupWindow!=null){BX.SocNetLogDestination.popupWindow.close()}if(BX.SocNetLogDestination.popupSearchWindow!=null){BX.SocNetLogDestination.popupSearchWindow.close()}if(BX.SocNetLogDestination.createSocNetGroupWindow!=null){BX.SocNetLogDestination.createSocNetGroupWindow.close()}BX.PopupMenu.destroy("invite-dialog-usertype-popup");var i=null;var o=[];var n=null;switch(e.id){case"invite-dialog-self-button-submit":i={action:"self",allow_register:document.forms.SELF_DIALOG_FORM["allow_register"].checked?"Y":"N",allow_register_confirm:document.forms.SELF_DIALOG_FORM["allow_register_confirm"].value,allow_register_secret:document.forms.SELF_DIALOG_FORM["allow_register_secret"].value,allow_register_whitelist:document.forms.SELF_DIALOG_FORM["allow_register_whitelist"].value,allow_register_text:document.forms.SELF_DIALOG_FORM["allow_register_text"].value,sessid:BX.bitrix_sessid()};break;case"invite-dialog-invite-button-submit":if(typeof document.forms.INVITE_DIALOG_FORM["SONET_GROUPS[]"]!="undefined"){if(typeof document.forms.INVITE_DIALOG_FORM["SONET_GROUPS[]"].value=="undefined"){o=document.forms.INVITE_DIALOG_FORM["SONET_GROUPS[]"]}else{o=[document.forms.INVITE_DIALOG_FORM["SONET_GROUPS[]"]]}}i={action:"invite",EMAIL:document.forms.INVITE_DIALOG_FORM["EMAIL"].value,MESSAGE_TEXT:document.forms.INVITE_DIALOG_FORM["MESSAGE_TEXT"].value,DEPARTMENT_ID:BX("intranet-dialog-tab-content-invite").getAttribute("data-user-type")=="extranet"?0:document.forms.INVITE_DIALOG_FORM["DEPARTMENT_ID"].value,sessid:BX.bitrix_sessid()};n=BX.InviteDialog.processSonetGroupsInput(o,document.forms.INVITE_DIALOG_FORM);if(n.arCode.length>0){i.SONET_GROUPS_CODE=n.arCode}if(typeof n.arName=="object"&&Object.keys(n.arName).length>0){i.SONET_GROUPS_NAME=n.arName}break;case"invite-dialog-add-button-submit":if(typeof document.forms.ADD_DIALOG_FORM["SONET_GROUPS[]"]!="undefined"){if(typeof document.forms.ADD_DIALOG_FORM["SONET_GROUPS[]"].value=="undefined"){o=document.forms.ADD_DIALOG_FORM["SONET_GROUPS[]"]}else{o=[document.forms.ADD_DIALOG_FORM["SONET_GROUPS[]"]]}}i={action:"add",ADD_EMAIL:document.forms.ADD_DIALOG_FORM["ADD_EMAIL"].value,ADD_NAME:document.forms.ADD_DIALOG_FORM["ADD_NAME"].value,ADD_LAST_NAME:document.forms.ADD_DIALOG_FORM["ADD_LAST_NAME"].value,ADD_POSITION:document.forms.ADD_DIALOG_FORM["ADD_POSITION"].value,ADD_SEND_PASSWORD:!!document.forms.ADD_DIALOG_FORM["ADD_SEND_PASSWORD"].checked?document.forms.ADD_DIALOG_FORM["ADD_SEND_PASSWORD"].value:"N",DEPARTMENT_ID:BX("intranet-dialog-tab-content-add").getAttribute("data-user-type")=="extranet"?0:document.forms.ADD_DIALOG_FORM["DEPARTMENT_ID"].value,sessid:BX.bitrix_sessid()};n=BX.InviteDialog.processSonetGroupsInput(o,document.forms.ADD_DIALOG_FORM);if(n.arCode.length>0){i.SONET_GROUPS_CODE=n.arCode}if(typeof n.arName=="object"&&Object.keys(n.arName).length>0){i.SONET_GROUPS_NAME=n.arName}if(BX("ADD_MAILBOX_ACTION")&&BX.util.in_array(BX("ADD_MAILBOX_ACTION").value,["create","connect"])){i.ADD_MAILBOX_ACTION=BX("ADD_MAILBOX_ACTION").value;if(BX("ADD_MAILBOX_ACTION").value=="create"){i.ADD_MAILBOX_PASSWORD=BX("ADD_MAILBOX_PASSWORD").value;i.ADD_MAILBOX_PASSWORD_CONFIRM=BX("ADD_MAILBOX_PASSWORD_CONFIRM").value;i.ADD_MAILBOX_DOMAIN=BX("ADD_MAILBOX_DOMAIN_create").value;i.ADD_MAILBOX_USER=BX("ADD_MAILBOX_USER_create").value;i.ADD_MAILBOX_SERVICE=typeof BX("ADD_MAILBOX_DOMAIN_create").options!="undefined"?BX("ADD_MAILBOX_DOMAIN_create").options[BX("ADD_MAILBOX_DOMAIN_create").selectedIndex].getAttribute("data-service-id"):BX("ADD_MAILBOX_SERVICE_create").value}else if(BX("ADD_MAILBOX_ACTION").value=="connect"){i.ADD_MAILBOX_USER=BX("ADD_MAILBOX_USER_connect").value;i.ADD_MAILBOX_DOMAIN=BX("ADD_MAILBOX_DOMAIN_connect").value;i.ADD_MAILBOX_SERVICE=typeof BX("ADD_MAILBOX_DOMAIN_connect").options!="undefined"?BX("ADD_MAILBOX_DOMAIN_connect").options[BX("ADD_MAILBOX_DOMAIN_connect").selectedIndex].getAttribute("data-service-id"):BX("ADD_MAILBOX_SERVICE_connect").value}}break;case"invite-dialog-integrator-button-submit":i={action:"integrator",integrator_email:document.forms.INTEGRATOR_DIALOG_FORM["integrator_email"].value,sessid:BX.bitrix_sessid()};if(document.forms.INTEGRATOR_DIALOG_FORM["INTEGRATOR_MESSAGE_TEXT"]){i["integrator_message_text"]=document.forms.INTEGRATOR_DIALOG_FORM["INTEGRATOR_MESSAGE_TEXT"].value}break}if(i){BX.InviteDialog.disableSubmitButton(true,e);BX.ajax({url:BX.message("inviteDialogSubmitUrl"),method:"POST",dataType:"json",data:i,onsuccess:function(t){BX.InviteDialog.disableSubmitButton(false,e);if(typeof t["ERROR"]!="undefined"&&t["ERROR"].length>0){BX.InviteDialog.showError(t["ERROR"])}else if(typeof t["MESSAGE"]!="undefined"&&t["MESSAGE"].length>0){BX.InviteDialog.showMessage(t["MESSAGE"],typeof t["WARNING"]!="undefined"&&t["WARNING"].length>0?t["WARNING"]:false)}},onfailure:function(t){BX.InviteDialog.disableSubmitButton(false,e);BX.InviteDialog.showError(t["ERROR"])}})}return BX.PreventDefault(t)})};BX.InviteDialog.bindInviteDialogClose=function(e){if(typeof e=="undefined"||e==null){return}BX.bind(e,"click",function(e){if(!e)e=window.event;BX.InviteDialog.onInviteDialogClose(true);return BX.PreventDefault(e)})};BX.InviteDialog.onInviteDialogClose=function(e){e=!!e;if(BX.SocNetLogDestination.popupWindow!=null){BX.SocNetLogDestination.popupWindow.close()}if(BX.SocNetLogDestination.popupSearchWindow!=null){BX.SocNetLogDestination.popupSearchWindow.close()}if(BX.SocNetLogDestination.createSocNetGroupWindow!=null){BX.SocNetLogDestination.createSocNetGroupWindow.close()}if(inviteDialogDepartmentPopup!=null){inviteDialogDepartmentPopup.destroy()}if(e&&B24.Bitrix24InviteDialog.popup!=null){B24.Bitrix24InviteDialog.popup.close()}BX.InviteDialog.lastTab="invite"};BX.InviteDialog.onMailboxAction=function(e){if(e!="connect"){e="create"}var t=e=="connect"?"create":"connect";if(BX("invite-dialog-mailbox-container")){BX.removeClass(BX("invite-dialog-mailbox-container"),"invite-dialog-box-info-set-inactive")}if(BX("invite-dialog-mailbox-content-"+e)){BX("invite-dialog-mailbox-content-"+e).style.display="block"}if(BX("invite-dialog-mailbox-content-"+t)){BX("invite-dialog-mailbox-content-"+t).style.display="none"}if(BX("invite-dialog-mailbox-action-"+e)){BX.addClass(BX("invite-dialog-mailbox-action-"+e),"invite-dialog-box-info-btn-active")}if(BX("invite-dialog-mailbox-action-"+t)){BX.removeClass(BX("invite-dialog-mailbox-action-"+t),"invite-dialog-box-info-btn-active")}if(BX("ADD_MAILBOX_ACTION")){BX("ADD_MAILBOX_ACTION").value=e}var i=BX.InviteDialog.getEmail1();var o=e=="connect"?BX.InviteDialog.getEmail2():"";BX.InviteDialog.setEmail2(i,o)};BX.InviteDialog.onMailboxRollup=function(){if(BX("invite-dialog-mailbox-container")){BX.addClass(BX("invite-dialog-mailbox-container"),"invite-dialog-box-info-set-inactive")}if(BX("invite-dialog-mailbox-action-create")){BX.removeClass(BX("invite-dialog-mailbox-action-create"),"invite-dialog-box-info-btn-active")}if(BX("invite-dialog-mailbox-action-connect")){BX.removeClass(BX("invite-dialog-mailbox-action-connect"),"invite-dialog-box-info-btn-active")}if(BX("ADD_MAILBOX_ACTION")){BX("ADD_MAILBOX_ACTION").value=""}var e=BX.InviteDialog.getEmail1();var t="";BX.InviteDialog.setEmail2(e,t)};BX.InviteDialog.onMailboxServiceSelect=function(e){if(e){var t=e.options[e.selectedIndex].getAttribute("data-service-id");var i=e.options[e.selectedIndex].getAttribute("data-domain");if(BX("ADD_MAILBOX_USER_connect")){BX.cleanNode(BX("ADD_MAILBOX_USER_connect"))}if(i.length>0&&typeof arMailServicesUsers[i]!="undefined"){for(var o=0;o<arMailServicesUsers[i].length;o++){BX("ADD_MAILBOX_USER_connect").appendChild(BX.create("OPTION",{props:{value:arMailServicesUsers[i][o]},attrs:{"data-service-id":t},text:arMailServicesUsers[i][o]}))}}}};BX.InviteDialog.disableSubmitButton=function(e,t){e=!!e;if(t){if(e){BX.addClass(t,"popup-window-button-disabled");BX.addClass(t,"popup-window-button-wait");t.style.cursor="auto"}else{BX.removeClass(t,"popup-window-button-disabled");BX.removeClass(t,"popup-window-button-wait");t.style.cursor="pointer"}}};BX.InviteDialog.processSonetGroupsInput=function(e,t){var i={arName:[],arCode:[]};var o=null;for(var n=0,a=e.length;n<a;n++){if(typeof e[n].tagName=="undefined"){for(var l=0,s=e[n].length;l<s;l++){if(typeof e[n][l]!="undefined"&&e[n][l].value.length>0){o=e[n][l].value;if(typeof t["SONET_GROUPS_NAME["+o+"]"].value!="undefined"){i.arName[o]=t["SONET_GROUPS_NAME["+o+"]"].value;i.arCode.push(o)}}}}else{if(typeof e[n]!="undefined"&&e[n].value.length>0){o=e[n].value;if(typeof t["SONET_GROUPS_NAME["+o+"]"].value!="undefined"){i.arName[o]=t["SONET_GROUPS_NAME["+o+"]"].value;i.arCode.push(o)}}}}return i};BX.InviteDialog.initHint=function(e){var t=BX(e);if(t){t.setAttribute("data-id",t);BX.bind(t,"mouseover",BX.proxy(function(){var e=BX.proxy_context.getAttribute("data-id");var t=BX.proxy_context.getAttribute("data-text");this.showHint(e,BX.proxy_context,t)},this));BX.bind(t,"mouseout",BX.proxy(function(){var e=BX.proxy_context.getAttribute("data-id");this.hideHint(e)},this))}};BX.InviteDialog.showHint=function(e,t,i){if(this.popupHint[e]){this.popupHint[e].close()}this.popupHint[e]=new BX.PopupWindow("invite-dialog-help"+e,t,{lightShadow:true,autoHide:false,darkMode:true,offsetLeft:0,offsetTop:2,bindOptions:{position:"top"},zIndex:1100,events:{onPopupClose:function(){this.destroy()}},content:BX.create("div",{attrs:{style:"padding-right: 5px; width: 250px;"},html:i})});this.popupHint[e].setAngle({offset:13,position:"bottom"});this.popupHint[e].show();return true};BX.InviteDialog.hideHint=function(e){this.popupHint[e].close();this.popupHint[e]=null};BX.InviteDialog.regenerateSecret=function(e){var t=BX.util.getRandomString(8);if(BX.type.isDomNode(BX("allow_register_secret"))){BX("allow_register_secret").value=t||""}if(BX.type.isDomNode(BX("allow_register_url"))&&e){BX("allow_register_url").value=e+(t||"yes")}};BX.InviteDialog.copyRegisterUrl=function(){if(BX.type.isDomNode(BX("allow_register_url"))){BX.clipboard.copy(BX("allow_register_url").value)}};BX.InviteDialog.toggleSettings=function(){if(BX.type.isDomNode(BX("intranet-dialog-tab-content-self-hidden-block"))){BX.toggle(BX("intranet-dialog-tab-content-self-hidden-block"))}}})();