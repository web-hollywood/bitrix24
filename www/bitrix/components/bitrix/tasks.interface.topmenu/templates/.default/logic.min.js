"use strict";BX.namespace("Tasks.Component");(function(){if(typeof BX.Tasks.Component.TopMenu!="undefined"){return}BX.Tasks.Component.TopMenu=BX.Tasks.Component.extend({sys:{code:"topmenu"},methodsStatic:{instances:{},getInstance:function(t){return BX.Tasks.Component.TopMenu.instances[t]},addInstance:function(t,e){BX.Tasks.Component.TopMenu.instances[t]=e}},methods:{construct:function(){this.callConstruct(BX.Tasks.Component);BX.Tasks.Component.TopMenu.addInstance(this.sys.code,this)},bindEvents:function(){var t=this;try{var e=this.option("use_ajax_filter")?this.scope().getElementsByClassName("tasks_role_link"):{};if(e.length){for(var n=0;n<e.length;n++){BX.bind(e[n],"click",function(t){BX.PreventDefault(t);var e=this.dataset.id=="view_all"?"":this.dataset.id;var n=this.dataset.url;BX.onCustomEvent("Tasks.TopMenu:onItem",[e,n]);var s=this.parentElement.getElementsByClassName("tasks_role_link");if(s.length){for(var a=0;a<s.length;a++){BX.removeClass(s[a],"main-buttons-item-active")}}BX.addClass(this,"main-buttons-item-active")})}}}catch(t){}BX.addCustomEvent("BX.Main.Filter:apply",function(t,e,n,s,a){var o=n.getFilterFieldsValues();var i=o.ROLEID;try{var r=BX.Tasks.Component.TopMenu.getInstance("topmenu").scope();var l=r.querySelectorAll(".tasks_role_link");for(var c=0;c<l.length;c++){BX.removeClass(l[c],"main-buttons-item-active")}if(!i){i="view_all"}BX.addClass(BX("tasks_panel_menu_"+i),"main-buttons-item-active");var u=BX.Tasks.Component.TasksToolbar.getInstance();u.getToolbarData(i,function(){u.render()})}catch(t){}})},spotLightInit:function(){var t=this;var e=BX("tasks_panel_menu_more_button");var n=BX("tasks_panel_menu_view_effective");if(n){var s=new BX.SpotLight({id:"tasks_sl_effective",targetElement:n,content:t.option("text_sl_effective"),targetVertex:"middle-center",autoSave:true});s.show()}}}})}).call(this);