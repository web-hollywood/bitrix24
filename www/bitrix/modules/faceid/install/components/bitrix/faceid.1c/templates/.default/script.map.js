{"version":3,"file":"script.min.js","sources":["script.js"],"names":["BXFaceIdStart","settings","deviceId","BX","localStorage","get","video","document","getElementById","canvas","startbutton","streaming","sizes","cameraRatio","screenRatio","window","screen","width","height","cameraSmallWidth","cameraSmallHeight","snapshotWidth","snapshotHeight","cameraWidth","cameraHeight","buildCameraList","navigator","mediaDevices","enumerateDevices","then","devices","cont","checkedClassName","forEach","device","kind","set","classes","label","replace","length","message","domNode","create","text","attrs","class","data-camera-id","appendChild","bind","hasClass","this","i","els","findChildren","removeClass","addClass","getAttribute","initStream","toggle","startup","catch","err","console","log","name","startupFailed","addEventListener","ev","videoWidth","videoHeight","setAttribute","hide","show","parentNode","takepicture","getMedia","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","exact","audio","stream","mozSrcObject","vendorURL","URL","webkitURL","src","createObjectURL","play","remove","msg","toString","indexOf","innerHTML","snapshotSrc","context","getContext","drawImage","toDataURL","tmpImg","Image","onload","handleNewVisitorFace","imageData","toggleProgressButton","ajax","url","AJAX_IDENTIFY_URL","method","data","action","image","auth","OAUTH_TOKEN","dataType","processData","start","onsuccess","json","ok","errorMessage","response","delayClose","res","JSON","parse","error","showAjaxError","color","contragents","overlayDetection","x","FACE_X","y","FACE_Y","FACE_WIDTH","FACE_HEIGHT","visualizeDetection","setTimeout","sendResponseTo1C","onfailure","ctx","xywh","radius","save","strokeStyle","lineWidth","sx","sy","ex","ey","r","r2d","Math","PI","beginPath","moveTo","lineTo","arc","closePath","stroke","restore","findChild","innerText"],"mappings":"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"}