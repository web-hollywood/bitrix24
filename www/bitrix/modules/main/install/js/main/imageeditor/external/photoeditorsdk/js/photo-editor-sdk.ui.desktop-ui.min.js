(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r(require("photoeditorsdk/js/PhotoEditorSDK"),require("react"),require("react-dom"));else if(typeof define==="function"&&define.amd)define(["photoeditorsdk","react","react-dom"],r);else if(typeof exports==="object")exports["PhotoEditorDesktopUI"]=r(require("photoeditorsdk/js/PhotoEditorSDK"),require("react"),require("react-dom"));else t["PhotoEditorDesktopUI"]=r(t["PhotoEditorSDK"],t["React"],t["ReactDOM"])})(typeof self!=="undefined"?self:this,function(e,t,r){return function(e){var t={};function r(n){if(t[n]){return t[n].exports}var i=t[n]={i:n,l:false,exports:{}};e[n].call(i.exports,i,i.exports,r);i.l=true;return i.exports}r.m=e;r.c=t;r.d=function(e,t,n){if(!r.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:n})}};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s=133)}([function(e,t,r){e.exports={default:r(135),__esModule:true}},function(e,t,r){e.exports={default:r(145),__esModule:true}},function(e,t,r){e.exports={default:r(137),__esModule:true}},function(e,t,r){e.exports={default:r(140),__esModule:true}},function(e,t,r){"use strict";(function(e){r.d(t,"j",function(){return D});r.d(t,"v",function(){return M});r.d(t,"q",function(){return I});r.d(t,"e",function(){return T});r.d(t,"c",function(){return E});r.d(t,"a",function(){return S});r.d(t,"o",function(){return P});r.d(t,"i",function(){return R});r.d(t,"p",function(){return A});r.d(t,"y",function(){return N});r.d(t,"f",function(){return j});r.d(t,"n",function(){return F});r.d(t,"w",function(){return C});var n=r(7);var i=r.n(n);var a=r(32);var o=r.n(a);var s=r(147);var l=r.n(s);var u=r(42);var c=r.n(u);var f=r(89);var p=r(153);var v=r.n(p);var h=r(90);var d=r(169);var m=r(204);var _=r(210);var g=r(15);var y=r(46);var b=r(22);var k=r(104);r.d(t,"u",function(){return d["a"]});r.d(t,"l",function(){return o.a});r.d(t,"b",function(){return h["a"]});r.d(t,"d",function(){return m["a"]});r.d(t,"s",function(){return _["a"]});r.d(t,"m",function(){return l.a});r.d(t,"z",function(){return g["b"]});r.d(t,"x",function(){return g["a"]});r.d(t,"h",function(){return y["a"]});if(r.o(p,"withTheme"))r.d(t,"A",function(){return p["withTheme"]});if(r.o(p,"ThemeProvider"))r.d(t,"t",function(){return p["ThemeProvider"]});r.d(t,"g",function(){return b["a"]});r.d(t,"k",function(){return c.a});r.d(t,"r",function(){return k["a"]});var w="production";var C=new v.a(e.adonisOptions||{injection:w==="production"||w==="test"?false:"pre",theme:f["a"],minified:w==="production",cssSelectorPrefix:".pesdk-desktop-editor ",classNamePrefix:"pesdk-",hashedStyles:w==="production"});var S=i.a.Base64;var E=i.a.Color;var x=i.a.Math.ColorMatrix;var T=i.a.EventEmitter;var O=i.a.EXIF;var R=i.a.OptionType;var D=i.a.Promise;var I=i.a.Utils;var P=i.a.RenderType;var j=i.a.ImageFormat;var A=i.a;var B=i.a.UniformType;var M=i.a.Math.Vector2;var F=i.a.Math.Rectangle;var N=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):r(105)}).call(t,r(26))},function(e,t,r){e.exports=r(134).default},function(e,t,r){e.exports={default:r(216),__esModule:true}},function(t,r){t.exports=e},function(e,t,r){e.exports={default:r(154),__esModule:true}},function(e,t){var r=e.exports={version:"2.5.3"};if(typeof __e=="number")__e=r},function(e,t,r){e.exports={default:r(176),__esModule:true}},function(e,t,r){var n=r(64)("wks");var i=r(41);var a=r(13).Symbol;var o=typeof a=="function";var s=e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))};s.store=n},function(e,t,r){var n=r(13);var i=r(9);var a=r(24);var o=r(19);var s="prototype";var l=function(e,t,r){var u=e&l.F;var c=e&l.G;var f=e&l.S;var p=e&l.P;var v=e&l.B;var h=e&l.W;var d=c?i:i[t]||(i[t]={});var m=d[s];var _=c?n:f?n[t]:(n[t]||{})[s];var g,y,b;if(c)r=t;for(g in r){y=!u&&_&&_[g]!==undefined;if(y&&g in d)continue;b=y?_[g]:r[g];d[g]=c&&typeof _[g]!="function"?r[g]:v&&y?a(b,n):h&&_[g]==b?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};t[s]=e[s];return t}(b):p&&typeof b=="function"?a(Function.call,b):b;if(p){(d.virtual||(d.virtual={}))[g]=b;if(e&l.R&&m&&!m[g])o(m,g,b)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;e.exports=l},function(e,t){var r=e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=r},function(e,t,r){var n=r(17);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){"use strict";(function(e){r.d(t,"b",function(){return i});r.d(t,"a",function(){return a});var n=typeof window==="undefined"?e:window;var i=n.requestAnimationFrame;var a=n.cancelAnimationFrame;var o=0;var s=["ms","moz","webkit","o"];for(var l=0;l<s.length&&!i;++l){i=n[s[l]+"RequestAnimationFrame"];a=n[s[l]+"CancelAnimationFrame"]||n[s[l]+"CancelRequestAnimationFrame"]}if(i){i=i.bind(n)}if(a){a=a.bind(n)}if(!i){i=function e(t,r){var n=(new Date).getTime();var i=Math.max(0,16-(n-o));var a=setTimeout(function(){t(n+i)},i);o=n+i;return a}}if(!a){a=function e(t){clearTimeout(t)}}}).call(t,r(26))},function(e,t,r){var n=r(14);var i=r(84);var a=r(57);var o=Object.defineProperty;t.f=r(18)?Object.defineProperty:function e(t,r,s){n(t);r=a(r,true);n(s);if(i)try{return o(t,r,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");if("value"in s)t[r]=s.value;return t}},function(e,t){e.exports=function(e){return typeof e==="object"?e!==null:typeof e==="function"}},function(e,t,r){e.exports=!r(25)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(e,t,r){var n=r(16);var i=r(28);e.exports=r(18)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){e[t]=r;return e}},function(e,t,r){var n=r(85);var i=r(59);e.exports=function(e){return n(i(e))}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){"use strict";var n=r(102);var i=r.n(n);var a=r(103);var o=r.n(a);var s=r(8);var l=r.n(s);var u=function(){function e(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var s=o()(e),l;!(n=(l=s.next()).done);n=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&s["return"])s["return"]()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(i()(Object(t))){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();t["a"]={load:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{cors:true,value:"anonymous"};var i=function e(){if(t.substr(0,5)==="data:"||"boolean"!=="undefined"){return l.a.resolve([t,t])}};return i().then(function(e){var t=u(e,2),i=t[0],a=t[1];return r._createAndLoadImage(i,a,n)})},_createAndLoadImage:function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{cors:true,value:"anonymous"};if(true){return new l.a(function(e,t){var i=new window.Image;i.addEventListener("load",function(){e(i)});i.addEventListener("error",function(){t(new Error("Failed to load image at "+r))});if(n.cors){i.crossOrigin=n.value}i.src=r})}},loadXHR:function e(t,r){return new l.a(function(e,n){var i=void 0;if(window.XDomainRequest){i=new window.XDomainRequest;if(r)i.overrideMimeType(r);i.onload=function(){e(i)};i.onerror=function(e){n(e)}}else if(window.XMLHttpRequest){i=new window.XMLHttpRequest;if(r)i.overrideMimeType(r);i.onreadystatechange=function(t){if(i.readyState===4){if(i.status===200){e(i)}else{n(new Error("HTTP Status "+i.status))}}}}i.open("GET",t,true);i.send()})}}},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var d=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var y=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onDragStart","_onDragMove","_onDragEnd");return a}h(t,[{key:"componentDidMount",value:function e(){d(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);if(this.refs.element){this._element=this.refs.element}}},{key:"_onDragStart",value:function e(t){if(this.props.disabled)return;t.preventDefault();t.stopPropagation();this._initialMousePosition=v["u"].getEventPosition(t);document.addEventListener("mousemove",this._onDragMove);document.addEventListener("touchmove",this._onDragMove);document.addEventListener("mouseup",this._onDragEnd);document.addEventListener("touchend",this._onDragEnd);var r=this._element.getBoundingClientRect();var n=new v["v"](r.left,r.top);this._lastMousePosition=this._initialMousePosition.clone();var i=this._initialMousePosition.clone().subtract(n);this.props.onStart&&this.props.onStart(i,this._initialMousePosition.clone(),t)}},{key:"_onDragMove",value:function e(t){t.preventDefault();t.stopPropagation();var r=v["u"].getEventPosition(t);if(!r)return;var n=r.clone().subtract(this._initialMousePosition);var i=r.clone().subtract(this._lastMousePosition);this._lastMousePosition=r.clone();this.props.onDrag&&this.props.onDrag(n,r,i,t)}},{key:"_onDragEnd",value:function e(t){t.preventDefault();t.stopPropagation();t.stopImmediatePropagation();this._onDragMove(t);document.removeEventListener("mousemove",this._onDragMove);document.removeEventListener("touchmove",this._onDragMove);document.removeEventListener("mouseup",this._onDragEnd);document.removeEventListener("touchend",this._onDragEnd);this.props.onStop&&this.props.onStop(t)}},{key:"render",value:function e(){var t=this;if(!this.props.children||this.props.children instanceof Array){throw new Error("DraggableComponent expects exactly one child.")}var r={onMouseDown:this._onDragStart,onTouchStart:this._onDragStart,onClick:function e(r){if(t.props.disabled){var e=t.props.children.props.onClick;e&&e(r);return}r.stopPropagation()}};if(typeof this.props.children.type==="string"){r.ref="element"}else{var n=this.props.children.props.innerRef;r.innerRef=function(e){t._element=e;n&&n(e)}}return v["l"].cloneElement(this.props.children,r)}}]);return t}(v["b"]);y.contextTypes=v["b"].contextTypes;y.propTypes={onStart:v["k"].func,onDrag:v["k"].func,onStop:v["k"].func,disabled:v["k"].bool};t["a"]=y},function(e,t,r){var n=r(39);e.exports=function(e,t,r){n(e);if(t===undefined)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")r=window}e.exports=r},function(e,t){e.exports={}},function(e,t){e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(86);var i=r(65);e.exports=Object.keys||function e(t){return n(t,i)}},function(e,t,r){var n=r(59);e.exports=function(e){return Object(n(e))}},function(e,r){e.exports=t},function(e,t,r){"use strict";var n=r(155)(true);r(92)(String,"String",function(e){this._t=String(e);this._i=0},function(){var e=this._t;var t=this._i;var r;if(t>=e.length)return{value:undefined,done:true};r=n(e,t);this._i+=r.length;return{value:r,done:false}})},function(e,t,r){e.exports={default:r(170),__esModule:true}},function(e,t,r){e.exports={default:r(179),__esModule:true}},function(e,t,r){e.exports={default:r(180),__esModule:true}},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var m=function(e){d(t,e);function t(e,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;v(this,t);var o=h(this,(t.__proto__||c()(t)).call(this));o.id=f["q"].getUUID();o.type=e;o.title=r;o.text=n;o.overlay=i;o.closeOnOverlayClick=a;o.visible=true;o.data=null;return o}p(t,[{key:"setData",value:function e(t){this.data=t;this.emit("update")}},{key:"close",value:function e(){this.visible=false;this.emit("close")}},{key:"remove",value:function e(){this.emit("remove")}}]);return t}(f["e"]);var _=function(e){d(t,e);function t(){v(this,t);var e=h(this,(t.__proto__||c()(t)).call(this));e._modals=[];return e}p(t,[{key:"displayLoading",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=new m("loading",t,null,r);this.addModal(n);return n}},{key:"displayProgress",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=new m("progress",null,t);n.setData({progress:r});this.addModal(n);return n}},{key:"displayInput",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var i=new m("input",t,null,n,true);i.setData({text:r});this.addModal(i);return i}},{key:"displayWarning",value:function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["OK"];var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var a=new m("warning",t,r,i);a.setData({buttons:n});this.addModal(a);return a}},{key:"displayError",value:function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var i=new m("error",t,r,n);this.addModal(i);return i}},{key:"addModal",value:function e(t){var r=this;this._modals.push(t);t.on("close",function(){r.emit("update")});t.on("remove",function(){r.removeModal(t)});t.on("update",function(){r.emit("update")});this.emit("update")}},{key:"removeModal",value:function e(t){var r=this._modals.indexOf(t);this._modals.splice(r,1);this.emit("update")}},{key:"getModals",value:function e(){return this._modals}}],[{key:"instance",get:function e(){if(!this._instance){this._instance=new t}return this._instance}}]);return t}(f["e"]);t["a"]=_},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var d=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function m(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._buttons=[];a.state={visible:false};return a}h(t,[{key:"componentDidMount",value:function e(){var r,n=this;for(var i=arguments.length,a=Array(i),o=0;o<i;o++){a[o]=arguments[o]}(r=d(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this)).call.apply(r,[this].concat(a));var s=this.props.modal;s.on("close",function(){n.setState({visible:false});setTimeout(function(){s.remove()},n.context.theme.transitionDuration*1e3)});Object(v["z"])(function(){n.setState({visible:true})})}},{key:"_onButtonClick",value:function e(t){}},{key:"_renderButtons",value:function e(){var t=this;return this._buttons.map(function(e,r){return v["l"].createElement(x,{key:r,onClick:t._onButtonClick.bind(t,r)},e)})}},{key:"render",value:function e(){var t=this.props.modal;var r=m({},t.type,true);var n=this._buttons.length?v["l"].createElement(E,null,this._renderButtons()):null;var i=this._renderContent&&this._renderContent();if(i){return v["l"].createElement(k,{visible:this.state.visible,large:this.state.large},i,v["l"].createElement(D,{onClick:this._onClickOverlay,visible:!this.state.visible}))}return v["l"].createElement(k,{visible:this.state.visible},v["l"].createElement(w,r,v["l"].createElement(C,null,v["l"].createElement(T,{src:this._getAssetPath("shared/modals/icon.png",true)})),v["l"].createElement(S,null,v["l"].createElement(O,null,t.title),v["l"].createElement(R,null,t.text))),n,v["l"].createElement(D,{onClick:this._onClickOverlay,visible:!this.state.visible}))}}]);return t}(v["b"]);b.propTypes={modal:v["k"].object};b.contextTypes=v["b"].contextTypes;t["a"]=b;var k=v["w"].div("1jkivgb",{visible:"7bce9v",large:"1mlpyuc"},"Modal");var w=v["w"].div("1udylfs",{error:"120drhm",warning:"120drhm",loading:"120drhm"},"Top");var C=v["w"].div("z6arf2","IconContainer");var S=v["w"].div("245la5","TextContainer");var E=v["w"].div("1943606","Buttons");var x=v["w"].div("1kylmay","Button");var T=v["w"].img("jsue2c","Icon");var O=v["w"].div("1fx19is","Title");var R=v["w"].div("1id6172","Text");var D=v["w"].div("mv80g2",{visible:"2jlos"},"BlockingOverlay")},function(e,t){e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var r=0;var n=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++r+n).toString(36))}},function(e,t,r){if(false){var n=typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103;var i=function(e){return typeof e==="object"&&e!==null&&e.$$typeof===n};var a=true;e.exports=require("./factoryWithTypeCheckers")(i,a)}else{e.exports=r(148)()}},function(e,t){e.exports=true},function(e,t,r){var n=r(16).f;var i=r(21);var a=r(11)("toStringTag");e.exports=function(e,t,r){if(e&&!i(e=r?e:e.prototype,a))n(e,a,{configurable:true,value:t})}},function(e,t,r){r(157);var n=r(13);var i=r(19);var a=r(27);var o=r(11)("toStringTag");var s=("CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,"+"DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,"+"MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,"+"SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,"+"TextTrackList,TouchList").split(",");for(var l=0;l<s.length;l++){var u=s[l];var c=n[u];var f=c&&c.prototype;if(f&&!f[o])i(f,o,u);a[u]=a.Array}},function(e,t,r){"use strict";(function(e){var n=r(34);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(173);var l=r.n(s);var u=r(175);var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function f(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++){r[t]=e[t]}return r}else{return i()(e)}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var v=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}];var h=function e(){return console&&console.group&&console.groupCollapsed&&console.groupEnd};var d=function t(){return(!e||e&&e.browser)&&typeof navigator!=="undefined"&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)};var m=function e(t,r){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+t+"; color: "+r+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]};var _=function(){function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"warn";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:v;p(this,e);this._levels=[].concat(f(n));this._maxLevel=this.getLevelIndexByName(r);this._consoleFuncs={trace:function e(){if(h()){var t;(t=console).groupCollapsed.apply(t,arguments);console.trace();console.groupEnd()}else{var r;(r=console).trace.apply(r,arguments)}}};this._levels.forEach(function(e){var r=e.name;t[r]=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++){i[a-1]=arguments[a]}t._log.apply(t,[r,e].concat(i))}})}c(e,[{key:"getLevelIndexByName",value:function e(t){return u["a"].Array.findIndex(this._levels,function(e){return e.name===t})}},{key:"getLevelObjectByName",value:function e(t){return u["a"].Array.find(this._levels,function(e){return e.name===t})}},{key:"canLog",value:function e(t){var r=this.getLevelIndexByName(t);if(r<0){return false}return r>=this._maxLevel}},{key:"setLevel",value:function e(t){var r=this.getLevelIndexByName(t);if(r<0){return}this._maxLevel=r}},{key:"_log",value:function e(t,r){var n=this.getLevelObjectByName(t);if(!n||!this.canLog(t)){return}var i=n.name,a=n.type,o=n.background,s=n.color;for(var c=arguments.length,p=Array(c>2?c-2:0),v=2;v<c;v++){p[v-2]=arguments[v]}var _=p.filter(function(e){return e!==undefined}).map(function(e){if(e.toObject){return JSON.parse(l()(e.toObject()))}return e});var g=this._consoleFuncs[a]||console[a]||console.log;var y=_.length;var b=m(o,s);if(!d()){var k=_.length;if(k<=0){g("PhotoEditorSDK | "+r+" ");return}if(k===1&&typeof _[0]==="string"){g("PhotoEditorSDK | "+r+" | "+_[0]);return}g.apply(undefined,["PhotoEditorSDK | "+r+" | "].concat(f(_)));return}if(y<=0){g.apply(undefined,["%c  %c PhotoEditorSDK %c  %c "+r+" %c %c  "].concat(f(b)));return}if(y===1&&typeof _[0]==="string"){g.apply(undefined,["%c  %c PhotoEditorSDK %c  %c "+r+" %c  "+_[0]+"  %c  "].concat(f(b)));return}if(h()){var w;(w=console).groupCollapsed.apply(w,["%c  %c PhotoEditorSDK %c  %c "+r+" %c"].concat(f(u["a"].Array.init(b))));g.apply(undefined,f(_));console.groupEnd()}else{g.apply(undefined,["%c  %c PhotoEditorSDK %c  %c "+r+" %c"].concat(f(u["a"].Array.init(b)),f(_)))}}},{key:"image",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=arguments[1];var e=new window.Image;var n=function r(){var n=e.width;var i=e.height;t&&console.log(t);console.log("%c+","\n        font-size: 1px;\n        padding: 0px "+Math.floor(n/2)+"px;\n        line-height: "+i+"px;\n        background: url("+e.src+");\n        color: transparent;\n        background-repeat: no-repeat;\n        background-size: "+n+"px "+i+"px;")};e.onload=n;if(r instanceof window.HTMLCanvasElement){e.src=r.toDataURL()}else if(r instanceof window.Image){e=r;n()}else if(typeof r==="string"){e.src=r}else{this.log(t,r)}return e}},{key:"texture",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=arguments[1];if(!r){this.log(t,"texture: null or undefined");return}var n=r.getBaseTexture();var i=n.getRenderers();var a=u["a"].Array.find(i,function(e){return e&&e.constructor.type==="WebGL"});var o=n.getFrame(),s=o.width,l=o.height;if(a){var c=a.getContext();var f=n.getGLTextureForRenderer(a);this.logGlTexture(c,f,s,l,t)}else{g.image(t,n.getSource())}}},{key:"logGlTexture",value:function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:150;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:150;var a=arguments[4];t.bindTexture(t.TEXTURE_2D,r);var o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var s=new Uint8Array(n*i*4);t.readPixels(0,0,n,i,t.RGBA,t.UNSIGNED_BYTE,s);t.deleteFramebuffer(o);var l=document.createElement("canvas");l.width=n;l.height=i;var u=l.getContext("2d");var c=u.createImageData(n,i);c.data.set(s);u.putImageData(c,0,0);return g.image(a,l)}}]);return e}();var g=new _("warn");t["a"]=g}).call(t,r(100))},function(e,t,r){e.exports={default:r(188),__esModule:true}},function(e,t,r){"use strict";(function(e){var n=r(0);var i=r.n(n);var a=r(193);var o=r(197);var s=r.n(o);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=5e3;var f=typeof window!=="undefined"?window:e;var p=function(){function e(t){u(this,e);this._url=t;this._parsedUrl=s.a.parse(this._url,true)}l(e,[{key:"_isJSONPRequest",value:function e(){var t=this._parsedUrl.query;for(var r in t){var n=t[r];if(n==="?"){return true}}return false}},{key:"load",value:function e(){if(this._isJSONPRequest()){return this._loadJSONP()}else{return this._loadJSON()}}},{key:"_loadJSON",value:function e(){var t=this;return new a["a"](function(e,r){var n=void 0;if(f.XDomainRequest){n=new f.XDomainRequest;n.onload=function(){var t=JSON.parse(n.responseText);e(t)};n.onerror=function(e){r(e)};n.open("GET",t._url,true);n.send()}else if(f.XMLHttpRequest){n=new XMLHttpRequest;n.onreadystatechange=function(t){if(n.readyState===4){if(n.status===200){var i=JSON.parse(n.responseText);e(i)}else{r(new Error("HTTP Status "+n.status))}}};n.open("GET",t._url,true);n.send()}})}},{key:"_loadJSONP",value:function e(){var t=this;var r=false;var n=false;var i="pesdk"+Math.round(Math.random()*99999999999999);return new a["a"](function(e,a){var o=t._createJSONPNode(i);f[i]=function(i){t._removeJSONPNode(o);if(!r){n=true;e(i)}};f.setTimeout(function(){if(!n){t._removeJSONPNode(o);r=true;a(new Error("Timeout of 5 seconds exceeded."))}},c)})}},{key:"_createJSONPNode",value:function e(t){var r=this._buildJSONPUrl(t);var n=document.querySelector("head");var i=document.createElement("script");i.src=r;n.appendChild(i);return i}},{key:"_removeJSONPNode",value:function e(t){t.parentNode.removeChild(t)}},{key:"_buildJSONPUrl",value:function e(t){var r=this._parsedUrl.query;var n=null;for(var i in r){if(r[i]==="?"){n=i;break}}delete this._parsedUrl.search;r[n]=t;return s.a.format(this._parsedUrl)}}]);return e}();t["a"]=p}).call(t,r(26))},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(32);var p=r.n(f);var v=r(42);var h=r.n(v);var d=r(15);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._timeout=null;a.state={enter:false,appear:false,leave:false};if(a.props.active){a.state.enter=true;a.state.appear=true}return a}m(t,[{key:"componentWillReceiveProps",value:function e(t){if(this.props.active&&!t.active){this._leave()}else if(!this.props.active&&t.active){this._enter();this._appear()}}},{key:"_cancelTimeout",value:function e(){if(this._timeout){window.clearTimeout(this._timeout);this._timeout=null}}},{key:"_enter",value:function e(){this.setState({enter:true})}},{key:"_leave",value:function e(){var t=this;if(this._timeout)this._cancelTimeout();this.setState({appear:false,leave:true});this._timeout=window.setTimeout(function(){t._cancelTimeout();t.setState({enter:false})},this.props.leaveDuration)}},{key:"_appear",value:function e(){var t=this;if(this._timeout)this._cancelTimeout();Object(d["b"])(function(){t.setState({appear:true,leave:false});t._timeout=window.setTimeout(function(){t._cancelTimeout()},t.props.appearDuration)})}},{key:"_buildStateProps",value:function e(){var t=this.props,r=t.enterProp,n=t.appearProp,i=t.leaveProp;var a={};if(r)a[r]=this.state.enter;if(n)a[n]=this.state.appear;if(i)a[i]=this.state.leave;return a}},{key:"render",value:function e(){if(!this.props.children){return null}var t=this._buildStateProps();return p.a.cloneElement(this.props.children,t)}}]);return t}(f["Component"]);b.propTypes={active:h.a.bool,enterProp:h.a.string,enterDuration:h.a.number,appearProp:h.a.string,appearDuration:h.a.number,leaveProp:h.a.string,leaveDuration:h.a.number};b.defaultProps={active:true,enterProp:"rendered",enterDuration:300,appearProp:"visible",appearDuration:300,leaveDuration:300};t["a"]=b},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o=r(104);var s=r(48);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(t,r){u(this,e);this._ui=t;this._options=r;this._categoriesById={};this._categories=[];this._stickersById={};this._addCategories(o["a"].DEFAULTS.STICKER_CATEGORIES);var n=this._options,i=n.categories,a=n.replaceCategories;if(this._options.categories){this._addCategories(i,a)}else{this._updateCategoriesMap();this._updateAllCategory()}}l(e,[{key:"loadExternal",value:function e(t){var r=this;var n=new s["a"](t);return n.load().then(function(e){r._addCategories(e.categories,r._options.replaceCategories)})}},{key:"_addCategories",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(r){this._categories=t.slice(0)}else{this._categories=a["u"].mergeCategories(this._categories,t,"stickers")}this._updateCategoriesMap();this._updateAllCategory()}},{key:"_updateCategoriesMap",value:function e(){var t=this;this._categoriesById={};this._categories.forEach(function(e){t._categoriesById[e.identifier]=e});this._categories.forEach(function(e){e.stickers.forEach(function(e){t._stickersById[e.identifier]=e})});if(typeof this._options.availableStickers!=="undefined"&&this._options.availableStickers!==null){this._categories.forEach(function(e){e.stickers=e.stickers.filter(function(e){return t._options.availableStickers.indexOf(e.identifier)!==-1})});this._categories=this._categories.filter(function(e){return e.stickers.length>0})}this._updateAllCategory()}},{key:"_updateAllCategory",value:function e(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(function(e){return e.stickers}).reduce(function(e,t){return e.concat(t)},[])};this._categoriesById.all=this._allCategory}},{key:"getStickersForCategory",value:function e(t){if(!this._categoriesById[t]){throw new Error("Unknown sticker category '"+t+"'")}return this._categoriesById[t].stickers}},{key:"getStickerByIdentifier",value:function e(t){return this._stickersById[t]}},{key:"getCategories",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t){return[this._allCategory].concat(this._categories)}return this._categories}},{key:"getCategory",value:function e(t){return this._categoriesById[t]}}],[{key:"getURLForSticker",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"base";var n=t.images;var i=r==="base"?n.mediaBase||n.mediaThumb:n.mediaThumb;var o=i.uris||[i.uri];if(typeof a["u"].Browser!=="undefined"&&!a["u"].Browser.getIEVersion()){var s=o.filter(function(e){return/\.svg$/i.test(e)});return s.length?s[0]:o[0]}else{var l=o.filter(function(e){return!/\.svg$/i.test(e)});return l.length?l[0]:o[0]}}}]);return e}();t["a"]=c},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(4);var l=r(237);var u=r(46);var c=r(112);var f=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function e(t,r){v(this,e);this._ui=t;this._options=r;this._fonts=[];this._variationsByIdentifier={};this._fontsByFontFamily={};this._initFonts()}p(e,[{key:"_initFonts",value:function e(){var t=this;var r=this._options,n=r.fonts,i=r.replaceFonts,a=r.availableVariations;var o=s["d"].DEFAULTS.FONTS;if(i){o=n}else{o=o.concat(n||[])}var f=void 0;o=o.map(function(e){var r=e.fontFamily;var n=e.variations;if(a){n=n.filter(function(e){return a.indexOf(e.identifier)!==-1})}if(n.length===0)return null;var i=new l["a"]({fontFamily:r});n=n.map(function(e){var n=new c["a"](e);n.setFontFamily(r);n.setFont(i);if(e.default&&!f){f=n}if(n.getTextMetrics()==null){u["a"].warn("Missing font metrics for "+n.getIdentifier()+". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.")}t._variationsByIdentifier[n.getIdentifier()]=n;return n});i.setVariations(n);t._fontsByFontFamily[r]=i;return i}).filter(function(e){return e});if(!f){f=o[0].getVariations()[0]}this._defaultVariation=f;this._fonts=o}},{key:"getFonts",value:function e(){return this._fonts}},{key:"getFontByFontFamily",value:function e(t){return this._fontsByFontFamily[t]}},{key:"getVariationByIdentifier",value:function e(t){return this._variationsByIdentifier[t]}},{key:"getVariationsByIdentifier",value:function e(){return f({},this._variationsByIdentifier)}},{key:"getDefaultVariation",value:function e(){return this._defaultVariation}}]);return e}();t["a"]=h},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var d=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var y=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onSharedStateUpdate");return a}h(t,[{key:"componentDidMount",value:function e(){d(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);if(this.context.sharedState){this.context.sharedState.on("update",this._onSharedStateUpdate)}}},{key:"componentWillUnmount",value:function e(){d(t.prototype.__proto__||p()(t.prototype),"componentWillUnmount",this).call(this);if(this.context.sharedState){this.context.sharedState.off("update",this._onSharedStateUpdate)}}},{key:"_onSharedStateUpdate",value:function e(t,r){if(this.shouldSharedComponentUpdate(t,r)){this.sharedComponentWillUpdate(t,r);this.forceUpdate();this.sharedStateDidChange(t,r)}else{this.sharedStateDidChange(t,r)}}},{key:"sharedComponentWillUpdate",value:function e(t,r){}},{key:"shouldSharedComponentUpdate",value:function e(t,r){return true}},{key:"sharedStateDidChange",value:function e(t,r){}},{key:"sharedStateWillChange",value:function e(t,r){}},{key:"setSharedState",value:function e(t,r){this.context.sharedState.set(t,r)}},{key:"getSharedState",value:function e(t){return this.context.sharedState.get(t)}},{key:"forceSharedUpdate",value:function e(){this.context.sharedState.broadcastUpdate()}},{key:"sharedState",get:function e(){return this.context.sharedState.state}}]);return t}(v["b"]);y.contextTypes={editor:v["k"].object,ui:v["k"].object,options:v["k"].object,mediator:v["k"].object,sharedState:v["k"].object,theme:v["k"].object,screen:v["k"].object,appComponent:v["k"].object};y.propTypes={sharedState:v["k"].any};t["a"]=y},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(80);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onKeyDown","_onInputBlur","_onInputChange");a.state={};return a}v(t,[{key:"shouldComponentUpdate",value:function e(t,r){return this.props.value!==t.value||this.props.disabled!==t.disabled}},{key:"_onInputChange",value:function e(t){this.props.onLiveChange&&this.props.onLiveChange(t)}},{key:"_onInputBlur",value:function e(t){this.props.onChange&&this.props.onChange(t)}},{key:"_onKeyDown",value:function e(t){if(t.keyCode===13||t.keyCode===27){this._input.blur()}this.props.onKeyDown&&this.props.onKeyDown()}},{key:"focus",value:function e(){this._input.focus()}},{key:"_getInputStyle",value:function e(){return{}}},{key:"render",value:function e(){var t=this;var r=this.constructor.RootElement;return f["l"].createElement(r,{value:this.props.value,onChange:this._onInputChange,onBlur:this._onInputBlur,innerRef:function e(r){t._input=r},onKeyDown:this._onKeyDown,name:this.props.name,styles:this.props.styles,className:this.props.className,style:this._getInputStyle(),disabled:this.props.disabled})}}]);return t}(f["b"]);_.contextTypes=f["b"].contextTypes;t["a"]=_;_.RootElement=Object(f["w"])(p["a"]).input("120drhm","NumericInputComponent")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(6);var l=r.n(s);var u=r(2);var c=r.n(u);var f=r(3);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(7);var m=r.n(d);var _=r(5);var g=r.n(_);var y=r(312);var b=r(313);var k=r(314);var w=r(315);var C=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var S=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var E=function e(t,r,n){if(t===null)t=Function.prototype;var i=l()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(n)}};function x(e,t,r){if(t in e){o()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function T(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function O(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function R(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)c.a?c()(e,t):e.__proto__=t}var D=d["Math"].Vector2;var I="production"==="test";var P=function(e){R(t,e);function t(){var e,r;T(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++){i[a]=arguments[a]}var o=O(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._bindAll("_onZoomDone","_onWindowResize","_onHistoryChange","_onAfterTransform");o._events=(r={},x(r,_["Constants"].EVENTS.ZOOM_DONE,o._onZoomDone),x(r,_["Constants"].EVENTS.WINDOW_RESIZE,o._onWindowResize),x(r,_["Constants"].EVENTS.HISTORY_UNDO,o._onHistoryChange),x(r,_["Constants"].EVENTS.HISTORY_REDO,o._onHistoryChange),r);o.state=d["Utils"].extend(o.state,{visible:false,canvasClickDisabled:false});return o}S(t,[{key:"componentDidMount",value:function e(){E(t.prototype.__proto__||h()(t.prototype),"componentDidMount",this).call(this);this.forceUpdate()}},{key:"_onAfterTransform",value:function e(t){var r="sprite-transform-"+t.getId();this.props.controls.addLocalHistorySnapshot(r,true)}},{key:"_onHistoryChange",value:function e(){var t=this.getSharedState("operation");if(!t)return;var r=this.getSharedState("selectedSprite");var n=t.getSprites();if(n.indexOf(r)===-1){this._selectNextSprite()}}},{key:"_onWindowResize",value:function e(){var t=this;var r=this.context.editor;r.once("rendered",function(){t.forceUpdate()})}},{key:"_onZoomDone",value:function e(){var t=this.context.editor;t.render();this.setState({visible:true})}},{key:"_onItemBlur",value:function e(){}},{key:"_onCanvasClick",value:function e(t){if(this.state.canvasClickDisabled)return;var r=this._performHitTest(_["Utils"].getEventPosition(t));if(!r){if(this.getSharedState("selectedSprite")){this._onItemBlur()}this.context.screen.switchToControls("default")}}},{key:"_onSpriteDelete",value:function e(t){var r=this.getSharedState("operation");r.removeSprite(t);t.dispose();this._selectNextSprite();this.props.controls.addLocalHistorySnapshot("sprite-deletion",false);var n=this.context.editor;n.render()}},{key:"_onSpriteTakeToFront",value:function e(t){var r=this.getSharedState("operation");r.takeSpriteToFront(t);this.props.controls.addLocalHistorySnapshot("sprite-order",false);this.forceUpdate();var n=this.context.editor;n.render()}},{key:"_onSpriteFlipHorizontally",value:function e(t,r){r.stopPropagation();t.setFlipHorizontally(!t.getFlipHorizontally());this.props.controls.addLocalHistorySnapshot("sprite-flip-horizontally",false);this.forceUpdate();var n=this.context.editor;n.render()}},{key:"_onSpriteDuplicate",value:function e(t,r){r.stopPropagation();var n=this.getSharedState("operation");var i=t.serializeOptions();delete i.id;delete i.type;if(t.hasOption("image")){i.image=t.getImage()}var a=n.getInputDimensions();i.position.add(new D(10,10).divide(a));var o=this._createSprite(i);this.setSharedState({selectedSprite:o});n.addSprite(o);this.props.controls.addLocalHistorySnapshot("sprite-creation",false);var s=this.context.editor;s.render()}},{key:"_selectNextSprite",value:function e(){var t=this.getSharedState("operation");var r=t.getSprites();var n=r[r.length-1];if(!n){this.props.controls.skipHistory=true;this.context.screen.switchToControls("default")}else{this.setSharedState({selectedSprite:n})}}},{key:"_getComponentTypeForSprite",value:function e(t){var r=d["Operations"].SpriteOperation;switch(t.constructor){case r.StickerSprite:return y["a"];case r.TextSprite:return b["a"];case r.BrushSprite:return k["a"];case r.TextDesignSprite:return w["a"]}}},{key:"_getPropsForSprite",value:function e(t){var r={};r.hideContent=true;return r}},{key:"_renderSpriteItems",value:function e(t){var r=this;var n=this.getSharedState("selectedSprite");return t.map(function(e){var t=r._getComponentTypeForSprite(e);var i=r._getPropsForSprite(e);var a=n===e;return _["React"].createElement(t,C({sprite:e,selected:a,onClick:r._onCanvasClick,onAfterChange:r._onAfterTransform.bind(r,e),onCanvasClickDisabled:r._onCanvasClickDisabled,onCanvasClickEnabled:r._onCanvasClickEnabled,onDelete:r._onSpriteDelete.bind(r,e),onTakeToFront:r._onSpriteTakeToFront.bind(r,e),onFlipHorizontally:r._onSpriteFlipHorizontally.bind(r,e),onDuplicate:r._onSpriteDuplicate.bind(r,e),snapRotation:r.props.options.snapRotation,snapRotationTolerance:r.props.options.snapRotationTolerance,canvasControls:r,key:e.getId()},i))})}},{key:"_renderOverlayControls",value:function e(){return null}},{key:"_renderControls",value:function e(){var t=this;if(!this.state.visible)return;var r=this.getSharedState("operation");var n=r.getSprites();var i=this._container&&this._getContainerStyle();return _["React"].createElement(j,{className:I?"js-spritesCanvasControls":undefined},_["React"].createElement(A,{innerRef:function e(r){t._innerContainer=r},style:i,className:I?"js-container":undefined},!this.state.canvasClickDisabled&&_["React"].createElement(B,{onClick:this._onCanvasClick}),_["React"].createElement("div",null,this._renderSpriteItems(n),this._renderOverlayControls())))}}]);return t}(_["CanvasControlsComponent"]);P.contextTypes=_["CanvasControlsComponent"].contextTypes;t["a"]=P;var j=_["adonis"].div("120drhm","CanvasControls");var A=_["adonis"].div("1anj0of","Container");var B=_["adonis"].div("o35414","ClickHandlerForInternetExplorer")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function y(e,t,r){if(t in e){o()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var C=v["Math"].Vector2;var S=void 0;var E=void 0;if(v["Operations"].SpriteOperation){S=v["Operations"].SpriteOperation.TextSprite;E=v["Operations"].SpriteOperation.TextDesignSprite}var x="production"==="test";var T=function(e){w(t,e);function t(){var e;b(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=k(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onDragStart","_onDrag","_onDragStop","_onRotateDragStart","_onRotateDrag","_onRotateDragStop","_onCornerDrag","_onCornerDragStop","_onSpriteUpdate","_onTakeToFront","_onFlipHorizontally","_onDuplicate","_onDelete");return a}g(t,[{key:"componentDidMount",value:function e(){this.props.sprite.on("update",this._onSpriteUpdate)}},{key:"componentWillUnmount",value:function e(){this.props.sprite.off("update",this._onSpriteUpdate)}},{key:"componentWillReceiveProps",value:function e(t){this.props.sprite.off("update",this._onSpriteUpdate);t.sprite.on("update",this._onSpriteUpdate)}},{key:"_onSpriteUpdate",value:function e(){this.forceUpdate()}},{key:"_onTakeToFront",value:function e(t){t.stopPropagation();this.props.onTakeToFront&&this.props.onTakeToFront(t)}},{key:"_onFlipHorizontally",value:function e(t){t.stopPropagation();this.props.onFlipHorizontally&&this.props.onFlipHorizontally(t)}},{key:"_onDelete",value:function e(t){t.stopPropagation();this.props.onDelete&&this.props.onDelete(t)}},{key:"_onDuplicate",value:function e(t){t.stopPropagation();this.props.onDuplicate&&this.props.onDuplicate(t)}},{key:"_onBeforeScale",value:function e(){}},{key:"_onScale",value:function e(t){}},{key:"_onRotateDragStart",value:function e(){this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect();this._containerOffset=this.props.canvasControls.getContainerOffset();this.props.onBeforeChange&&this.props.onBeforeChange();this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()}},{key:"_onRotateDrag",value:function e(t,r){var n=this.context.editor;var i=this.props.sprite;var a=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y);var o=a.clone();var s=r.clone().subtract(this._containerOffset).subtract(o);var l=Math.atan2(s.y,s.x)-Math.PI/2;var u=this.props,c=u.snapRotation,f=u.snapRotationTolerance;var p=Math.round(l*180/Math.PI);var v=Math.round(p/c)*c;var h=p-v;if(Math.abs(h)<f){l=v*Math.PI/180}i.setRotation(l);n.render();this.forceUpdate()}},{key:"_onRotateDragStop",value:function e(){this.props.onAfterChange&&this.props.onAfterChange();this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()}},{key:"_onCornerDragStart",value:function e(t,r,n,i){var a=this.context.editor;var o=this.props.sprite;var s=o.getDimensions(a.getSDK(),a.getOutputDimensions()),l=s.x;this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect();this._containerOffset=this.props.canvasControls.getContainerOffset();var u=o.getPivot();var c=o.getAnchor();var f=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y);var p=o.getDimensions(a.getSDK(),a.getOutputDimensions());var v=new C(p.width,p.height);var h=f.clone().subtract(v.clone().multiply(c)).add(v.clone().multiply(u)).round();var d=i.clone().subtract(this._containerOffset).subtract(h);this._initialScaleSettings={width:l,mouseDistanceFromPivot:d};this._onBeforeScale();this.props.onBeforeChange&&this.props.onBeforeChange();this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()}},{key:"_onCornerDrag",value:function e(t){var r=this.context.editor;var n=this.props.sprite;var i=n.getRotation();var a=this._initialScaleSettings,o=a.width,s=a.mouseDistanceFromPivot;var l=s.clone().add(t);var u=Math.cos(i);var c=Math.sin(i);var f=Math.max(Math.abs((l.x*u+l.y*c)*2),this.constructor.MIN_WIDTH);var p=f/o;r.render();this._onScale(p)}},{key:"_onCornerDragStop",value:function e(){this.props.onAfterChange&&this.props.onAfterChange();this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()}},{key:"_isDraggingDisabled",value:function e(){var t=this.props.selected;return!t}},{key:"_onDragStart",value:function e(){var t=this.props.sprite;this._initialPosition=t.getPosition();this.props.onBeforeChange&&this.props.onBeforeChange()}},{key:"_onDrag",value:function e(t){var r=this.props.sprite;var n=this.context.editor;var i=n.getOutputDimensions();var a=this._initialPosition.clone().add(t.divide(i));this._dragEndPosition=a.clone();r.setPosition(a);n.render();this.forceUpdate()}},{key:"_onDragStop",value:function e(){if(this._dragEndPosition.clone().subtract(this._initialPosition).len()!==0){this.props.onAfterChange&&this.props.onAfterChange()}}},{key:"_getAbsoluteSpritePosition",value:function e(){var t=this.context.editor;var r=t.getOutputDimensions();return this.props.sprite.getPosition().clone().multiply(r)}},{key:"_getContainerStyle",value:function e(){return{}}},{key:"_renderKnobs",value:function e(){var t=this;var r=[];["top","bottom"].forEach(function(e){["left","right"].forEach(function(n){var i=e+"-"+n;var a=y({},i,true);r.push(d["React"].createElement(d["DraggableComponent"],{key:i,onStart:t._onCornerDragStart.bind(t,e,n),onDrag:t._onCornerDrag,onStop:t._onCornerDragStop},d["React"].createElement(B,a)))})});return r}},{key:"_getSpriteDimensions",value:function e(){var t=this.context.editor;var r=this.props.sprite;var n=t.getOutputDimensions();return r.getDimensions(t.getSDK(),n)}},{key:"_getOverlayPosition",value:function e(){var t=this.context.editor;var r=this.props.sprite;var n=t.getOutputDimensions();var i=this._getSpriteDimensions();var a=r.getPosition().clone().multiply(n);var o=r.getRotation();var s=Math.sin(o);var l=Math.cos(o);var u=new C(Math.abs(i.x*l)+Math.abs(i.y*s),Math.abs(i.x*s)+Math.abs(i.y*l));return new C(a.x,a.y-u.y/2-70).clamp(new C(80,20),n.clone().subtract(80,70))}},{key:"_renderOverlayControls",value:function e(){if(!this.props.selected)return;return d["React"].createElement(d["CanvasOverlayControlsComponent"],{takeToFront:true,flipHorizontally:!(this.props.sprite instanceof S)&&!(this.props.sprite instanceof E),duplicate:!(this.props.sprite instanceof E),delete:true,position:this._getOverlayPosition(),onTakeToFront:this._onTakeToFront,onFlipHorizontally:this._onFlipHorizontally,onDuplicate:this._onDuplicate,onDelete:this._onDelete})}},{key:"_getItemControlsProps",value:function e(){return{}}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.selected,i=r.sprite;var a=this.state.editing;var o=!a;var s=[this._renderKnobs(),d["React"].createElement(P,{key:"rotateControls"},d["React"].createElement(d["DraggableComponent"],{onStart:this._onRotateDragStart,onDrag:this._onRotateDrag,onStop:this._onRotateDragStop},d["React"].createElement(A,null)))];var l=this._getItemControlsProps();var u=d["React"].createElement(D,_({style:this._getContainerStyle()},l),s);return d["React"].createElement(d["DraggableComponent"],{onStart:this._onDragStart,onStop:this._onDragStop,onDrag:this._onDrag,disabled:this._isDraggingDisabled()},d["React"].createElement(O,{onClick:this.props.onClick,"data-type":i.constructor.type,"data-selected":n,className:x?"js-spriteItem":undefined},this._renderOverlayControls(),d["React"].createElement(R,{style:this._getContainerStyle(),editing:n&&a,innerRef:function e(r){t._container=r},className:x?"js-container":undefined},d["React"].createElement(I,null,this._renderContent()),n&&!o&&s),n&&o&&u))}}]);return t}(d["BaseComponent"]);T.contextTypes=d["BaseComponent"].contextTypes;T.MIN_WIDTH=1;T.defaultProps={snapRotation:90,snapRotationTolerance:5};t["a"]=T;var O=d["adonis"].div("120drhm","OuterContainer");var R=d["adonis"].div("bkf7u8",{editing:"64zghi"},"Container");var D=d["adonis"].div("36haff","ItemControls");var I=d["adonis"].div("120drhm","Content");var P=d["adonis"].div("77tiy3","RotateControl");var j=d["adonis"].div("mznefm","Knob");var A=Object(d["adonis"])(j)("1en5760","RotateKnob");var B=Object(d["adonis"])(j)("bdmepn",{"top-left":"1dtvxe8","top-right":"1tu191k","bottom-left":"1we5ut6","bottom-right":"f2wva1"},"CornerKnob")},function(e,t,r){var n=r(17);var i=r(13).document;var a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){var n=r(17);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&typeof(r=e.toString)=="function"&&!n(i=r.call(e)))return i;if(typeof(r=e.valueOf)=="function"&&!n(i=r.call(e)))return i;if(!t&&typeof(r=e.toString)=="function"&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(40);var i=r(28);var a=r(20);var o=r(57);var s=r(21);var l=r(84);var u=Object.getOwnPropertyDescriptor;t.f=r(18)?u:function e(t,r){t=a(t);r=o(r,true);if(l)try{return u(t,r)}catch(e){}if(s(t,r))return i(!n.f.call(t,r),t[r])}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(14);var i=r(142);var a=r(65);var o=r(63)("IE_PROTO");var s=function(){};var l="prototype";var u=function(){var e=r(56)("iframe");var t=a.length;var n="<";var i=">";var o;e.style.display="none";r(87).appendChild(e);e.src="javascript:";o=e.contentWindow.document;o.open();o.write(n+"script"+i+"document.F=Object"+n+"/script"+i);o.close();u=o.F;while(t--)delete u[l][a[t]];return u()};e.exports=Object.create||function e(t,r){var a;if(t!==null){s[l]=n(t);a=new s;s[l]=null;a[o]=t}else a=u();return r===undefined?a:i(a,r)}},function(e,t,r){var n=r(62);var i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=Math.ceil;var n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(64)("keys");var i=r(41);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(13);var i="__core-js_shared__";var a=n[i]||(n[i]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(12);var i=r(9);var a=r(25);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e];var o={};o[e]=t(r);n(n.S+n.F*a(function(){r(1)}),"Object",o)}},function(e,t,r){var n=r(29);var i=r(11)("toStringTag");var a=n(function(){return arguments}())=="Arguments";var o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return e===undefined?"Undefined":e===null?"Null":typeof(r=o(t=Object(e),i))=="string"?r:a?n(t):(s=n(t))=="Object"&&typeof t.callee=="function"?"Arguments":s}},function(e,t,r){var n=r(67);var i=r(11)("iterator");var a=r(27);e.exports=r(9).getIteratorMethod=function(e){if(e!=undefined)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){var n=r(24);var i=r(163);var a=r(87);var o=r(56);var s=r(13);var l=s.process;var u=s.setImmediate;var c=s.clearImmediate;var f=s.MessageChannel;var p=s.Dispatch;var v=0;var h={};var d="onreadystatechange";var m,_,g;var y=function(){var e=+this;if(h.hasOwnProperty(e)){var t=h[e];delete h[e];t()}};var b=function(e){y.call(e.data)};if(!u||!c){u=function e(t){var r=[];var n=1;while(arguments.length>n)r.push(arguments[n++]);h[++v]=function(){i(typeof t=="function"?t:Function(t),r)};m(v);return v};c=function e(t){delete h[t]};if(r(29)(l)=="process"){m=function(e){l.nextTick(n(y,e,1))}}else if(p&&p.now){m=function(e){p.now(n(y,e,1))}}else if(f){_=new f;g=_.port2;_.port1.onmessage=b;m=n(g.postMessage,g,1)}else if(s.addEventListener&&typeof postMessage=="function"&&!s.importScripts){m=function(e){s.postMessage(e+"","*")};s.addEventListener("message",b,false)}else if(d in o("script")){m=function(e){a.appendChild(o("script"))[d]=function(){a.removeChild(this);y.call(e)}}}else{m=function(e){setTimeout(n(y,e,1),0)}}}e.exports={set:u,clear:c}},function(e,t,r){"use strict";var n=r(39);function i(e){var t,r;this.promise=new e(function(e,n){if(t!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");t=e;r=n});this.resolve=n(t);this.reject=n(r)}e.exports.f=function(e){return new i(e)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){t.f=r(11)},function(e,t,r){var n=r(13);var i=r(9);var a=r(43);var o=r(72);var s=r(16).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});if(e.charAt(0)!="_"&&!(e in t))s(t,e,{value:o.f(e)})}},function(e,t,r){"use strict";var n=r(35);var i=r.n(n);var a=r(36);var o=r.n(a);var s=r(0);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(238);var p=r(241);var v=typeof o.a==="function"&&typeof i.a==="symbol"?function(e){return typeof e}:function(e){return e&&typeof o.a==="function"&&e.constructor===o.a&&e!==o.a.prototype?"symbol":typeof e};var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;l()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var m=function(){function e(t,r){d(this,e);this._ui=t;this._fonts=r;this._loadedFonts=[]}h(e,[{key:"setFonts",value:function e(t){this._fonts=t}},{key:"needsToLoad",value:function e(){var t=this;var r=function e(r){var n=void 0;t._fonts[r].getVariations().forEach(function(e){n=n||e.getProvider()});if(!n)return"continue";return{v:true}};for(var n=0;n<this._fonts.length;n++){var i=r(n);switch(i){case"continue":continue;default:if((typeof i==="undefined"?"undefined":v(i))==="object")return i.v}}}},{key:"fontLoaded",value:function e(t){var r=t.getFontFamily();return this._loadedFonts.indexOf(r)!==-1}},{key:"setFontLoaded",value:function e(t){if(!this.fontLoaded(t)){var r=t.getFontFamily();this._loadedFonts.push(r)}}},{key:"load",value:function e(){var t=this;var r=this._fonts;var n={google:new f["a"](this._ui),file:new p["a"](this._ui)};var i=function e(){for(var t in n){var r=n[t];r.dispose()}};r.filter(function(e){return!t.fontLoaded(e)}).forEach(function(e){e.getVariations().forEach(function(e){var t=e.getProvider();if(!t)return;var r=n[t];r.add(e)})});var a=[];for(var o in n){a.push(n[o].load())}return c.a.all(a).then(function(){i();r.forEach(function(e){t.setFontLoaded(e)})}).catch(function(e){i();throw e})}}]);return e}();t["a"]=m},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(114);var h=r(116);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var m=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){_(this,t);return g(this,(t.__proto__||p()(t)).apply(this,arguments))}d(t,[{key:"_serializeSticker",value:function e(r,n){var i=r.getInputDimensions(false);var a=m(t.prototype.__proto__||p()(t.prototype),"_serializeSticker",this).call(this,r,n);if(n.getTintMode()!=="none"){a.options.tintColor=n.serializeOption("tintColor",true)}a.options.dimensions=n.getDimensions().clone().divide(i.min()).toObject();a.options.identifier=a.options.name;delete a.options.name;return a}},{key:"_serializePath",value:function e(r){var n=m(t.prototype.__proto__||p()(t.prototype),"_serializePath",this).call(this,r);var i=r.getBrush();if(i.hasOption("hardness")){n.hardness=i.getOption("hardness")}return n}},{key:"_serializeOperation",value:function e(r,n){if(r.constructor.identifier==="frame"){this._serializeFrameOperation(r,n);return null}if(r.constructor.identifier==="overlay"){this._serializeOverlayOperation(r,n);return null}return m(t.prototype.__proto__||p()(t.prototype),"_serializeOperation",this).call(this,r,n)}},{key:"_serializeFrameOperation",value:function e(t,r){var n=r.filter(function(e){return e.type==="sprite"});var i=void 0;if(n.length){i=n.pop()}else{i={type:"sprite",options:{sprites:[]}};r.push(i)}i.options.sprites.push({type:"frame",options:this._getFrameOptions(t)})}},{key:"_serializeOverlayOperation",value:function e(t,r){if(!t.getIdentifier())return;var n=r.filter(function(e){return e.type==="sprite"});var i=void 0;if(n.length){i=n.pop()}else{i={type:"sprite",options:{sprites:[]}};r.push(i)}i.options.sprites.push({type:"overlay",options:{identifier:t.getIdentifier(),intensity:t.getAlpha(),blendMode:h["a"][t.getBlendMode()]}})}},{key:"_getFrameOptions",value:function e(t){return{identifier:t.getFrame().identifier}}},{key:"_serializeOrientationOperation",value:function e(r){var n=m(t.prototype.__proto__||p()(t.prototype),"_serializeOrientationOperation",this).call(this,r);if(n.options.rotation===90||n.options.rotation===270){n.options.flipHorizontally=!n.options.flipHorizontally;n.options.flipVertically=!n.options.flipVertically}return n}},{key:"_serializeTransformOperation",value:function e(r){var n=this._editor.operations;if(n.exists("orientation")){r=r.clone();var i=n.get("orientation");r.rotate(-i.getRotation());if(i.getFlipVertically()){r.flip("vertical");r.setRotation(r.getRotation()*-1)}if(i.getFlipHorizontally()){r.flip("horizontal");r.setRotation(r.getRotation()*-1)}}var a=m(t.prototype.__proto__||p()(t.prototype),"_serializeTransformOperation",this).call(this,r);a.type="transform";return a}},{key:"_serializeText",value:function e(r,n){var i=m(t.prototype.__proto__||p()(t.prototype),"_serializeText",this).call(this,r,n);var a=r.getInputDimensions(false);i.options.fontIdentifier=n.getFontIdentifier();i.options.maxWidth=i.options.maxWidth*a.x/a.min();delete i.options.fontFamily;return i}},{key:"_serializeFilterOperation",value:function e(r){var n=m(t.prototype.__proto__||p()(t.prototype),"_serializeFilterOperation",this).call(this,r);if(!n)return null;n.options.identifier=n.options.name;delete n.options.name;return n}},{key:"_serializeRadialFocusOperation",value:function e(r){var n=m(t.prototype.__proto__||p()(t.prototype),"_serializeRadialFocusOperation",this).call(this,r);var i=n.options.options;i.start=i.position;delete i.position;i.end={x:i.start.x+i.radius,y:i.start.y};delete i.radius;return n}}]);return t}(v["a"]);t["a"]=b;b.version="2.0.0"},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(8);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(4);var m=r(115);var _=r(117);var g=r(118);var y=r(50);var b=r(119);var k=r(74);var w=r(22);var C=r(116);var S=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var E=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function x(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function T(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var R=d["q"].flipObject(C["a"]);var D=function(e){O(t,e);function t(){var e;x(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=T(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));a._frameManager=new _["a"](a._ui,a._getOptions("frame"));var o=a._getOptions("overlay");if(o){a._overlayManager=new g["a"](a._ui,o)}return a}S(t,[{key:"_deserializeSprite",value:function e(r,n){if(n.type==="frame"){return this._deserializeFrame(r,n)}if(n.type==="overlay"){return this._deserializeOverlay(r,n)}return E(t.prototype.__proto__||h()(t.prototype),"_deserializeSprite",this).call(this,r,n)}},{key:"_deserializeOperation",value:function e(r){if(r.type==="transform"){return this._deserializeTransformOperation(r)}return E(t.prototype.__proto__||h()(t.prototype),"_deserializeOperation",this).call(this,r)}},{key:"_deserializeOrientationOperation",value:function e(r){if(r.options.rotation===90||r.options.rotation===270){r.options.flipHorizontally=!r.options.flipHorizontally;r.options.flipVertically=!r.options.flipVertically}return E(t.prototype.__proto__||h()(t.prototype),"_deserializeOrientationOperation",this).call(this,r)}},{key:"_deserializeTransformOperation",value:function e(r){var n=this;return E(t.prototype.__proto__||h()(t.prototype),"_deserializeCropOperation",this).call(this,r).then(function(e){if(!e)return;var t=d["q"].Array.find(n._data.operations,function(e){return e.type==="orientation"});if(t){var r=t.options;var i=r.rotation,a=r.flipHorizontally,o=r.flipVertically;if(i===90||i===270){if(!a&&o||a&&!o){a=!a;o=!o}}e.rotate(r.rotation);if(a){e.flip("horizontal");e.setRotation(e.getRotation()*-1)}if(o){e.flip("vertical");e.setRotation(e.getRotation()*-1)}}return e})}},{key:"_deserializeFrame",value:function e(t,r){var n=this;var i=r.options.identifier;var a=this._frameManager.getFrameByIdentifier(i);if(!a){d["h"].warn("Deserializer","Unknown frame `"+i+"`. Skipping frame.");return p.a.resolve()}var o=new b["a"](this._ui,a);return o.load().then(function(){n._editor.operations.getOrCreate("frame",{frame:o.getFrame()})})}},{key:"_deserializeOverlay",value:function e(t,r){var n=this;var i=r.options,a=i.blendMode,o=i.intensity,s=i.identifier;var l=this._overlayManager.getOverlayByIdentifier(s);if(!l){d["h"].warn("Deserializer","Unknown overlay `"+s+"`. Skipping overlay.");return p.a.resolve()}var u=this._editor.getUI().getAssetPath(l.image);return w["a"].load(u).then(function(e){n._editor.operations.getOrCreate("overlay",{alpha:o,identifier:s,blendMode:parseInt(R[a||l.blendMode],10),image:e})})}},{key:"_createBrushForPath",value:function e(r){var n=E(t.prototype.__proto__||h()(t.prototype),"_createBrushForPath",this).call(this,r);if(typeof r.hardness!=="undefined"&&n.hasOption("hardness")){n.setHardness(r.hardness)}return n}},{key:"_deserializeSticker",value:function e(t,r){var n=this;var i=d["p"].Operations.SpriteOperation;var a=r.options;var o=this._stickerManager.getStickerByIdentifier(a.identifier);var s=y["a"].getURLForSticker(o,"base");if(!o){d["h"].warn("Deserializer","Unknown sticker `"+a.identifier+"`. Skipping sprite.");return p.a.resolve()}var l=t.getInputDimensions(false);return new p.a(function(e,r){var u=new window.Image;u.addEventListener("load",function(){var r=i.StickerSprite.prototype.availableOptions.adjustments.structure;var n=a.rotation,s=a.flipHorizontally,c=a.flipVertically;var f={identifier:a.identifier,image:u,position:d["v"].fromObject(a.position),dimensions:d["v"].fromObject(a.dimensions).multiply(l.min()),rotation:n,flipHorizontally:s,flipVertically:c,adjustments:{}};if(typeof a.adjustments!=="undefined"){["brightness","contrast","saturation"].forEach(function(e){if(typeof a.adjustments[e]!=="undefined"){f.adjustments[e]=a.adjustments[e]+r[e].default}})}if(typeof a.tintColor!=="undefined"&&typeof o.tintMode!=="undefined"){f.tintColor=d["c"].fromArray(a.tintColor);f.tintMode=o.tintMode}e(t.createSticker(f))});u.crossOrigin=n._editor.getCrossOrigin();u.src=n._editor.getUI().getAssetPath(s)})}},{key:"_deserializeFilterOperation",value:function e(t){var r=this;var n=t.options;if(!this._filterManager.getFilterByIdentifier(n.identifier)){d["h"].warn("Deserializer","Unknown filter `"+n.identifier+"`");return p.a.resolve()}return this._filterManager.instantiateFilterWithIdentifier(n.identifier).then(function(e){var t=r._editor.operations.getOrCreate("filter");if(!t)return;t.set({identifier:n.identifier,filter:e,intensity:n.intensity});return t})}},{key:"_deserializeFocusOperation",value:function e(r){var n=r.options,i=n.options,a=n.type;if(a!=="radial")return E(t.prototype.__proto__||h()(t.prototype),"_deserializeFocusOperation",this).call(this,r);var o=i.start,s=i.end,l=i.gradientRadius,u=i.blurRadius;var c=d["v"].fromObject(s).subtract(d["v"].fromObject(o)).len();return p.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:d["v"].fromObject(o),radius:c,gradientRadius:l,blurRadius:u}))}},{key:"_deserializeText",value:function e(t,r){var n=r.options;var i=n.fontSize,a=n.lineHeight,o=n.fontIdentifier,s=n.alignment,l=n.rotation,u=n.maxWidth,c=n.color,f=n.backgroundColor;var p=new k["a"](this._ui);var v=this._fontManager.getVariationByIdentifier(o);if(!v){v=this._fontManager.getDefaultFont()}else{p.setFonts([v.getFont()])}return p.load().then(function(){var e=t.getInputDimensions(false);var r=u*e.min()/e.x;return t.createText({fontSize:i,lineHeight:a,fontFamily:v.getFontFamily(),fontWeight:v.getFontWeight(),fontIdentifier:v.getIdentifier(),alignment:s,rotation:l,maxWidth:r,text:n.text,color:d["c"].fromArray(c),backgroundColor:d["c"].fromArray(f),position:d["v"].fromObject(n.position)})})}}]);return t}(m["a"]);t["a"]=D;D.version="2.0.0"},function(e,t,r){"use strict";var n=r(34);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(47);var l=r.n(s);var u=r(4);var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function f(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++){r[t]=e[t]}return r}else{return i()(e)}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var v=function(){function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};p(this,e);this._ui=t;this._options=r;this._defaultLayouts=u["p"].Operations.SpriteOperation.TextDesignSprite.Layouts;this._layouts=[];this._init()}c(e,[{key:"_init",value:function e(){var t=this;var r=this._options.availableLayouts;this._layouts=l()(this._defaultLayouts).map(function(e){return{identifier:t._defaultLayouts[e].identifier,layout:t._defaultLayouts[e]}});if(r){this._layouts=this._layouts.filter(function(e){return r.indexOf(e.identifier)>=0})}}},{key:"getLayoutByIdentifier",value:function e(t){var r=u["q"].Array.find(this._layouts,function(e){return e.identifier===t});return r&&r.layout}},{key:"getLayouts",value:function e(){return[].concat(f(this._layouts))}}]);return e}();t["a"]=v},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(52);var d=r(254);var m=r(23);var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var g=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function y(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var C="production"==="test";var S=function(e){w(t,e);function t(){var e,r;b(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++){i[a]=arguments[a]}var o=k(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(i)));o._needsStyleFixes=true;o._bindAll("_onZoom","_onZoomDone","_onCanvasDrag","_onCanvasDragStart","_onCanvasDragStop","_onCanvasClick","_onCanvasClickDisabled","_onCanvasClickEnabled");o._initialRerender=true;o._events=(r={},y(r,v["d"].EVENTS.ZOOM,o._onZoom),y(r,v["d"].EVENTS.ZOOM_DONE,o._onZoomDone),r);o.state={canvasClickDisabled:false,displayHeader:true};return o}_(t,[{key:"setSharedState",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;g(t.prototype.__proto__||p()(t.prototype),"setSharedState",this).call(this,r,n);i&&this.props.controls.updateSharedState()}},{key:"fixStyles",value:function e(){if(v["u"].Browser.isIElte(11)){var t=this._outerContainer.offsetHeight;this._container.style.height=t+"px"}}},{key:"componentDidMount",value:function e(){g(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);if(this._initialRerender){this.forceUpdate()}}},{key:"_performHitTest",value:function e(t){var r=this.context.appComponent.getBounds();var n=t.subtract(r.left,r.top);var i=this.context.editor;var a=i.controls.getAvailable();if(this.props.controls){var o=this.props.controls.constructor.clickAtPosition(t,i);if(o){this.setSharedState(o);return true}}for(var s in a){var l=a[s];var u=l.clickAtPosition(n,i);if(u){if(u.selectedSprite===this.getSharedState("selectedSprite")){return true}this.context.screen.switchToControls(s,u);return true}}return false}},{key:"_onCanvasClickDisabled",value:function e(){this.setState({canvasClickDisabled:true})}},{key:"_onCanvasClickEnabled",value:function e(){var t=this;Object(v["z"])(function(){t.setState({canvasClickDisabled:false})})}},{key:"_onCanvasClick",value:function e(t){var r=v["u"].getEventPosition(t);this._performHitTest(r)}},{key:"_onZoom",value:function e(){this.forceUpdate()}},{key:"_onZoomDone",value:function e(){this.forceUpdate()}},{key:"_onCanvasDragStart",value:function e(){var t=this.context.editor;this._initialOffset=t.offset.clone()}},{key:"_onCanvasDrag",value:function e(t){var r=this.context.editor;var n=r.offset;r.offset=n.copy(this._initialOffset).add(t);r.render()}},{key:"_onCanvasDragStop",value:function e(){this.forceUpdate()}},{key:"getImageBoundingRect",value:function e(){var t=this.context.editor;var r=t.getSDK();var n=r.getContainer();var i=r.getSprite();var a=n.getPosition();var o=i.getTexture();var s=r.getTextureScale();if(!o)return new v["n"];var l=r.getOutputDimensions();var u=this._outerContainer.getBoundingClientRect();var c=this.context.appComponent.getBounds();return new v["n"](Math.floor(a.x-l.x/2-(u.left-c.left)),Math.floor(a.y-l.y/2-(u.top-c.top)),Math.ceil(l.x),Math.ceil(l.y))}},{key:"getContainerOffset",value:function e(){var t=this._outerContainer.getBoundingClientRect();return new v["v"](t.left,t.top)}},{key:"_getContainerStyle",value:function e(){var t=this.getImageBoundingRect();return{left:t.x,top:t.y,width:t.width,height:t.height}}},{key:"_renderControls",value:function e(){var t=this;var r=this._imageContainer&&this._getContainerStyle();return v["l"].createElement(E,{innerRef:function e(r){t._imageContainer=r},style:r,onClick:this._onCanvasClick})}},{key:"render",value:function e(){var t=this;var r=this.context.editor;return v["l"].createElement(x,{draggable:!r.isShallow&&r.isDraggable,className:C?"js-canvasControls":undefined,innerRef:function e(r){t._outerContainer=r}},v["l"].createElement(m["a"],{disabled:r.isShallow||!r.isDraggable,onStart:this._onCanvasDragStart,onDrag:this._onCanvasDrag,onStop:this._onCanvasDragStop},v["l"].createElement("div",null,v["l"].createElement(T,{innerRef:function e(r){t._container=r}},this.state.displayHeader&&v["l"].createElement(d["a"],null),this._renderControls()))))}},{key:"container",get:function e(){return this._container}}]);return t}(h["a"]);S.contextTypes=h["a"].contextTypes;S.propTypes={options:v["k"].object};t["a"]=S;var E=v["w"].div("55byom","Container");var x=v["w"].div("1ebx3lr",{draggable:"ovipzq"},"CanvasControls");var T=v["w"].div("1h6ank1","CanvasControlsContainer")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(23);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var m=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=12;var k=15;var w=function(e){y(t,e);function t(){_(this,t);var e=g(this,(t.__proto__||p()(t)).call(this));if(!e.constructor.NATIVE_SCROLLBAR_WIDTH){e.constructor.NATIVE_SCROLLBAR_WIDTH=v["u"].getScrollbarWidth()}e._isDragging=false;e._bindAll("_onButtonDragStart","_onButtonDrag","_onButtonDragStop","_onBarDragStart","_onBarDrag","_onBarDragStop","_onListScroll");e.state={buttonSize:0,buttonPosition:0,buttonVisible:false};return e}d(t,[{key:"componentDidMount",value:function e(){m(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this.update()}},{key:"_onListScroll",value:function e(){if(this._isDragging)return;var r=this._getDirection();var n=void 0,i=void 0,a=void 0;if(r===t.HORIZONTAL){n=this._list.scrollWidth-this._list.offsetWidth;i=this._list.scrollLeft;a=this._root.offsetWidth-this.state.buttonSize}else if(r===t.VERTICAL){n=this._list.scrollHeight-this._list.offsetHeight;i=this._list.scrollTop;a=this._root.offsetHeight-this.state.buttonSize}var o=i/n;this.setState({buttonPosition:a*o});this.props.onScroll&&this.props.onScroll(i)}},{key:"_onButtonDragStart",value:function e(t){this._isDragging=true;this._initialButtonPosition=this.state.buttonPosition||0}},{key:"_onButtonDrag",value:function e(r){var n=this._getDirection();var i=void 0;if(n===t.HORIZONTAL){i=this._initialButtonPosition+r.x}else if(n===t.VERTICAL){i=this._initialButtonPosition+r.y}this._setButtonPosition(i)}},{key:"_onButtonDragStop",value:function e(){this._isDragging=false}},{key:"_onBarDragStart",value:function e(r){var n=v["u"].getEventPosition(r);this._initialPosition=n.clone();var i=this._root.getBoundingClientRect();var a=new v["v"](i.left,i.top);var o=n.clone().subtract(a);var s=this._getDirection();if(s===t.HORIZONTAL){this._setButtonPosition(o.x-this.state.buttonSize/2)}else if(s===t.VERTICAL){this._setButtonPosition(o.y-this.state.buttonSize/2)}document.addEventListener("mousemove",this._onBarDrag);document.addEventListener("touchmove",this._onBarDrag);document.addEventListener("mouseup",this._onBarDragStop);document.addEventListener("touchend",this._onBarDragStop)}},{key:"_onBarDrag",value:function e(r){var n=v["u"].getEventPosition(r);var i=this._root.getBoundingClientRect();var a=new v["v"](i.left,i.top);var o=n.clone().subtract(a);var s=this._getDirection();if(s===t.HORIZONTAL){this._setButtonPosition(o.x-this.state.buttonSize/2)}else if(s===t.VERTICAL){this._setButtonPosition(o.y-this.state.buttonSize/2)}}},{key:"_onBarDragStop",value:function e(){document.removeEventListener("mousemove",this._onBarDrag);document.removeEventListener("touchmove",this._onBarDrag);document.removeEventListener("mouseup",this._onBarDragStop);document.removeEventListener("touchend",this._onBarDragStop)}},{key:"_setButtonPosition",value:function e(r){var n=this._getDirection();var i=void 0,a=void 0;if(n===t.HORIZONTAL){i=this._root.offsetWidth-this.state.buttonSize;a=this._list.scrollWidth-this._list.offsetWidth}else if(n===t.VERTICAL){i=this._root.offsetHeight-this.state.buttonSize;a=this._list.scrollHeight-this._list.offsetHeight}r=Math.max(0,r);r=Math.min(r,i);this.setState({buttonPosition:r});var o=r/i;var s=a*o;if(n===t.HORIZONTAL){this._list.scrollLeft=s}else if(n===t.VERTICAL){this._list.scrollTop=s}this.props.onScroll&&this.props.onScroll(s)}},{key:"_updateButtonSize",value:function e(r){var n=0;var i=false;var a=void 0,o=void 0;var s=this._getDirection();if(s===t.HORIZONTAL){a=this._list.clientWidth;o=this._list.scrollWidth}else if(s===t.VERTICAL){a=this._list.offsetHeight;o=this._list.scrollHeight}n=a/o*a;i=o>a;this.setState({buttonSize:n,buttonVisible:i},r)}},{key:"_updateListSize",value:function e(){if(!this._list)return;var r=this._getDirection();if(r===t.HORIZONTAL){this._list.style.height="";var n=this._getFullListDimensions();this._listSize=n.y}else if(r===t.VERTICAL){this._list.style.width="";var i=this._getFullListDimensions();this._listSize=i.x}}},{key:"_getFullListDimensions",value:function e(){var t=this._list.getBoundingClientRect();return new v["v"](t.width,t.height)}},{key:"update",value:function e(){var r=this;if(v["u"].isMobile()){return}if(v["u"].Browser.isIElte(11)){var n=this._container.offsetHeight;this._list.style.height=n+"px"}var i=this._getDirection();this._updateButtonSize(function(){if(!r._listSize){r._updateListSize()}var e=r._listSize;if(r.state.buttonVisible){e+=r.constructor.NATIVE_SCROLLBAR_WIDTH}if(i===t.HORIZONTAL){r._root.style.top=r._listSize-b+"px";r._root.style.width=r._list.offsetWidth+"px"}else if(i===t.VERTICAL){r._list.style.width=e+"px";r._root.style.left=r._listSize-b+"px";r._root.style.height=r._list.offsetHeight+"px"}});this._list.addEventListener("scroll",this._onListScroll)}},{key:"_getDirection",value:function e(){return this.props.direction||"horizontal"}},{key:"_getGradientOpacity",value:function e(){if(!this._list)return false;var r=this._getDirection();var n=void 0;if(r===t.HORIZONTAL){n=this._list.scrollWidth-this._list.offsetWidth-this._list.scrollLeft}else{n=this._list.scrollHeight-this._list.offsetHeight-this._list.scrollTop}return Math.min(Math.max(n/k,0),1)}},{key:"_getButtonStyle",value:function e(){var t=this._getDirection();if(t==="horizontal"){return{left:this.state.buttonPosition,width:this.state.buttonSize}}else{return{top:this.state.buttonPosition,height:this.state.buttonSize}}}},{key:"getList",value:function e(){return this.refs.list}},{key:"getRoot",value:function e(){return this.refs.root}},{key:"_renderChild",value:function e(t){var r=this;return v["l"].cloneElement(t,{innerRef:function e(n){if(t.props.innerRef){t.props.innerRef(n)}r._list=n}})}},{key:"render",value:function e(){var r=this;if(v["u"].isMobile()){return this.props.children}var n=this._getButtonStyle();var i=this._renderChild(this.props.children);var a=this._getDirection();var o=this._getGradientOpacity();return v["l"].createElement(C,{innerRef:function e(t){r._container=t},styles:this.props.styles},i,!this.props.noGradient&&o!==0?v["l"].createElement(x,{style:{opacity:o},horizontal:a===t.HORIZONTAL,vertical:a===t.VERTICAL}):null,v["l"].createElement(S,{innerRef:function e(t){r._root=t},onMouseDown:this._onBarDragStart,onTouchStart:this._onBarDragStart,vertical:this.props.direction==="vertical",horizontal:this.props.direction==="horizontal"},v["l"].createElement(h["a"],{onStart:this._onButtonDragStart,onDrag:this._onButtonDrag,onStop:this._onButtonDragStop},v["l"].createElement(E,{style:n,visible:this.state.buttonVisible,onMouseDown:this._onButtonDown,vertical:this.props.direction==="vertical",horizontal:this.props.direction==="horizontal"}))))}}]);return t}(v["b"]);w.HORIZONTAL="horizontal";w.VERTICAL="vertical";w.contextTypes=v["b"].contextTypes;t["a"]=w;var C=v["w"].div("120drhm","ScrollbarContainer");w.RootElement=C;var S=v["w"].div("1s3c4f0",{vertical:"1dvqwqc",horizontal:"1hu63yp"},"Scrollbar");var E=v["w"].div("zxujnb",{vertical:"gma9v3",horizontal:"1h5ccdj",visible:"2jlos"},"ScrollbarButton");var x=v["w"].div("pc5361",{horizontal:"felmtl",vertical:"1enskgl"},"Gradient")},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(4);var i=n["w"].css("nsck4j","Input")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(276);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(52);var d=r(53);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var b="production"==="test";var k=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onInputLiveChange","_onInputChange");a.state={value:a.props.value};return a}m(t,[{key:"componentWillReceiveProps",value:function e(t){if(t.value!==this.state.value){this.setState({value:t.value})}}},{key:"_onInputLiveChange",value:function e(t){this.setState({value:t.target.value})}},{key:"_onInputChange",value:function e(t){var r=parseFloat(t.target.value);if(c()(r)){return this.setState({value:this.props.value})}var n=this.props,i=n.minValue,a=n.maxValue;r=v["u"].toFixed(Math.max(i,Math.min(r,a)),1);this.props.onValueChange&&this.props.onValueChange(r);this.setState({value:r})}},{key:"_renderRightPart",value:function e(){var t=this;return v["l"].createElement(x,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:b?"js-valueSelection-input":undefined,innerRef:function e(r){t._input=r},disabled:this.props.disabled})}},{key:"render",value:function e(){var t=this.props,r=t.label,n=t.inputLabel,i=t.className,a=t.disabled,o=t.styles;var s=typeof this._renderLeftPart==="function";return v["l"].createElement(w,{styles:o,className:i,disabled:a},v["l"].createElement(C,null,s&&v["l"].createElement(S,null,r&&v["l"].createElement(E,{left:true},r),this._renderLeftPart()),v["l"].createElement(S,null,n&&v["l"].createElement(E,null,n||" "),this._renderRightPart())))}}]);return t}(h["a"]);k.contextTypes=h["a"].contextTypes;t["a"]=k;var w=v["w"].div("12okzzb",{disabled:"1voy7lm"},"ValueSelection");k.RootElement=w;var C=v["w"].div("15u7gri","Row");var S=v["w"].div("1hy9z1m",{bottomAligned:"17xdalt"},"Column");var E=v["w"].div("ts1901",{left:"1ff3rj6"},"Title");var x=Object(v["w"])(d["a"])("myl4ow",{disabled:"18if3pn"},"InputField")},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return a});r.d(t,"c",function(){return o});var n=r(4);var i=n["w"].css("1ht9t4w","CircleSlider");var a=n["w"].css("1ldv9bx","CircleSliderBackground");var o=n["w"].css("7g0rty","CircleSliderKnob")},function(e,t,r){"use strict";var n=r(7);var i=r.n(n);var a=n["Engine"].Filters.OverlayFilter;t["a"]={normal:a.BLEND_MODES.NORMAL,overlay:a.BLEND_MODES.OVERLAY,hardLight:a.BLEND_MODES.HARD_LIGHT,softLight:a.BLEND_MODES.SOFT_LIGHT,multiply:a.BLEND_MODES.MULTIPLY,darken:a.BLEND_MODES.DARKEN,lighten:a.BLEND_MODES.LIGHTEN,screen:a.BLEND_MODES.SCREEN,colorBurn:a.BLEND_MODES.COLOR_BURN}},function(e,t,r){e.exports=!r(18)&&!r(25)(function(){return Object.defineProperty(r(56)("div"),"a",{get:function(){return 7}}).a!=7})},function(e,t,r){var n=r(29);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return n(e)=="String"?e.split(""):Object(e)}},function(e,t,r){var n=r(21);var i=r(20);var a=r(143)(false);var o=r(63)("IE_PROTO");e.exports=function(e,t){var r=i(e);var s=0;var l=[];var u;for(u in r)if(u!=o)n(r,u)&&l.push(u);while(t.length>s)if(n(r,u=t[s++])){~a(l,u)||l.push(u)}return l}},function(e,t,r){var n=r(13).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(21);var i=r(31);var a=r(63)("IE_PROTO");var o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=i(e);if(n(e,a))return e[a];if(typeof e.constructor=="function"&&e instanceof e.constructor){return e.constructor.prototype}return e instanceof Object?o:null}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(152);var i=r.n(n);var a=i.a;var o={DarkTheme:i.a};var s=o},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(32);var h=r.n(v);var d=r(42);var m=r.n(d);var _=r(7);var g=r.n(_);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var C=function(e){w(t,e);function t(){var e;b(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=k(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._events={};a._needsStyleFixes=false;a._bindAll("fixStyles");return a}y(t,[{key:"fixStyles",value:function e(){return c.a.resolve()}},{key:"componentDidMount",value:function e(){this._bindEvents();if(this._needsStyleFixes){this.fixStyles();if(this.context.options.responsive){window.addEventListener("resize",this.fixStyles)}}}},{key:"componentWillUnmount",value:function e(){this._unbindEvents();var t=this.context&&this.context.options||this.props.options;if(t.responsive&&this._needsStyleFixes){window.removeEventListener("resize",this.fixStyles)}}},{key:"_bindAll",value:function e(){var t=this;for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}n.forEach(function(e){if(typeof t[e]!=="function"){throw new Error("_bindAll: `"+t.constructor.name+"."+e+"` is not a function.")}t[e]=t[e].bind(t)})}},{key:"_t",value:function e(t,r){return this.context.ui.translate(t,r)}},{key:"_getAssetPath",value:function e(){var t;return(t=this.context.ui).getAssetPath.apply(t,arguments)}},{key:"_bindEvents",value:function e(){for(var t in this._events){var r=this._events[t];this.context.mediator.on(t,r)}}},{key:"_unbindEvents",value:function e(){for(var t in this._events){var r=this._events[t];this.context.mediator.off(t,r)}}},{key:"_emitEvent",value:function e(t){var r;for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++){i[a-1]=arguments[a]}(r=this.context.mediator).emit.apply(r,[t].concat(i))}},{key:"render",value:function e(){return h.a.createElement("div",null)}}]);return t}(h.a.Component);C.contextTypes={appComponent:m.a.object,editor:m.a.object,ui:m.a.object,options:m.a.object,mediator:m.a.object,screen:m.a.object,theme:m.a.object};t["a"]=C},function(e,t){},function(e,t,r){"use strict";var n=r(43);var i=r(12);var a=r(93);var o=r(19);var s=r(21);var l=r(27);var u=r(156);var c=r(44);var f=r(88);var p=r(11)("iterator");var v=!([].keys&&"next"in[].keys());var h="@@iterator";var d="keys";var m="values";var _=function(){return this};e.exports=function(e,t,r,g,y,b,k){u(r,t,g);var w=function(e){if(!v&&e in x)return x[e];switch(e){case d:return function t(){return new r(this,e)};case m:return function t(){return new r(this,e)}}return function t(){return new r(this,e)}};var C=t+" Iterator";var S=y==m;var E=false;var x=e.prototype;var T=x[p]||x[h]||y&&x[y];var O=!v&&T||w(y);var R=y?!S?O:w("entries"):undefined;var D=t=="Array"?x.entries||T:T;var I,P,j;if(D){j=f(D.call(new e));if(j!==Object.prototype&&j.next){c(j,C,true);if(!n&&!s(j,p))o(j,p,_)}}if(S&&T&&T.name!==m){E=true;O=function e(){return T.call(this)}}if((!n||k)&&(v||E||!x[p])){o(x,p,O)}l[t]=O;l[C]=_;if(y){I={values:S?O:w(m),keys:b?O:w(d),entries:R};if(k)for(P in I){if(!(P in x))a(x,P,I[P])}else i(i.P+i.F*(v||E),t,I)}return I}},function(e,t,r){e.exports=r(19)},function(e,t,r){var n=r(14);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e["return"];if(a!==undefined)n(a.call(e));throw t}}},function(e,t,r){var n=r(27);var i=r(11)("iterator");var a=Array.prototype;e.exports=function(e){return e!==undefined&&(n.Array===e||a[i]===e)}},function(e,t,r){var n=r(14);var i=r(39);var a=r(11)("species");e.exports=function(e,t){var r=n(e).constructor;var o;return r===undefined||(o=n(r)[a])==undefined?t:i(o)}},function(e,t){e.exports=function(e){try{return{e:false,v:e()}}catch(e){return{e:true,v:e}}}},function(e,t,r){var n=r(14);var i=r(17);var a=r(70);e.exports=function(e,t){n(e);if(i(t)&&t.constructor===e)return t;var r=a.f(e);var o=r.resolve;o(t);return r.promise}},function(e,t,r){var n=r(11)("iterator");var i=false;try{var a=[7][n]();a["return"]=function(){i=true};Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return false;var r=false;try{var a=[7];var o=a[n]();o.next=function(){return{done:r=true}};a[n]=function(){return o};e(a)}catch(e){}return r}},function(e,t){var r=e.exports={};var n;var i;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=a}}catch(e){n=a}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=o}}catch(e){i=o}})();function s(e){if(n===setTimeout){return setTimeout(e,0)}if((n===a||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function l(e){if(i===clearTimeout){return clearTimeout(e)}if((i===o||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var u=[];var c=false;var f;var p=-1;function v(){if(!c||!f){return}c=false;if(f.length){u=f.concat(u)}else{p=-1}if(u.length){h()}}function h(){if(c){return}var e=s(v);c=true;var t=u.length;while(t){f=u;u=[];while(++p<t){if(f){f[p].run()}}p=-1;t=u.length}f=null;c=false;l(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}u.push(new d(e,t));if(u.length===1&&!c){s(h)}};function d(e,t){this.fun=e;this.array=t}d.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function m(){}r.on=m;r.addListener=m;r.once=m;r.off=m;r.removeListener=m;r.removeAllListeners=m;r.emit=m;r.prependListener=m;r.prependOnceListener=m;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(e,t,r){var n=r(86);var i=r(65).concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return n(t,i)}},function(e,t,r){e.exports={default:r(211),__esModule:true}},function(e,t,r){e.exports={default:r(213),__esModule:true}},function(e,t,r){"use strict";t["a"]={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_analog",defaultName:"Analog",filters:[{identifier:"imgly_lut_cool",defaultName:"Cool",lutImage:"filters/imgly_lut_cool_5_5_128.png"},{identifier:"imgly_lut_blues",defaultName:"Blues",lutImage:"filters/imgly_lut_blues_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Blue Shadows",lutImage:"filters/imgly_lut_blueshadows_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"KDynamic",lutImage:"filters/imgly_lut_kdynamic_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"}]},{identifier:"imgly_filters_bw",defaultName:"Black & White",filters:[{identifier:"imgly_lut_sin",defaultName:"Sin",lutImage:"filters/imgly_lut_sin_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"B & W",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Plate",lutImage:"filters/imgly_lut_plate_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"X400",lutImage:"filters/imgly_lut_x400_5_5_128.png"}]},{identifier:"imgly_filters_retro",defaultName:"Retro",filters:[{identifier:"imgly_lut_celsius",defaultName:"Celsius",lutImage:"filters/imgly_lut_celsius_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_k2",defaultName:"K2",lutImage:"filters/imgly_lut_k2_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia High",lutImage:"filters/imgly_lut_sepiahigh_5_5_128.png"},{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Eighties",lutImage:"filters/imgly_lut_eighties_5_5_128.png"},{identifier:"imgly_lut_elder",defaultName:"Elder",lutImage:"filters/imgly_lut_elder_5_5_128.png"},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Orchid",lutImage:"filters/imgly_lut_orchid_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"}]},{identifier:"imgly_filters_special",defaultName:"Special",filters:[{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Cotton Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"High Contrast",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_nogreen",defaultName:"No Green",lutImage:"filters/imgly_lut_nogreen_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Pola 669",lutImage:"filters/imgly_lut_pola669_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"}]},{identifier:"imgly_filters_summer",defaultName:"Summer",filters:[{identifier:"imgly_lut_texas",defaultName:"Texas",lutImage:"filters/imgly_lut_texas_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_chest",defaultName:"Chest",lutImage:"filters/imgly_lut_chest_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Evening",lutImage:"filters/imgly_lut_evening_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Fall",lutImage:"filters/imgly_lut_fall_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Front",lutImage:"filters/imgly_lut_front_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_sunset",defaultName:"Sunset",lutImage:"filters/imgly_lut_sunset_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"}]},{identifier:"imgly_filters_winter",defaultName:"Winter",filters:[{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_bleached",defaultName:"Bleached",lutImage:"filters/imgly_lut_bleached_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Bleached Blue",lutImage:"filters/imgly_lut_bleachedblue_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Breeze",lutImage:"filters/imgly_lut_breeze_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lenin",lutImage:"filters/imgly_lut_lenin_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_winter",defaultName:"Winter",lutImage:"filters/imgly_lut_winter_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:true,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},function(e,t,r){(function(t){(function(){var r,n,i;if(typeof performance!=="undefined"&&performance!==null&&performance.now){e.exports=function(){return performance.now()}}else if(typeof t!=="undefined"&&t!==null&&t.hrtime){e.exports=function(){return(r()-i)/1e6};n=t.hrtime;r=function(){var e;e=n();return e[0]*1e9+e[1]};i=r()}else if(Date.now){e.exports=function(){return Date.now()-i};i=Date.now()}else{e.exports=function(){return(new Date).getTime()-i};i=(new Date).getTime()}}).call(this)}).call(t,r(100))},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(225);var v=r(227);var h=r(228);var d=r(229);var m=r(230);var _=r(231);var g=r(233);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var C=function(e){w(t,e);function t(e,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;b(this,t);var a=k(this,(t.__proto__||c()(t)).call(this));a._ui=e;a._options=r;a._mediator=n;a._ready=false;a._padding=[0,0,0,0];a._offset=new f["v"](0,0);a._shallow=i;if(!i){a._initSDK();a._onZoom=a._onZoom.bind(a);a._onUndo=a._onUndo.bind(a);a._onRedo=a._onRedo.bind(a);a.history=new g["a"](a,a._sdk,a._mediator);a.history.on("undo",a._onUndo);a.history.on("redo",a._onRedo);a.zoom=new _["a"](a,a._sdk,a._mediator);a.zoom.on("set",a._onZoom);a._initSerializers()}a.operations=new h["a"](a,a._sdk,a._mediator);a.controls=new d["a"](a,a._sdk,a._mediator);a.features=new m["a"](a,a._sdk,a._mediator);if(a._sdk){var o=[];for(var s in a._operations){o.push(a._operations[s])}a._sdk.registerOperations(o)}a._running=false;a._renderRequested=true;a._renderCallbacks=[];a._animationFrameRequest=null;a.render=a.render.bind(a);a._tick=a._tick.bind(a);return a}y(t,[{key:"setImage",value:function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._options.editor.image;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=this._sdk.getRenderer();var a=new f["v"](r.naturalWidth,r.naturalHeight);var o=this.getMaxMegapixels()*1e6;var s=i.getMaxDimensions();if(n){this.reset()}var l=new v["a"](r,o,s);var u=null;var c=function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:a;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var o=void 0,s=void 0;if(t._sdk.getImage()){o=t.getInputDimensions();s=n.clone().divide(o)}t._setImage(r,u,n);if(s){t.broadcastScale(s)}t._initWatermark();t._ready=true;t.emit("ready")};if(!l.needsResize()){c(r)}else{this.emit("resize");u=this._sdk.parseExif(r);l.resize().then(function(e){var r=e.canvas,n=e.dimensions,i=e.reason;r.src="data:image/jpeg;base64,";t.emit("resized",{dimensions:n,reason:i});c(r,n,i)})}}},{key:"_initWatermark",value:function e(){if(this._options.editor.watermarkImage){this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage})}}},{key:"_initSDK",value:function e(){var t=this._options,r=t.logLevel,n=t.displayWelcomeMessage,i=t.debug,a=t.license,o=t.crossOrigin;var s=this._options.editor,l=s.smoothDownscaling,u=s.smoothUpscaling,c=s.preferredRenderer,p=s.pixelRatio,v=s.transparent,h=s.clearColor;var d=void 0;if(Array.isArray(h)){d=f["c"].fromArray(h)}else if(typeof h==="string"){d=f["c"].fromHex(h)}else if(h instanceof f["c"]){d=h.clone()}var m={logLevel:r,debug:i,displayWelcomeMessage:n,pixelRatio:p,smoothDownscaling:l,smoothUpscaling:u,transparent:v,crossOrigin:o,clearColor:d,license:a};this._sdk=new f["p"](c,m)}},{key:"_onZoom",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.fixOffset();this.render(function(){r&&r()})}},{key:"fixOffset",value:function e(){this._offset=this._clampOffset(this._offset)}},{key:"_onUndo",value:function e(){this.render()}},{key:"_onRedo",value:function e(){this.render()}},{key:"getRotation",value:function e(){return this._sdk.getRotation()}},{key:"setRotation",value:function e(t){this._sdk.setRotation(t)}},{key:"getSpriteScale",value:function e(){return this._sdk.getSpriteScale()}},{key:"setSpriteScale",value:function e(t){this._sdk.setSpriteScale(t)}},{key:"getCrossOrigin",value:function e(){return f["q"].getCrossOriginValue(this._options.crossOrigin||"anonymous")}},{key:"isToolAllowed",value:function e(t){if(this._shallow)return true;return this._sdk._l.isToolAllowed(t)}},{key:"isToolEnabled",value:function e(t){return this._options.editor.tools.indexOf(t)!==-1}},{key:"getMaxMegapixels",value:function e(){var t=this._options.editor.maxMegaPixels;return f["u"].isMobile()?t.mobile:t.desktop}},{key:"getOutputDimensions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._sdk.getOutputDimensions(t)}},{key:"getOutputTextureDimensions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._sdk.getOutputTextureDimensions(t)}},{key:"getFinalDimensions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._sdk.getFinalDimensions(t)}},{key:"getCanvasDimensions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var r=this._sdk.getCanvas();var n=new f["v"](r.offsetWidth,r.offsetHeight);if(t){n.subtract(this._padding[1]+this._padding[3],this._padding[0]+this._padding[2])}return n}},{key:"_setImage",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._options.editor.image;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._sdk.setAllOperationsToDirty();this._options.editor.image=t;this._sdk.setImage(t,r,n);this.zoom.auto(true,true);this.emit("new-image")}},{key:"export",value:function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this._watermarkOperation){this._watermarkOperation.setEnabled(false)}this._sdk.setAllOperationsToDirty();var n=this._options.editor.export;var i=new p["a"](this._sdk,n,r);return i.export().then(function(e){t.emit("export",e);t._mediator.emit(f["d"].EVENTS.EXPORT,e,t);if(t._watermarkOperation){t._watermarkOperation.setEnabled(true);t._sdk.render()}t._sdk.setAllOperationsToDirty();return e})}},{key:"_initSerializers",value:function e(){this._serializers={"1.0.0":r(234).default,"1.0.1":r(242).default,"2.0.0":r(243).default,"2.0.1":r(244).default,"3.0.0":r(247).default,"3.1.0":r(248).default}}},{key:"serialize",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"3.1.0";var n=this._serializers[r];if(!n){return f["j"].reject(new Error("No serializer for version "+r+" found."))}var i=new n(this);return i.serialize(t)}},{key:"deserialize",value:function e(t){var r=this;var n=this._serializers[t.version];if(!n){return f["j"].reject(new Error("No serializer for version "+t.version+" found."))}var i=new n(this);return i.deserialize(t).then(function(){r.zoom.auto(true,true)})}},{key:"_applyOffset",value:function e(){var t=this._offset.clone();t.x-=this._padding[1]/2;t.x+=this._padding[3]/2;t.y-=this._padding[2]/2;t.y+=this._padding[0]/2;this._sdk.setOffset(t)}},{key:"start",value:function e(){this._animationFrameRequest=Object(f["z"])(this._tick)}},{key:"stop",value:function e(){this._running=false;if(this._animationFrameRequest){Object(f["x"])(this._animationFrameRequest);this._renderCallbacks=[]}}},{key:"render",value:function e(t){this._renderRequested=true;if(t){this._renderCallbacks.push(t)}}},{key:"_tick",value:function e(){var t=this;this.zoom.tick();if(this._renderRequested){var r=this._renderCallbacks.slice(0);this._renderCallbacks=[];this._render().then(function(){r.forEach(function(e){return e()});t._animationFrameRequest=Object(f["z"])(t._tick)});this._renderRequested=false}else{this._animationFrameRequest=Object(f["z"])(this._tick)}}},{key:"_render",value:function e(){var t=this;if(!this._ready)return f["j"].resolve();this._applyOffset();return this._sdk.render().then(function(){t._lastOutputBounds=t._sdk.getSprite().getBounds();t.emit("rendered")}).catch(function(e){f["h"].error(t.constructor.name,"An error occurred while rendering: "+e.message);t.emit("render-error",e)})}},{key:"reset",value:function e(){this._sdk.reset();this.history.reset();this.operations.reset();this.features.reset();this.emit("reset")}},{key:"dispose",value:function e(){this.stop();this._sdk.dispose()}},{key:"isReady",value:function e(){return this._ready}},{key:"getRenderer",value:function e(){return this._sdk.getRenderer()}},{key:"getSDK",value:function e(){return this._sdk}},{key:"getInputDimensions",value:function e(){return this._sdk.getInputDimensions()}},{key:"getPadding",value:function e(){return this._padding}},{key:"setPadding",value:function e(t){if(!t){this._padding=[0,0,0,0]}else{this._padding=t}}},{key:"getImage",value:function e(){return this._options.editor.image}},{key:"getOptions",value:function e(){return this._options}},{key:"getUI",value:function e(){return this._ui}},{key:"broadcastScale",value:function e(t){var r=this;var n=["sprite"];n.forEach(function(e){var n=r.operations.get(e);if(!n){return}n.scale(t)})}},{key:"broadcastTransform",value:function e(t,r){var n=this;var i=new f["p"].Operations.TransformOperation.TransformChange(t,r);var a=["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"];a.forEach(function(e){var t=n.operations.get(e);if(!t){return}t.transform(i)})}},{key:"broadcastFlip",value:function e(t){var r=this;var n=["mirrored-focus","radial-focus","sprite","selective-blur"];n.forEach(function(e){var n=r.operations.get(e);if(!n){return}n.flip(t)})}},{key:"broadcastRotate",value:function e(t){var r=this;var n=["transform","mirrored-focus","radial-focus","sprite","selective-blur"];n.forEach(function(e){var n=r.operations.get(e);if(!n){return}n.rotate(t)})}},{key:"_clampOffset",value:function e(t){var r=this.getCanvasDimensions();var n=this._sdk.getOutputDimensions(false);var i=r.clone().subtract(n).divide(2).clamp(null,new f["v"](0,0));var a=n.clone().subtract(r).divide(2).clamp(new f["v"](0,0),null);var o=t.clone().clamp(i,a).round();return o}},{key:"getSnapshot",value:function e(){return{operations:this.operations.getSnapshot(),zoom:this.zoom.getSnapshot(),canvasDimensions:this.getCanvasDimensions()}}},{key:"restoreSnapshot",value:function e(t){this.operations.restoreSnapshot(t.operations);this.zoom.restoreSnapshot(t.zoom);if(!t.canvasDimensions.equals(this.getCanvasDimensions())){this.zoom.auto(true,true)}}},{key:"getMediator",value:function e(){return this._mediator}},{key:"addSticker",value:function e(t,r){var n=this._options.editor;var i=f["q"].getDeepProperty(n,["controlsOptions","sticker","categories"]);if(!i){return false}var a=f["q"].getDeepProperty(i,[function(e){return e.filter(function(e){return e.identifier===t})[0]},"stickers"]);if(!a){return false}a.push(r);this._mediator.emit(f["d"].EVENTS.ADDED_STICKER,i);return true}},{key:"offset",get:function e(){return this._offset},set:function e(t){this._offset=this._clampOffset(t)}},{key:"isDraggable",get:function e(){var t=this.zoom.targetLevel>this.zoom.defaultLevel;return this.features.isEnabled("drag")&&t}},{key:"isShallow",get:function e(){return this._shallow}}]);return t}(f["e"]);t["a"]=C},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(8);var o=r.n(a);var s=r(4);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=Math.PI*2;var f=function(){function e(t){u(this,e);this._editor=t;this._serializeOperations=this._serializeOperations.bind(this)}l(e,[{key:"serialize",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this._options=s["q"].defaults(t,{image:true});var r={version:this.constructor.version};return this._serializeInputImage(r).then(this._serializeOperations)}},{key:"_serializeInputImage",value:function e(t){var r=this._editor.getImage();var n=r.width,i=r.height;if(!this._options.image){t.inputImage={width:n,height:i};return o.a.resolve(t)}var a=s["q"].createCanvas();a.width=r.width;a.height=r.height;var l=a.getContext("2d");l.drawImage(r,0,0);var u=a.toDataURL(s["f"].PNG);t.inputImage={type:s["f"].PNG,data:u.replace(/^data:image\/(.*?);base64,/,""),width:n,height:i};return o.a.resolve(t)}},{key:"_serializeOperations",value:function e(t){var r=this;var n=[];var i=this._editor.operations.getStack();i.forEach(function(e){var t=r._serializeOperation(e,n);if(t){n.push(t)}});t.operations=n.filter(function(e){return e});return o.a.resolve(t)}},{key:"_serializeOperation",value:function e(t,r){switch(t.constructor.identifier){case"transform":return this._serializeTransformOperation(t);case"orientation":return this._serializeOrientationOperation(t);case"filter":return this._serializeFilterOperation(t);case"adjustments":return this._serializeAdjustmentsOperation(t);case"sprite":return this._serializeSpriteOperation(t,r);case"radial-focus":return this._serializeRadialFocusOperation(t);case"mirrored-focus":return this._serializeLinearFocusOperation(t);default:s["h"].warn("Unable to serialize operation of type "+t.constructor.identifier)}}},{key:"_serializeTransformOperation",value:function e(t){var r=t.serializeOptions(["start","end","rotation"],true);r.rotation=(r.rotation+c)%c;return{type:"crop",options:r}}},{key:"_serializeOrientationOperation",value:function e(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],true)}}},{key:"_serializeFilterOperation",value:function e(t){if(t.getIdentifier()==="identity")return null;return{type:"filter",options:{intensity:t.getIntensity(),name:t.getIdentifier()}}}},{key:"_serializeAdjustmentsOperation",value:function e(t){var r=t.availableOptions;var n=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"];var i={};n.forEach(function(e){var n=r[e];var a=t.getOption(e);var o=n.minValue,s=n.midValue,l=n.maxValue;i[e]=a<=s?(a-o)/(s-o)-1:(a-s)/(l-s)});return{type:"adjustments",options:i}}},{key:"_serializeSpriteOperation",value:function e(t,r){var n=this;var i=r.filter(function(e){return e.type==="sprite"});var a=void 0;var o=true;if(i.length){a=i.pop();o=false}else{a={type:"sprite",options:{sprites:[]}}}t.getSprites().forEach(function(e){var r=null;if(e instanceof t.constructor.StickerSprite){r=n._serializeSticker(t,e)}else if(e instanceof t.constructor.TextSprite){r=n._serializeText(t,e)}else if(e instanceof t.constructor.BrushSprite){r=n._serializeBrush(t,e)}else if(e instanceof t.constructor.TextDesignSprite){r=n._serializeTextDesign&&n._serializeTextDesign(t,e)}if(r){a.options.sprites.push(r)}});if(o){return a}}},{key:"_serializeSticker",value:function e(t,r){var n=r.getAdjustments();var i=r.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],true);i.name=i.identifier;delete i.identifier;i.rotation=(i.rotation+c)%c;var a=n.availableOptions;i.adjustments={brightness:n.getBrightness()-a.brightness.default,saturation:n.getSaturation()-a.saturation.default,contrast:n.getContrast()-a.contrast.default};return{type:"sticker",options:i}}},{key:"_serializeText",value:function e(t,r){var n=r.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],true);n.rotation=(n.rotation+c)%c;return{type:"text",options:n}}},{key:"_serializeBrush",value:function e(t,r){var n=this;return{type:"brush",options:{paths:r.getPaths().map(function(e){return n._serializePath(e)})}}}},{key:"_serializePath",value:function e(t){var r=t.getBrush().serializeOptions(["color","size"],true);r.points=t.getControlPoints().map(function(e){return e.getPosition().toObject()});return r}},{key:"_serializeRadialFocusOperation",value:function e(t){return{type:"focus",options:{type:"radial",options:t.serializeOptions(["position","radius","gradientRadius","blurRadius"],true)}}}},{key:"_serializeLinearFocusOperation",value:function e(t){return{type:"focus",options:{type:"linear",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],true)}}}},{key:"_getInputDimensionsForOperation",value:function e(t){var r=false;var n=this._editor.getInputDimensions();this._editor.operations.getStack().forEach(function(e){if(e===t)r=true;if(r)return;n=e.getNewDimensions(n)});return n}}]);return e}();t["a"]=f;f.version="1.0.0"},function(e,t,r){"use strict";var n=r(2);var i=r.n(n);var a=r(3);var o=r.n(a);var s=r(0);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(109);var p=r.n(f);var v=r(8);var h=r.n(v);var d=r(4);var m=r(110);var _=r(50);var g=r(111);var y=r(51);var b=r(74);var k=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;l()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=o()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)i.a?i()(e,t):e.__proto__=t}function S(e){return function(){var t=e.apply(this,arguments);return new h.a(function(e,r){function n(i,a){try{var o=t[i](a);var s=o.value}catch(e){r(e);return}if(o.done){e(s)}else{return h.a.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function E(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var x=void 0;if(typeof d["p"].Operations.SpriteOperation!=="undefined"){x=d["p"].Operations.SpriteOperation.BrushSprite}var T=function(){function e(t,r){E(this,e);this._editor=t;this._ui=this._editor.getUI();this._data=r;this._filterManager=new m["a"](this._ui,this._getOptions("filter"));this._stickerManager=new _["a"](this._ui,this._getOptions("sticker"));this._brushManager=new g["a"](this._ui,this._getOptions("brush"));this._fontManager=new y["a"](this._ui,this._getOptions("text"))}k(e,[{key:"_getOptions",value:function e(t){var r=this._editor.controls;var n={};if(r&&r.get(t)){n=r.get(t).defaultOptions}var i=this._editor.getOptions();return d["q"].deepDefaults({},i.editor.controlsOptions[t]||{},n)}},{key:"deserialize",value:function e(){var t=this;return this._validateVersion().then(function(){return t._deserializeInputImage()}).then(function(){return t._deserializeOperations()})}},{key:"_validateVersion",value:function e(){if(this._data.version!==this.constructor.version){return h.a.reject(new Error("Invalid version "+this._data.version+", expected "+this.constructor.version))}return h.a.resolve()}},{key:"_deserializeInputImage",value:function e(){var t=this;return new h.a(function(e,r){var n=t._data.inputImage,i=n.data,a=n.type;if(i&&a){var o=new window.Image;o.addEventListener("load",function(){t._editor.setImage(o);e()});o.src="data:"+a+";base64,"+i}else{e()}})}},{key:"_deserializeOperations",value:function(){var e=S(p.a.mark(function e(){var t,r,n,i,a;return p.a.wrap(function e(o){while(1){switch(o.prev=o.next){case 0:t=this._data.operations;r=[];n=0;case 3:if(!(n<t.length)){o.next=12;break}i=t[n];o.next=7;return this._deserializeOperation(i);case 7:a=o.sent;r.push(a);case 9:n++;o.next=3;break;case 12:return o.abrupt("return",r);case 13:case"end":return o.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_deserializeOperation",value:function e(t){switch(t.type){case"crop":return this._deserializeCropOperation(t);case"orientation":return this._deserializeOrientationOperation(t);case"filter":return this._deserializeFilterOperation(t);case"adjustments":return this._deserializeAdjustmentsOperation(t);case"sprite":return this._deserializeSpriteOperation(t);case"focus":return this._deserializeFocusOperation(t)}}},{key:"_deserializeCropOperation",value:function e(t){var r=t.options;var n=r.rotation;var i=d["v"].fromObject(r.start);var a=d["v"].fromObject(r.end);if(n>Math.PI){n-=Math.PI*2}var o={start:i,end:a};if(typeof n!=="undefined"){o.rotation=n}var s=this._editor.operations.getOrCreate("transform");this._editor.broadcastTransform(s,o);s.set(o);return h.a.resolve(s)}},{key:"_deserializeOrientationOperation",value:function e(t){var r=t.options;var n=this._editor.operations.getOrCreate("orientation");if(!n)return h.a.resolve();n.set(r);return h.a.resolve(n)}},{key:"_deserializeFilterOperation",value:function e(t){var r=this;var n=t.options;if(!this._filterManager.getFilterByIdentifier(n.name)){d["h"].warn("Deserializer","Unknown filter `"+n.name+"`");return h.a.resolve()}return this._filterManager.instantiateFilterWithIdentifier(n.name).then(function(e){var t=r._editor.operations.getOrCreate("filter");t.set({identifier:n.name,filter:e,intensity:n.intensity});return t})}},{key:"_deserializeAdjustmentsOperation",value:function e(t){var r=d["p"].Operations.AdjustmentsOperation;var n=t.options;var i=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"];var a={};i.forEach(function(e){if(typeof n[e]==="undefined")return;var t=r.prototype.availableOptions[e],i=t.minValue,o=t.midValue,s=t.maxValue;var l=n[e];l=l<0?o+(o-i)*l:o+(s-o)*l;a[e]=l});return h.a.resolve(this._editor.operations.getOrCreate("adjustments",a))}},{key:"_deserializeSpriteOperation",value:function e(t){var r=this;var n=t.options;var i=this._editor.operations.getOrCreate("sprite");if(!i)return h.a.resolve();var a=n.sprites.map(function(e){return r._deserializeSprite(i,e)}).filter(function(e){return e});return h.a.all(a).then(function(e){i.setSprites(e.filter(function(e){return e}));return i})}},{key:"_deserializeSprite",value:function e(t,r){switch(r.type){case"sticker":return this._deserializeSticker(t,r);case"text":return this._deserializeText(t,r);case"brush":return this._deserializeBrush(t,r);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(t,r)}}},{key:"_deserializeSticker",value:function e(t,r){var n=this;var i=d["p"].Operations.SpriteOperation;var a=r.options;var o=this._stickerManager.getStickerByIdentifier(a.name);var s=this._stickerManager.getURLForSticker(o);if(!o){d["h"].warn("Deserializer","Unknown sticker '"+a.name+"'. Skipping sprite.");return h.a.resolve()}return new h.a(function(e,r){var o=new window.Image;o.addEventListener("load",function(){var r=i.StickerSprite.prototype.availableOptions.adjustments.structure;var n=a.rotation,s=a.flipHorizontally,l=a.flipVertically;var u={identifier:a.name,image:o,position:d["v"].fromObject(a.position),dimensions:d["v"].fromObject(a.dimensions),rotation:n,flipHorizontally:s,flipVertically:l,adjustments:{}};if(typeof a.adjustments!=="undefined"){["brightness","contrast","saturation"].forEach(function(e){if(typeof a.adjustments[e]!=="undefined"){u.adjustments[e]=a.adjustments[e]+r[e].default}})}e(t.createSticker(u))});o.crossOrigin=n._editor.getCrossOrigin();o.src=n._editor.getUI().getAssetPath(s)})}},{key:"_deserializeText",value:function e(t,r){var n=r.options;var i=n.fontSize,a=n.lineHeight,o=n.fontFamily,s=n.fontWeight,l=n.alignment,u=n.rotation,c=n.maxWidth,f=n.color,p=n.backgroundColor;var v=new b["a"](this._ui);var h=this._fontManager.getFontByFontFamily(o);if(!h)h=this._fontManager.getDefaultFont();v.setFonts([h]);return v.load().then(function(){return t.createText({fontSize:i,lineHeight:a,fontFamily:o,fontWeight:s,alignment:l,rotation:u,maxWidth:c,text:n.text,color:d["c"].fromArray(f),backgroundColor:d["c"].fromArray(p),position:d["v"].fromObject(n.position)})})}},{key:"_deserializeBrush",value:function e(t,r){var n=this;var i=r.options;var a=i.paths;var o=t.createBrush();a.forEach(function(e){n._deserializeBrushPath(o,e)});return h.a.resolve(o)}},{key:"_deserializeBrushPath",value:function e(t,r){var n=r.points;var i=this._createBrushForPath(r);var a=t.createPath(i);a.setClosed(true);n.forEach(function(e){a.addControlPoint(d["v"].fromObject(e))})}},{key:"_createBrushForPath",value:function e(t){var r=t.color,n=t.size;var i=d["c"].fromArray(r);var a={color:i,size:n};var o=this._brushManager.getFirstBrush();if(o.prototype&&o.prototype instanceof x){var s=o;return new s(a)}else{var l=d["q"].extend({},o);delete l.image;var u=function(e){C(t,e);function t(){E(this,t);return w(this,(t.__proto__||c()(t)).apply(this,arguments))}return t}(x);u.identifier=o.identifier;return new u(d["q"].extend({},l,a))}}},{key:"_deserializeFocusOperation",value:function e(t){var r=t.options.options;switch(t.options.type){case"radial":{var n=r.position,i=r.radius,a=r.gradientRadius,o=r.blurRadius;return h.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:d["v"].fromObject(n),radius:i,gradientRadius:a,blurRadius:o}))}case"linear":{var s=r.start,l=r.end,u=r.size,c=r.gradientSize,f=r.blurRadius;return h.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:d["v"].fromObject(s),end:d["v"].fromObject(l),size:u,gradientSize:c,blurRadius:f}))}}}},{key:"_getInputDimensionsForOperation",value:function e(t){var r=false;var n=this._editor.getInputDimensions();this._editor.operations.getStack().forEach(function(e){if(e===t)r=true;if(r)return;n=e.getNewDimensions(n)});return n}}]);return e}();t["a"]=T;T.version="1.0.0"},function(e,t,r){e.exports=r(235)},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(8);var o=r.n(a);var s=r(4);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(t,r){u(this,e);this._ui=t;this._options=r;this._categoriesById={};this._filtersByIdentifier={identity:s["p"].Operations.FilterOperation.Filters.IdentityFilter};this._categories=s["r"].DEFAULTS.FILTERS.slice(0);this._initCategories()}l(e,[{key:"instantiateFilterWithIdentifier",value:function e(t){var r=this;var n=this.getFilterByIdentifier(t);if(!n){return o.a.reject(new Error("Unknown filter with identifier `"+t+"`!"))}if(!(n.prototype instanceof s["p"].Operations.FilterOperation.Filter)){var i=n.lutImage,a=n.resolution,l=n.horizontalTileCount,u=n.verticalTileCount;var c=void 0;if(this._ui.getPreloader){c=this._ui.getPreloader().getAsset(i)}var f=void 0;if(c){f=o.a.resolve(c)}else{f=s["g"].load(this._ui.getAssetPath(i))}return f.then(function(e){return s["g"].load(r._ui.getAssetPath(i)).then(function(e){return new s["p"].Operations.FilterOperation.Filters.ThreeDLUTFilter({image:e,resolution:a,horizontalTileCount:l,verticalTileCount:u})})})}else{return o.a.resolve(new n)}}},{key:"_initCategories",value:function e(){var t=this;if(this._options.categories){if(this._options.replaceCategories){this._categories=this._options.categories}else{this._categories=s["u"].mergeCategories(this._categories,this._options.categories,"filters")}}if(this._options.availableFilters){var r=[];this._categories.forEach(function(e){var n=e.filters.filter(function(e){return t._options.availableFilters.indexOf(e.identifier)!==-1});if(n.length>0){r.push({identifier:e.identifier,defaultName:e.defaultName,filters:n})}});this._categories=r}var n={identifier:"all",defaultName:"All",filters:this._categories.length<=0?[]:this._categories.map(function(e){return e.filters}).reduce(function(e,t){return e.concat(t)})};this._categories.unshift(n);this._categoriesById.all=n;this._categories.forEach(function(e){t._categoriesById[e.identifier]=e});n.filters.forEach(function(e){t._filtersByIdentifier[e.identifier]=e})}},{key:"getFiltersForCategory",value:function e(t){if(!this._categoriesById[t]){throw new Error("Unknown filter category '"+t+"'")}return this._categoriesById[t].filters}},{key:"getFilterByIdentifier",value:function e(t){return this._filtersByIdentifier[t]}},{key:"getCategories",value:function e(){return this._categories}},{key:"getCategoryByIdentifier",value:function e(t){return this._categoriesById[t]}}]);return e}();t["a"]=c},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(t,r){s(this,e);this._ui=t;this._options=r;this._brushes=[];this._brushesById={};this._addBrushes(a["d"].DEFAULTS.BRUSHES);var n=this._options,i=n.brushes,o=n.replaceBrushes,l=n.availableBrushes;if(this._options.brushes){this._addBrushes(i,o)}if(l){this._brushes=this._brushes.filter(function(e){return l.indexOf(e.identifier)!==-1})}}o(e,[{key:"_addBrushes",value:function e(t,r){var n=this;if(r){this._brushes=[];this._brushesById={}}t.forEach(function(e){n._brushes.push(e);n._brushesById[e.identifier]=e})}},{key:"getBrushByIdentifier",value:function e(t){return this._brushesById[t]}},{key:"getBrushes",value:function e(){return this._brushes}},{key:"getFirstBrush",value:function e(){return this._brushes[0]}}]);return e}();t["a"]=l},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(7);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"};var g=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}v(t,[{key:"getLabel",value:function e(){var t=_[this._options.fontWeight];switch(this._options.fontStyle){case"italic":t+=" Italic";break}return t}}]);return t}(f["Configurable"]);t["a"]=g;g.prototype.availableOptions={identifier:{type:f["OptionType"].STRING,required:true},fontFamily:{type:f["OptionType"].STRING,required:true},fontWeight:{type:f["OptionType"].ALL,default:400},fontStyle:{type:f["OptionType"].STRING,default:"normal"},textMetrics:{type:f["OptionType"].OBJECT,default:null},provider:{type:f["OptionType"].STRING,available:["google","file"]},filePath:{type:f["OptionType"].STRING},default:{type:f["OptionType"].BOOLEAN,default:false},font:{type:f["OptionType"].OBJECT}}},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(8);var o=r.n(a);var s=r(239);var l=r(7);var u=r.n(l);var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var p=function(){function e(t){f(this,e);this._ui=t;this._fonts=[];this._observers=[]}c(e,[{key:"add",value:function e(t){this._fonts.push(t)}},{key:"load",value:function e(){var t=this;if(this._fonts.length===0){return o.a.resolve()}this._observers=[];this._fonts.forEach(function(e){t._observers.push(new s["a"](e))});return l["Utils"].executePromises(this._observers.map(function(e){return e.observe()}))}},{key:"dispose",value:function e(){this._observers.forEach(function(e){return e.dispose()})}}]);return e}();t["a"]=p},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(107);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var m=Math.PI*2;var _=function(e){d(t,e);function t(){v(this,t);return h(this,(t.__proto__||c()(t)).apply(this,arguments))}p(t,[{key:"_serializeTransformOperation",value:function e(t){var r=t.serializeOptions(["start","end","rotation","textureScale"],true);r.rotation=(r.rotation+m)%m;if(r.textureScale!==1){r.dimensions=t.getNewDimensions(t.getInputDimensions(false))}delete r.textureScale;return{type:"crop",options:r}}}]);return t}(f["a"]);t["a"]=_;_.version="1.0.1"},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(8);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(4);var m=r(108);var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var g=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var w=function(e){k(t,e);function t(){y(this,t);return b(this,(t.__proto__||h()(t)).apply(this,arguments))}_(t,[{key:"_deserializeOperation",value:function e(r){if(r.type==="selective-blur"){return this._deserializeSelectiveBlurOperation(r)}return g(t.prototype.__proto__||h()(t.prototype),"_deserializeOperation",this).call(this,r)}},{key:"_deserializeCropOperation",value:function e(t){var r=t.options;var n=r.rotation;var i=d["v"].fromObject(r.start);var a=d["v"].fromObject(r.end);var o=r.dimensions?d["v"].fromObject(r.dimensions):null;if(n>Math.PI){n-=Math.PI*2}var s={start:i,end:a};if(typeof n!=="undefined")s.rotation=n;var l=this._editor.operations.getOrCreate("transform");if(!l)return p.a.resolve();this._editor.broadcastTransform(l,s);l.set(s);if(o){var u=a.clone().subtract(i);var c=l.getInputDimensions(false).multiply(u);l.setTextureScale(o.x/c.x)}return p.a.resolve(l)}}]);return t}(m["a"]);t["a"]=w;w.version="1.0.1"},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o;function s(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var l=a["p"].Engine.Filters.OverlayFilter;t["a"]=(o={},s(o,l.BLEND_MODES.NORMAL,"normal"),s(o,l.BLEND_MODES.OVERLAY,"overlay"),s(o,l.BLEND_MODES.HARD_LIGHT,"hard light"),s(o,l.BLEND_MODES.SOFT_LIGHT,"soft light"),s(o,l.BLEND_MODES.MULTIPLY,"multiply"),s(o,l.BLEND_MODES.DARKEN,"darken"),s(o,l.BLEND_MODES.LIGHTEN,"lighten"),s(o,l.BLEND_MODES.SCREEN,"screen"),s(o,l.BLEND_MODES.COLOR_BURN,"color burn"),o)},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(t,r){s(this,e);this._ui=t;this._options=r;this._categoriesById={};this._categories=[];this._framesById={};this._addCategories(a["r"].DEFAULTS.FRAME_CATEGORIES);var n=this._options,i=n.categories,o=n.replaceCategories;if(this._options.categories){this._addCategories(i,o)}else{this._updateAllCategory()}}o(e,[{key:"_addCategories",value:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(n){this._categories=t.slice(0)}else{this._categories=a["u"].mergeCategories(this._categories,t,"frames")}this._categoriesById={};this._categories.forEach(function(e){r._categoriesById[e.identifier]=e});var i=this._options.availableFrames;if(i){this._categories.forEach(function(e){e.frames=e.frames.filter(function(e){return i.indexOf(e.identifier)!==-1})})}this._categories.forEach(function(e){e.frames.forEach(function(e){r._framesById[e.identifier]=e})});this._updateAllCategory()}},{key:"_updateAllCategory",value:function e(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(function(e){return e.frames}).reduce(function(e,t){return e.concat(t)},[])};this._categoriesById.all=this._allCategory}},{key:"getFramesForCategory",value:function e(t){if(!this._categoriesById[t]){throw new Error("Unknown frame category '"+t+"'")}return this._categoriesById[t].frames}},{key:"getFrameByIdentifier",value:function e(t){return this._framesById[t]}},{key:"getCategories",value:function e(){return this._categories}},{key:"getCategory",value:function e(t){return this._categoriesById[t]}}]);return e}();t["a"]=l},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(t,r){var n=this;s(this,e);this._ui=t;this._options=r;this._overlays=a["r"].DEFAULTS.OVERLAYS.slice(0);this._overlaysByIdentifier={};if(r.overlays){if(r.replaceOverlays){this._overlays=r.overlays}else{this._overlays=this._overlays.concat(r.overlays)}}if(r.availableOverlays){this._overlays=this._overlays.filter(function(e){return r.availableOverlays.indexOf(e.identifier)!==-1})}this._overlays.forEach(function(e){n._overlaysByIdentifier[e.identifier]=e})}o(e,[{key:"getOverlays",value:function e(){return this._overlays}},{key:"getOverlayByIdentifier",value:function e(t){return this._overlaysByIdentifier[t]}}]);return e}();t["a"]=l},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g=v["p"].OptionType;var y=function(e){_(t,e);function t(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};d(this,t);var n=m(this,(t.__proto__||p()(t)).call(this,r));n._loaded=false;n._loading=false;n._ui=e;n._frame=v["p"].Utils.deepClone(n._options);return n}h(t,[{key:"load",value:function e(){var t=this;if(this._loaded)return c.a.resolve();if(this._loading)return c.a.reject(new Error("Called Frame#load while it's already loading"));this._loading=true;var r=this._frame.imageGroups;var n=[];["top","left","right","bottom"].forEach(function(e){if(!(e in r))return;var i=r[e];["start","mid","end"].forEach(function(r){if(!(r in i))return;n.push(t._loadPart(e,r))})});return c.a.all(n).then(function(){t._loaded=true;t._loading=false}).catch(function(e){t._loaded=false;t._loading=false})}},{key:"_loadPart",value:function e(t,r){var n=this;return new c.a(function(e,i){var a=n._frame.imageGroups;var o=a[t][r];var s=o;if(typeof o!=="string"&&"image"in o){s=o.image}var l=new window.Image;l.addEventListener("load",function(){if(typeof o!=="string"){n._frame.imageGroups[t][r].image=l}else{n._frame.imageGroups[t][r]=l}e(l)});l.addEventListener("error",function(){i(new Error("Failed to load image at "+s))});l.crossOrigin=n._ui.getEditor().getCrossOrigin();l.src=n._ui.getAssetPath(s)})}},{key:"getFrame",value:function e(){return this._frame}}]);return t}(v["p"].Configurable);t["a"]=y;y.prototype.availableOptions={identifier:{type:g.STRING,required:true},defaultName:{type:g.STRING},thumbnail:{type:g.STRING},tintable:{type:g.BOOLEAN,default:false},layoutMode:{type:g.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:g.OBJECT,required:true}}},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(75);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var m=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){_(this,t);return g(this,(t.__proto__||p()(t)).apply(this,arguments))}d(t,[{key:"serialize",value:function e(){var r=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return m(t.prototype.__proto__||p()(t.prototype),"serialize",this).call(this,n).then(function(e){e.meta={platform:"html5",version:r._editor.getSDK().version,createdAt:v["q"].ISODateString(new Date)};e.image=e.inputImage;delete e.inputImage;return e})}},{key:"_serializeSticker",value:function e(r,n){var i=m(t.prototype.__proto__||p()(t.prototype),"_serializeSticker",this).call(this,r,n);i.options.alpha=n.getAlpha();if(i.options.tintColor){i.options.tintColor={rgba:i.options.tintColor}}return i}},{key:"_serializeText",value:function e(r,n){var i=m(t.prototype.__proto__||p()(t.prototype),"_serializeText",this).call(this,r,n);i.options.color={rgba:i.options.color};i.options.backgroundColor={rgba:i.options.backgroundColor};i.options.flipHorizontally=false;i.options.flipVertically=false;delete i.options.fontWeight;return i}},{key:"_serializePath",value:function e(r){var n=m(t.prototype.__proto__||p()(t.prototype),"_serializePath",this).call(this,r);delete n.hardness;delete n.size;delete n.color;var i=r.getBrush();n.brush=i.serializeOptions(["identifier","size","color"],true);if(typeof n.brush.identifier==="undefined"){delete n.brush.identifier}n.brush.color={rgba:n.brush.color};var a=i.getOption("hardness");if(a!=="undefined"){n.brush.hardness=a}return n}},{key:"_serializeFrameOperation",value:function e(r,n){m(t.prototype.__proto__||p()(t.prototype),"_serializeFrameOperation",this).call(this,r,n);var i=n.filter(function(e){return e.type==="sprite"});var a=void 0;if(i.length){a=i.pop();var o=a.options.sprites.filter(function(e){return e.type==="frame"})[0];var s=r.getTintColor();if(!s.equals(new v["c"](1,1,1,0))){o.options.tintColor={rgba:r.serializeOption("tintColor",true)}}var l=r.serializeOptions(["scale","alpha"],true);o.options=v["q"].extend(o.options,l);o.options.size=o.options.scale;delete o.options.scale}}},{key:"_serializeTransformOperation",value:function e(r){var n=m(t.prototype.__proto__||p()(t.prototype),"_serializeTransformOperation",this).call(this,r);if(r._ratio){n.options.meta={identifier:r._ratio.identifier}}delete n.options.scale;return n}},{key:"_serializeAdjustmentsOperation",value:function e(r){var n=m(t.prototype.__proto__||p()(t.prototype),"_serializeAdjustmentsOperation",this).call(this,r);var i=r.availableOptions;var a=i.gamma;var o=r.getGamma();var s=a.minValue,l=a.midValue,u=a.maxValue;n.options.gamma=o<=l?(o-s)/(l-s)-1:(o-l)/(u-l);return n}},{key:"_serializeOperation",value:function e(r,n){switch(r.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(r);case"linear-focus":return this._serializeLinearFocusOperation(r);case"blur":return this._serializeBlurOperation(r);default:return m(t.prototype.__proto__||p()(t.prototype),"_serializeOperation",this).call(this,r,n)}}},{key:"_serializeMirroredFocusOperation",value:function e(t){return{type:"focus",options:{type:"mirrored",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],true)}}}},{key:"_serializeLinearFocusOperation",value:function e(t){var r=t.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],true);r.start=r.controlPoint1;delete r.controlPoint1;r.end=r.controlPoint2;delete r.controlPoint2;return{type:"focus",options:{type:"linear",options:r}}}},{key:"_serializeBlurOperation",value:function e(t){return{type:"focus",options:{type:"gaussian",options:t.serializeOptions(["blurRadius"],true)}}}}]);return t}(h["a"]);t["a"]=b;b.version="3.0.0"},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(6);var l=r.n(s);var u=r(2);var c=r.n(u);var f=r(3);var p=r.n(f);var v=r(8);var h=r.n(v);var d=r(1);var m=r.n(d);var _=r(4);var g=r(76);var y=r(50);var b=r(77);var k=r(22);var w=r(51);var C=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var S=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var E=function e(t,r,n){if(t===null)t=Function.prototype;var i=l()(t,r);if(i===undefined){var a=m()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(n)}};function x(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function T(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)c.a?c()(e,t):e.__proto__=t}var R=void 0;if(typeof _["p"].Operations.SpriteOperation!=="undefined"){R=_["p"].Operations.SpriteOperation.BrushSprite.Brush}var D=function(e){O(t,e);function t(){x(this,t);return T(this,(t.__proto__||m()(t)).apply(this,arguments))}S(t,[{key:"_deserializeSticker",value:function e(t,r){var n=_["p"].Operations.SpriteOperation;var i=r.options;var a=this._stickerManager.getStickerByIdentifier(i.identifier);if(!a){_["h"].warn("Deserializer","Unknown sticker `"+i.identifier+"`. Skipping sprite.");return h.a.resolve()}var o=y["a"].getURLForSticker(a,"base");var s=this._editor.getUI().getAssetPath(o);var l=t.getInputDimensions(false);return k["a"].load(s).then(function(e){var r=n.StickerSprite.prototype.availableOptions.adjustments.structure;var o=i.rotation,s=i.flipHorizontally,u=i.flipVertically;var c={identifier:i.identifier,image:e,position:_["v"].fromObject(i.position),dimensions:_["v"].fromObject(i.dimensions).multiply(l.min()),rotation:o||0,flipHorizontally:s,flipVertically:u,adjustments:{}};if(typeof i.adjustments!=="undefined"){["brightness","contrast","saturation"].forEach(function(e){if(typeof i.adjustments[e]!=="undefined"){c.adjustments[e]=i.adjustments[e]+r[e].default}})}if(typeof i.tintColor!=="undefined"&&typeof a.tintMode!=="undefined"){c.tintColor=_["c"].fromArray(i.tintColor.rgba);c.tintMode=a.tintMode}if(typeof i.alpha!=="undefined"){c.alpha=i.alpha}return t.createSticker(c)})}},{key:"_deserializeTransformOperation",value:function e(r){return E(t.prototype.__proto__||m()(t.prototype),"_deserializeTransformOperation",this).call(this,r).then(function(e){if(!e)return;e._ratio=null;return e})}},{key:"_deserializeInputImage",value:function e(){var t=this;var r=this._data.image,n=r.data,i=r.type,a=r.uri;if(n&&i){a="data:"+i+";base64,"+n}if(a){return k["a"].load(a).then(function(e){t._editor.setImage(e)})}else{return h.a.resolve()}}},{key:"_deserializeAdjustmentsOperation",value:function e(r){var n=_["p"].Operations.AdjustmentsOperation;return E(t.prototype.__proto__||m()(t.prototype),"_deserializeAdjustmentsOperation",this).call(this,r).then(function(e){if(!e)return null;var t=r.options;if(typeof t.gamma!=="undefined"){var i=n.prototype.availableOptions.gamma,a=i.minValue,o=i.midValue,s=i.maxValue;e.setGamma(t.gamma<0?o+(o-a)*t.gamma:o+(s-o)*t.gamma)}return e})}},{key:"_deserializeFocusOperation",value:function e(r){var n=r.options.options;switch(r.options.type){case"radial":return E(t.prototype.__proto__||m()(t.prototype),"_deserializeFocusOperation",this).call(this,r);case"linear":{var i=n.start,a=n.end,o=n.blurRadius;return h.a.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:_["v"].fromObject(i),controlPoint2:_["v"].fromObject(a),blurRadius:o}))}case"mirrored":{var s=n.start,l=n.end,u=n.size,c=n.gradientSize,f=n.blurRadius;return h.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:_["v"].fromObject(s),end:_["v"].fromObject(l),size:u,gradientSize:c,blurRadius:f}))}case"gaussian":{var p=n.blurRadius;return h.a.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:p}))}}}},{key:"_deserializeText",value:function e(t,r){var n=r.options;var i=n.fontSize,a=n.lineHeight,o=n.fontIdentifier,s=n.alignment,l=n.rotation,u=n.maxWidth,c=n.color,f=n.backgroundColor;var p=this._ui.getFontLoader();var v=this._fontManager.getVariationByIdentifier(o);if(!v){v=this._fontManager.getDefaultVariation()}else{p.setFonts([v.getFont()])}return p.load().then(function(){var e=t.getInputDimensions(false);var r=u*e.min()/e.x;return t.createText({fontSize:i,lineHeight:a,fontFamily:v.getFontFamily(),fontWeight:v.getFontWeight(),fontIdentifier:v.getIdentifier(),textMetrics:v.getTextMetrics(),alignment:s,rotation:l,maxWidth:r,text:n.text,color:_["c"].fromArray(c.rgba),backgroundColor:_["c"].fromArray(f.rgba),position:_["v"].fromObject(n.position)})})}},{key:"_createBrushForPath",value:function e(t){var r=t.brush,n=r.identifier,i=r.color,a=r.size,o=r.hardness;var s=_["c"].fromArray(i.rgba);var l={color:s,size:a};if(typeof o!=="undefined"){l.hardness=o}var u=this._brushManager.getBrushByIdentifier(n);if(!u){u=this._brushManager.getFirstBrush()}if(u.prototype&&u.prototype instanceof R){var c=u;return new c(l)}else{var f=_["q"].extend({},u);delete f.image;var p=function(e){O(t,e);function t(){x(this,t);return T(this,(t.__proto__||m()(t)).apply(this,arguments))}return t}(R);p.identifier=u.identifier;return new p(_["q"].extend({},f,l))}}},{key:"_deserializeFrame",value:function e(r,n){var i=this;return E(t.prototype.__proto__||m()(t.prototype),"_deserializeFrame",this).call(this,r,n).then(function(){var e=i._editor.operations.get("frame");var t=n.options,r=t.size,a=t.alpha,o=t.tintColor;var s={};if(typeof r!=="undefined"){s.scale=r}if(typeof a!=="undefined"){s.alpha=a}if(typeof o!=="undefined"){s.tintColor=_["c"].fromArray(o.rgba)}e.set(s)})}},{key:"_deserializeTextDesign",value:function e(t,r){var n=this;var i=r.options;var a=i.position,o=i.rotation,s=i.flipHorizontally,l=i.flipVertically,u=i.text,c=i.color,f=i.width,p=i.seed,v=i.inverted,h=i.identifier;var d=new b["a"](this._ui,this._getOptions("textdesign"));var m=new w["a"](this._ui,{fonts:_["d"].DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});var g=t.constructor.TextDesignSprite.AssetManager;var y=this._ui.getFontLoader();var k=d.getLayoutByIdentifier(h);var S=new k;y.setFonts(m.getFonts());g.setFonts(C({},g.getFonts(),m.getVariationsByIdentifier()));return y.load().then(function(){var e=S.getImagePaths().map(function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}});return g.loadImages(e).then(function(){S.onImagesLoaded();return t.createTextDesign({position:a,rotation:o,flipHorizontally:s,flipVertically:l,text:u,color:_["c"].fromArray(c.rgba),width:f,seed:p,inverted:v,layout:S})})})}}]);return t}(g["a"]);t["a"]=D;D.version="3.0.0"},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(t){s(this,e);this._options=t;this._categoriesById={};this._categories=[];this._initCategories()}o(e,[{key:"_initCategories",value:function e(){var t=this;var r=this._options,n=r.replaceCategories,i=r.categories;var o=a["d"].DEFAULTS.TRANSFORM_RATIO_CATEGORIES;if(!i){this._categories=a["u"].cloneCategories(o,"ratios")}else{if(n){this._categories=a["u"].cloneCategories(i,"ratios")}else{this._categories=a["u"].mergeCategories(o,i,"ratios")}}this._categoriesById={};this._categories.forEach(function(e){t._categoriesById[e.name]=e})}},{key:"getCategories",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var r=this._categories.slice(0);if(t){var n={name:"all",ratios:this._categories.map(function(e){return e.ratios}).reduce(function(e,t){return e.concat(t)})};r.unshift(n)}return r}},{key:"getRatiosForCategory",value:function e(t){var r=this._options.availableRatios;if(!r)return t.ratios;return t.ratios.filter(function(e){return r.indexOf(e.identifier)!==-1})}},{key:"hasRatioValue",value:function e(t){var r=this;var n=false;this._categories.forEach(function(e){r.getRatiosForCategory(e).forEach(function(e){if(e.ratio){if(e.ratio==="*"){n=true}else if(e.ratio===t){n=true}}else if(e.dimension){var r=e.dimension.y/e.dimension.x;if(r===t){n=true}}})});return n}}]);return e}();t["a"]=l},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(6);var l=r.n(s);var u=r(2);var c=r.n(u);var f=r(3);var p=r.n(f);var v=r(8);var h=r.n(v);var d=r(1);var m=r.n(d);var _=r(4);var g=r(52);var y=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var k=function e(t,r,n){if(t===null)t=Function.prototype;var i=l()(t,r);if(i===undefined){var a=m()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(n)}};function w(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function C(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function S(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)c.a?c()(e,t):e.__proto__=t}var x="production"==="test";var T=function(e){E(t,e);function t(){var e;C(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=S(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onBackButtonClick");a._needsStyleFixes=true;a.state={backButton:false};return a}b(t,[{key:"_onBackButtonClick",value:function e(){}},{key:"setSharedState",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;k(t.prototype.__proto__||m()(t.prototype),"setSharedState",this).call(this,r,n);i&&this.props.controls.updateSharedState()}},{key:"fixStyles",value:function e(){var t=this;if(_["u"].Browser.isIElte(10)){if(this._table)this._table.style.height="100%";if(this._container)this._container.style.height="100%";return new h.a(function(e){Object(_["z"])(function(){if(!t._root)return;var r=t._root.offsetHeight;if(t._container&&t._header){var n=t._header.offsetHeight;t._container.style.height=r-n+"px"}if(t._table)t._table.style.height=r+"px";if(t._scrollbar){t._scrollbar.update()}e()},1e3)})}else if(this._scrollbar){this._scrollbar.update()}return h.a.resolve()}},{key:"_getRootProps",value:function e(){return{}}},{key:"_renderContent",value:function e(){return _["l"].createElement("div",null)}},{key:"render",value:function e(){var t=this;var r=this.constructor.RootElement;var n=this._getRootProps(),i=w(n,[]);var a=this.context.screen.state.currentControl;var o=a===null;var s={backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/back.png",true)+"')"};return _["l"].createElement(O,{innerRef:function e(r){i.innerRef&&i.innerRef(r);t._root=r}},_["l"].createElement(R,{innerRef:function e(r){t._table=r}},!o&&_["l"].createElement(D,{innerRef:function e(r){t._header=r}},this.state.backButton&&_["l"].createElement(j,{style:s,onClick:this._onBackButtonClick}),_["l"].createElement(P,null,this._t("editor.controls."+a+".title"))),_["l"].createElement(I,null,_["l"].createElement(r,y({},i,{innerRef:function e(r){t._container=r},className:x?i.className||"js-defaultControls":undefined}),this._renderContent()))))}},{key:"container",get:function e(){return this._container}}]);return t}(g["a"]);T.contextTypes=g["a"].contextTypes;T.propTypes={options:_["k"].object};t["a"]=T;var O=_["w"].div("ku10ek","ControlsComponentRoot");var R=_["w"].div("rfecls","ControlsComponentTable");var D=_["w"].div("1tkmkv6","ControlsComponentHeader");var I=_["w"].div("vkb8c9","RootElementContainer");T.RootElement=_["w"].div("rfecls",{withBorderTop:"120drhm"},"ControlsComponent");var P=_["w"].div("1ru8sfa","ControlsComponentTitle");var j=_["w"].button("gyx1pn","BackButton")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}p(t,[{key:"render",value:function e(){var t=this.constructor.RootElement;var r=v(this.props,[]);return f["l"].createElement(t,r)}}]);return t}(f["b"]);_.contextTypes=f["b"].contextTypes;t["a"]=_;_.RootElement=f["w"].li("11o197p",{disabled:"16s6vgr"},"CanvasHeaderButtonComponent")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(23);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _="production"==="test";var g=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onKnobDragStart","_onKnobDrag","_onKnobDragStop","_onBarDragStart","_onBarDrag","_onBarDragStop");a.state={value:a.props.value||0,sliderPosition:0,foregroundLeft:0,foregroundWidth:0};return a}v(t,[{key:"componentDidMount",value:function e(){var t=this;Object(f["z"])(function(){t._setValue(t.state.value,false)})}},{key:"componentWillReceiveProps",value:function e(t){if(t.value!==this.state.value){this._setValue(t.value,false)}}},{key:"_onKnobDragStart",value:function e(t){this._previousValue=this.state.value;this._initialSliderPosition=this.state.sliderPosition;this._initialPosition=t}},{key:"_onKnobDrag",value:function e(t){var r=this._bar.offsetWidth;var n=this._initialSliderPosition+t.x;n=Math.max(0,Math.min(n,r));var i=n/r;var a=this.props.minValue+(this.props.maxValue-this.props.minValue)*i;this._setValue(a)}},{key:"_onKnobDragStop",value:function e(){this._setValue(this.state.value,true,true)}},{key:"_onBarDragStart",value:function e(t){this._previousValue=this.state.value;this._initialPosition=t.clone();var r=this._bar.offsetWidth;var n=t.x/r;var i=this.props.minValue+(this.props.maxValue-this.props.minValue)*n;this._setValue(i)}},{key:"_onBarDrag",value:function e(t){var r=this._initialPosition.clone().add(t);var n=this._bar.offsetWidth;var i=r.x/n;var a=this.props.minValue+(this.props.maxValue-this.props.minValue)*i;a=Math.max(this.props.minValue,Math.min(this.props.maxValue,a));this._setValue(a)}},{key:"_onBarDragStop",value:function e(){this._setValue(this.state.value,true,true)}},{key:"_getKnobStyle",value:function e(){return{left:this.state.sliderPosition}}},{key:"_getForegroundStyle",value:function e(){return{left:this.state.foregroundLeft,width:this.state.foregroundWidth}}},{key:"_setValue",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var i=this.props,a=i.minValue,o=i.maxValue;var s=(t-a)/(o-a);var l=this._bar.offsetWidth;var u=l*s;var c=s*l;var f=0;if(this.props.middleDot){c=Math.abs(s-.5)*l;f=s<.5?l*.5-c:"50%"}this.setState({value:t,sliderPosition:u,foregroundWidth:c,foregroundLeft:f});if(r){this.props.onChange&&this.props.onChange(t,this._previousValue,n)}}},{key:"_buildValue",value:function e(t){if(t%1!==0){t=t.toFixed(2)}if(this.props.positiveValuePrefix&&t>=0){t=""+this.props.positiveValuePrefix+t}if(this.props.valueUnit){t+=this.props.valueUnit}return t}},{key:"render",value:function e(){var t=this;var r={style:this._getForegroundStyle()};return f["l"].createElement(y,{disabled:this.props.disabled},f["l"].createElement(p["a"],{onStart:this._onBarDragStart,onDrag:this._onBarDrag,onStop:this._onBarDragStop,disabled:this.props.disabled},f["l"].createElement(x,null,f["l"].createElement(b,{ref:"foo",innerRef:function e(r){t._bar=r}},f["l"].createElement("div",null,f["l"].createElement(w,{darkBackground:this.props.darkBackground}),f["l"].createElement(C,r),f["l"].createElement(p["a"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag,onStop:this._onKnobDragStop,disabled:this.props.disabled},f["l"].createElement(E,{style:this._getKnobStyle(),className:_?"js-sliderKnob":undefined},f["l"].createElement(S,{idle:this.state.value===0}))))))))}}]);return t}(f["b"]);g.propTypes={value:f["k"].number.isRequired,minValue:f["k"].number.isRequired,maxValue:f["k"].number.isRequired,middleDot:f["k"].bool,onChange:f["k"].func,positiveValuePrefix:f["k"].string,valueUnit:f["k"].string,label:f["k"].string};g.contextTypes=f["b"].contextTypes;t["a"]=g;var y=f["w"].div("jc3w8i",{disabled:"1voy7lm"},"Slider");var b=f["w"].div("1pvw1zw","Bar");var k=f["w"].div("8gacw5","BarSection");var w=Object(f["w"])(k)("120drhm",{darkBackground:"120drhm"},"BarBackgroundSection");var C=Object(f["w"])(k)("1apine2","BarForegroundSection");var S=f["w"].div("8i3bvo",{idle:"6eg4rp"},"Knob");var E=f["w"].div("xsaflu","KnobTouchTarget");var x=f["w"].div("1ssoezr","BarContainer")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"ControlGroupList",function(){return i});r.d(t,"ControlGroup",function(){return a});r.d(t,"ControlGroupTitle",function(){return o});var n=r(4);var i=n["w"].css("1f3fuxn","ControlGroupList");var a=n["w"].css("1bxndxk","ControlGroup");var o=n["w"].css("12fzsea","ControlGroupTitle")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var m=function(e){d(t,e);function t(){v(this,t);return h(this,(t.__proto__||c()(t)).apply(this,arguments))}p(t,[{key:"render",value:function e(){var t=this._getAssetPath("editor/controls/shared/checkbox.png",true);var r=this._getAssetPath("editor/controls/shared/checkbox-active.png",true);var n=this.props,i=n.styles,a=n.className,o=n.checked,s=n.onClick;return f["l"].createElement(_,{styles:i,className:a,onClick:s,style:{backgroundImage:"url("+(o?r:t)+")"}})}}]);return t}(f["b"]);t["a"]=m;var _=f["w"].div("5nuoh","Checkbox");m.RootElement=_},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(81);var v=r(53);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g="production"==="test";var y=function(e){_(t,e);function t(){d(this,t);return m(this,(t.__proto__||c()(t)).apply(this,arguments))}h(t,[{key:"_renderRightPart",value:function e(){var t=this;var r=g?["js-valueSelection-input"]:[];if(this.props.inputClassName){r.push(this.props.inputClassName)}return f["l"].createElement(b,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:r.join(" "),innerRef:function e(r){t._input=r},disabled:this.props.disabled})}},{key:"render",value:function e(){var t=this.props,r=t.inputLabel,n=t.className,i=t.disabled,a=t.styles;return f["l"].createElement(k,{styles:a,className:n,disabled:i},f["l"].createElement(w,null,f["l"].createElement(C,null,r&&f["l"].createElement(S,null,r||" "),this._renderRightPart())))}}]);return t}(p["a"]);y.contextTypes=p["a"].contextTypes;t["a"]=y;var b=Object(f["w"])(v["a"])("12dz026","InputField");var k=Object(f["w"])(p["a"].RootElement)("9ngfap","ColorComponentInput");var w=f["w"].div("15u7gri","Row");var C=f["w"].div("1hy9z1m",{bottomAligned:"17xdalt"},"Column");var S=f["w"].div("szltve","Title")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=f["ControlsStyles"].PlainControlItem,g=f["ControlsStyles"].PlainControlItemBackground;var y="production"==="test";var b=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onWebcamClick","_onDropZoneClick","_onDropZoneDragEnter","_onDropZoneDragLeave","_onDropZoneDragOver","_onDropZoneDrop","_onImage");a._dragCounter=0;a.state={dropZoneHovered:false};return a}v(t,[{key:"_onWebcamClick",value:function e(){this.props.onWebcamActivated&&this.props.onWebcamActivated()}},{key:"_onImage",value:function e(t){this.props.onImage&&this.props.onImage(t)}},{key:"_onDropZoneClick",value:function e(){this.refs.upload.open()}},{key:"_onDropZoneDragEnter",value:function e(t){t.preventDefault();this._dragCounter++;this.setState({dropZoneHovered:true})}},{key:"_onDropZoneDragLeave",value:function e(t){t.preventDefault();this._dragCounter--;if(this._dragCounter===0){this.setState({dropZoneHovered:false})}}},{key:"_onDropZoneDragOver",value:function e(t){t.preventDefault()}},{key:"_onDropZoneDrop",value:function e(t){var r=this;t.stopPropagation();t.preventDefault();t=t.nativeEvent;t.returnValue=false;this.setState({dropZoneHovered:false},function(){if(!(t.target||t.dataTransfer)){return}var e=t.target.files||t.dataTransfer.files;if(!e||e.length<=0){return}if(!e[0].type.match(/^image\//i)){return f["ModalManager"].instance.displayError(r._t("errors.title"),r._t("errors.invalidFileType.text",{fileType:e[0].type}))}r._handleFile(e[0])})}},{key:"_handleFile",value:function e(t){var r=this;var n=new window.FileReader;n.onload=function(){return function(e){var t=e.target.result;var n=new window.Image;n.addEventListener("load",function(){r._onImage(n)});n.addEventListener("error",function(e){return f["ModalManager"].instance.displayError(r._t("errors.title"),r._t("errors.imageLoadingError.text"))});n.crossOrigin=r.context.editor.getCrossOrigin();n.src=t}}(t);n.readAsDataURL(t)}},{key:"render",value:function e(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",true)+"')"};return f["React"].createElement(k,null,f["React"].createElement(f["InvisibleUploadComponent"],{ref:"upload",onNewFile:this._onImage}),f["React"].createElement(w,null,f["React"].createElement(C,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone")),!this.state.dropZoneHovered&&this.props.webcamEnabled&&f["React"].createElement(S,{style:t,className:y?"js-webcamButton":undefined,onClick:this._onWebcamClick})))}}]);return t}(f["BaseComponent"]);t["a"]=b;var k=Object(f["adonis"])(_).li("fujban","Container");var w=Object(f["adonis"])(g).div("17hsmc4","Background");var C=f["adonis"].div("yw0i2r",{hovered:"1xndhux"},"DropZone");var S=f["adonis"].div("1y2fyfw","WebcamButton")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(8);var o=r.n(a);var s=r(15);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Infinity;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Infinity;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;u(this,e);this._queue=[];this._pendingPromises=0;this._maxConcurrency=t;this._maxQueueLength=r;this._minDelay=n;this._tick=this._tick.bind(this);this._lastPromiseDone=Date.now();this._running=true;this._animationFrameRequest=null;Object(s["b"])(this._tick)}l(e,[{key:"_tick",value:function e(){if(!this._running)return;var t=Date.now();if(t-this._lastPromiseDone>this._minDelay&&this._pendingPromises<this._maxConcurrency&&this._queue.length){this._dequeue()}this._animationFrameRequest=Object(s["b"])(this._tick)}},{key:"add",value:function e(t){var r=this;return new o.a(function(e,n){if(r._queue.length>=r._maxQueueLength){return n(new Error("Max queue length reached"))}r._queue.push({fn:t,resolve:e,reject:n})})}},{key:"_promisify",value:function e(t){if(typeof t!=="undefined"&&typeof t.then==="function"){return t}return o.a.resolve(t)}},{key:"_dequeue",value:function e(){var t=this;var r=this._queue.shift();var n=Date.now();this._pendingPromises++;try{this._promisify(r.fn()).then(function(e){t._lastPromiseDone=n;t._pendingPromises--;r.resolve(e)}).catch(function(e){t._lastPromiseDone=n;t._pendingPromises--;r.reject(e)})}catch(e){this._lastPromiseDone=n;this._pendingPromises--;r.reject(e)}return true}},{key:"dispose",value:function e(){this._running=false;if(this._animationFrameRequest){Object(s["a"])(this._animationFrameRequest)}}}]);return e}();t["a"]=c},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=r(320);var h=r(322);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var y=function(e){g(t,e);function t(){m(this,t);return _(this,(t.__proto__||c()(t)).apply(this,arguments))}d(t,[{key:"_onEnter",value:function e(){var t=this.context.editor;t.zoom.auto(true,false,function(){t.features.disable("zoom","drag")},false)}},{key:"_onLeave",value:function e(){var t=this.context.editor;t.features.enable("zoom","drag")}}],[{key:"mapOperationsToSharedState",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var a=t.FOCUS_OPERATIONS.map(function(e){return r.get(e)}).reduce(function(e,t){return e||t});var o=a&&a.getInputDimensions(false);var s=a?a.constructor.identifier:null;var l=t.getItemByOperationIdentifier(s);var u=l?l.identifier:"none";return{operation:a||null,inputDimensions:o,operationIdentifier:s,selectedFocus:u,selectedFocusItem:l,blurRadius:a?a.getBlurRadius():0,linearFocus:s==="linear-focus"?{controlPoint1:a.getControlPoint1(),controlPoint2:a.getControlPoint2()}:null,mirroredFocus:s==="mirrored-focus"?{start:a.getStart(),end:a.getEnd(),size:a.getSize(),gradientSize:a.getGradientSize()}:null,radialFocus:s==="radial-focus"?{position:a.getPosition(),radius:a.getRadius(),gradientRadius:a.getGradientRadius()}:null,setSelectedFocus:function e(t){if(t.operationIdentifier===s){return}if(s){r.remove(s)}if(t.operationIdentifier){r.getOrCreate(t.operationIdentifier)}},setBlurRadius:function e(t){a&&a.setBlurRadius(t)},setControlPoint1:function e(t){s==="linear-focus"&&a.setControlPoint1(t)},setControlPoint2:function e(t){s==="linear-focus"&&a.setControlPoint2(t)},setStart:function e(t){s==="mirrored-focus"&&a.setStart(t)},setEnd:function e(t){s==="mirrored-focus"&&a.setEnd(t)},setPosition:function e(t){s==="radial-focus"&&a.setPosition(t)},setRadius:function e(t){s==="radial-focus"&&a.setRadius(t)},setOperationOptions:function e(t){a&&a.set(t)}}}},{key:"getPreloadAssets",value:function e(t){var r=[];this.ITEMS.forEach(function(e){r.push(e.backgroundImagePath);r.push(e.activeBackgroundImagePath)});return r}},{key:"isEnabled",value:function e(t){return t.isToolAllowed("focus")&&t.isToolEnabled("focus")}},{key:"getItemByIdentifier",value:function e(r){return t.ITEMS.filter(function(e){return e.identifier===r})[0]}},{key:"getItemByOperationIdentifier",value:function e(r){return t.ITEMS.filter(function(e){return e.operationIdentifier===r})[0]}}]);return t}(f["BaseControls"]);y.clickAtPosition=f["BaseControls"].clickAtPosition;y.ITEMS=[{identifier:"none",operationIdentifier:null,backgroundImagePath:"editor/controls/focus/none.png",activeBackgroundImagePath:"editor/controls/focus/none-active.png"},{identifier:"radial",operationIdentifier:"radial-focus",backgroundImagePath:"editor/controls/focus/radial.png",activeBackgroundImagePath:"editor/controls/focus/radial-active.png"},{identifier:"mirrored",operationIdentifier:"mirrored-focus",backgroundImagePath:"editor/controls/focus/mirrored.png",activeBackgroundImagePath:"editor/controls/focus/mirrored-active.png"},{identifier:"linear",operationIdentifier:"linear-focus",backgroundImagePath:"editor/controls/focus/linear.png",activeBackgroundImagePath:"editor/controls/focus/linear-active.png"},{identifier:"gaussian",operationIdentifier:"blur",backgroundImagePath:"editor/controls/focus/gaussian.png",activeBackgroundImagePath:"editor/controls/focus/gaussian-active.png"}];y.FOCUS_OPERATIONS=y.ITEMS.map(function(e){return e.operationIdentifier}).filter(function(e){return e});y.identifier="focus";y.controlsComponent=v["a"];y.canvasControlsComponent=h["a"];y.iconPath="editor/controls/focus/icon.png";y.activeIconPath="editor/controls/focus/icon-active.png";y.defaultOptions={availableModes:null};y.requiredOperations=y.ITEMS.map(function(e){return e.operationIdentifier}).filter(function(e){return e});y.updatableOperations=y.ITEMS.map(function(e){return e.operationIdentifier}).filter(function(e){return e});y.switchToDefaultControlsOnRemoval=false;p.a.Controls.FocusControls=y;t["a"]=y},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=f["ControlsStyles"].PlainControlItem;var g="production"==="test";var y=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}v(t,[{key:"_onStickerClick",value:function e(t){this.props.onStickerClick&&this.props.onStickerClick(t)}},{key:"_renderListItems",value:function e(){var t=this;var r=this.props.stickers;var n=void 0;var i=this.sharedState.selectedSprite;if(i){n=i.getIdentifier()}return r.map(function(e){var r=f["StickerManager"].getURLForSticker(e,"thumb");var i=t._getAssetPath(r);var a={background:"url('"+i+"') no-repeat center center",backgroundSize:"contain"};return f["React"].createElement(k,{selected:e.identifier===n,key:e.identifier,onClick:t._onStickerClick.bind(t,e),className:g?"js-sticker":undefined,threeColumns:true},f["React"].createElement(w,{style:a}))})}},{key:"render",value:function e(){return f["React"].createElement(b,null,this._renderListItems())}}]);return t}(f["SharedStateComponent"]);y.contextTypes=f["SharedStateComponent"].contextTypes;t["a"]=y;var b=f["adonis"].ul("18qztam","StickerList");var k=Object(f["adonis"])(_).li("m4lnou","StickerListItem");var w=f["adonis"].div("7r0ke8","StickerImage")},function(e,t,r){var n=r(7);var i=r(5);r(293);n.UI.DesktopUI=i;e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(215);var v=r(79);var h=r(48);var d=r(125);var m=r(89);var _=r(259);var g=r(260);var y=r(74);var b=r(261);var k=r(262);var w=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function C(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function S(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var x=function e(t){return f["q"].byteArrayToString(f["a"].decode(t))};Object(_["a"])(f["w"],".pesdk-desktop-editor");Object(g["a"])(f["w"]);var T=function(e){E(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};C(this,t);var r=S(this,(t.__proto__||c()(t)).call(this));r._mediator=new f["e"];r._fontLoader=new y["a"](r);r._options=e;r._initOptions();r._initLanguage();r._initEvents();r._disposed=false;r._preloader=new b["a"](r,r._options,r._mediator);r._isReady=false;r._mediator.once(f["d"].EVENTS.EDITOR_READY,function(){r._isReady=true});f["h"].setLevel(r._options.logLevel);if(r._v()){r.run()}return r}w(t,[{key:"run",value:function e(){this._theme=this._options.theme;this._injectWebFonts();this._options.container.style.position="relative";this._options.container.className+=" pesdk-desktop-editor";this._render()}},{key:"_render",value:function e(){var t=this;var r=f["l"].createElement(p["a"],{ui:this,mediator:this._mediator,ref:function e(r){t._component=r},options:this._options});if(this._options.renderReturnsComponent){return r}else{f["m"].render(r,this._options.container)}}},{key:"export",value:function e(){var t;return(t=this._component).export.apply(t,arguments)}},{key:"serialize",value:function e(){var t;return(t=this.getEditor()).serialize.apply(t,arguments)}},{key:"deserialize",value:function e(t){return this.getEditor().deserialize(t)}},{key:"getEditor",value:function e(){return this._component.getEditor()}},{key:"isReady",value:function e(){return this._isReady}},{key:"onReady",value:function e(t){if(!this._isReady){this._mediator.once(f["d"].EVENTS.EDITOR_READY,t)}else{t()}}},{key:"_initOptions",value:function e(){this._options=f["q"].defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:false,preloader:true,theme:m["a"]});this._options.editor=f["q"].defaults(this._options.editor||{},{pixelRatio:typeof window!=="undefined"&&window.devicePixelRatio||1,preferredRenderer:"webgl",transparent:true,clearColor:[0,0,0,0],displayResizeMessage:true,maxMegaPixels:{},enableDrag:true,enableZoom:true,displayCloseButton:false,undoMode:"global",defaultControl:"filter",forceCrop:false,tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library"],controlsOrder:[["library"],["transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],controlsOptions:{}});this._options.editor.maxMegaPixels=f["q"].defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10});this._options.editor.export=f["q"].defaults(this._options.editor.export||{},{format:"image/png",type:f["o"].IMAGE,download:true,fileBasename:"photoeditorsdk-export",quality:.8});this._options.extensions=f["q"].defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]});this._options.assets=f["q"].defaults(this._options.assets||{},{baseUrl:"assets",resolver:null})}},{key:"_injectWebFonts",value:function e(){var t=[];for(var r in this._theme.fonts){var n=this._theme.fonts[r];var i=this.getAssetPath(n.src,true,true);t.push('\n        @font-face {\n          font-family: "'+n.fontFamily+"\";\n          src: url('"+i+"') format('woff');\n          font-weight: "+n.fontWeight+";\n          font-style: "+n.fontStyle+";\n        }\n      ")}var a="\n      /* Injected by PhotoEditorSDK */\n      "+t.join("\n")+"\n    ";f["w"].global(a,true)}},{key:"_v",value:function e(){if(!this[x("X29wdGlvbnM=")][x("bGljZW5zZQ==")]){f["h"].error(x("TGljZW5zaW5n"),x("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg=="));f["h"].error(x("TGljZW5zaW5n"),x("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg=="));return false}return true}},{key:"_initEvents",value:function e(){this._mediator.pipeEvents(this)}},{key:"_disposeEvents",value:function e(){this._mediator.unpipeEvents(this)}},{key:"_initLanguage",value:function e(){this._languages=f["q"].deepDefaults(this._options.extensions.languages,{de:r(291),en:r(292)});this._language=this._languages[this._options.language];if(!this._language){f["h"].error(this.constructor.name,"Language `"+this._options.language+"` not found!")}}},{key:"translate",value:function e(t,r){return f["u"].translate(this._language,t,r)}},{key:"setImage",value:function e(t){if(!this._component)return;this._component.setImage(t)}},{key:"getAssetPath",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var i=this._options.assets,a=i.baseUrl,o=i.resolver;var s=a+"/"+t;if(t.match(/(ftp|http|https):\/\//)){s=t}if(r){if(!n){var l=typeof window!=="undefined"&&window.devicePixelRatio||1;if(l>1){var u=/\.[\w?=]+$/;t=t.replace(u,function(e){return"@2x"+e})}}s=a+"/ui/desktop/"+t}if(typeof o!=="undefined"&&o!==null){s=o(s)}return s}},{key:"getTheme",value:function e(){return this._theme}},{key:"getFontLoader",value:function e(){return this._fontLoader}},{key:"getPreloader",value:function e(){return this._preloader}},{key:"dispose",value:function e(){if(this._disposed){throw new Error("This instance of PhotoEditorSDK is already disposed.")}this._disposed=true;f["m"].unmountComponentAtNode(this._options.container);this._disposeEvents()}}]);return t}(f["e"]);T.prototype.identifier="react";T.BaseComponent=f["b"];T.React=f["l"];T.adonis=f["w"];T.SharedState=f["s"];T.Constants=f["d"];T.Utils=f["u"];T.ScrollbarComponent=v["a"];T.JSONLoader=h["a"];T.SliderComponent=d["a"];var O=function(e){E(t,e);function t(){C(this,t);return S(this,(t.__proto__||c()(t)).apply(this,arguments))}w(t,[{key:"componentDidMount",value:function e(){this._ui=new T(f["q"].extend({},this.props,{container:this.refs.container}));if(this.props.onEditorReady){this._ui.onReady(this.props.onEditorReady)}}},{key:"render",value:function e(){var t=f["q"].extend({},this.props.style||{});return f["l"].createElement("div",{style:t,ref:"container"})}},{key:"ui",get:function e(){return this._ui}}]);return t}(f["l"].Component);T.ReactComponent=O;T.Controls={};for(var R in k){T[R]=k[R]}f["p"].UI=f["p"].UI||{};f["p"].UI.DesktopUI=T;t["default"]=T},function(e,t,r){r(136);var n=r(9).Object;e.exports=function e(t,r,i){return n.defineProperty(t,r,i)}},function(e,t,r){var n=r(12);n(n.S+n.F*!r(18),"Object",{defineProperty:r(16).f})},function(e,t,r){r(138);e.exports=r(9).Object.setPrototypeOf},function(e,t,r){var n=r(12);n(n.S,"Object",{setPrototypeOf:r(139).set})},function(e,t,r){var n=r(17);var i=r(14);var a=function(e,t){i(e);if(!n(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(24)(Function.call,r(58).f(Object.prototype,"__proto__").set,2);n(e,[]);t=!(e instanceof Array)}catch(e){t=true}return function e(r,i){a(r,i);if(t)r.__proto__=i;else n(r,i);return r}}({},false):undefined),check:a}},function(e,t,r){r(141);var n=r(9).Object;e.exports=function e(t,r){return n.create(t,r)}},function(e,t,r){var n=r(12);n(n.S,"Object",{create:r(60)})},function(e,t,r){var n=r(16);var i=r(14);var a=r(30);e.exports=r(18)?Object.defineProperties:function e(t,r){i(t);var o=a(r);var s=o.length;var l=0;var u;while(s>l)n.f(t,u=o[l++],r[u]);return t}},function(e,t,r){var n=r(20);var i=r(61);var a=r(144);e.exports=function(e){return function(t,r,o){var s=n(t);var l=i(s.length);var u=a(o,l);var c;if(e&&r!=r)while(l>u){c=s[u++];if(c!=c)return true}else for(;l>u;u++)if(e||u in s){if(s[u]===r)return e||u||0}return!e&&-1}}},function(e,t,r){var n=r(62);var i=Math.max;var a=Math.min;e.exports=function(e,t){e=n(e);return e<0?i(e+t,0):a(e,t)}},function(e,t,r){r(146);e.exports=r(9).Object.getPrototypeOf},function(e,t,r){var n=r(31);var i=r(88);r(66)("getPrototypeOf",function(){return function e(t){return i(n(t))}})},function(e,t){e.exports=r},function(e,t,r){"use strict";var n=r(149);var i=r(150);var a=r(151);e.exports=function(){function e(e,t,r,n,o,s){if(s===a){return}i(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};r.checkPropTypes=n;r.PropTypes=r;return r}},function(e,t,r){"use strict";function n(e){return function(){return e}}var i=function e(){};i.thatReturns=n;i.thatReturnsFalse=n(false);i.thatReturnsTrue=n(true);i.thatReturnsNull=n(null);i.thatReturnsThis=function(){return this};i.thatReturnsArgument=function(e){return e};e.exports=i},function(e,t,r){"use strict";var n=function e(t){};if(false){n=function e(t){if(t===undefined){throw new Error("invariant requires an error message argument")}}}function i(e,t,r,i,a,o,s,l){n(t);if(!e){var u;if(t===undefined){u=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var c=[r,i,a,o,s,l];var f=0;u=new Error(t.replace(/%s/g,function(){return c[f++]}));u.name="Invariant Violation"}u.framesToPop=1;throw u}}e.exports=i},function(e,t,r){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t){var r={firasansmedium:{fontFamily:"firasansmedium",fontWeight:"500",fontStyle:"normal",src:"fonts/FiraSans-Medium.woff"},firasansregular:{fontFamily:"firasansregular",fontWeight:"400",fontStyle:"normal",src:"fonts/FiraSans-Regular.woff"},sourcesansprobold:{fontFamily:"sourcesansprobold",fontWeight:"bolder",fontStyle:"normal",src:"fonts/SourceSansPro-Bold.woff"},sourcesansprosemibold:{fontFamily:"sourcesansprosemibold",fontWeight:"bold",fontStyle:"normal",src:"fonts/SourceSansPro-Semibold.woff"}};e.exports={primaryColor:"#2D7BFF",primaryColorRGB:"45, 123, 255",backgroundColor:"#141415",backgroundColorRGB:"20, 20, 21",controlsKnobColor:"white",controlsBackgroundColor:"#232326",controlsBackgroundColorRGB:"35, 35, 38",controlsLightBackgroundColor:"#2a2a2e",controlsOutlineColor:"rgba(255, 255, 255, 0.6)",controlsSeparatorColor:"#1b1b1d",navigationBackgroundColor:"#202022",navigationBackgroundColorRGB:"32, 32, 34",textColor:"#FFFFFF",dimmedTextColor:"#888888",dimmedTextColorRGB:"136, 136, 136",filterItemBackgroundColor:"#4b4b4c",secondaryControlsBackgroundColor:"#2a2a2e",secondaryControlsBackgroundColorRGB:"42, 42, 46",focusItemBackgroundColor:"#343437",sliderBackgroundColor:"rgba(255,255,255,0.24)",darkSliderBackgroundColor:"#1B1B1E",sliderKnobColor:"#b5b5be",sliderCircleKnobColor:"#c8c8d2",highlightColor:"#2675F8",highlightColorRGB:"38, 117, 253",darkHighlightColorRGB:"15, 47, 101",buttonBorderColor:"#303034",defaultShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.60)",inputModalButtonBarColor:"#262629",modalErrorColor:"#C23A3A",modalWarningColor:"#C18226",modalLoadingColor:"#2D7BFF",zIndex:function e(t){var r=["background","controls","controlsOverlays","overlays","navigation"];var n=5;return r.indexOf(t)*n},transitionDuration:.3,listItemSlideInDelay:100,scrollbarGradientSize:64,uppercaseBoldFontFamily:"sourcesansprobold",uppercaseSemiBoldFontFamily:"sourcesansprosemibold",regularFontFamily:"firasansregular",mediumFontFamily:"firasansmedium",fonts:r}},function(e,t,r){(function n(i,a){if(true)e.exports=a(r(32));else if(typeof define==="function"&&define.amd)define(["react"],a);else if(typeof t==="object")t["Adonis"]=a(require("react"));else i["Adonis"]=a(i["React"])})(this,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:false};e[n].call(i.exports,i,i.exports,r);i.loaded=true;return i.exports}r.m=e;r.c=t;r.p="";return r(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ThemeProvider=t.withTheme=undefined;var n=r(1);var i=v(n);var a=r(27);var o=v(a);var s=r(28);var l=v(s);var u=r(29);var c=v(u);var f=r(30);var p=v(f);function v(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=new i.default(e);var r=function e(r){if(r instanceof l.default){var n=r;var i={};o.default.forEach(function(e){i[e]=function(r,i,a){if(typeof i==="string"){a=i;i=undefined}return t.createComponent(e,{styles:r,variations:i,name:a,baseStyles:n})}});return i}else{return function(e,n,i){if(typeof n==="string"){i=n;n=undefined}return t.createComponent(r,{styles:e,variations:n,name:i})}}};o.default.forEach(function(e){r[e]=function(r,n,i){if(typeof n==="string"){i=n;n=undefined}return t.createComponent(e,{styles:r,variations:n,name:i})}});r.global=function(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=t.getOptions(),i=n.injection,a=n.theme;if(!i&&!r)return;if(typeof e==="function"){e=e(a)}var o=t.getStylesBuffer();o.bufferCSS(e);o.flushToStyleTag(r)};r.css=function(e,r,n){if(typeof r==="string"){n=r;r=undefined}return new l.default(t,{styles:e,variations:r,name:n||"baseStyles"})};["renderToStatic"].forEach(function(e){r[e]=t[e].bind(t)});return r};t.withTheme=c.default;t.ThemeProvider=p.default},function(e,t,r){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(3);var a=u(i);var o=r(5);var s=u(o);var l=r(4);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=typeof e!=="undefined"&&e.env.NODE_ENV==="production";var p=function(){function e(t){c(this,e);this._options=(0,l.defaults)(t,{injection:true,batchInjection:true,minified:false,autoPrefix:true,cssSelectorPrefix:"",classNamePrefix:"",hashSeparator:"-",nameSeparator:"__",variationSeparator:"--",styleNode:null,injectionMode:f?"fast":"debug",hashedStyles:false});this._stylesBuffer=new a.default(this);this._componentFactory=new s.default(this,this._options)}n(e,[{key:"createComponent",value:function e(t,r){return this._componentFactory.createComponent(t,r)}},{key:"renderToStatic",value:function e(t){this._stylesBuffer.disableInjection();var r=t();var n=this._stylesBuffer.flushToString(true);this._stylesBuffer.enableInjection();return{css:{content:n},html:r}}},{key:"getStylesBuffer",value:function e(){return this._stylesBuffer}},{key:"getOptions",value:function e(){return this._options}}]);return e}();t.default=p}).call(t,r(2))},function(e,t){var r=e.exports={};var n;var i;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=a}}catch(e){n=a}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=o}}catch(e){i=o}})();function s(e){if(n===setTimeout){return setTimeout(e,0)}if((n===a||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function l(e){if(i===clearTimeout){return clearTimeout(e)}if((i===o||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var u=[];var c=false;var f;var p=-1;function v(){if(!c||!f){return}c=false;if(f.length){u=f.concat(u)}else{p=-1}if(u.length){h()}}function h(){if(c){return}var e=s(v);c=true;var t=u.length;while(t){f=u;u=[];while(++p<t){if(f){f[p].run()}}p=-1;t=u.length}f=null;c=false;l(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}u.push(new d(e,t));if(u.length===1&&!c){s(h)}};function d(e,t){this.fun=e;this.array=t}d.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function m(){}r.on=m;r.addListener=m;r.once=m;r.off=m;r.removeListener=m;r.removeAllListeners=m;r.emit=m;r.prependListener=m;r.prependOnceListener=m;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"])o["return"]()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=r(4);function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function e(t){o(this,e);this._adonis=t;this._injectionEnabled=true;this._bufferedSelectors={};this._buffer=[];this._styleNode=this._findStyleNode();this._sheet=this._findSheet()}i(e,[{key:"_findSheet",value:function e(){if(!this._styleNode)return;if(this._styleNode.sheet){return this._styleNode.sheet}var t=document,r=t.styleSheets;for(var n=0;n<r.length;n++){var i=r[n];if(i.ownerNode===this._styleNode){return i}}}},{key:"_findStyleNode",value:function e(){var t=this._adonis.getOptions(),r=t.styleNode;if(r){return r}if(typeof document==="undefined")return null;r=document.createElement("style");r.setAttribute("data-adonis",true);document.head.appendChild(r);return r}},{key:"bufferCSS",value:function e(t){this._buffer.push(t)}},{key:"bufferRulesets",value:function e(t){var r=this;t.forEach(function(e){var t=n(e,2),i=t[0],a=t[1];r._bufferedSelectors[i]=true});Array.prototype.push.apply(this._buffer,t.map(function(e){var t=n(e,2),r=t[1];return r}))}},{key:"isSelectorBuffered",value:function e(t){return this._bufferedSelectors[t]}},{key:"disableInjection",value:function e(){this._injectionEnabled=false}},{key:"enableInjection",value:function e(){this._injectionEnabled=true}},{key:"flushToString",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var r=this._adonis.getOptions(),n=r.minified;var i=this._buffer.join(n?"":"\n\n");this._buffer=[];if(t){this._bufferedSelectors={}}return i}},{key:"_injectFast",value:function e(){var t=this;this._buffer.forEach(function(e){t._sheet.insertRule(e,t._sheet.cssRules.length)})}},{key:"_injectDebug",value:function e(){var t=this.flushToString();if(!t)return;var r=this._adonis.getOptions(),n=r.minified;var i=this._styleNode.innerHTML.length>0;this._styleNode.appendChild(document.createTextNode((n||!i?"":"\n\n")+t))}},{key:"_flushToStyleTag",value:function e(){var t=this._adonis.getOptions(),r=t.injectionMode;if(r==="fast"&&this._sheet.insertRule){this._injectFast()}else if(r==="debug"){this._injectDebug()}else{throw new Error("Unknown CSS injection mode: `"+r+"`")}this._buffer=[]}},{key:"flushToStyleTag",value:function e(){var t=this;if(!this._injectionEnabled)return;var r=this._adonis.getOptions(),n=r.batchInjection;if(!this._nextTick&&n){this._nextTick=(0,a.requestAnimationFrame)(function(){t._nextTick=null;t._flushToStyleTag()})}else if(!n){this._flushToStyleTag()}}}]);return e}();t.default=s},function(e,t){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=t.defaults=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}var a={};for(var o in t){a[o]=t[o]}for(var s=0;s<n.length;s++){var l=n[s];for(var u in l){if(typeof a[u]==="undefined"){a[u]=l[u]}}}return a};var i=t.hashObject=function e(t){var r=JSON.stringify(t);var n=r.length;var i=n;var a=0;var o=void 0;while(n>=4){o=r.charCodeAt(a)&255|(r.charCodeAt(++a)&255)<<8|(r.charCodeAt(++a)&255)<<16|(r.charCodeAt(++a)&255)<<24;o=(o&65535)*1540483477+(((o>>>16)*1540483477&65535)<<16);o^=o>>>24;o=(o&65535)*1540483477+(((o>>>16)*1540483477&65535)<<16);i=(i&65535)*1540483477+(((i>>>16)*1540483477&65535)<<16)^o;n-=4;++a}switch(n){case 3:i^=(r.charCodeAt(a+2)&255)<<16;case 2:i^=(r.charCodeAt(a+1)&255)<<8;case 1:i^=r.charCodeAt(a)&255;i=(i&65535)*1540483477+(((i>>>16)*1540483477&65535)<<16)}i^=i>>>13;i=(i&65535)*1540483477+(((i>>>16)*1540483477&65535)<<16);i^=i>>>15;return(i>>>0).toString(36)};var a=t.flatten=function e(t){return t.reduce(function(t,r){return t.concat(Array.isArray(r)?e(r):r)},[])};var o=t.toStaticStyles=function e(t){var n={};for(var i in t){var a=t[i];if((typeof a==="undefined"?"undefined":r(a))==="object"){n[i]=e(a)}else if(typeof a!=="function"){n[i]=a}}return n};var s=t.deepMerge=function e(t,n){var i={};for(var a in t){i[a]=t[a]}for(var o in n){if(r(n[o])==="object"&&t[o]){i[o]=e(t[o],n[o])}else{i[o]=n[o]}}return i};var l=t.deepMergeAll=function e(t){return t.reduce(function(e,t){return s(e,t)},{})};var u=t.resolveStylesObject=function e(t,n){var i={};for(var a in t){var o=t[a];if((typeof o==="undefined"?"undefined":r(o))==="object"){i[a]=e(o,n)}else if(typeof o==="function"){if(!n){throw new Error("Trying to resolve a dynamic property without a `theme` given.")}i[a]=o(n)}else{i[a]=o}}return i};var c=t.findAllCombinations=function e(t){return function e(t,r){var n=t[0];if(typeof n==="undefined"){return r}for(var i=0,a=r.length;i<a;++i){r.push(r[i].concat(n))}return e(t.slice(1),r)}(t,[[]]).slice(1)};var f=t.requestAnimationFrame=function(){var t=0;var r=typeof e==="undefined"?window:e;var n=r.requestAnimationFrame;var i=["ms","moz","webkit","o"];for(var a=0;a<i.length&&!n;++a){n=r[i[a]+"RequestAnimationFrame"]}if(!n&&typeof r!=="undefined"&&r.setImmediate){n=r.setImmediate}if(n){n=n.bind(r)}if(!n){n=function e(r){var n=(new Date).getTime();var i=Math.max(0,16-(n-t));var a=setTimeout(function(){r(n+i)},i);t=n+i;return a}}return n}()}).call(t,function(){return this}())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(6);var a=d(i);var o=r(4);var s=r(7);var l=d(s);var u=r(16);var c=d(u);var f=r(17);var p=d(f);var v=r(26);var h=d(v);function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var y=function(){function e(t,r){g(this,e);this._adonis=t;this._options=r}n(e,[{key:"_getName",value:function e(t){if(typeof t==="string")return t;if(t.name)return t.name;return"adonis"}},{key:"_getTargetStyles",value:function e(t,r){var n=[t.adonisBaseStyles,t.adonisStyles];if(t.adonisTarget){n.unshift(this._getTargetStyles(t.adonisTarget))}if(t.RootElement){n.unshift(this._getTargetStyles(t.RootElement))}return(0,o.flatten)(n).filter(function(e){return e})}},{key:"createComponent",value:function e(t,r){var s=this._adonis;var u=r.name;if(!u)u=this._getName(t);var f=typeof t==="string";var v=t.prototype instanceof l.default;var d=!v&&t.prototype instanceof i.Component;var y=r.styles,b=r.variations,k=r.baseStyles;b=b||{};var w=new c.default(s,{styles:y,variations:b,name:u});var C=s.getOptions(),S=C.injection,E=C.theme,x=C.hashedStyles;if(S==="pre"&&!x){var T=this._getTargetStyles(t,u);var O=void 0,R=void 0;O=T.concat([k,w]).filter(function(e){return e});R=new h.default(s,O,E);R.bufferRulesets();var D=s.getStylesBuffer();D.flushToStyleTag()}var I=function(e){_(i,e);function i(){var e;g(this,i);for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}var a=m(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(r)));a._updateStylesManager();a._adonis=s;return a}n(i,[{key:"_updateStylesManager",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;this._allStyles=[k,w].concat(t.styles||[]).filter(function(e){return e});var r=this._getActiveVariationsFromProps(t);this._stylesManager=new p.default(s,this._allStyles,r,this.context.theme)}},{key:"componentWillReceiveProps",value:function e(t){var r=this;var n=t.styles!==this.props.styles;var i=false;var a=(0,o.flatten)(this._allStyles.map(function(e){return e.getVariations()}));a.forEach(function(e){if(t[e]!==r.props[e]){i=true}});if(n||i){this._updateStylesManager(t)}}},{key:"_cloneProps",value:function e(){var t=this;var r={};Object.keys(this.props).forEach(function(e){r[e]=t.props[e]});return r}},{key:"_getActiveVariationsFromProps",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;var r={};this._allStyles.forEach(function(e){return e.getVariations().forEach(function(e){return r[e]=true})});return Object.keys(r).filter(function(e){return t[e]===true}).sort()}},{key:"_buildClassName",value:function e(){var t=this.props.className;var r=[];r.push(t);var n=this._stylesManager.getClassName();r.push(n);return{className:r.filter(function(e){return e}).join(" ")}}},{key:"_shouldInjectCSS",value:function e(){if(!S||x)return false;return f||d&&!v}},{key:"render",value:function e(){var n=this._cloneProps();var i=this._buildClassName(),s=i.className;var l=this._adonis.getStylesBuffer();if(this._shouldInjectCSS()){this._stylesManager.bufferRulesets();if(S===true&&!x){l.flushToStyleTag()}}if(f){var u=r.variations;if(u){Object.keys(u).forEach(function(e){delete n[e]})}if(this.props._activeParentVariations){this.props._activeParentVariations.forEach(function(e){delete n[e]})}if(k){k.getVariations().forEach(function(e){delete n[e]})}}if(f){n.className=s}else{n.styles=(0,o.flatten)([w].concat(this.props.styles||[]));n._activeParentVariations=Object.keys(b||{}).concat(this.props._activeParentVariations||[])}var c=this.props,p=c.children,h=c.innerRef;if(h){if(d||f){n.ref=h}else if(v){n.innerRef=h}}if(f){delete n.styles;delete n.innerRef;delete n._activeParentVariations}return a.default.createElement(t,n,p)}}],[{key:"name",get:function e(){return u}}]);return i}(l.default);I.contextTypes=l.default.contextTypes;I.adonisTarget=t;I.adonisStyles=w;I.adonisBaseStyles=k;return I}}]);return e}();t.default=y},function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var i=r(8);var a=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var c=function(e){u(t,e);function t(){s(this,t);return l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(n.Component);t.default=c;c.contextTypes={theme:a.default.object}},function(e,t,r){(function(t){if(t.env.NODE_ENV!=="production"){var n=typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103;var i=function(e){return typeof e==="object"&&e!==null&&e.$$typeof===n};var a=true;e.exports=r(9)(i,a)}else{e.exports=r(15)()}}).call(t,r(2))},function(e,t,r){(function(t){"use strict";var n=r(10);var i=r(11);var a=r(12);var o=r(13);var s=r(14);e.exports=function(e,r){var l=typeof Symbol==="function"&&Symbol.iterator;var u="@@iterator";function c(e){var t=e&&(l&&e[l]||e[u]);if(typeof t==="function"){return t}}var f="<<anonymous>>";var p={array:m("array"),bool:m("boolean"),func:m("function"),number:m("number"),object:m("object"),string:m("string"),symbol:m("symbol"),any:_(),arrayOf:g,element:y(),instanceOf:b,node:S(),objectOf:w,oneOf:k,oneOfType:C,shape:E};function v(e,t){if(e===t){return e!==0||1/e===1/t}else{return e!==e&&t!==t}}function h(e){this.message=e;this.stack=""}h.prototype=Error.prototype;function d(e){if(t.env.NODE_ENV!=="production"){var n={};var s=0}function l(l,u,c,p,v,d,m){p=p||f;d=d||c;if(m!==o){if(r){i(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use `PropTypes.checkPropTypes()` to call them. "+"Read more at http://fb.me/use-check-prop-types")}else if(t.env.NODE_ENV!=="production"&&typeof console!=="undefined"){var _=p+":"+c;if(!n[_]&&s<3){a(false,"You are manually calling a React.PropTypes validation "+"function for the `%s` prop on `%s`. This is deprecated "+"and will throw in the standalone `prop-types` package. "+"You may be seeing this warning due to a third-party PropTypes "+"library. See https://fb.me/react-warning-dont-call-proptypes "+"for details.",d,p);n[_]=true;s++}}}if(u[c]==null){if(l){if(u[c]===null){return new h("The "+v+" `"+d+"` is marked as required "+("in `"+p+"`, but its value is `null`."))}return new h("The "+v+" `"+d+"` is marked as required in "+("`"+p+"`, but its value is `undefined`."))}return null}else{return e(u,c,p,v,d)}}var u=l.bind(null,false);u.isRequired=l.bind(null,true);return u}function m(e){function t(t,r,n,i,a,o){var s=t[r];var l=O(s);if(l!==e){var u=R(s);return new h("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+n+"`, expected ")+("`"+e+"`."))}return null}return d(t)}function _(){return d(n.thatReturnsNull)}function g(e){function t(t,r,n,i,a){if(typeof e!=="function"){return new h("Property `"+a+"` of component `"+n+"` has invalid PropType notation inside arrayOf.")}var s=t[r];if(!Array.isArray(s)){var l=O(s);return new h("Invalid "+i+" `"+a+"` of type "+("`"+l+"` supplied to `"+n+"`, expected an array."))}for(var u=0;u<s.length;u++){var c=e(s,u,n,i,a+"["+u+"]",o);if(c instanceof Error){return c}}return null}return d(t)}function y(){function t(t,r,n,i,a){var o=t[r];if(!e(o)){var s=O(o);return new h("Invalid "+i+" `"+a+"` of type "+("`"+s+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return d(t)}function b(e){function t(t,r,n,i,a){if(!(t[r]instanceof e)){var o=e.name||f;var s=I(t[r]);return new h("Invalid "+i+" `"+a+"` of type "+("`"+s+"` supplied to `"+n+"`, expected ")+("instance of `"+o+"`."))}return null}return d(t)}function k(e){if(!Array.isArray(e)){t.env.NODE_ENV!=="production"?a(false,"Invalid argument supplied to oneOf, expected an instance of array."):void 0;return n.thatReturnsNull}function r(t,r,n,i,a){var o=t[r];for(var s=0;s<e.length;s++){if(v(o,e[s])){return null}}var l=JSON.stringify(e);return new h("Invalid "+i+" `"+a+"` of value `"+o+"` "+("supplied to `"+n+"`, expected one of "+l+"."))}return d(r)}function w(e){function t(t,r,n,i,a){if(typeof e!=="function"){return new h("Property `"+a+"` of component `"+n+"` has invalid PropType notation inside objectOf.")}var s=t[r];var l=O(s);if(l!=="object"){return new h("Invalid "+i+" `"+a+"` of type "+("`"+l+"` supplied to `"+n+"`, expected an object."))}for(var u in s){if(s.hasOwnProperty(u)){var c=e(s,u,n,i,a+"."+u,o);if(c instanceof Error){return c}}}return null}return d(t)}function C(e){if(!Array.isArray(e)){t.env.NODE_ENV!=="production"?a(false,"Invalid argument supplied to oneOfType, expected an instance of array."):void 0;return n.thatReturnsNull}for(var r=0;r<e.length;r++){var i=e[r];if(typeof i!=="function"){a(false,"Invalid argument supplid to oneOfType. Expected an array of check functions, but "+"received %s at index %s.",D(i),r);return n.thatReturnsNull}}function s(t,r,n,i,a){for(var s=0;s<e.length;s++){var l=e[s];if(l(t,r,n,i,a,o)==null){return null}}return new h("Invalid "+i+" `"+a+"` supplied to "+("`"+n+"`."))}return d(s)}function S(){function e(e,t,r,n,i){if(!x(e[t])){return new h("Invalid "+n+" `"+i+"` supplied to "+("`"+r+"`, expected a ReactNode."))}return null}return d(e)}function E(e){function t(t,r,n,i,a){var s=t[r];var l=O(s);if(l!=="object"){return new h("Invalid "+i+" `"+a+"` of type `"+l+"` "+("supplied to `"+n+"`, expected `object`."))}for(var u in e){var c=e[u];if(!c){continue}var f=c(s,u,n,i,a+"."+u,o);if(f){return f}}return null}return d(t)}function x(t){switch(typeof t){case"number":case"string":case"undefined":return true;case"boolean":return!t;case"object":if(Array.isArray(t)){return t.every(x)}if(t===null||e(t)){return true}var r=c(t);if(r){var n=r.call(t);var i;if(r!==t.entries){while(!(i=n.next()).done){if(!x(i.value)){return false}}}else{while(!(i=n.next()).done){var a=i.value;if(a){if(!x(a[1])){return false}}}}}else{return false}return true;default:return false}}function T(e,t){if(e==="symbol"){return true}if(t["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&t instanceof Symbol){return true}return false}function O(e){var t=typeof e;if(Array.isArray(e)){return"array"}if(e instanceof RegExp){return"object"}if(T(t,e)){return"symbol"}return t}function R(e){if(typeof e==="undefined"||e===null){return""+e}var t=O(e);if(t==="object"){if(e instanceof Date){return"date"}else if(e instanceof RegExp){return"regexp"}}return t}function D(e){var t=R(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function I(e){if(!e.constructor||!e.constructor.name){return f}return e.constructor.name}p.checkPropTypes=s;p.PropTypes=p;return p}}).call(t,r(2))},function(e,t){"use strict";function r(e){return function(){return e}}var n=function e(){};n.thatReturns=r;n.thatReturnsFalse=r(false);n.thatReturnsTrue=r(true);n.thatReturnsNull=r(null);n.thatReturnsThis=function(){return this};n.thatReturnsArgument=function(e){return e};e.exports=n},function(e,t,r){(function(t){"use strict";var r=function e(t){};if(t.env.NODE_ENV!=="production"){r=function e(t){if(t===undefined){throw new Error("invariant requires an error message argument")}}}function n(e,t,n,i,a,o,s,l){r(t);if(!e){var u;if(t===undefined){u=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var c=[n,i,a,o,s,l];var f=0;u=new Error(t.replace(/%s/g,function(){return c[f++]}));u.name="Invariant Violation"}u.framesToPop=1;throw u}}e.exports=n}).call(t,r(2))},function(e,t,r){(function(t){"use strict";var n=r(10);var i=n;if(t.env.NODE_ENV!=="production"){(function(){var e=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}var a=0;var o="Warning: "+t.replace(/%s/g,function(){return n[a++]});if(typeof console!=="undefined"){console.error(o)}try{throw new Error(o)}catch(e){}};i=function t(r,n){if(n===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(n.indexOf("Failed Composite propType: ")===0){return}if(!r){for(var i=arguments.length,a=Array(i>2?i-2:0),o=2;o<i;o++){a[o-2]=arguments[o]}e.apply(undefined,[n].concat(a))}}})()}e.exports=i}).call(t,r(2))},function(e,t){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},function(e,t,r){(function(t){"use strict";if(t.env.NODE_ENV!=="production"){var n=r(11);var i=r(12);var a=r(13);var o={}}function s(e,r,s,l,u){if(t.env.NODE_ENV!=="production"){for(var c in e){if(e.hasOwnProperty(c)){var f;try{n(typeof e[c]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"React.PropTypes.",l||"React class",s,c);f=e[c](r,c,l,s,null,a)}catch(e){f=e}i(!f||f instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",l||"React class",s,c,typeof f);if(f instanceof Error&&!(f.message in o)){o[f.message]=true;var p=u?u():"";i(false,"Failed %s type: %s%s",s,f.message,p!=null?p:"")}}}}}e.exports=s}).call(t,r(2))},function(e,t,r){"use strict";var n=r(10);var i=r(11);var a=r(13);e.exports=function(){function e(e,t,r,n,o,s){if(s===a){return}i(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};r.checkPropTypes=n;r.PropTypes=r;return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(4);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(t,r){a(this,e);this._adonis=t;this._options=(0,i.defaults)(r,{variations:[],styles:{},name:"Unnamed"});var n=this._adonis.getOptions(),o=n.hashedStyles;if(o&&typeof this._options.styles!=="string"){throw new Error("Passing style objects with `hashedStyles` set to true is invalid.")}this._hash=o?this._options.styles:(0,i.hashObject)(this._options.styles);this._variationHashes=this._hashVariations()}n(e,[{key:"_hashVariations",value:function e(){var t={};var r=this._adonis.getOptions(),n=r.hashedStyles;var a=this._options.variations;for(var o in a){var s=a[o];t[o]=n?s:(0,i.hashObject)(s)}return t}},{key:"getIdentifierForVariations",value:function e(t){var r=this;var n=this._options.name;var i=this._adonis.getOptions(),a=i.hashSeparator,o=i.variationSeparator;var s=""+n+a+this._hash;t.sort().forEach(function(e){var t=r._variationHashes[e];if(!t)return;s+=""+o+e+a+t});return s}},{key:"getStyles",value:function e(){return this._options.styles}},{key:"getVariationStyles",value:function e(t){var r=this._options.variations;if(!t)return r;return t.map(function(e){return r[e]}).filter(function(e){return e})}},{key:"getVariations",value:function e(){return Object.keys(this._options.variations||{})}}]);return e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(4);var a=r(18);var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t,r,n,i){l(this,e);this._adonis=t;this._styles=r;this._theme=i;this._activeVariations=n;this._className=this._generateClassName(this._activeVariations);this._baseSelector="."+this._className;this._rulesets=this._generateRulesets()}n(e,[{key:"generateCSS",value:function e(){return this._rulesets.map(function(e){return e.toCSS()}).filter(function(e){return e})}},{key:"bufferRulesets",value:function e(){var t=this._adonis.getStylesBuffer();var r=this._rulesets.filter(function(e){return!t.isSelectorBuffered(e.getSelector())&&e.hasDeclarations()}).map(function(e){return[e.getSelector(),e.toCSS()]});t.bufferRulesets(r)}},{key:"_getCombinedStyles",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var r=(0,i.flatten)(this._styles.map(function(e){return[e.getStyles(),e.getVariationStyles(t)]}));return(0,i.deepMergeAll)(r)}},{key:"_generateClassName",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var r=this._adonis.getOptions(),n=r.nameSeparator,i=r.classNamePrefix;return i+this._styles.map(function(e){return e.getIdentifierForVariations(t)}).join(n)}},{key:"_generateRulesets",value:function e(){var t=new o.default(this._adonis,this._baseSelector,this._getCombinedStyles(this._activeVariations),{theme:this._theme});return(0,i.flatten)([t,t.getSubRulesets()])}},{key:"getClassName",value:function e(){return this._className}}]);return e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(4);var a=r(19);var o=u(a);var s=r(21);var l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function e(t,r,n,a){c(this,e);this._options=a;this._adonis=t;this._selector=r;this._styles=n;this._resolvedStyles=(0,i.resolveStylesObject)(this._styles,this._options.theme);var o=this._adonis.getOptions(),s=o.hashedStyles;this._hash=s?this._styles:(0,i.hashObject)(this._styles);var l=this._parseStyles(),u=l.subRulesets,f=l.declarations;this._subRulesets=u;this._declarations=f}n(e,[{key:"_getSubRuleset",value:function t(r,n){var a=this;var o=this._adonis.getOptions(),s=o.minified;var u=null;var c=function t(r,o){var s=(0,i.deepMerge)(a._options,{parentSelector:o});u=new e(a._adonis,r,n,s)};for(var f=0;f<l.default.length;f++){var p=l.default[f];p(r,this._selector,c,s);if(u)return u}}},{key:"_parseStyles",value:function e(){var t=[];var r=[];for(var n in this._resolvedStyles){var i=this._resolvedStyles[n];var a=this._getSubRuleset(n,i);if(a){t.push(a,a.getSubRulesets())}else{r.push(new o.default(this._adonis,n,i))}}return{subRulesets:t,declarations:r}}},{key:"toCSS",value:function e(){var t=this._options.parentSelector;var r=this._adonis.getOptions(),n=r.minified,i=r.cssSelectorPrefix;if(this._declarations.length===0)return null;var a=t&&t.match(/^@/);var o="";var s="";if(t){if(i&&!a){o+=i}o+=t+(n?"{":" {\n");s="  "}else{o+=i}var l="";if(i&&a){l+=i}l+=this._selector;o+=s+l+(n?"{":" {\n");this._declarations.forEach(function(e){o+=s+e.toCSS()+(n?"":"\n")});o+=s+"}";if(t){o+=n?"}":"\n}"}return o}},{key:"getSubRulesets",value:function e(){return this._subRulesets}},{key:"hasDeclarations",value:function e(){return this._declarations.length!==0}},{key:"getSelector",value:function e(){return this._selector}}]);return e}();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"])o["return"]()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=r(20);var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t,r,n){l(this,e);this._adonis=t;this.key=r;this.value=n;this.cssKey=this.key.replace(/([A-Z])/g,function(e){return"-"+e[0].toLowerCase()})}i(e,[{key:"_getAutoPrefixedKeyPairs",value:function e(){var t=this;var r=o.default[this.key];var n=[];if(r){r.forEach(function(e){n.push(["-"+e+"-"+t.cssKey,t.value])})}return n}},{key:"toCSS",value:function e(){var t=this._adonis.getOptions(),r=t.minified,i=t.autoPrefix;var a=[[this.cssKey,this.value]];if(i){a=a.concat(this._getAutoPrefixedKeyPairs())}return a.map(function(e){var t=n(e,2),i=t[0],a=t[1];return""+(r?"":"  ")+i+":"+(r?"":" ")+a+";"}).join(r?"":"\n")}}]);return e}();t.default=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r="webkit";var n="moz";var i="ms";t.default={appearance:[r,n],userSelect:[r,n,i],textEmphasisPosition:[r],textEmphasis:[r],textEmphasisStyle:[r],textEmphasisColor:[r],boxDecorationBreak:[r],clipPath:[r],maskImage:[r],maskMode:[r],maskRepeat:[r],maskPosition:[r],maskClip:[r],maskOrigin:[r],maskSize:[r],maskComposite:[r],mask:[r],maskBorderSource:[r],maskBorderMode:[r],maskBorderSlice:[r],maskBorderWidth:[r],maskBorderOutset:[r],maskBorderRepeat:[r],maskBorder:[r],maskType:[r],textDecorationStyle:[r],textDecorationSkip:[r],textDecorationLine:[r],textDecorationColor:[r],filter:[r],fontFeatureSettings:[r],breakAfter:[r,n,i],breakBefore:[r,n,i],breakInside:[r,n,i],columnCount:[r,n],columnFill:[r,n],columnGap:[r,n],columnRule:[r,n],columnRuleColor:[r,n],columnRuleStyle:[r,n],columnRuleWidth:[r,n],columns:[r,n],columnSpan:[r,n],columnWidth:[r,n],flex:[r],flexBasis:[r],flexDirection:[r],flexGrow:[r],flexFlow:[r],flexShrink:[r],flexWrap:[r],alignContent:[r],alignItems:[r],alignSelf:[r],justifyContent:[r],order:[r],transform:[r],transformOrigin:[r],transformOriginX:[r],transformOriginY:[r],backfaceVisibility:[r],perspective:[r],perspectiveOrigin:[r],transformStyle:[r],transformOriginZ:[r],animation:[r],animationDelay:[r],animationDirection:[r],animationFillMode:[r],animationDuration:[r],animationIterationCount:[r],animationName:[r],animationPlayState:[r],animationTimingFunction:[r],backdropFilter:[r],fontKerning:[r],scrollSnapType:[r,i],scrollSnapPointsX:[r,i],scrollSnapPointsY:[r,i],scrollSnapDestination:[r,i],scrollSnapCoordinate:[r,i],shapeImageThreshold:[r],shapeImageMargin:[r],shapeImageOutside:[r],hyphens:[r,n,i],flowInto:[r,i],flowFrom:[r,i],regionFragment:[r,i],textAlignLast:[n],tabSize:[n],wrapFlow:[i],wrapThrough:[i],wrapMargin:[i],gridTemplateColumns:[i],gridTemplateRows:[i],gridTemplateAreas:[i],gridTemplate:[i],gridAutoColumns:[i],gridAutoRows:[i],gridAutoFlow:[i],grid:[i],gridRowStart:[i],gridColumnStart:[i],gridRowEnd:[i],gridRow:[i],gridColumn:[i],gridColumnEnd:[i],gridColumnGap:[i],gridRowGap:[i],gridArea:[i],gridGap:[i],textSizeAdjust:[r,i],transitionDelay:[r],transitionDuration:[r],transitionProperty:[r],transitionTimingFunction:[r]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(22);var i=f(n);var a=r(23);var o=f(a);var s=r(24);var l=f(s);var u=r(25);var c=f(u);function f(e){return e&&e.__esModule?e:{default:e}}t.default=[i.default,o.default,l.default,c.default]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t,r,n){e=e.trim();if(e[0]!==">"){return null}e=e.slice(1).trim();var i=t;if(!n)i+=" ";i+=">";if(!n)i+=" ";i+=e;return r(i)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t,r,n){e=e.trim();if(e[0]!=="&"){return null}var i=!e.match(/^&\s+/);e=e.replace(/^&/,"");var a=e.split(",").map(function(e){return e.trim()}).map(function(e,r){return""+t+(r===0&&i?"":" ")+e}).join(", ");return r(a)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t,r,n){e=e.trim();if(e[0]!==":"){return null}var i=t+e;return r(i)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t,r,n){e=e.trim();if(e[0]!=="@"){return null}return r(t,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(4);var a=r(18);var o=u(a);var s=r(17);var l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(e){p(t,e);function t(e,r,n){c(this,t);return f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,[],n))}n(t,[{key:"_generateVariationRulesets",value:function e(){var t=this;var r=(0,i.flatten)(this._styles.map(function(e){return e.getVariations()}));var n=(0,i.findAllCombinations)(r);return n.map(function(e){var r=t._generateClassName(e);var n="."+r;var i=new o.default(t._adonis,n,t._getCombinedStyles(e),{theme:t._theme});return[i,i.getSubRulesets()]})}},{key:"_generateRulesets",value:function e(){var t=new o.default(this._adonis,this._baseSelector,this._getCombinedStyles(),{theme:this._theme});var r=[t,t.getSubRulesets()];r.push(this._generateVariationRulesets());return(0,i.flatten)(r)}}]);return t}(l.default);t.default=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(16);var i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(){o(this,t);return s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return t}(i.default);t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(6);var a=l(i);var o=r(8);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}t.default=function(e){var t=function(t){f(r,t);function r(){u(this,r);return c(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}n(r,[{key:"_cloneProps",value:function e(){var t=this;var r={};Object.keys(this.props).forEach(function(e){r[e]=t.props[e]});return r}},{key:"render",value:function t(){var r=this._cloneProps();var n=r.innerRef;if(n){r.ref=n}delete r.innerRef;return a.default.createElement(e,r)}}]);return r}(a.default.Component);t.contextTypes={theme:s.default.object};return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(6);var a=l(i);var o=r(8);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var p=function(e){f(t,e);function t(){u(this,t);return c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}n(t,[{key:"getChildContext",value:function e(){var t={};for(var r in this.context){t[r]=this.context}t.theme=this.props.theme;return t}},{key:"render",value:function e(){if(!this.props.children){return null}return a.default.Children.only(this.props.children)}}]);return t}(i.Component);t.default=p;p.childContextTypes={theme:s.default.object.isRequired};p.contextTypes={theme:s.default.object}}])})},function(e,t,r){r(91);r(33);r(45);r(160);r(167);r(168);e.exports=r(9).Promise},function(e,t,r){var n=r(62);var i=r(59);e.exports=function(e){return function(t,r){var a=String(i(t));var o=n(r);var s=a.length;var l,u;if(o<0||o>=s)return e?"":undefined;l=a.charCodeAt(o);return l<55296||l>56319||o+1===s||(u=a.charCodeAt(o+1))<56320||u>57343?e?a.charAt(o):l:e?a.slice(o,o+2):(l-55296<<10)+(u-56320)+65536}}},function(e,t,r){"use strict";var n=r(60);var i=r(28);var a=r(44);var o={};r(19)(o,r(11)("iterator"),function(){return this});e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)});a(e,t+" Iterator")}},function(e,t,r){"use strict";var n=r(158);var i=r(159);var a=r(27);var o=r(20);e.exports=r(92)(Array,"Array",function(e,t){this._t=o(e);this._i=0;this._k=t},function(){var e=this._t;var t=this._k;var r=this._i++;if(!e||r>=e.length){this._t=undefined;return i(1)}if(t=="keys")return i(0,r);if(t=="values")return i(0,e[r]);return i(0,[r,e[r]])},"values");a.Arguments=a.Array;n("keys");n("values");n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n=r(43);var i=r(13);var a=r(24);var o=r(67);var s=r(12);var l=r(17);var u=r(39);var c=r(161);var f=r(162);var p=r(96);var v=r(69).set;var h=r(164)();var d=r(70);var m=r(97);var _=r(98);var g="Promise";var y=i.TypeError;var b=i.process;var k=i[g];var w=o(b)=="process";var C=function(){};var S,E,x,T;var O=E=d.f;var R=!!function(){try{var e=k.resolve(1);var t=(e.constructor={})[r(11)("species")]=function(e){e(C,C)};return(w||typeof PromiseRejectionEvent=="function")&&e.then(C)instanceof t}catch(e){}}();var D=function(e){var t;return l(e)&&typeof(t=e.then)=="function"?t:false};var I=function(e,t){if(e._n)return;e._n=true;var r=e._c;h(function(){var n=e._v;var i=e._s==1;var a=0;var o=function(t){var r=i?t.ok:t.fail;var a=t.resolve;var o=t.reject;var s=t.domain;var l,u;try{if(r){if(!i){if(e._h==2)A(e);e._h=1}if(r===true)l=n;else{if(s)s.enter();l=r(n);if(s)s.exit()}if(l===t.promise){o(y("Promise-chain cycle"))}else if(u=D(l)){u.call(l,a,o)}else a(l)}else o(n)}catch(e){o(e)}};while(r.length>a)o(r[a++]);e._c=[];e._n=false;if(t&&!e._h)P(e)})};var P=function(e){v.call(i,function(){var t=e._v;var r=j(e);var n,a,o;if(r){n=m(function(){if(w){b.emit("unhandledRejection",t,e)}else if(a=i.onunhandledrejection){a({promise:e,reason:t})}else if((o=i.console)&&o.error){o.error("Unhandled promise rejection",t)}});e._h=w||j(e)?2:1}e._a=undefined;if(r&&n.e)throw n.v})};var j=function(e){return e._h!==1&&(e._a||e._c).length===0};var A=function(e){v.call(i,function(){var t;if(w){b.emit("rejectionHandled",e)}else if(t=i.onrejectionhandled){t({promise:e,reason:e._v})}})};var B=function(e){var t=this;if(t._d)return;t._d=true;t=t._w||t;t._v=e;t._s=2;if(!t._a)t._a=t._c.slice();I(t,true)};var M=function(e){var t=this;var r;if(t._d)return;t._d=true;t=t._w||t;try{if(t===e)throw y("Promise can't be resolved itself");if(r=D(e)){h(function(){var n={_w:t,_d:false};try{r.call(e,a(M,n,1),a(B,n,1))}catch(e){B.call(n,e)}})}else{t._v=e;t._s=1;I(t,false)}}catch(e){B.call({_w:t,_d:false},e)}};if(!R){k=function e(t){c(this,k,g,"_h");u(t);S.call(this);try{t(a(M,this,1),a(B,this,1))}catch(e){B.call(this,e)}};S=function e(t){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};S.prototype=r(165)(k.prototype,{then:function e(t,r){var n=O(p(this,k));n.ok=typeof t=="function"?t:true;n.fail=typeof r=="function"&&r;n.domain=w?b.domain:undefined;this._c.push(n);if(this._a)this._a.push(n);if(this._s)I(this,false);return n.promise},catch:function(e){return this.then(undefined,e)}});x=function(){var e=new S;this.promise=e;this.resolve=a(M,e,1);this.reject=a(B,e,1)};d.f=O=function(e){return e===k||e===T?new x(e):E(e)}}s(s.G+s.W+s.F*!R,{Promise:k});r(44)(k,g);r(166)(g);T=r(9)[g];s(s.S+s.F*!R,g,{reject:function e(t){var r=O(this);var n=r.reject;n(t);return r.promise}});s(s.S+s.F*(n||!R),g,{resolve:function e(t){return _(n&&this===T?k:this,t)}});s(s.S+s.F*!(R&&r(99)(function(e){k.all(e)["catch"](C)})),g,{all:function e(t){var r=this;var n=O(r);var i=n.resolve;var a=n.reject;var o=m(function(){var e=[];var n=0;var o=1;f(t,false,function(t){var s=n++;var l=false;e.push(undefined);o++;r.resolve(t).then(function(t){if(l)return;l=true;e[s]=t;--o||i(e)},a)});--o||i(e)});if(o.e)a(o.v);return n.promise},race:function e(t){var r=this;var n=O(r);var i=n.reject;var a=m(function(){f(t,false,function(e){r.resolve(e).then(n.resolve,i)})});if(a.e)i(a.v);return n.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||n!==undefined&&n in e){throw TypeError(r+": incorrect invocation!")}return e}},function(e,t,r){var n=r(24);var i=r(94);var a=r(95);var o=r(14);var s=r(61);var l=r(68);var u={};var c={};var t=e.exports=function(e,t,r,f,p){var v=p?function(){return e}:l(e);var h=n(r,f,t?2:1);var d=0;var m,_,g,y;if(typeof v!="function")throw TypeError(e+" is not iterable!");if(a(v))for(m=s(e.length);m>d;d++){y=t?h(o(_=e[d])[0],_[1]):h(e[d]);if(y===u||y===c)return y}else for(g=v.call(e);!(_=g.next()).done;){y=i(g,h,_.value,t);if(y===u||y===c)return y}};t.BREAK=u;t.RETURN=c},function(e,t){e.exports=function(e,t,r){var n=r===undefined;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(13);var i=r(69).set;var a=n.MutationObserver||n.WebKitMutationObserver;var o=n.process;var s=n.Promise;var l=r(29)(o)=="process";e.exports=function(){var e,t,r;var u=function(){var n,i;if(l&&(n=o.domain))n.exit();while(e){i=e.fn;e=e.next;try{i()}catch(n){if(e)r();else t=undefined;throw n}}t=undefined;if(n)n.enter()};if(l){r=function(){o.nextTick(u)}}else if(a&&!(n.navigator&&n.navigator.standalone)){var c=true;var f=document.createTextNode("");new a(u).observe(f,{characterData:true});r=function(){f.data=c=!c}}else if(s&&s.resolve){var p=s.resolve();r=function(){p.then(u)}}else{r=function(){i.call(n,u)}}return function(n){var i={fn:n,next:undefined};if(t)t.next=i;if(!e){e=i;r()}t=i}}},function(e,t,r){var n=r(19);e.exports=function(e,t,r){for(var i in t){if(r&&e[i])e[i]=t[i];else n(e,i,t[i])}return e}},function(e,t,r){"use strict";var n=r(13);var i=r(9);var a=r(16);var o=r(18);var s=r(11)("species");e.exports=function(e){var t=typeof i[e]=="function"?i[e]:n[e];if(o&&t&&!t[s])a.f(t,s,{configurable:true,get:function(){return this}})}},function(e,t,r){"use strict";var n=r(12);var i=r(9);var a=r(13);var o=r(96);var s=r(98);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise);var r=typeof e=="function";return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(12);var i=r(70);var a=r(97);n(n.S,"Promise",{try:function(e){var t=i.f(this);var r=a(e);(r.e?t.reject:t.resolve)(r.v);return t.promise}})},function(e,t,r){"use strict";var n=r(7);var i=r.n(n);var a=r(46);var o=r(192);var s=r(48);var l=i.a.Utils;var u=i.a.Math.Vector2;var c={getInnerDimensionsForElement:function e(t){var r=new u(t.offsetWidth,t.offsetHeight);var n=window.getComputedStyle(t,null);r.x-=parseInt(n.getPropertyValue("padding-left"),10);r.x-=parseInt(n.getPropertyValue("padding-right"),10);r.y-=parseInt(n.getPropertyValue("padding-top"),10);r.y-=parseInt(n.getPropertyValue("padding-bottom"),10);return r},getEventPosition:function e(t){var r=t.clientX;var n=t.clientY;if(t.type.indexOf("touch")!==-1){if(!t.touches.length)return;r=t.touches[0].clientX;n=t.touches[0].clientY}return new u(r,n)},createTransparentPatternCanvas:function e(){var t=document.createElement("canvas");var r=t.getContext("2d");t.width=10;t.height=10;r.fillStyle="white";r.fillRect(0,0,t.width,t.height);r.fillStyle="#cccccc";r.fillRect(0,0,t.width/2,t.height/2);r.fillRect(t.width/2,t.height/2,t.width,t.height);return t},supportsMSBlob:function e(){var t=document.createElement("canvas");return typeof t.msToBlob!=="undefined"},translate:function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=this.fetch(t,r);if(!i){a["a"].info("Utils#translate","Unable to translate `"+r+"`");return null}for(var o in n){i=i.replace("${"+o+"}",n[o])}return i},fetch:function e(t,r,n){r=r.replace(/\[(\w+)]/g,".$1");r=r.replace(/^\./,"");var i=r.split(".");for(var a=0;a<i.length;a++){var o=i[a];t=t[o];if(!t){break}}if(typeof t==="undefined"){return false}return t},isMobile:function e(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},select:function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!n)n=function e(t){return t};var i=[];r.forEach(function(e){t.forEach(function(t){var r=n(t);if(r===e){i.push(t)}})});return i},getJSONP:function e(t){var r=new s["a"](t);return r.load()},cloneCategories:function e(t,r){return t.map(function(e){e=l.clone(e);e[r]=e[r].slice(0);return e})},mergeCategories:function e(t,r,n){t=this.cloneCategories(t,n);var i=null;r.forEach(function(e){t.forEach(function(t){if(e.identifier===t.identifier){i=t}});if(!i){t.push(e)}else{i[n]=i[n].concat(e[n])}});return t},getStyleObject:function e(t){var r=window.getComputedStyle(t);var n={};for(var i in r){var a=r.getPropertyValue(i);var o=i.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});if(a!==""){n[o]=a}}return n},styleElement:function e(t,r){for(var n in r){t.style[n]=r[n]}},debounce:function e(t,r,n){var i;return function(){var e=this;var a=arguments;var o=function r(){i=null;if(!n)t.apply(e,a)};var s=n&&!i;clearTimeout(i);i=setTimeout(o,r);if(s)t.apply(this,a)}},getScrollbarWidth:function e(){var t=document.createElement("div");t.style.visibility="hidden";t.style.width="100px";t.style.msOverflowStyle="scrollbar";document.body.appendChild(t);var r=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%";t.appendChild(n);var i=n.offsetWidth;t.parentNode.removeChild(t);return r-i},findIntegerFraction:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var n=Number.MAX_VALUE;var i=0;var a=0;var o=1;var s=1;for(var l=0;l<r;l++){var c=o/s-t;if(c<0){o++}else if(c>0){s++}else{return new u(o,s)}var f=Math.abs(o/s-t);if(f<n){n=f;i=o;a=s}}return new u(i,a)},toFixed:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var n=t.toFixed(r);return parseFloat(n)},capitalize:function e(t){return t.charAt(0).toUpperCase()+t.slice(1)},flipObject:function e(t){var r={};for(var n in t){r[t[n]]=n}return r},Browser:o["a"]};t["a"]=c},function(e,t,r){r(33);r(171);e.exports=r(9).Array.from},function(e,t,r){"use strict";var n=r(24);var i=r(12);var a=r(31);var o=r(94);var s=r(95);var l=r(61);var u=r(172);var c=r(68);i(i.S+i.F*!r(99)(function(e){Array.from(e)}),"Array",{from:function e(t){var r=a(t);var i=typeof this=="function"?this:Array;var f=arguments.length;var p=f>1?arguments[1]:undefined;var v=p!==undefined;var h=0;var d=c(r);var m,_,g,y;if(v)p=n(p,f>2?arguments[2]:undefined,2);if(d!=undefined&&!(i==Array&&s(d))){for(y=d.call(r),_=new i;!(g=y.next()).done;h++){u(_,h,v?o(y,p,[g.value,h],true):g.value)}}else{m=l(r.length);for(_=new i(m);m>h;h++){u(_,h,v?p(r[h],h):r[h])}}_.length=h;return _}})},function(e,t,r){"use strict";var n=r(16);var i=r(28);e.exports=function(e,t,r){if(t in e)n.f(e,t,i(0,r));else e[t]=r}},function(e,t,r){e.exports={default:r(174),__esModule:true}},function(e,t,r){var n=r(9);var i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function e(t){return i.stringify.apply(i,arguments)}},function(e,t,r){"use strict";(function(e){var n=r(10);var i=r.n(n);var a=r(34);var o=r.n(a);var s=r(35);var l=r.n(s);var u=r(36);var c=r.n(u);var f=r(0);var p=r.n(f);var v=r(8);var h=r.n(v);var d=r(47);var m=r.n(d);var _=r(1);var g=r.n(_);var y=r(190);var b=r(191);var k=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var w=typeof c.a==="function"&&typeof l.a==="symbol"?function(e){return typeof e}:function(e){return e&&typeof c.a==="function"&&e.constructor===c.a&&e!==c.a.prototype?"symbol":typeof e};var C=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;p()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function S(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++){r[t]=e[t]}return r}else{return o()(e)}}function E(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var x=function(){function t(){E(this,t)}C(t,null,[{key:"isArray",value:function e(t){return Object.prototype.toString.call(t)==="[object Array]"}},{key:"isPlainObject",value:function e(t){if((typeof t==="undefined"?"undefined":w(t))!=="object"||!t){return false}if(typeof g.a==="function"){var r=g()(t);return r===Object.prototype||r===null}return Object.prototype.toString.call(t)==="[object Object]"}},{key:"isMobile",value:function e(){if(typeof navigator==="undefined")return false;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}},{key:"isBrowser",value:function e(){return typeof window!=="undefined"}},{key:"isNode",value:function t(){return typeof window==="undefined"&&typeof e!=="undefined"}},{key:"values",value:function e(t){var e=[];for(var r in t){e.push(t[r])}return e}},{key:"isDOMElement",value:function e(t){return(typeof HTMLElement==="undefined"?"undefined":w(HTMLElement))==="object"?t instanceof HTMLElement:t&&(typeof t==="undefined"?"undefined":w(t))==="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName==="string"}},{key:"isTouchEvent",value:function e(t){return t.type.indexOf("touch")!==-1}},{key:"resizeVectorToFit",value:function e(t,r){var n=Math.min(r.x/t.x,r.y/t.y);var i=t.clone().multiply(n);return i}},{key:"resizeVectorToFill",value:function e(t,r){var n=t.x/t.y;var i=r.x/r.y;if(n>i){return r.clone().set(r.y*n,r.y)}else{return r.clone().set(r.x,r.x/n)}}},{key:"isExtendable",value:function e(t){return typeof t!=="undefined"&&t!==null&&((typeof t==="undefined"?"undefined":w(t))==="object"||typeof t==="function")}},{key:"defaults",value:function e(t){var r={};for(var n in t){r[n]=t[n]}for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++){a[o-1]=arguments[o]}for(var s=0;s<a.length;s++){var l=a[s];for(var u in l){if(typeof r[u]==="undefined"){r[u]=l[u]}}}return r}},{key:"deepMerge",value:function e(r){var n=function e(r,n){if(n===undefined){return e(null,r)}if(Array.isArray(n)){return[].concat(S(n))}if(!t.isPlainObject(n)){return n}if(!t.isPlainObject(r)){return k({},n)}var i=k({},r);m()(n).forEach(function(t){var a=n[t];if(a===undefined){return}i[t]=e(r[t],a)});return i};for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++){a[o-1]=arguments[o]}return a.reduce(n,r)}},{key:"deepDefaults",value:function e(r){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++){i[a-1]=arguments[a]}var o=[].concat(i).reverse();return t.deepMerge.apply(t,S(o).concat([r]))}},{key:"deepClone",value:function e(r){var n={};for(var i in r){if(t.isExtendable(r[i])){n[i]=t.deepClone(r[i])}else{n[i]=r[i]}}return n}},{key:"getDeepProperty",value:function e(t,r){if(typeof r==="string"){return t[r]}if(!Array.isArray(r)){return undefined}var n=function e(t,r){var n=void 0;try{n=r(t)}catch(e){if(!(e instanceof TypeError)){throw e}}return n};return r.reduce(function(e,t){return e?typeof t==="function"?n(e,t):e[t]:null},t)}},{key:"extend",value:function e(t){var r={};for(var n in t){r[n]=t[n]}for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++){a[o-1]=arguments[o]}for(var s=0;s<a.length;s++){var l=a[s];for(var u in l){r[u]=l[u]}}return r}},{key:"clone",value:function e(t){return this.extend({},t)}},{key:"createBlobURIFromDataURI",value:function t(r){var n=typeof window==="undefined"?e:window;if(!n.Blob||!n.URL||!ArrayBuffer||!Uint8Array){return r}var i=y["a"].decode(r.split(",")[1]);var a=r.split(",")[0].split(":")[1].split(";")[0];var o=new ArrayBuffer(i.length);var s=new Uint8Array(o);for(var l=0;l<i.length;l++){s[l]=i[l]}var u=new n.Blob([o],{type:a});return n.URL.createObjectURL(u)}},{key:"getUUID",value:function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0;var r=e==="x"?t:t&3|8;return r.toString(16)})}},{key:"createCanvas",value:function e(){return document.createElement("canvas")}},{key:"isPowerOfTwo",value:function e(t){return(t.x&t.x-1)===0&&(t.y&t.y-1)===0}},{key:"nextLowestPOT",value:function e(t){for(var r=1;r<32;r<<=1){t=t|t>>r}return t-(t>>1)}},{key:"nextHighestPOT",value:function e(t){t--;for(var r=1;r<32;r<<=1){t=t|t>>r}return t+1}},{key:"moveArrayItem",value:function e(t,r,n){if(n>=t.length){var i=n-t.length;while(i--+1){t.push(undefined)}}t.splice(n,0,t.splice(r,1)[0])}},{key:"ensureCanvasDimensions",value:function e(t,r){if(t.width!==r.x||t.height!==r.y){t.width=r.x;t.height=r.y}}},{key:"byteArrayToString",value:function e(t){return t.map(function(e){return String.fromCharCode(e)}).join("")}},{key:"clamp",value:function e(t,r,n){return Math.max(r,Math.min(t,n))}},{key:"wildCardMatch",value:function e(t,r){return new RegExp("^"+r.split("*").join(".*")+"$").test(t)}},{key:"flipObject",value:function e(t){var r={};for(var n in t){r[t[n]]=n}return r}},{key:"cloneOptions",value:function e(t){var r={};for(var n in t){var i=t[n];if(Array.isArray(i)){i=i.slice()}else if(i.clone){i=i.clone()}r[n]=i}return r}},{key:"ISODateString",value:function e(t){function r(e){return e<10?"0"+e:e}return t.getUTCFullYear()+"-"+r(t.getUTCMonth()+1)+"-"+r(t.getUTCDate())+"T"+r(t.getUTCHours())+":"+r(t.getUTCMinutes())+":"+r(t.getUTCSeconds())+"Z"}},{key:"getCrossOriginValue",value:function e(t){if(!t){return"anonymous"}if(t==="none"){return undefined}return t}},{key:"shallowEqual",value:function e(t,r){if(t===r){return true}if((typeof t==="undefined"?"undefined":w(t))!=="object"||t===null||(typeof r==="undefined"?"undefined":w(r))!=="object"||r===null){return false}var n=m()(t);var i=m()(r);if(n.length!==i.length){return false}var a=hasOwnProperty.bind(r);for(var o=0;o<n.length;o++){if(!a(n[o])||t[n[o]]!==r[n[o]]){return false}}return true}},{key:"enableIf",value:function e(t,r){return t?r:undefined}},{key:"invariant",value:function e(t,r){if(!t){var n=new Error(r);throw n}}},{key:"executePromises",value:function e(t){var r=t.length;var n=0;var i=[];var a=[];return new h.a(function(e,o){var s=function t(){n++;if(n>=r){if(a.length<=0){e(i)}else{o(a)}}};var l=function e(t){i.push(t);s()};var u=function e(t){a.push(t);s()};t.forEach(function(e){e.then(l).catch(u)})})}}]);return t}();x.Array=b["a"];t["a"]=x}).call(t,r(26))},function(e,t,r){r(177);e.exports=r(9).Object.assign},function(e,t,r){var n=r(12);n(n.S+n.F,"Object",{assign:r(178)})},function(e,t,r){"use strict";var n=r(30);var i=r(71);var a=r(40);var o=r(31);var s=r(85);var l=Object.assign;e.exports=!l||r(25)(function(){var e={};var t={};var r=Symbol();var n="abcdefghijklmnopqrst";e[r]=7;n.split("").forEach(function(e){t[e]=e});return l({},e)[r]!=7||Object.keys(l({},t)).join("")!=n})?function e(t,r){var l=o(t);var u=arguments.length;var c=1;var f=i.f;var p=a.f;while(u>c){var v=s(arguments[c++]);var h=f?n(v).concat(f(v)):n(v);var d=h.length;var m=0;var _;while(d>m)if(p.call(v,_=h[m++]))l[_]=v[_]}return l}:l},function(e,t,r){r(33);r(45);e.exports=r(72).f("iterator")},function(e,t,r){r(181);r(91);r(186);r(187);e.exports=r(9).Symbol},function(e,t,r){"use strict";var n=r(13);var i=r(21);var a=r(18);var o=r(12);var s=r(93);var l=r(182).KEY;var u=r(25);var c=r(64);var f=r(44);var p=r(41);var v=r(11);var h=r(72);var d=r(73);var m=r(183);var _=r(184);var g=r(14);var y=r(17);var b=r(20);var k=r(57);var w=r(28);var C=r(60);var S=r(185);var E=r(58);var x=r(16);var T=r(30);var O=E.f;var R=x.f;var D=S.f;var I=n.Symbol;var P=n.JSON;var j=P&&P.stringify;var A="prototype";var B=v("_hidden");var M=v("toPrimitive");var F={}.propertyIsEnumerable;var N=c("symbol-registry");var L=c("symbols");var z=c("op-symbols");var V=Object[A];var U=typeof I=="function";var W=n.QObject;var H=!W||!W[A]||!W[A].findChild;var q=a&&u(function(){return C(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a!=7})?function(e,t,r){var n=O(V,t);if(n)delete V[t];R(e,t,r);if(n&&e!==V)R(V,t,n)}:R;var G=function(e){var t=L[e]=C(I[A]);t._k=e;return t};var K=U&&typeof I.iterator=="symbol"?function(e){return typeof e=="symbol"}:function(e){return e instanceof I};var Z=function e(t,r,n){if(t===V)Z(z,r,n);g(t);r=k(r,true);g(n);if(i(L,r)){if(!n.enumerable){if(!i(t,B))R(t,B,w(1,{}));t[B][r]=true}else{if(i(t,B)&&t[B][r])t[B][r]=false;n=C(n,{enumerable:w(0,false)})}return q(t,r,n)}return R(t,r,n)};var Y=function e(t,r){g(t);var n=m(r=b(r));var i=0;var a=n.length;var o;while(a>i)Z(t,o=n[i++],r[o]);return t};var Q=function e(t,r){return r===undefined?C(t):Y(C(t),r)};var J=function e(t){var r=F.call(this,t=k(t,true));if(this===V&&i(L,t)&&!i(z,t))return false;return r||!i(this,t)||!i(L,t)||i(this,B)&&this[B][t]?r:true};var X=function e(t,r){t=b(t);r=k(r,true);if(t===V&&i(L,r)&&!i(z,r))return;var n=O(t,r);if(n&&i(L,r)&&!(i(t,B)&&t[B][r]))n.enumerable=true;return n};var $=function e(t){var r=D(b(t));var n=[];var a=0;var o;while(r.length>a){if(!i(L,o=r[a++])&&o!=B&&o!=l)n.push(o)}return n};var ee=function e(t){var r=t===V;var n=D(r?z:b(t));var a=[];var o=0;var s;while(n.length>o){if(i(L,s=n[o++])&&(r?i(V,s):true))a.push(L[s])}return a};if(!U){I=function e(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:undefined);var r=function(e){if(this===V)r.call(z,e);if(i(this,B)&&i(this[B],t))this[B][t]=false;q(this,t,w(1,e))};if(a&&H)q(V,t,{configurable:true,set:r});return G(t)};s(I[A],"toString",function e(){return this._k});E.f=X;x.f=Z;r(101).f=S.f=$;r(40).f=J;r(71).f=ee;if(a&&!r(43)){s(V,"propertyIsEnumerable",J,true)}h.f=function(e){return G(v(e))}}o(o.G+o.W+o.F*!U,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)v(te[re++]);for(var ne=T(v.store),ie=0;ne.length>ie;)d(ne[ie++]);o(o.S+o.F*!U,"Symbol",{for:function(e){return i(N,e+="")?N[e]:N[e]=I(e)},keyFor:function e(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var r in N)if(N[r]===t)return r},useSetter:function(){H=true},useSimple:function(){H=false}});o(o.S+o.F*!U,"Object",{create:Q,defineProperty:Z,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:ee});P&&o(o.S+o.F*(!U||u(function(){var e=I();return j([e])!="[null]"||j({a:e})!="{}"||j(Object(e))!="{}"})),"JSON",{stringify:function e(t){var r=[t];var n=1;var i,a;while(arguments.length>n)r.push(arguments[n++]);a=i=r[1];if(!y(i)&&t===undefined||K(t))return;if(!_(i))i=function(e,t){if(typeof a=="function")t=a.call(this,e,t);if(!K(t))return t};r[1]=i;return j.apply(P,r)}});I[A][M]||r(19)(I[A],M,I[A].valueOf);f(I,"Symbol");f(Math,"Math",true);f(n.JSON,"JSON",true)},function(e,t,r){var n=r(41)("meta");var i=r(17);var a=r(21);var o=r(16).f;var s=0;var l=Object.isExtensible||function(){return true};var u=!r(25)(function(){return l(Object.preventExtensions({}))});var c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})};var f=function(e,t){if(!i(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!a(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i};var p=function(e,t){if(!a(e,n)){if(!l(e))return true;if(!t)return false;c(e)}return e[n].w};var v=function(e){if(u&&h.NEED&&l(e)&&!a(e,n))c(e);return e};var h=e.exports={KEY:n,NEED:false,fastKey:f,getWeak:p,onFreeze:v}},function(e,t,r){var n=r(30);var i=r(71);var a=r(40);e.exports=function(e){var t=n(e);var r=i.f;if(r){var o=r(e);var s=a.f;var l=0;var u;while(o.length>l)if(s.call(e,u=o[l++]))t.push(u)}return t}},function(e,t,r){var n=r(29);e.exports=Array.isArray||function e(t){return n(t)=="Array"}},function(e,t,r){var n=r(20);var i=r(101).f;var a={}.toString;var o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function e(t){return o&&a.call(t)=="[object Window]"?s(t):i(n(t))}},function(e,t,r){r(73)("asyncIterator")},function(e,t,r){r(73)("observable")},function(e,t,r){r(189);e.exports=r(9).Object.keys},function(e,t,r){var n=r(31);var i=r(30);r(66)("keys",function(){return function e(t){return i(n(t))}})},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var i={encode:function e(t){var r="";var i=void 0,a=void 0,o=void 0;var s=void 0,l=void 0,u=void 0,c=void 0;var f=0;do{i=t[f++];a=t[f++];o=t[f++];s=i>>2;l=(i&3)<<4|a>>4;u=(a&15)<<2|o>>6;c=o&63;if(isNaN(a)){u=c=64}else if(isNaN(o)){c=64}r=r+n.charAt(s)+n.charAt(l)+n.charAt(u)+n.charAt(c);i=a=o="";s=l=u=c=""}while(f<t.length);return r},decode:function e(t){var r=void 0,i=void 0,a=void 0;var o=void 0,s=void 0,l=void 0,u=void 0;var c=0;var f=[];var p=/[^A-Za-z0-9+/=]/g;if(p.exec(t)){throw new Error("There were invalid base64 characters in the input text.\n"+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n"+"Expect errors in decoding.")}t=t.replace(/[^A-Za-z0-9+/=]/g,"");do{o=n.indexOf(t.charAt(c++));s=n.indexOf(t.charAt(c++));l=n.indexOf(t.charAt(c++));u=n.indexOf(t.charAt(c++));r=o<<2|s>>4;i=(s&15)<<4|l>>2;a=(l&3)<<6|u;f.push(r);if(l!==64){f.push(i)}if(u!==64){f.push(a)}r=i=a="";o=s=l=u=""}while(c<t.length);return f}};t["a"]=i},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function e(){o(this,e)}a(e,null,[{key:"head",value:function e(t){return t[0]}},{key:"tail",value:function e(t){return t.slice(1)}},{key:"last",value:function e(t){return t[t.length-1]}},{key:"init",value:function e(t){return t.slice(0,t.length-1)}},{key:"remove",value:function e(t,r){return t.filter(function(e,t,n){return!r(e,t,n)})}},{key:"findIndex",value:function e(t,r){for(var n=0;n<t.length;n++){if(r(t[n])){return n}}return-1}},{key:"find",value:function e(t,r){for(var n=0;n<t.length;n++){if(r(t[n])){return t[n]}}return undefined}},{key:"flatten",value:function t(r){return r.reduce(function(t,r){return t.concat(Array.isArray(r)?e.flatten(r):r)},[])}},{key:"range",value:function e(t,r){var n=[];if(r>t){for(var i=t;i<r;i++){n.push(i)}}return n}},{key:"repeat",value:function e(t,r){var n=[];for(var i=0;i<r;i++){n[i]=t}return n}},{key:"zip",value:function e(t,r){var n=Math.min(t.length,r.length);var i=[];for(var a=0;a<n;a++){i[a]=[t[a],r[a]]}return i}}]);return e}();t["a"]=s},function(e,t,r){"use strict";t["a"]={getIEVersion:function e(){var t=navigator,r=t.userAgent,n=t.appVersion;if(n.indexOf("MSIE")!==-1){return n.match(/MSIE\s+?([0-9]+)/i)[1]}else if(r.indexOf("Trident")!==-1){return r.match(/rv:([0-9]+)/i)[1]}else{return false}},isIE10:function e(){var t=this.getIEVersion();return t!==false&&t===10},isIE11:function e(){var t=this.getIEVersion();return t!==false&&t===11},isIElte:function e(t){var r=this.getIEVersion();if(r===false)return false;return r<=t}}},function(e,t,r){"use strict";(function(e){var n=r(35);var i=r.n(n);var a=r(36);var o=r.n(a);var s=r(8);var l=r.n(s);var u=r(0);var c=r.n(u);var f=r(194);var p=r.n(f);var v=typeof o.a==="function"&&typeof i.a==="symbol"?function(e){return typeof e}:function(e){return e&&typeof o.a==="function"&&e.constructor===o.a&&e!==o.a.prototype?"symbol":typeof e};var h=function e(){"use strict";var t,r,n,i=Object.prototype.toString,a=typeof p.a!="undefined"?function e(t){return p()(t)}:setTimeout;try{Object.defineProperty({},"x",{});t=function e(t,r,n,i){return c()(t,r,{value:n,writable:true,configurable:i!==false})}}catch(e){t=function e(t,r,n){t[r]=n;return t}}n=function e(){var t,n,i;function a(e,t){this.fn=e;this.self=t;this.next=void 0}return{add:function e(r,o){i=new a(r,o);if(n){n.next=i}else{t=i}n=i;i=void 0},drain:function e(){var i=t;t=n=r=void 0;while(i){i.fn.call(i.self);i=i.next}}}}();function o(e,t){n.add(e,t);if(!r){r=a(n.drain)}}function s(e){var t,r=typeof e==="undefined"?"undefined":v(e);if(e!=null&&(r=="object"||r=="function")){t=e.then}return typeof t=="function"?t:false}function l(){for(var e=0;e<this.chain.length;e++){u(this,this.state===1?this.chain[e].success:this.chain[e].failure,this.chain[e])}this.chain.length=0}function u(e,t,r){var n,i;try{if(t===false){r.reject(e.msg)}else{if(t===true){n=e.msg}else{n=t.call(void 0,e.msg)}if(n===r.promise){r.reject(TypeError("Promise-chain cycle"))}else if(i=s(n)){i.call(n,r.resolve,r.reject)}else{r.resolve(n)}}}catch(e){r.reject(e)}}function f(e){var t,r=this;if(r.triggered){return}r.triggered=true;if(r.def){r=r.def}try{if(t=s(e)){o(function(){var n=new m(r);try{t.call(e,function e(){f.apply(n,arguments)},function e(){h.apply(n,arguments)})}catch(e){h.call(n,e)}})}else{r.msg=e;r.state=1;if(r.chain.length>0){o(l,r)}}}catch(e){h.call(new m(r),e)}}function h(e){var t=this;if(t.triggered){return}t.triggered=true;if(t.def){t=t.def}t.msg=e;t.state=2;if(t.chain.length>0){o(l,t)}}function d(e,t,r,n){for(var i=0;i<t.length;i++){(function i(a){e.resolve(t[a]).then(function e(t){r(a,t)},n)})(i)}}function m(e){this.def=e;this.triggered=false}function _(e){this.promise=e;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function g(e){if(typeof e!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var t=new _(this);this["then"]=function e(r,n){var i={success:typeof r=="function"?r:true,failure:typeof n=="function"?n:false};i.promise=new this.constructor(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}i.resolve=t;i.reject=r});t.chain.push(i);if(t.state!==0){o(l,t)}return i.promise};this["catch"]=function e(t){return this.then(void 0,t)};try{e.call(void 0,function e(r){f.call(t,r)},function e(r){h.call(t,r)})}catch(e){h.call(t,e)}}var y=t({},"constructor",g,false);g.prototype=y;t(y,"__NPO__",0,false);t(g,"resolve",function e(t){var r=this;if(t&&(typeof t==="undefined"?"undefined":v(t))=="object"&&t.__NPO__===1){return t}return new r(function e(r,n){if(typeof r!="function"||typeof n!="function"){throw TypeError("Not a function")}r(t)})});t(g,"reject",function e(t){return new this(function e(r,n){if(typeof r!="function"||typeof n!="function"){throw TypeError("Not a function")}n(t)})});t(g,"all",function e(t){var r=this;if(i.call(t)!="[object Array]"){return r.reject(TypeError("Not an array"))}if(t.length===0){return r.resolve([])}return new r(function e(n,i){if(typeof n!="function"||typeof i!="function"){throw TypeError("Not a function")}var a=t.length,o=Array(a),s=0;d(r,t,function e(t,r){o[t]=r;if(++s===a){n(o)}},i)})});t(g,"race",function e(t){var r=this;if(i.call(t)!="[object Array]"){return r.reject(TypeError("Not an array"))}return new r(function e(n,i){if(typeof n!="function"||typeof i!="function"){throw TypeError("Not a function")}d(r,t,function e(t,r){n(r)},i)})});return g};var d=typeof e==="undefined"?window:e;var m=typeof l.a!=="undefined"?l.a:h();d.Promise=d.Promise||m;t["a"]=m}).call(t,r(26))},function(e,t,r){e.exports={default:r(195),__esModule:true}},function(e,t,r){r(196);e.exports=r(9).setImmediate},function(e,t,r){var n=r(12);var i=r(69);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){"use strict";var n=r(198);var i=r(200);t.parse=k;t.resolve=C;t.resolveObject=S;t.format=w;t.Url=a;function a(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["<",">",'"',"`"," ","\r","\n","\t"],c=["{","}","|","\\","^","`"].concat(u),f=["'"].concat(c),p=["%","/","?",";","#"].concat(f),v=["/","?","#"],h=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:true,"javascript:":true},g={javascript:true,"javascript:":true},y={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},b=r(201);function k(e,t,r){if(e&&i.isObject(e)&&e instanceof a)return e;var n=new a;n.parse(e,t,r);return n}a.prototype.parse=function(e,t,r){if(!i.isString(e)){throw new TypeError("Parameter 'url' must be a string, not "+typeof e)}var a=e.indexOf("?"),s=a!==-1&&a<e.indexOf("#")?"?":"#",u=e.split(s),c=/\\/g;u[0]=u[0].replace(c,"/");e=u.join(s);var k=e;k=k.trim();if(!r&&e.split("#").length===1){var w=l.exec(k);if(w){this.path=k;this.href=k;this.pathname=w[1];if(w[2]){this.search=w[2];if(t){this.query=b.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(t){this.search="";this.query={}}return this}}var C=o.exec(k);if(C){C=C[0];var S=C.toLowerCase();this.protocol=S;k=k.substr(C.length)}if(r||C||k.match(/^\/\/[^@\/]+@[^@\/]+/)){var E=k.substr(0,2)==="//";if(E&&!(C&&g[C])){k=k.substr(2);this.slashes=true}}if(!g[C]&&(E||C&&!y[C])){var x=-1;for(var T=0;T<v.length;T++){var O=k.indexOf(v[T]);if(O!==-1&&(x===-1||O<x))x=O}var R,D;if(x===-1){D=k.lastIndexOf("@")}else{D=k.lastIndexOf("@",x)}if(D!==-1){R=k.slice(0,D);k=k.slice(D+1);this.auth=decodeURIComponent(R)}x=-1;for(var T=0;T<p.length;T++){var O=k.indexOf(p[T]);if(O!==-1&&(x===-1||O<x))x=O}if(x===-1)x=k.length;this.host=k.slice(0,x);k=k.slice(x);this.parseHost();this.hostname=this.hostname||"";var I=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!I){var P=this.hostname.split(/\./);for(var T=0,j=P.length;T<j;T++){var A=P[T];if(!A)continue;if(!A.match(d)){var B="";for(var M=0,F=A.length;M<F;M++){if(A.charCodeAt(M)>127){B+="x"}else{B+=A[M]}}if(!B.match(d)){var N=P.slice(0,T);var L=P.slice(T+1);var z=A.match(m);if(z){N.push(z[1]);L.unshift(z[2])}if(L.length){k="/"+L.join(".")+k}this.hostname=N.join(".");break}}}}if(this.hostname.length>h){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!I){this.hostname=n.toASCII(this.hostname)}var V=this.port?":"+this.port:"";var U=this.hostname||"";this.host=U+V;this.href+=this.host;if(I){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(k[0]!=="/"){k="/"+k}}}if(!_[S]){for(var T=0,j=f.length;T<j;T++){var W=f[T];if(k.indexOf(W)===-1)continue;var H=encodeURIComponent(W);if(H===W){H=escape(W)}k=k.split(W).join(H)}}var q=k.indexOf("#");if(q!==-1){this.hash=k.substr(q);k=k.slice(0,q)}var G=k.indexOf("?");if(G!==-1){this.search=k.substr(G);this.query=k.substr(G+1);if(t){this.query=b.parse(this.query)}k=k.slice(0,G)}else if(t){this.search="";this.query={}}if(k)this.pathname=k;if(y[S]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var V=this.pathname||"";var K=this.search||"";this.path=V+K}this.href=this.format();return this};function w(e){if(i.isString(e))e=k(e);if(!(e instanceof a))return a.prototype.format.call(e);return e.format()}a.prototype.format=function(){var e=this.auth||"";if(e){e=encodeURIComponent(e);e=e.replace(/%3A/i,":");e+="@"}var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",a=false,o="";if(this.host){a=e+this.host}else if(this.hostname){a=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){a+=":"+this.port}}if(this.query&&i.isObject(this.query)&&Object.keys(this.query).length){o=b.stringify(this.query)}var s=this.search||o&&"?"+o||"";if(t&&t.substr(-1)!==":")t+=":";if(this.slashes||(!t||y[t])&&a!==false){a="//"+(a||"");if(r&&r.charAt(0)!=="/")r="/"+r}else if(!a){a=""}if(n&&n.charAt(0)!=="#")n="#"+n;if(s&&s.charAt(0)!=="?")s="?"+s;r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)});s=s.replace("#","%23");return t+a+r+s+n};function C(e,t){return k(e,false,true).resolve(t)}a.prototype.resolve=function(e){return this.resolveObject(k(e,false,true)).format()};function S(e,t){if(!e)return t;return k(e,false,true).resolveObject(t)}a.prototype.resolveObject=function(e){if(i.isString(e)){var t=new a;t.parse(e,false,true);e=t}var r=new a;var n=Object.keys(this);for(var o=0;o<n.length;o++){var s=n[o];r[s]=this[s]}r.hash=e.hash;if(e.href===""){r.href=r.format();return r}if(e.slashes&&!e.protocol){var l=Object.keys(e);for(var u=0;u<l.length;u++){var c=l[u];if(c!=="protocol")r[c]=e[c]}if(y[r.protocol]&&r.hostname&&!r.pathname){r.path=r.pathname="/"}r.href=r.format();return r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){var f=Object.keys(e);for(var p=0;p<f.length;p++){var v=f[p];r[v]=e[v]}r.href=r.format();return r}r.protocol=e.protocol;if(!e.host&&!g[e.protocol]){var h=(e.pathname||"").split("/");while(h.length&&!(e.host=h.shift()));if(!e.host)e.host="";if(!e.hostname)e.hostname="";if(h[0]!=="")h.unshift("");if(h.length<2)h.unshift("");r.pathname=h.join("/")}else{r.pathname=e.pathname}r.search=e.search;r.query=e.query;r.host=e.host||"";r.auth=e.auth;r.hostname=e.hostname||e.host;r.port=e.port;if(r.pathname||r.search){var d=r.pathname||"";var m=r.search||"";r.path=d+m}r.slashes=r.slashes||e.slashes;r.href=r.format();return r}var _=r.pathname&&r.pathname.charAt(0)==="/",b=e.host||e.pathname&&e.pathname.charAt(0)==="/",k=b||_||r.host&&e.pathname,w=k,C=r.pathname&&r.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],S=r.protocol&&!y[r.protocol];if(S){r.hostname="";r.port=null;if(r.host){if(C[0]==="")C[0]=r.host;else C.unshift(r.host)}r.host="";if(e.protocol){e.hostname=null;e.port=null;if(e.host){if(h[0]==="")h[0]=e.host;else h.unshift(e.host)}e.host=null}k=k&&(h[0]===""||C[0]==="")}if(b){r.host=e.host||e.host===""?e.host:r.host;r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname;r.search=e.search;r.query=e.query;C=h}else if(h.length){if(!C)C=[];C.pop();C=C.concat(h);r.search=e.search;r.query=e.query}else if(!i.isNullOrUndefined(e.search)){if(S){r.hostname=r.host=C.shift();var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):false;if(E){r.auth=E.shift();r.host=r.hostname=E.shift()}}r.search=e.search;r.query=e.query;if(!i.isNull(r.pathname)||!i.isNull(r.search)){r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")}r.href=r.format();return r}if(!C.length){r.pathname=null;if(r.search){r.path="/"+r.search}else{r.path=null}r.href=r.format();return r}var x=C.slice(-1)[0];var T=(r.host||e.host||C.length>1)&&(x==="."||x==="..")||x==="";var O=0;for(var R=C.length;R>=0;R--){x=C[R];if(x==="."){C.splice(R,1)}else if(x===".."){C.splice(R,1);O++}else if(O){C.splice(R,1);O--}}if(!k&&!w){for(;O--;O){C.unshift("..")}}if(k&&C[0]!==""&&(!C[0]||C[0].charAt(0)!=="/")){C.unshift("")}if(T&&C.join("/").substr(-1)!=="/"){C.push("")}var D=C[0]===""||C[0]&&C[0].charAt(0)==="/";if(S){r.hostname=r.host=D?"":C.length?C.shift():"";var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):false;if(E){r.auth=E.shift();r.host=r.hostname=E.shift()}}k=k||r.host&&C.length;if(k&&!D){C.unshift("")}if(!C.length){r.pathname=null;r.path=null}else{r.pathname=C.join("/")}if(!i.isNull(r.pathname)||!i.isNull(r.search)){r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")}r.auth=e.auth||r.auth;r.slashes=r.slashes||e.slashes;r.href=r.format();return r};a.prototype.parseHost=function(){var e=this.host;var t=s.exec(e);if(t){t=t[0];if(t!==":"){this.port=t.substr(1)}e=e.substr(0,e.length-t.length)}if(e)this.hostname=e}},function(e,t,r){(function(e,n){var i;(function(a){var o=typeof t=="object"&&t&&!t.nodeType&&t;var s=typeof e=="object"&&e&&!e.nodeType&&e;var l=typeof n=="object"&&n;if(l.global===l||l.window===l||l.self===l){a=l}var u,c=2147483647,f=36,p=1,v=26,h=38,d=700,m=72,_=128,g="-",y=/^xn--/,b=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=f-p,S=Math.floor,E=String.fromCharCode,x;function T(e){throw new RangeError(w[e])}function O(e,t){var r=e.length;var n=[];while(r--){n[r]=t(e[r])}return n}function R(e,t){var r=e.split("@");var n="";if(r.length>1){n=r[0]+"@";e=r[1]}e=e.replace(k,".");var i=e.split(".");var a=O(i,t).join(".");return n+a}function D(e){var t=[],r=0,n=e.length,i,a;while(r<n){i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){a=e.charCodeAt(r++);if((a&64512)==56320){t.push(((i&1023)<<10)+(a&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}function I(e){return O(e,function(e){var t="";if(e>65535){e-=65536;t+=E(e>>>10&1023|55296);e=56320|e&1023}t+=E(e);return t}).join("")}function P(e){if(e-48<10){return e-22}if(e-65<26){return e-65}if(e-97<26){return e-97}return f}function j(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function A(e,t,r){var n=0;e=r?S(e/d):e>>1;e+=S(e/t);for(;e>C*v>>1;n+=f){e=S(e/C)}return S(n+(C+1)*e/(e+h))}function B(e){var t=[],r=e.length,n,i=0,a=_,o=m,s,l,u,h,d,y,b,k,w;s=e.lastIndexOf(g);if(s<0){s=0}for(l=0;l<s;++l){if(e.charCodeAt(l)>=128){T("not-basic")}t.push(e.charCodeAt(l))}for(u=s>0?s+1:0;u<r;){for(h=i,d=1,y=f;;y+=f){if(u>=r){T("invalid-input")}b=P(e.charCodeAt(u++));if(b>=f||b>S((c-i)/d)){T("overflow")}i+=b*d;k=y<=o?p:y>=o+v?v:y-o;if(b<k){break}w=f-k;if(d>S(c/w)){T("overflow")}d*=w}n=t.length+1;o=A(i-h,n,h==0);if(S(i/n)>c-a){T("overflow")}a+=S(i/n);i%=n;t.splice(i++,0,a)}return I(t)}function M(e){var t,r,n,i,a,o,s,l,u,h,d,y=[],b,k,w,C;e=D(e);b=e.length;t=_;r=0;a=m;for(o=0;o<b;++o){d=e[o];if(d<128){y.push(E(d))}}n=i=y.length;if(i){y.push(g)}while(n<b){for(s=c,o=0;o<b;++o){d=e[o];if(d>=t&&d<s){s=d}}k=n+1;if(s-t>S((c-r)/k)){T("overflow")}r+=(s-t)*k;t=s;for(o=0;o<b;++o){d=e[o];if(d<t&&++r>c){T("overflow")}if(d==t){for(l=r,u=f;;u+=f){h=u<=a?p:u>=a+v?v:u-a;if(l<h){break}C=l-h;w=f-h;y.push(E(j(h+C%w,0)));l=S(C/w)}y.push(E(j(l,0)));a=A(r,k,n==i);r=0;++n}}++r;++t}return y.join("")}function F(e){return R(e,function(e){return y.test(e)?B(e.slice(4).toLowerCase()):e})}function N(e){return R(e,function(e){return b.test(e)?"xn--"+M(e):e})}u={version:"1.4.1",ucs2:{decode:D,encode:I},decode:B,encode:M,toASCII:N,toUnicode:F};if(true){!(i=function(){return u}.call(t,r,t,e),i!==undefined&&(e.exports=i))}else if(o&&s){if(e.exports==o){s.exports=u}else{for(x in u){u.hasOwnProperty(x)&&(o[x]=u[x])}}}else{a.punycode=u}})(this)}).call(t,r(199)(e),r(26))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){e.deprecate=function(){};e.paths=[];if(!e.children)e.children=[];Object.defineProperty(e,"loaded",{enumerable:true,get:function(){return e.l}});Object.defineProperty(e,"id",{enumerable:true,get:function(){return e.i}});e.webpackPolyfill=1}return e}},function(e,t,r){"use strict";e.exports={isString:function(e){return typeof e==="string"},isObject:function(e){return typeof e==="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}}},function(e,t,r){"use strict";t.decode=t.parse=r(202);t.encode=t.stringify=r(203)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&";r=r||"=";var o={};if(typeof e!=="string"||e.length===0){return o}var s=/\+/g;e=e.split(t);var l=1e3;if(a&&typeof a.maxKeys==="number"){l=a.maxKeys}var u=e.length;if(l>0&&u>l){u=l}for(var c=0;c<u;++c){var f=e[c].replace(s,"%20"),p=f.indexOf(r),v,h,d,m;if(p>=0){v=f.substr(0,p);h=f.substr(p+1)}else{v=f;h=""}d=decodeURIComponent(v);m=decodeURIComponent(h);if(!n(o,d)){o[d]=m}else if(i(o[d])){o[d].push(m)}else{o[d]=[o[d],m]}}return o};var i=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){t=t||"&";r=r||"=";if(e===null){e=undefined}if(typeof e==="object"){return a(o(e),function(o){var s=encodeURIComponent(n(o))+r;if(i(e[o])){return a(e[o],function(e){return s+encodeURIComponent(n(e))}).join(t)}else{return s+encodeURIComponent(n(e[o]))}}).join(t)}if(!s)return"";return encodeURIComponent(n(s))+r+encodeURIComponent(n(e))};var i=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function a(e,t){if(e.map)return e.map(t);var r=[];for(var n=0;n<e.length;n++){r.push(t(e[n],n))}return r}var o=Object.keys||function(e){var t=[];for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t.push(r)}return t}},function(e,t,r){"use strict";var n=r(205);var i=r(206);t["a"]={EVENTS:n["a"],DEFAULTS:i["a"]}},function(e,t,r){"use strict";t["a"]={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",WINDOW_RESIZE:"window:resize",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:updated",HISTORY_BEFORE_UNDO:"history:before-undo",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",EDITOR_READY:"editor:ready",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_REAPPLY_RATIO:"transform:reapply-ratio",ADDED_STICKER:"sticker:added-sticker"}},function(e,t,r){"use strict";var n=r(7);var i=r.n(n);var a=r(207);var o=r(208);var s=r(209);var l=[];if(typeof i.a.Operations.SpriteOperation!=="undefined"){l.push(i.a.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush)}t["a"]={TRANSFORM_RATIO_CATEGORIES:s["a"],FONTS:a["a"],TEXT_DESIGN_FONTS:o["a"],BRUSHES:l}},function(e,t,r){"use strict";t["a"]=[{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Bernier",variations:[{identifier:"imgly_font_bernier_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_bernier_regular.woff",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}}]},{fontFamily:"Cheque",variations:[{identifier:"imgly_font_cheque_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_cheque_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-495}}]},{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Hagin",variations:[{identifier:"imgly_font_hagin_caps_thin",fontWeight:200,provider:"file",filePath:"fonts/imgly_font_hagin_caps_thin.woff",textMetrics:{unitsPerEm:2048,ascender:1964,descender:-482}}]},{fontFamily:"Intro",variations:[{identifier:"imgly_font_intro_inline",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_intro_inline.woff",textMetrics:{unitsPerEm:2048,ascender:1944,descender:-548}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Nexa",variations:[{identifier:"imgly_font_nexa_script",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_nexa_script.woff",textMetrics:{unitsPerEm:2048,ascender:1835,descender:-663}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Panton",variations:[{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_blackitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-572}},{identifier:"imgly_font_panton_light_italic_caps",fontWeight:200,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_lightitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:1961,descender:-556}}]},{fontFamily:"Perfograma",variations:[{identifier:"imgly_font_perfograma",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_perfograma.woff",textMetrics:{unitsPerEm:2048,ascender:1982,descender:-842}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]}]},function(e,t,r){"use strict";t["a"]=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Hello Sunshine",variations:[{identifier:"imgly_font_hello_sunshine",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_hello_sunshine.woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}},{identifier:"imgly_font_hello_sunshine_italic",fontWeight:"normal",fontStyle:"italic",provider:"file",filePath:"text-design/fonts/imgly_font_hello_sunshine_italic.woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Hello Sunshine Marker",variations:[{identifier:"imgly_font_hello_sunshine_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_hello_sunshine_marker.woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Panton Caps",variations:[{identifier:"imgly_font_panton_light_italic_caps",fontWeight:"lighter",fontStyle:"italic",provider:"file",filePath:"text-design/fonts/imgly_font_panton_light_italic_caps.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"text-design/fonts/imgly_font_panton_black_italic_caps.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_light_caps",fontWeight:"lighter",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_panton_light_caps.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_caps",fontWeight:800,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_panton_black_caps.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_amberlight.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_ultra.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_galano_grotesque_bold.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_bungee_inline.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_petit_formal_script.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Summer Font",variations:[{identifier:"imgly_font_summer_font_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_summer_font_light.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_handycheera_regular.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_regular.woff",default:true,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_500.woff",default:true,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"text-design/fonts/imgly_font_campton_bold.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]}]},function(e,t,r){"use strict";var n=r(7);var i=r.n(n);t["a"]=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:true},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",ratio:1/1},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:new i.a.Math.Vector2(1200,627)},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:new i.a.Math.Vector2(940,788)},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:new i.a.Math.Vector2(851,315)}]}]},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(35);var o=r.n(a);var s=r(36);var l=r.n(s);var u=r(0);var c=r.n(u);var f=r(2);var p=r.n(f);var v=r(3);var h=r.n(v);var d=r(1);var m=r.n(d);var _=r(7);var g=r.n(_);var y=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var b=typeof l.a==="function"&&typeof o.a==="symbol"?function(e){return typeof e}:function(e){return e&&typeof l.a==="function"&&e.constructor===l.a&&e!==l.a.prototype?"symbol":typeof e};var k=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;c()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function C(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function S(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)p.a?p()(e,t):e.__proto__=t}var E=g.a.EventEmitter,x=g.a.Log;var T=function(e){S(t,e);function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};w(this,t);var r=C(this,(t.__proto__||m()(t)).call(this));r.setMaxListeners(50);r._canBroadcast=true;r.state=e;return r}k(t,[{key:"set",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if((typeof t==="undefined"?"undefined":b(t))!=="object"){x.info("SharedState#set expects an object as first parameter")}var n=y({},this.state,t);var i=y({},this.state);this.state=n;if(r){this.broadcastUpdate(i,n)}}},{key:"get",value:function e(t){return t?this.state[t]:y({},this.state)}},{key:"getState",value:function e(){return this.state}},{key:"broadcastUpdate",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!this._canBroadcast)return;this.emit("update",t,r)}},{key:"enableBroadcast",value:function e(){this._canBroadcast=true}},{key:"disableBroadcast",value:function e(){this._canBroadcast=false}},{key:"clear",value:function e(){var t=this.state;this.state={};this.broadcastUpdate(t,this.state)}}]);return t}(E);t["a"]=T},function(e,t,r){r(45);r(33);e.exports=r(212)},function(e,t,r){var n=r(67);var i=r(11)("iterator");var a=r(27);e.exports=r(9).isIterable=function(e){var t=Object(e);return t[i]!==undefined||"@@iterator"in t||a.hasOwnProperty(n(t))}},function(e,t,r){r(45);r(33);e.exports=r(214)},function(e,t,r){var n=r(14);var i=r(68);e.exports=r(9).getIterator=function(e){var t=i(e);if(typeof t!="function")throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(6);var l=r.n(s);var u=r(2);var c=r.n(u);var f=r(3);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(4);var m=r(37);var _=r(218);var g=r(224);var y=r(258);var b=r(90);var k=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var w=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var C=function e(t,r,n){if(t===null)t=Function.prototype;var i=l()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(n)}};function S(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function E(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function x(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)c.a?c()(e,t):e.__proto__=t}var T={loading:y["a"],editor:g["a"]};var O=function(e){x(t,e);function t(){var e;S(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=E(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onLoadingDone","_onPreloaderDone","_onImageDone");var o=a.props,s=o.options,l=o.ui;var u=s.editor.image;a._preloaderIsComplete=!s.preloader;if(s.preloader){a._preloader=l.getPreloader();a._preloader.on("done",a._onPreloaderDone)}a._imageIsComplete=u.complete;u.addEventListener("load",a._onImageDone);var c=!a._preloaderIsComplete||!a._imageIsComplete;var f=c?y["a"]:g["a"];a.state={theme:a.props.ui.getTheme(),screen:f,screenOptions:{}};return a}w(t,[{key:"componentDidMount",value:function e(){C(t.prototype.__proto__||h()(t.prototype),"componentDidMount",this).call(this);if(this._preloader)this._preloader.load()}},{key:"componentWillUnmount",value:function e(){C(t.prototype.__proto__||h()(t.prototype),"componentWillUnmount",this).call(this);if(this._preloader)this._preloader.off("done",this._onPreloaderDone)}},{key:"_onImageDone",value:function e(){this._imageIsComplete=true;this._onLoadingDone()}},{key:"_onPreloaderDone",value:function e(){this._preloaderIsComplete=true;this._onLoadingDone()}},{key:"_onLoadingDone",value:function e(){var t=this._preloaderIsComplete&&this._imageIsComplete;if(t){this.setState({screen:g["a"],screenOptions:{}})}}},{key:"getChildContext",value:function e(){return{ui:this.props.ui,options:this.props.options,mediator:this.props.mediator,appComponent:this}}},{key:"switchToScreen",value:function e(t){this.setState({screen:T[t],screenOptions:{}})}},{key:"getEditor",value:function e(){return this._currentScreen.getEditor()}},{key:"export",value:function e(){var t;return(t=this._currentScreen).export.apply(t,arguments)}},{key:"serialize",value:function e(){var t;return(t=this._currentScreen).serialize.apply(t,arguments)}},{key:"deserialize",value:function e(t){return this._currentScreen.deserialize(t)}},{key:"getBounds",value:function e(){return this._container.getBoundingClientRect()}},{key:"setImage",value:function e(t){this.getEditor().setImage(t)}},{key:"_renderCurrentScreen",value:function e(){var t=this;var r=this.state,n=r.screen,i=r.screenOptions;return d["l"].createElement(n,k({},i,{innerRef:function e(r){t._currentScreen=r}}))}},{key:"render",value:function e(){var t=this;return d["l"].createElement(d["t"],{theme:this.state.theme},d["l"].createElement(R,{className:"photoeditorsdk-editor",innerRef:function e(r){t._container=r}},d["l"].createElement(_["a"],{modalManager:m["a"].instance}),this._renderCurrentScreen()))}}]);return t}(b["a"]);O.childContextTypes={ui:d["k"].object.isRequired,mediator:d["k"].object.isRequired,options:d["k"].object.isRequired,appComponent:d["k"].object.isRequired};O.propTypes={ui:d["k"].object.isRequired,mediator:d["k"].object.isRequired,options:d["k"].object.isRequired};t["a"]=O;var R=d["w"].div("wspo5c","AppContainer")},function(e,t,r){r(217);var n=r(9).Object;e.exports=function e(t,r){return n.getOwnPropertyDescriptor(t,r)}},function(e,t,r){var n=r(20);var i=r(58).f;r(66)("getOwnPropertyDescriptor",function(){return function e(t,r){return i(n(t),r)}})},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(219);var d=r(220);var m=r(221);var _=r(222);var g=r(223);var y=r(49);var b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var k=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function C(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function S(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var E=function(e){S(t,e);function t(){var e;w(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=C(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._onOverlayClick=function(){var e=a._modalManager.getModals();e.forEach(function(e){if(e.closeOnOverlayClick){e.close()}})};a._modalManager=a.props.modalManager;a._bindAll("_onModalManagerUpdate");a.state={overlayVisible:false};return a}b(t,[{key:"componentDidMount",value:function e(){k(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._modalManager.on("update",this._onModalManagerUpdate)}},{key:"componentWillUnmount",value:function e(){k(t.prototype.__proto__||p()(t.prototype),"componentWillUnmount",this).call(this);this._modalManager.off("update",this._onModalManagerUpdate)}},{key:"_onModalManagerUpdate",value:function e(){var t=this._modalManager.getModals();var r=t.filter(function(e){return e.visible}).filter(function(e){return!!e.overlay}).length>0;this.state.overlayVisible=r;this.forceUpdate()}},{key:"_onModalClosed",value:function e(t){this._modalManager.removeModal(t)}},{key:"_renderModals",value:function e(){var t=this;var r=this._modalManager.getModals();return r.map(function(e){var r=void 0;switch(e.type){case"loading":r=h["a"];break;case"warning":r=d["a"];break;case"error":r=m["a"];break;case"input":r=g["a"];break;case"progress":r=_["a"];break}return v["l"].createElement(r,{modal:e,key:e.id,onClose:t._onModalClosed.bind(t,e)})})}},{key:"render",value:function e(){return v["l"].createElement(T,null,v["l"].createElement(y["a"],{active:this.state.overlayVisible,enterProp:"rendered",enterDuration:this.context.theme.transitionDuration*1e3,appearProp:"visible",appearDuration:this.context.theme.transitionDuration*1e3,leaveDuration:this.context.theme.transitionDuration*1e3},v["l"].createElement(x,{onClick:this._onOverlayClick})),v["l"].createElement("div",null,this._renderModals()))}}]);return t}(v["b"]);E.contextTypes=v["b"].contextTypes;t["a"]=E;var x=v["w"].div("ovs9m3",{visible:"zgbg08",rendered:"2jlos"},"Overlay");var T=v["w"].div("8gacw5","Container")},function(e,t,r){"use strict";var n=r(2);var i=r.n(n);var a=r(3);var o=r.n(a);var s=r(1);var l=r.n(s);var u=r(4);var c=r(38);function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=o()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)i.a?i()(e,t):e.__proto__=t}var h=function(e){v(t,e);function t(){f(this,t);return p(this,(t.__proto__||l()(t)).apply(this,arguments))}return t}(c["a"]);h.contextTypes=u["b"].contextTypes;t["a"]=h},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(38);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._buttons=a.props.modal.data.buttons||["OK"];return a}v(t,[{key:"_onButtonClick",value:function e(t){this.props.modal.emit("button",t);this.props.modal.close()}}]);return t}(p["a"]);_.contextTypes=f["b"].contextTypes;t["a"]=_},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(38);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._buttons=["Okay"];return a}v(t,[{key:"_onButtonClick",value:function e(t){if(t===0){this.props.modal.close()}}}]);return t}(p["a"]);_.contextTypes=f["b"].contextTypes;t["a"]=_},function(e,t,r){"use strict";var n=r(2);var i=r.n(n);var a=r(3);var o=r.n(a);var s=r(1);var l=r.n(s);var u=r(38);function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=o()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)i.a?i()(e,t):e.__proto__=t}var v=function(e){p(t,e);function t(){c(this,t);return f(this,(t.__proto__||l()(t)).apply(this,arguments))}return t}(u["a"]);v.contextTypes=u["a"].contextTypes;t["a"]=v},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(38);var d=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._onKeyPress=function(e){if(e.key==="Enter"){a._onAccept()}else{a.setState(function(e){return{count:e.count+1}})}};a._onAccept=function(){a.props.modal.emit("input",a._textArea.value);a.props.modal.close()};a._onCancel=function(){var e=a.props.modal;e.emit("input",e.data.text||"");e.close()};a._onClickOverlay=function(){a._onCancel()};a._buttons=a.props.modal.data.buttons||["OK"];a.state=d({},a.state,{count:0,large:true});return a}m(t,[{key:"_renderContent",value:function e(){var t=this;var r=this.props.modal;return v["l"].createElement(T,null,v["l"].createElement(w,null,v["l"].createElement(S,null,r.title),v["l"].createElement(E,{autoFocus:true,innerRef:function e(r){t._textArea=r},defaultValue:r.data.text||"",onKeyPress:this._onKeyPress})),v["l"].createElement(k,null,v["l"].createElement(C,{onClick:this._onAccept,right:true,src:this._getAssetPath("shared/modals/input-accept.png",true)}),v["l"].createElement(C,{onClick:this._onCancel,src:this._getAssetPath("shared/modals/input-cancel.png",true)})))}}]);return t}(h["a"]);b.contextTypes=v["b"].contextTypes;t["a"]=b;var k=v["w"].div("dh53lm","ButtonBar");var w=v["w"].div("1uahxoo","InputContainer");var C=v["w"].img("1pb8m8c",{right:"1l7kz3k"},"Image");var S=v["w"].div("1lyqewl","Title");var E=v["w"].textarea("93mi9g","TextArea");var x=v["w"].span("19kk1u4","LetterCount");var T=v["w"].div("11xw2tg","Container")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(6);var l=r.n(s);var u=r(2);var c=r.n(u);var f=r(3);var p=r.n(f);var v=r(8);var h=r.n(v);var d=r(1);var m=r.n(d);var _=r(4);var g=r(106);var y=r(251);var b=r(253);var k=r(37);var w=r(122);var C=r(123);var S=r(78);var E=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var x=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var T=function e(t,r,n){if(t===null)t=Function.prototype;var i=l()(t,r);if(i===undefined){var a=m()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(n)}};function O(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function R(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function D(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)c.a?c()(e,t):e.__proto__=t}var I="production"==="test";var P=function(e){D(t,e);function t(){var e;O(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=R(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onRenderError","_onImageResize","_startEditor","_onEditorReset");var o=a.context,s=o.ui,l=o.options,u=o.mediator;a._editor=new g["a"](s,l,u);a._editor.on("ready",a._startEditor);a._editor.on("render-error",a._onRenderError);a._editor.on("resize",a._onImageResize);a._editor.on("reset",a._onEditorReset);a._onWindowResize=_["u"].debounce(a._onWindowResize.bind(a),250);a._originalToolsOption=null;a._needsForceCrop=false;a._isReady=false;a.state={sharedState:new _["s"],controls:null,controlsOptions:{},currentControl:null};return a}x(t,[{key:"componentDidMount",value:function e(){var r=this;T(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this);var n=this.context.options;if(n.responsive){window.addEventListener("resize",this._onWindowResize)}if(this._editor.isReady()){!this._hasSwitchedControls&&this.switchToInitialControls()}else{this._editor.once("ready",function(){!r._hasSwitchedControls&&r.switchToInitialControls()})}}},{key:"componentWillUnmount",value:function e(){T(t.prototype.__proto__||m()(t.prototype),"componentWillUnmount",this).call(this);var r=this.context.options;if(r.responsive){window.removeEventListener("resize",this._onWindowResize)}}},{key:"_onEditorReset",value:function e(){if(this.state.currentControl!=="library"){this.switchToInitialControls()}}},{key:"_onImageResize",value:function e(){var t=this;var r=k["a"].instance.displayLoading(this._t("loading.resizing"));this._editor.once("resized",function(e){var n=e.dimensions,i=e.reason;r.close();if(t.context.options.editor.displayResizeMessage){k["a"].instance.displayWarning(t._t("warnings.imageResized_"+i+".title"),t._t("warnings.imageResized_"+i+".text",{maxMegaPixels:t._editor.getMaxMegapixels(),width:n.x,height:n.y}))}})}},{key:"_onRenderError",value:function e(t){k["a"].instance.displayError(this._t("errors.title"),this._t("errors.renderingError.text"),true)}},{key:"_onWindowResize",value:function e(){this._emitEvent(_["d"].EVENTS.WINDOW_RESIZE);var t=new _["v"](this._container.offsetWidth,this._container.offsetHeight);this._emitEvent(_["d"].EVENTS.EDITOR_RESIZE,t)}},{key:"switchToInitialControls",value:function e(t){var r=this.context.options;var n=false;if(r.editor.forceCrop&&this._editor.controls.isEnabled("transform")&&!this._hasSwitchedControls){var i=this._editor.getInputDimensions();var a=new w["a"](r.editor.controlsOptions.transform||{});var o=i.x/i.y;n=!a.hasRatioValue(o)}if(n){this._needsForceCrop=true;this.switchToForceCropControls(t)}else{this._needsForceCrop=false;this.switchToDefaultControls(t)}}},{key:"switchToDefaultControls",value:function e(t){var r=this.context.options;var n=r.editor.defaultControl;if(this._originalToolsOption){r.editor.tools=this._originalToolsOption;this._originalToolsOption=null}if(!this._editor.controls.isEnabled(n)){_["h"].warn("Trying to switch to default control `"+n+"` which is not available. Falling back to first available control.");n=this._editor.controls.getFirstEnabledControlName()}this.switchToControls(n,null,null,t)}},{key:"switchToForceCropControls",value:function e(t){var r=this.context.options;var n=r.editor.tools;if(!this._originalToolsOption){this._originalToolsOption=n;r.editor.tools=_["q"].Array.remove(n,function(e){return e!=="transform"&&e!=="library"})}this.switchToControls("transform",null,null,t)}},{key:"switchToControls",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=this;var i=arguments[2];var a=arguments[3];if(this.state.currentControl===t)return a&&a();this._hasSwitchedControls=true;var o=this.state.sharedState;if(t==="default"){return this.switchToDefaultControls(a)}if(!this._editor.controls.isEnabled(t)){return _["h"].warn("Tried to open control `"+t+"` which is not available.")}var s=this._editor.controls.getAvailable();var l=s[t];if(!l&&t!=="overview"){return _["h"].error("Control `"+t+"` does not exist!")}var u=h.a.resolve(true);if(this.state.controls){u=this.state.controls.onLeave()}u.then(function(e){if(!e)return;o.disableBroadcast();if(!n._isReady){n._isReady=true;n.context.mediator.emit(_["d"].EVENTS.EDITOR_READY)}o.disableBroadcast();o.clear();o.set(E({},r,{forceCrop:n._needsForceCrop}));var s=_["q"].defaults(i||n.context.options.editor.controlsOptions[l.identifier],l.defaultOptions);var u=new l(n.getChildContext(),n.state.sharedState,s);u.onEnter();o.enableBroadcast();n.setState({controls:u,controlsOptions:s,currentControl:t},a)})}},{key:"_startEditor",value:function e(){var t=this.context.options;this._editor.start();if(t.editor.forceCrop){this._hasSwitchedControls=false;this.switchToInitialControls()}}},{key:"getChildContext",value:function e(){return{editor:this._editor,ui:this.context.ui,options:this.context.options,mediator:this.context.mediator,sharedState:this.state.sharedState,screen:this,appComponent:this.context.appComponent}}},{key:"render",value:function e(){var t=this;var r=this.state,n=r.controls,i=r.controlsOptions;var a=void 0,o=void 0;if(n){var s=n.constructor,l=s.controlsComponent,u=s.canvasControlsComponent;a=l?_["l"].createElement(l,{options:i,controls:n}):_["l"].createElement("div",null);o=u?_["l"].createElement(u,{options:i,controls:n}):_["l"].createElement("div",null)}else{a=_["l"].createElement(C["a"],null);o=_["l"].createElement(S["a"],null)}return _["l"].createElement(j,{innerRef:function e(r){if(r){t._container=r}},className:I?"js-editorScreen":undefined},_["l"].createElement(b["a"],{ref:"canvas"}),_["l"].createElement(A,{innerRef:function e(r){t._tableContainer=r}},_["l"].createElement(y["a"],{onControlSwitch:this.switchToControls.bind(this),currentControl:this.state.currentControl}),a,o))}},{key:"getEditor",value:function e(){return this._editor}},{key:"export",value:function e(){var t;return(t=this._editor).export.apply(t,arguments)}},{key:"serialize",value:function e(){var t;return(t=this._editor).serialize.apply(t,arguments)}},{key:"deserialize",value:function e(t){return this._editor.deserialize(t)}}]);return t}(_["b"]);P.contextTypes=_["b"].contextTypes;P.childContextTypes={ui:_["k"].object.isRequired,editor:_["k"].object.isRequired,mediator:_["k"].object.isRequired,options:_["k"].object.isRequired,sharedState:_["k"].object.isRequired,screen:_["k"].object.isRequired,appComponent:_["k"].object.isRequired};var j=_["w"].div("5x8wsv","Container");var A=_["w"].div("1b28xzz","TableContainer");t["a"]=Object(_["A"])(P)},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o=r(226);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t,r,n){l(this,e);this._sdk=t;this._options=r;this._download=n}s(e,[{key:"export",value:function e(){var t=this;var r=this._getRenderType();return this._sdk.export(r,this._options.format,this._options.quality).then(function(e){if(t._download){t._downloadData(r,e)}return e})}},{key:"_downloadData",value:function e(t,r){switch(t){case a["o"].DATAURL:o["a"].downloadDataURL(r,this._options.fileBasename);break;case a["o"].MSBLOB:o["a"].downloadMSBlob(r,this._options.fileBasename);break}}},{key:"_getRenderType",value:function e(){var t=this._options;if(t.type!==a["o"].IMAGE||!this._download){return t.type}else{if(a["u"].supportsMSBlob()){return a["o"].MSBLOB}else{return a["o"].DATAURL}}}}]);return e}();t["a"]=u},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(){s(this,e)}o(e,null,[{key:"downloadDataURL",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"photoeditorsdk-export";var n=this.createBlobURLFromDataURL(t);var i=this.getExtensionFromDataURL(t);var a=document.createElement("a");a.download=r+"."+i;a.href=n;document.body.appendChild(a);a.click();document.body.removeChild(a)}},{key:"downloadMSBlob",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob(t,r+".png")}},{key:"getExtensionFromDataURL",value:function e(t){var r=t.split(",")[0].split(":")[1].split(";")[0];return r.split("/").pop()}},{key:"createBlobURLFromDataURL",value:function e(t){if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array){return t}var r=a["a"].decode(t.split(",")[1]);var n=t.split(",")[0].split(":")[1].split(";")[0];var i=new ArrayBuffer(r.length);var o=new Uint8Array(i);for(var s=0;s<r.length;s++){o[s]=r[s]}var l=new window.Blob([i],{type:n});return window.URL.createObjectURL(l)}}]);return e}();t["a"]=l},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(t,r,n){s(this,e);this._image=t;this._maxPixels=r;this._maxDimensions=n}o(e,[{key:"needsResize",value:function e(){var t=new a["v"](this._image.width,this._image.height);var r=t.x*t.y;var n=r>this._maxPixels;var i=this._maxDimensions!==null&&(t.x>this._maxDimensions||t.y>this._maxDimensions);return n||i}},{key:"resize",value:function e(){var t=this;var r=null;var n=null;var i=this._maxDimensions;return new a["j"](function(e,o){window.setTimeout(function(){var o=new a["v"](t._image.width,t._image.height);var s=o.clone();if(s.x*s.y>t._maxPixels){s.copy(t._getDimensionsByMaxPixels());r="maxMegaPixels"}if(i!==null&&(s.x>i||s.y>i)){var l=Math.min(i/s.x,i/s.y);s.multiply(l);r="maxDimensions"}s.floor();n=t._createResizedImageCanvas(s);e({canvas:n,dimensions:s,reason:r})},1e3)})}},{key:"_createResizedImageCanvas",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:t;var n=this._image;var i=document.createElement("canvas");i.width=t.x;i.height=t.y;var a=t.clone().subtract(r).divide(2);var o=i.getContext("2d");o.drawImage(n,0,0,n.width,n.height,a.x,a.y,r.x,r.y);return i}},{key:"_getDimensionsByMaxPixels",value:function e(){var t=this._image;var r=this._maxPixels;var n=t.width/t.height;var i=t.height/t.width;return new a["v"](Math.sqrt(r*n),Math.sqrt(r*i)).floor()}}]);return e}();t["a"]=l},function(e,t,r){"use strict";var n=r(35);var i=r.n(n);var a=r(36);var o=r.n(a);var s=r(0);var l=r.n(s);var u=r(47);var c=r.n(u);var f=r(7);var p=r.n(f);var v=r(4);var h=typeof o.a==="function"&&typeof i.a==="symbol"?function(e){return typeof e}:function(e){return e&&typeof o.a==="function"&&e.constructor===o.a&&e!==o.a.prototype?"symbol":typeof e};var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;l()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var _=function(){function e(t,r,n){m(this,e);this._editor=t;this._sdk=r;this._mediator=n;this._map={};this._stack=this._sdk&&this._sdk.getOperationsStack();this._preferredOrder=this._editor.getOptions().editor.operationsOrder;this._available={};var i=p.a.Operations;for(var a in i){var o=i[a];this._available[o.identifier]=o}var s=t.getOptions();var l=s.extensions.operations;for(var u in l){var c=l[u];this._available[c.identifier]=c}if(this._stack){this._fixStack()}}d(e,[{key:"exists",value:function e(t){return!!this._map[t]}},{key:"add",value:function e(t){var r=this;var n=t.constructor.identifier;t.on("update",function(){r._mediator.emit(v["d"].EVENTS.OPERATION_UPDATED,t)});var i=this._preferredOrder.indexOf(n);if(i===-1){throw new Error("EditorOperations#add: `"+n+"` does not appear in `operationsOrder`")}this._stack.set(i,t);this._map[n]=t;this._mediator.emit(v["d"].EVENTS.OPERATION_CREATED,t)}},{key:"remove",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=(typeof t==="undefined"?"undefined":h(t))==="object"?t.constructor.identifier:t;var i=this._stack.getStack();t=this.get(n);delete this._map[n];var a=i.map(function(e){return e.constructor.identifier}).indexOf(n);if(a!==-1){this._stack.removeAt(a);for(var o=a+1;o<i.length;o++){var s=i[o];if(!s)continue;s.setDirty(true)}if(r){this._mediator.emit(v["d"].EVENTS.OPERATION_REMOVED,t)}}}},{key:"get",value:function e(t){return this._map[t]}},{key:"getOrCreate",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this._map[t]){var n=this._map[t];n.set(r,false);return n}else{var i=this._available[t];if(typeof i==="undefined"){v["h"].warn("Trying to create an operation of type `"+t+"` that is not available.");return null}var a=new i(this._sdk,r);this.add(a);return a}}},{key:"getStack",value:function e(){return this._stack}},{key:"getSnapshot",value:function e(){var t=this;var r={};c()(this._map).forEach(function(e){var n=t._map[e];r[e]=n.serializeOptions()});return r}},{key:"removeUnused",value:function e(){var t=this;c()(this._map).forEach(function(e){var r=t._map[e];if(!r.hasChanges()){t.remove(r)}})}},{key:"hasChanges",value:function e(t){var r=this;var n=false;c()(this._map).forEach(function(e){if(!t[e]){n=true}});if(n){return true}c()(t).forEach(function(e){var i=r.get(e);if(!i){n=true;return}if(!i.optionsEqual(t[e])){n=true}});return n}},{key:"restoreSnapshot",value:function e(t){var r=this;c()(t).forEach(function(e){var n=r.getOrCreate(e);if(n.optionsEqual(t[e])){return}if(n.restoreSnapshot){n.restoreSnapshot(t[e])}else{n.set(t[e])}});c()(this._map).forEach(function(e){if(!t[e]){r.remove(e)}})}},{key:"isAvailable",value:function e(t){return!!this._available[t]}},{key:"getAvailable",value:function e(){return this._available}},{key:"reset",value:function e(){this._map={}}},{key:"_fixStack",value:function e(){var t=this;var r=this._stack.getStack().slice();this._stack.clear();r.forEach(function(e){t.add(e)})}}]);return e}();t["a"]=_},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(7);var o=r.n(a);var s=r(4);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(t,r,n){var i=this;u(this,e);this._editor=t;this._sdk=r;this._mediator=n;this._options=this._editor.getOptions();this._invalidOperationsSeen=[];this._available={};var a=o.a.UI.DesktopUI.Controls;for(var s in a){var l=a[s];this._available[l.identifier]=l}(this._options.extensions.controls||[]).forEach(function(e){i._available[e.identifier]=e})}l(e,[{key:"getFirstEnabledControlName",value:function e(){for(var t in this._available){if(this.isEnabled(t)){return t}}return null}},{key:"isEnabled",value:function e(t){var r=this;var n=this.get(t);if(!n){s["h"].info("EditorControls#isEnabled: Unknown control: "+t);return false}var i=n.requiredOperations||[];var a=[];i.forEach(function(e){if(!r._editor.operations.isAvailable(e)){a.push(e)}});if(a.length){if(this._invalidOperationsSeen.indexOf(t)===-1){this._invalidOperationsSeen.push(t);s["h"].error("Control `"+t+"` can not be used because "+(a.length===1?"operation is":"operations are")+" missing: "+a.map(function(e){return"`"+e+"`"}).join(", "))}return false}return n.isEnabled(this._editor)}},{key:"get",value:function e(t){return this._available[t]}},{key:"getAvailable",value:function e(){return this._available}}]);return e}();t["a"]=c},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(4);var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(t,r,n){s(this,e);this._editor=t;this._sdk=r;this._mediator=n;this._options=this._editor.getOptions();this.reset()}o(e,[{key:"isEnabled",value:function e(t){return this._features[t]&&this.isEnabledByOptions(t)}},{key:"isEnabledByOptions",value:function e(t){var r=t.charAt(0).toUpperCase()+t.slice(1);var n=this._options.editor["enable"+r];if(typeof n==="undefined"){n=true}return n}},{key:"enable",value:function e(){var t=this;for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}n.forEach(function(e){t._features[e]=true});this._mediator.emit(a["d"].EVENTS.FEATURES_ENABLED,n);this._mediator.emit(a["d"].EVENTS.FEATURES_UPDATED,n)}},{key:"disable",value:function e(){var t=this;for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}n.forEach(function(e){t._features[e]=false});this._mediator.emit(a["d"].EVENTS.FEATURES_DISABLED,n);this._mediator.emit(a["d"].EVENTS.FEATURES_UPDATED,n)}},{key:"reset",value:function e(){this._features={drag:this._options.editor.enableDrag,zoom:this._options.editor.enableZoom,export:true,new:true}}}]);return e}();t["a"]=l},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(232);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=300;var g=300;var y=function(e){m(t,e);function t(e,r,n){h(this,t);var i=d(this,(t.__proto__||c()(t)).call(this));i._editor=e;i._sdk=r;i._mediator=n;i._isDefaultZoom=false;i._zoom=i._sdk.getZoom();i._targetZoom=i._zoom;i._options=i._editor.getOptions();i._zoomLevels=[1,2,3,4,5,6.25,8.33,12.5,16.66,25,33.33,50,66.66,100,200,300,400,500,600,700,800,1200,1600,3200].map(function(e){return e/100});i._editor.on("ready",function(){i._defaultLevel=i._calculateDefaultZoomLevel()});return i}v(t,[{key:"auto",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments[2];if(t){this._defaultLevel=this._calculateDefaultZoomLevel()}this.set(this._defaultLevel,r,n)}},{key:"in",value:function e(t){var r=this._getClosestZoomLevel(this._targetZoom+.001,+1);r=this._clamp(r);this.set(r,t)}},{key:"out",value:function e(t){var r=this._getClosestZoomLevel(this._targetZoom-.001,-1);r=this._clamp(r);this.set(r,t)}},{key:"_clamp",value:function e(t){var r=this._calculateDefaultZoomLevel();var n=Math.max(1,r*2);var i=this.minimum;return Math.max(i,Math.min(n,t))}},{key:"set",value:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments[2];this._targetZoom=t;this._mediator.emit(f["d"].EVENTS.ZOOM,t);if(this._zoom===this._targetZoom){n=true}if(this._transition){this._transition.stop();this._transition=null}var a=function e(t){r._set(t,function(){i&&i();r._mediator.emit(f["d"].EVENTS.ZOOM_DONE,r._zoom)});r._transition=null;r._sdk.setTextureQuality(Math.min(r._zoom,1))};if(n){return a(t)}this._transition=new p["a"]({zoom:this._zoom},{zoom:t},{duration:g,easing:"easeOutQuart",onUpdate:function e(t){r._set(t.zoom)},onDone:function e(t){a(t.zoom)}});this._transition.start()}},{key:"tick",value:function e(){if(this._transition){this._transition.update()}}},{key:"_getClosestZoomLevel",value:function e(t,r){var n=void 0;if(r===-1){n=this._zoomLevels.filter(function(e){return e<t}).pop();if(!n){n=this._zoomLevels[this._zoomLevels.length-1]}}else if(r===1){n=this._zoomLevels.filter(function(e){return e>t})[0];if(!n){n=this._zoomLevels[0]}}return n}},{key:"undo",value:function e(){if(!this._previousZoom)return;this.set(this._previousZoom);this._previousZoom=null}},{key:"_set",value:function e(t,r){this._zoom=t;this._sdk.setZoom(this._zoom);this._mediator.emit(f["d"].EVENTS.ZOOM_CHANGED,this._zoom);this.emit("set",this._zoom,r)}},{key:"_calculateDefaultZoomLevel",value:function e(){var t=this._editor.getFinalDimensions(false);var r=this._editor.getCanvasDimensions();var n=f["q"].resizeVectorToFit(t,r);return n.divide(t).x}},{key:"getSnapshot",value:function e(){return{zoom:this._targetZoom}}},{key:"restoreSnapshot",value:function e(t){this.set(t.zoom,true)}},{key:"minimum",get:function e(){var t=this._editor.getFinalDimensions();var r=f["q"].resizeVectorToFit(t,new f["v"](_,_));return r.divide(t).x}},{key:"level",get:function e(){return this._zoom}},{key:"defaultLevel",get:function e(){return this._defaultLevel}},{key:"targetLevel",get:function e(){return this._targetZoom}}]);return t}(f["e"]);t["a"]=y},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(7);var o=r.n(a);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u={linear:function e(t){return t},easeInQuad:function e(t){return t*t},easeOutQuad:function e(t){return t*(2-t)},easeInOutQuad:function e(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function e(t){return t*t*t},easeOutCubic:function e(t){return--t*t*t+1},easeInOutCubic:function e(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function e(t){return t*t*t*t},easeOutQuart:function e(t){return 1- --t*t*t*t},easeInOutQuart:function e(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function e(t){return t*t*t*t*t},easeOutQuint:function e(t){return 1+--t*t*t*t*t},easeInOutQuint:function e(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};var c=function(){function e(t,r,n){l(this,e);this._obj=t;this._initialObj=a["Utils"].clone(t);this._targetValues=r;this._options=a["Utils"].defaults(n,{duration:1e3,easing:"easeOutQuad",onUpdate:function e(){},onDone:function e(){}});this._startedAt=null;this._running=false}s(e,[{key:"start",value:function e(){this._startedAt=+new Date;this._running=true}},{key:"update",value:function e(){if(!this._running)return;var t=+new Date-this._startedAt;var r=u[this._options.easing];var n=Math.min(1,t/this._options.duration);var i=r(n);for(var a in this._initialObj){var o=this._initialObj[a];var s=this._targetValues[a];this._obj[a]=o+(s-o)*i}this._options.onUpdate(this._obj);if(n>=1){this._options.onDone(this._obj);this.stop()}}},{key:"stop",value:function e(){this._running=false}}]);return e}();t["a"]=c},function(e,t,r){"use strict";var n=r(34);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(4);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++){r[t]=e[t]}return r}else{return i()(e)}}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var k=function(e){b(t,e);function t(e,r,n){g(this,t);var i=y(this,(t.__proto__||p()(t)).call(this));i._editor=e;i._sdk=r;i._mediator=n;i._undoItems=[];i._redoItems=[];return i}m(t,[{key:"hasInitialState",value:function e(){return v["Utils"].Array.flatten(this.getUndoItems()).length>0}},{key:"isUndoAvailable",value:function e(){return v["Utils"].Array.flatten(this.getUndoItems()).length>1}},{key:"isRedoAvailable",value:function e(){return v["Utils"].Array.flatten(this.getRedoItems()).length>0}},{key:"addSnapshot",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"global";var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var o=this._editor.getSnapshot();var s={snapshot:o,scope:t,identifier:n,controls:i,data:a};var l=v["Utils"].Array.last(this._undoItems);if(l&&r&&s.identifier===l.identifier){this._undoItems.pop()}this._undoItems.push(s);this._mediator.emit(d["d"].EVENTS.HISTORY_UPDATED,s.operation);this._redoItems=[]}},{key:"undo",value:function e(){var t=this._undoItems;var r=t.pop();var n=v["Utils"].Array.last(t);if(!n||!r){return}this._editor.restoreSnapshot(n.snapshot);this._mediator.emit(d["d"].EVENTS.HISTORY_UNDO,n,r);this._redoItems.push(r);this.emit("undo")}},{key:"redo",value:function e(){var t=this._redoItems;var r=t.pop();if(!r){return}this._editor.restoreSnapshot(r.snapshot);this._mediator.emit(d["d"].EVENTS.HISTORY_REDO,r);this._undoItems.push(r);this.emit("redo")}},{key:"remove",value:function e(t){var r=t.scope,n=t.identifier,i=t.controls;var a=function e(t,a,o){return(r?r===t.scope:true)&&(n?n===t.identifier:true)&&(i?i===t.controls:true)};this._undoItems=v["Utils"].Array.remove(this._undoItems,a);this._redoItems=v["Utils"].Array.remove(this._redoItems,a)}},{key:"removeLocal",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.remove({scope:"local",identifier:t,controls:r})}},{key:"removeGlobal",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.remove({scope:"global",identifier:t,controls:r})}},{key:"removeControls",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this.remove({scope:r,controls:t,identifier:n})}},{key:"reset",value:function e(){this._undoItems=[];this._redoItems=[]}},{key:"getUndoItems",value:function e(){return[].concat(_(this._undoItems))}},{key:"getItems",value:function e(){return this.getUndoItems()}},{key:"getRedoItems",value:function e(){return[].concat(_(this._redoItems))}}]);return t}(d["e"]);t["a"]=k},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var i=r.n(n);var a=r(107);var o=r(108);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t){l(this,e);this._editor=t}s(e,[{key:"serialize",value:function e(){var t=new a["a"](this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function e(t){var r=new o["a"](this._editor,t);return r.deserialize()}}]);return e}();t["default"]=u;u.version="1.0.0"},function(e,t,r){var n=function(){return this}()||Function("return this")();var i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0;var a=i&&n.regeneratorRuntime;n.regeneratorRuntime=undefined;e.exports=r(236);if(i){n.regeneratorRuntime=a}else{try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=undefined}}},function(e,t){!function(t){"use strict";var r=Object.prototype;var n=r.hasOwnProperty;var i;var a=typeof Symbol==="function"?Symbol:{};var o=a.iterator||"@@iterator";var s=a.asyncIterator||"@@asyncIterator";var l=a.toStringTag||"@@toStringTag";var u=typeof e==="object";var c=t.regeneratorRuntime;if(c){if(u){e.exports=c}return}c=t.regeneratorRuntime=u?e.exports:{};function f(e,t,r,n){var i=t&&t.prototype instanceof g?t:g;var a=Object.create(i.prototype);var o=new I(n||[]);a._invoke=T(e,r,o);return a}c.wrap=f;function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var v="suspendedStart";var h="suspendedYield";var d="executing";var m="completed";var _={};function g(){}function y(){}function b(){}var k={};k[o]=function(){return this};var w=Object.getPrototypeOf;var C=w&&w(w(P([])));if(C&&C!==r&&n.call(C,o)){k=C}var S=b.prototype=g.prototype=Object.create(k);y.prototype=S.constructor=b;b.constructor=y;b[l]=y.displayName="GeneratorFunction";function E(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}c.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===y||(t.displayName||t.name)==="GeneratorFunction":false};c.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,b)}else{e.__proto__=b;if(!(l in e)){e[l]="GeneratorFunction"}}e.prototype=Object.create(S);return e};c.awrap=function(e){return{__await:e}};function x(e){function t(r,i,a,o){var s=p(e[r],e,i);if(s.type==="throw"){o(s.arg)}else{var l=s.arg;var u=l.value;if(u&&typeof u==="object"&&n.call(u,"__await")){return Promise.resolve(u.__await).then(function(e){t("next",e,a,o)},function(e){t("throw",e,a,o)})}return Promise.resolve(u).then(function(e){l.value=e;a(l)},o)}}var r;function i(e,n){function i(){return new Promise(function(r,i){t(e,n,r,i)})}return r=r?r.then(i,i):i()}this._invoke=i}E(x.prototype);x.prototype[s]=function(){return this};c.AsyncIterator=x;c.async=function(e,t,r,n){var i=new x(f(e,t,r,n));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})};function T(e,t,r){var n=v;return function i(a,o){if(n===d){throw new Error("Generator is already running")}if(n===m){if(a==="throw"){throw o}return j()}r.method=a;r.arg=o;while(true){var s=r.delegate;if(s){var l=O(s,r);if(l){if(l===_)continue;return l}}if(r.method==="next"){r.sent=r._sent=r.arg}else if(r.method==="throw"){if(n===v){n=m;throw r.arg}r.dispatchException(r.arg)}else if(r.method==="return"){r.abrupt("return",r.arg)}n=d;var u=p(e,t,r);if(u.type==="normal"){n=r.done?m:h;if(u.arg===_){continue}return{value:u.arg,done:r.done}}else if(u.type==="throw"){n=m;r.method="throw";r.arg=u.arg}}}}function O(e,t){var r=e.iterator[t.method];if(r===i){t.delegate=null;if(t.method==="throw"){if(e.iterator.return){t.method="return";t.arg=i;O(e,t);if(t.method==="throw"){return _}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var n=p(r,e.iterator,t.arg);if(n.type==="throw"){t.method="throw";t.arg=n.arg;t.delegate=null;return _}var a=n.arg;if(!a){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return _}if(a.done){t[e.resultName]=a.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=i}}else{return a}t.delegate=null;return _}E(S);S[l]="Generator";S[o]=function(){return this};S.toString=function(){return"[object Generator]"};function R(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(R,this);this.reset(true)}c.keys=function(e){var t=[];for(var r in e){t.push(r)}t.reverse();return function r(){while(t.length){var n=t.pop();if(n in e){r.value=n;r.done=false;return r}}r.done=true;return r}};function P(e){if(e){var t=e[o];if(t){return t.call(e)}if(typeof e.next==="function"){return e}if(!isNaN(e.length)){var r=-1,a=function t(){while(++r<e.length){if(n.call(e,r)){t.value=e[r];t.done=false;return t}}t.value=i;t.done=true;return t};return a.next=a}}return{next:j}}c.values=P;function j(){return{value:i,done:true}}I.prototype={constructor:I,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=i;this.done=false;this.delegate=null;this.method="next";this.arg=i;this.tryEntries.forEach(D);if(!e){for(var t in this){if(t.charAt(0)==="t"&&n.call(this,t)&&!isNaN(+t.slice(1))){this[t]=i}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(e){if(this.done){throw e}var t=this;function r(r,n){s.type="throw";s.arg=e;t.next=r;if(n){t.method="next";t.arg=i}return!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];var s=o.completion;if(o.tryLoc==="root"){return r("end")}if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc");var u=n.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc){return r(o.catchLoc,true)}else if(this.prev<o.finallyLoc){return r(o.finallyLoc)}}else if(l){if(this.prev<o.catchLoc){return r(o.catchLoc,true)}}else if(u){if(this.prev<o.finallyLoc){return r(o.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}if(a&&(e==="break"||e==="continue")&&a.tryLoc<=t&&t<=a.finallyLoc){a=null}var o=a?a.completion:{};o.type=e;o.arg=t;if(a){this.method="next";this.next=a.finallyLoc;return _}return this.complete(o)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return _},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);D(r);return _}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(n.type==="throw"){var i=n.arg;D(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:P(e),resultName:t,nextLoc:r};if(this.method==="next"){this.arg=i}return _}}}(function(){return this}()||Function("return this")())},function(e,t,r){"use strict";var n=r(2);var i=r.n(n);var a=r(3);var o=r.n(a);var s=r(1);var l=r.n(s);var u=r(7);var c=r.n(u);function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=o()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)i.a?i()(e,t):e.__proto__=t}var h=function(e){v(t,e);function t(){f(this,t);return p(this,(t.__proto__||l()(t)).apply(this,arguments))}return t}(u["Configurable"]);t["a"]=h;h.prototype.availableOptions={fontFamily:{type:u["OptionType"].STRING,required:true},variations:{type:u["OptionType"].ARRAY,required:true}}},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(113);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var d=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var y={italic:"i"};var b=function(e){g(t,e);function t(){m(this,t);return _(this,(t.__proto__||p()(t)).apply(this,arguments))}h(t,[{key:"load",value:function e(){if(this._fonts.length){this._addStylesheetTag()}return d(t.prototype.__proto__||p()(t.prototype),"load",this).call(this)}},{key:"_addStylesheetTag",value:function e(){var t=this._getFamiliesString();var r=document.createElement("link");r.rel="stylesheet";r.href="https://fonts.googleapis.com/css?family="+t;var n=document.getElementsByTagName("head")[0];n.appendChild(r)}},{key:"_getFamiliesString",value:function e(){var t={};this._fonts.forEach(function(e){var r=e.getFontFamily();var n=e.getFontStyle();var i=e.getFontWeight();t[r]=t[r]||[];if(typeof i!=="undefined"){t[r].push(""+i+(y[n]||""))}else{t[r].push(400)}});var r=[];for(var n in t){var i=t[n];var a=i.length?":"+i.join(","):"";var o=n.replace(" ","+")+a;r.push(o)}return r.join("|")}}]);return t}(v["a"]);t["a"]=b},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(8);var o=r.n(a);var s=r(240);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):r(105);var f=50;var p=5e3;var v=function(){function e(t){u(this,e);this._fontVariation=t;this._defaultFontRuler=new s["a"];this._customFontRuler=new s["a"](this._fontVariation)}l(e,[{key:"observe",value:function e(){var t=this;var r=c();return new o.a(function(e,n){var i=window.setInterval(function(){var a=t._defaultFontRuler.getWidth()!==t._customFontRuler.getWidth();if(a){window.clearInterval(i);return e()}else{if(c()-r>=p){var o=new Error("Failed to load font "+t._fontVariation.getFontFamily()+".");o.font=t._fontVariation;return n(o)}}},f)})}},{key:"dispose",value:function e(){this._defaultFontRuler.dispose();this._customFontRuler.dispose()}}]);return e}();t["a"]=v},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(112);var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=30;var u="abcdefghijklmnopqrstuvwxzy";var c=function(){function e(t){s(this,e);this._fontVariation=t||new a["a"]({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"});this._createRuler()}o(e,[{key:"_createRuler",value:function e(){this._ruler=document.createElement("div");this._ruler.innerText=u;document.body.appendChild(this._ruler);this._setRulerStyle()}},{key:"_setRulerStyle",value:function e(){this._ruler.style.cssText="\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      opacity: 0;\n      display: inline-block;\n      font: "+this._fontVariation.getFontStyle()+" "+this._fontVariation.getFontWeight()+" "+l+"px "+this._fontVariation.getFontFamily()+";\n    "}},{key:"setFontVariation",value:function e(t){this._fontVariation=t;this._setRulerStyle()}},{key:"getWidth",value:function e(){return!this._ruler?-1:this._ruler.offsetWidth}},{key:"dispose",value:function e(){if(this._ruler){this._ruler.parentNode.removeChild(this._ruler);this._ruler=null}}}]);return e}();t["a"]=c},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(113);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var m=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){_(this,t);return g(this,(t.__proto__||p()(t)).apply(this,arguments))}d(t,[{key:"load",value:function e(){var r=this;var n=[];this._fonts.forEach(function(e){var t=r._ui.getAssetPath(e.getFilePath(),false,true);n.push('@font-face {\n        font-family: "'+e.getFontFamily()+"\";\n        src: url('"+t+"') format('woff');\n        font-weight: "+e.getFontWeight()+";\n        font-style: "+e.getFontStyle()+";\n      }")});v["w"].global(n.join("\n"),true);return m(t.prototype.__proto__||p()(t.prototype),"load",this).call(this)}}]);return t}(h["a"]);t["a"]=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var i=r.n(n);var a=r(114);var o=r(115);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t){l(this,e);this._editor=t}s(e,[{key:"serialize",value:function e(){var t=new a["a"](this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function e(t){var r=new o["a"](this._editor,t);return r.deserialize()}}]);return e}();t["default"]=u;u.version="1.0.1"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var i=r.n(n);var a=r(75);var o=r(76);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t){l(this,e);this._editor=t}s(e,[{key:"serialize",value:function e(){var t=new a["a"](this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function e(t){var r=new o["a"](this._editor,t);return r.deserialize()}}]);return e}();t["default"]=u;u.version="2.0.0"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var i=r.n(n);var a=r(245);var o=r(246);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t){l(this,e);this._editor=t}s(e,[{key:"serialize",value:function e(){var t=new a["a"](this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function e(t){var r=new o["a"](this._editor,t);return r.deserialize()}}]);return e}();t["default"]=u;u.version="2.0.1"},function(e,t,r){"use strict";var n=r(2);var i=r.n(n);var a=r(3);var o=r.n(a);var s=r(1);var l=r.n(s);var u=r(75);function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=o()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)i.a?i()(e,t):e.__proto__=t}var v=function(e){p(t,e);function t(){c(this,t);return f(this,(t.__proto__||l()(t)).apply(this,arguments))}return t}(u["a"]);t["a"]=v;v.version="2.0.0"},function(e,t,r){"use strict";var n=r(2);var i=r.n(n);var a=r(3);var o=r.n(a);var s=r(1);var l=r.n(s);var u=r(76);function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=o()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)i.a?i()(e,t):e.__proto__=t}var v=function(e){p(t,e);function t(){c(this,t);return f(this,(t.__proto__||l()(t)).apply(this,arguments))}return t}(u["a"]);t["a"]=v;v.version="2.0.1"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var i=r.n(n);var a=r(120);var o=r(121);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t){l(this,e);this._editor=t}s(e,[{key:"serialize",value:function e(){var t=new a["a"](this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function e(t){var r=new o["a"](this._editor,t);return r.deserialize()}}]);return e}();t["default"]=u;u.version="3.0.0"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var i=r.n(n);var a=r(249);var o=r(250);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t){l(this,e);this._editor=t}s(e,[{key:"serialize",value:function e(){var t=new a["a"](this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function e(t){var r=new o["a"](this._editor,t);return r.deserialize()}}]);return e}();t["default"]=u;u.version="3.1.0"},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(120);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}v(t,[{key:"_serializeTextDesign",value:function e(t,r){var n=r.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],true);n.color={rgba:n.color};var i=r.getLayout();if(i){n.identifier=i.constructor.identifier}return{type:"textdesign",options:n}}}]);return t}(p["a"]);t["a"]=_;_.version="3.1.0"},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(121);var d=r(77);var m=r(51);var _=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var w=function(e){k(t,e);function t(){y(this,t);return b(this,(t.__proto__||p()(t)).apply(this,arguments))}g(t,[{key:"_deserializeTextDesign",value:function e(t,r){var n=this;var i=r.options;var a=i.position,o=i.rotation,s=i.flipHorizontally,l=i.flipVertically,u=i.text,c=i.color,f=i.width,p=i.seed,h=i.inverted,g=i.identifier;var y=new d["a"](this._ui,this._getOptions("textdesign"));var b=new m["a"](this._ui,{fonts:v["d"].DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});var k=t.constructor.TextDesignSprite.AssetManager;var w=this._ui.getFontLoader();var C=y.getLayoutByIdentifier(g);var S=new C;w.setFonts(b.getFonts());k.setFonts(_({},k.getFonts(),b.getVariationsByIdentifier()));return w.load().then(function(){var e=S.getImagePaths().map(function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}});return k.loadImages(e).then(function(){S.onImagesLoaded();return t.createTextDesign({position:a,rotation:o,flipHorizontally:s,flipVertically:l,text:u,color:v["c"].fromArray(c.rgba),width:f,seed:p,inverted:h,layout:S})})})}}]);return t}(h["a"]);t["a"]=w;w.version="3.1.0"},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(252);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _="production"==="test";var g=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._needsStyleFixes=true;a._bindAll("_onMouseEnter","_onMouseLeave");a.state={isHovering:false};return a}v(t,[{key:"shouldComponentUpdate",value:function e(t,r){return t.currentControl!==this.props.currentControl||r.isHovering!==this.state.isHovering}},{key:"_onItemClick",value:function e(t){if(this.props.disabled)return;this._onMouseLeave();this.props.onControlSwitch(t)}},{key:"_onMouseEnter",value:function e(){if(this.props.disabled)return;this.setState({isHovering:true})}},{key:"_onMouseLeave",value:function e(){if(this.props.disabled)return;this.setState({isHovering:false})}},{key:"fixStyles",value:function e(){if(f["u"].Browser.isIElte(10)){var t=this._navigation.offsetHeight;this._gradient.style.height=t+"px"}}},{key:"_getItemCount",value:function e(t){var r=this;return t.reduce(function(e,t){if(Array.isArray(t)){return e+r._getItemCount(t)}else{return e+1}},0)}},{key:"_renderListItems",value:function e(){var t=this;var r=this.context.editor;var n=this.state.isHovering;var i=function e(i,a,o){var s=r.controls.get(i);var l=i===t.props.currentControl;return f["l"].createElement(p["a"],{key:i,title:i,showTitle:n,iconPath:t._getAssetPath(s.iconPath,true),activeIconPath:t._getAssetPath(s.activeIconPath,true),selected:l,onClick:t._onItemClick.bind(t,i),animationDelay:.02*a,maxAnimationDelay:.02*o,disabled:t.props.disabled})};var a=function e(t){return f["l"].createElement(p["a"],{key:t,isSeparator:true})};var o=[];var s=this.context.options.editor.controlsOrder;var l=this._getItemCount(s)-1;s.forEach(function(e,t){if(Array.isArray(e)){e.forEach(function(e){if(!r.controls.isEnabled(e))return;o.push(i(e,o.length,l))});if(t!==s.length-1&&o.length){o.push(a("separator-"+t))}}else{if(!r.controls.isEnabled(e))return;o.push(i(e,o.length,l))}});return o}},{key:"render",value:function e(){var t=this;var r=this.state.isHovering;var n=this._getAssetPath("editor/navigation/nav-gradient.png",true);var i={backgroundImage:"url("+n+")"};return f["l"].createElement(y,{onMouseLeave:this._onMouseLeave,innerRef:function e(r){t._navigation=r}},f["l"].createElement(b,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,disabled:this.props.disabled},this._renderListItems()),f["l"].createElement(k,{className:_?"js-navigationOverlay":undefined,innerRef:function e(r){t._gradient=r},style:i,visible:r}))}}]);return t}(f["b"]);g.contextTypes=f["b"].contextTypes;t["a"]=g;var y=f["w"].div("1y776sn","NavigationContainer");var b=f["w"].ul("9phbku","Navigation");var k=f["w"].div("5jr86g",{visible:"1aw31yo"},"NavigationOverlay")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var m="production"==="test";var _=function(e){d(t,e);function t(){v(this,t);return h(this,(t.__proto__||c()(t)).apply(this,arguments))}p(t,[{key:"shouldComponentUpdate",value:function e(t,r){return t.showTitle!==this.props.showTitle||t.selected!==this.props.selected}},{key:"render",value:function e(){if(this.props.isSeparator){return f["l"].createElement(b,null)}else{var t={transitionDelay:(this.props.showTitle?this.props.animationDelay:this.props.maxAnimationDelay-this.props.animationDelay)+"s"};return f["l"].createElement(y,{onClick:this.props.onClick,selected:this.props.selected,className:m?"js-navigationItem":undefined,"data-identifier":this.props.title,disabled:this.props.disabled},f["l"].createElement(w,{src:this.props.iconPath,selected:this.props.selected}),f["l"].createElement(C,{src:this.props.activeIconPath,selected:this.props.selected}),f["l"].createElement(S,{style:t,withTitle:this.props.showTitle},f["l"].createElement(E,null,this._t("editor.controls."+this.props.title+".title"))))}}}]);return t}(f["b"]);_.contextTypes=f["b"].contextTypes;t["a"]=_;var g=f["w"].li("175e5wy","BaseItem");var y=Object(f["w"])(g)("djzsp",{selected:"b4k2au",disabled:"kcb0uq"},"NavigationItem");var b=Object(f["w"])(g)("w5rgvu","SeparatorItem");var k=f["w"].img("1ew58rj","Icon");var w=Object(f["w"])(k)("vd96gg",{selected:"1cfz9kz"},"InactiveIcon");var C=Object(f["w"])(k)("8p00lh",{selected:"zgbg08"},"ActiveIcon");var S=f["w"].div("124navh",{withTitle:"1j7o6on"},"TitleContainer");var E=f["w"].div("pw4had","Title")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var d=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function m(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onEditorResize");a._events=m({},v["d"].EVENTS.EDITOR_RESIZE,a._onEditorResize);return a}h(t,[{key:"_onEditorResize",value:function e(t){var r=this.context.editor;var n=r.getSDK();n.resizeTo(t);r.zoom.auto(true,true)}},{key:"componentDidMount",value:function e(){d(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);var r=this.context,n=r.editor,i=r.options;var a=this._canvas.offsetWidth;var o=this._canvas.offsetHeight;var s=n.getSDK().getRenderer();s.setCanvas(this._canvas);s.resizeTo(new v["v"](a,o));var l=i.editor.image;n.setPadding([55,30,55,315]);n.setImage(l,false)}},{key:"render",value:function e(){var t=this;return v["l"].createElement(k,{innerRef:function e(r){t._canvas=r}})}}]);return t}(v["b"]);b.contextTypes=v["b"].contextTypes;t["a"]=b;var k=v["w"].canvas("8gacw5","Canvas")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(37);var v=r(255);var h=r(256);var d=r(257);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var k="production"==="test";var w=function(e){b(t,e);function t(){var e,r;g(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++){i[a]=arguments[a]}var o=y(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));o._bindAll("_onUndoClick","_onExportClick","_onCloseClick","_onHistoryUpdated","_onFeaturesUpdated","_onRedoClick");o._events=(r={},_(r,f["d"].EVENTS.HISTORY_UPDATED,o._onHistoryUpdated),_(r,f["d"].EVENTS.FEATURES_UPDATED,o._onFeaturesUpdated),r);return o}m(t,[{key:"_onHistoryUpdated",value:function e(){this.forceUpdate()}},{key:"_onFeaturesUpdated",value:function e(){this.forceUpdate()}},{key:"_onUndoClick",value:function e(){var t=this.context.editor;t.history.undo();this.forceUpdate()}},{key:"_onRedoClick",value:function e(){var t=this.context.editor;t.history.redo();this.forceUpdate()}},{key:"_onCloseClick",value:function e(){var t=this.context.mediator;t.emit(f["d"].EVENTS.CLOSE)}},{key:"_onExportClick",value:function e(){var t=this;var r=this.context,n=r.options,i=r.editor,a=r.screen;var o=n.editor.export;var s=p["a"].instance.displayLoading(this._t("loading.exporting"));a.switchToControls("default",null,{},function(){setTimeout(function(){i.export(o.download).then(function(){s.close()}).catch(function(e){p["a"].instance.displayError(t._t("errors.title"),e.message);s.close()})},100)})}},{key:"_renderItems",value:function e(){var t=this.context.editor;var r=t.history,n=t.features;var i=t.getOptions().editor.displayCloseButton;var a=f["l"].createElement(h["a"],{disabled:!r.isUndoAvailable(),src:this._getAssetPath("editor/canvas-header/undo.png",true),onClick:this._onUndoClick,className:k?"js-undoButton":undefined});var o=f["l"].createElement(h["a"],{disabled:!r.isRedoAvailable(),src:this._getAssetPath("editor/canvas-header/redo.png",true),onClick:this._onRedoClick,className:k?"js-redoButton":undefined});var s=f["l"].createElement(E,{key:"left",left:true},a,o);var l=f["l"].createElement(S,{key:"center"},n.isEnabledByOptions("zoom")&&f["l"].createElement(d["a"],null));var u=f["l"].createElement(E,{key:"right",right:true},n.isEnabled("export")&&f["l"].createElement(v["a"],{title:this._t("editor.export"),onClick:this._onExportClick,className:k?"js-exportButton":undefined}),i&&f["l"].createElement(v["a"],{title:this._t("editor.close"),onClick:this._onCloseClick,className:k?"js-closeButton":undefined}));return[s,l,u]}},{key:"render",value:function e(){return f["l"].createElement(C,{className:this.props.className},this._renderItems())}}]);return t}(f["b"]);w.contextTypes=f["b"].contextTypes;t["a"]=w;var C=f["w"].div("1vo3slj","CanvasHeaderControls");var S=f["w"].div("h5xlzy","CenteredControlGroup");var E=f["w"].ul("17ty59f",{left:"1elyhsq",right:"1l7kz3k"},"ControlGroup")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(124);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}v(t,[{key:"render",value:function e(){return f["l"].createElement(p["a"],{onClick:this.props.onClick,className:this.props.className},f["l"].createElement(g,{disabled:this.props.disabled},this.props.title))}}]);return t}(p["a"]);_.contextTypes=p["a"].contextTypes;t["a"]=_;var g=f["w"].div("1d3mv64",{disabled:"1wcaxw7"},"Button");_.Button=g},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(124);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}v(t,[{key:"render",value:function e(){var t=this.props,r=t.onClick,n=t.className,i=t.disabled;return f["l"].createElement(p["a"],{disabled:i,onClick:i?undefined:r,className:n},f["l"].createElement(g,{disabled:i,src:this.props.src}))}}]);return t}(p["a"]);_.contextTypes=p["a"].contextTypes;t["a"]=_;var g=f["w"].img("1y2itdu",{disabled:"vxlu5c"},"Image")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var d=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function m(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b="production"==="test";var k=function(e){y(t,e);function t(){var e,r;_(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++){i[a]=arguments[a]}var o=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(i)));o._bindAll("_onZoomInClick","_onZoomOutClick","_onZoom","_onFeaturesUpdated");o._events=(r={},m(r,v["d"].EVENTS.ZOOM,o._onZoom),m(r,v["d"].EVENTS.FEATURES_UPDATED,o._onFeaturesUpdated),r);return o}h(t,[{key:"componentDidMount",value:function e(){d(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);if(this._renderZoomLevel&&this._renderZoomLevel!==this.context.editor.zoom.targetLevel){this.forceUpdate()}}},{key:"_onFeaturesUpdated",value:function e(){this.forceUpdate()}},{key:"_onZoom",value:function e(){this.forceUpdate()}},{key:"_onZoomInClick",value:function e(){if(this._isZoomDisabled())return;var t=this.context.editor;t.zoom.in()}},{key:"_onZoomOutClick",value:function e(){if(this._isZoomDisabled())return;var t=this.context.editor;t.zoom.out()}},{key:"_isZoomDisabled",value:function e(){var t=this.context.editor;return!t.features.isEnabled("zoom")}},{key:"render",value:function e(){var t=this.context.editor;var r=Math.round(t.zoom.targetLevel*100);this._renderZoomLevel=t.zoom.targetLevel;return v["l"].createElement(w,{className:b?"js-zoomControls":undefined},v["l"].createElement(C,{disabled:this._isZoomDisabled(),"data-disabled":this._isZoomDisabled(),onClick:this._onZoomOutClick,className:b?"js-zoomOutButton":undefined},"-"),v["l"].createElement(S,null,r," %"),v["l"].createElement(C,{disabled:this._isZoomDisabled(),"data-disabled":this._isZoomDisabled(),onClick:this._onZoomInClick,className:b?"js-zoomInButton":undefined},"+"))}}]);return t}(v["b"]);k.contextTypes=v["b"].contextTypes;t["a"]=k;var w=v["w"].div("12hdgpj","ZoomControl");var C=v["w"].div("eqhwwg",{disabled:"10fa721"},"Button");var S=v["w"].div("64aub5","Label")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var d=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var y="production"==="test";var b=1300;var k=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll();a._canHideAfterLoaded=false;a.state={startImageVisible:true,idleImageVisible:false,indicatorVisible:true};return a}h(t,[{key:"componentDidMount",value:function e(){var r=this;d(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._imageSwitchTimeout=window.setTimeout(function(){r.setState({startImageVisible:false,idleImageVisible:true});r._imageSwitchTimeout=null},b)}},{key:"componentWillUnmount",value:function e(){d(t.prototype.__proto__||p()(t.prototype),"componentWillUnmount",this).call(this);if(this._imageSwitchTimeout){window.clearTimeout(this._imageSwitchTimeout);this._imageSwitchTimeout=null}}},{key:"getChildContext",value:function e(){return{ui:this.context.ui,options:this.context.options,mediator:this.context.mediator,appComponent:this.context.appComponent}}},{key:"render",value:function e(){var t=this;var r=this.state,n=r.startImageVisible,i=r.idleImageVisible,a=r.indicatorVisible;return v["l"].createElement(w,{innerRef:function e(r){t._container=r},className:y?"js-loadingScreen":undefined},v["l"].createElement(C,{hidden:!a},v["l"].createElement(E,{visible:n,src:this._getAssetPath("loading/start-solid.gif",true)}),v["l"].createElement(x,{visible:i,src:this._getAssetPath("loading/idle-solid.gif",true)})))}}]);return t}(v["b"]);k.contextTypes=v["b"].contextTypes;k.childContextTypes={ui:v["k"].object.isRequired,mediator:v["k"].object.isRequired,options:v["k"].object.isRequired,appComponent:v["k"].object.isRequired};var w=v["w"].div("121fa7f","Container");var C=v["w"].div("110xr2i",{hidden:"qbdcep"},"ImageContainer");var S=v["w"].img("1gqfg7n",{visible:"zgbg08"},"Image");var E=Object(v["w"])(S)("120drhm","StartImage");var x=Object(v["w"])(S)("120drhm","IdleImage");t["a"]=Object(v["A"])(k)},function(e,t,r){"use strict";t["a"]=function(e,t){e.global(t+" html,"+t+" body,"+t+" div,"+t+" span,"+t+" applet,"+t+" object,"+t+" iframe,"+t+" h1,"+t+" h2,"+t+" h3,"+t+" h4,"+t+" h5,"+t+" h6,"+t+" p,"+t+" blockquote,"+t+" pre,"+t+" a,"+t+" abbr,"+t+" acronym,"+t+" address,"+t+" big,"+t+" cite,"+t+" code,"+t+" del,"+t+" dfn,"+t+" em,"+t+" img,"+t+" ins,"+t+" kbd,"+t+" q,"+t+" s,"+t+" samp,"+t+" small,"+t+" strike,"+t+" strong,"+t+" sub,"+t+" sup,"+t+" tt,"+t+" var,"+t+" b,"+t+" u,"+t+" i,"+t+" center,"+t+" dl,"+t+" dt,"+t+" dd,"+t+" ol,"+t+" ul,"+t+" li,"+t+" fieldset,"+t+" form,"+t+" label,"+t+" legend,"+t+" table,"+t+" caption,"+t+" tbody,"+t+" tfoot,"+t+" thead,"+t+" tr,"+t+" th,"+t+" td,"+t+" article,"+t+" aside,"+t+" canvas,"+t+" details,"+t+" embed,"+t+" figure,"+t+" figcaption,"+t+" footer,"+t+" header,"+t+" hgroup,"+t+" menu,"+t+" nav,"+t+" output,"+t+" ruby,"+t+" section,"+t+" summary,"+t+" time,"+t+" mark,"+t+" audio,"+t+" video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}"+t+" html{line-height:1}"+t+" ol,"+t+" ul{list-style:none}"+t+" table{border-collapse:collapse;border-spacing:0}"+t+" caption,"+t+" th,"+t+" td{text-align:left;font-weight:400;vertical-align:middle}"+t+" q,"+t+" blockquote{quotes:none}"+t+" q:before,"+t+" q:after,"+t+" blockquote:before,"+t+' blockquote:after{content:"";content:none}'+t+" a img{border:none}"+t+" article,"+t+" aside,"+t+" details,"+t+" figcaption,"+t+" figure,"+t+" footer,"+t+" header,"+t+" hgroup,"+t+" main,"+t+" menu,"+t+" nav,"+t+" section,"+t+" summary{display:block}@media only screen and (min-width: 768px){"+t+"{-webkit-border-radius:5px;-moz-border-radius:5px;-ms-border-radius:5px;-o-border-radius:5px;border-radius:5px}}"+t+","+t+" *{box-sizing:border-box}")}},function(e,t,r){"use strict";t["a"]=function(e,t){e.global("\n    @-webkit-keyframes bouncingLoadingIndicator {\n      0% {\n        transform: translateY(0);\n      }\n      40% {\n        transform: translateY(10px);\n      }\n      60% {\n        transform: translateY(-5px);\n      }\n      80%{\n        transform: translateY(0);\n      }\n    }\n  ")}},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(106);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=5e3;var g=function(e){m(t,e);function t(e,r,n){h(this,t);var i=d(this,(t.__proto__||c()(t)).call(this));i._ui=e;i._options=r;i._mediator=n;i._assets={};i._editor=new p["a"](e,r,n,true);i._assets=["editor/canvas-header/undo.png","editor/navigation/nav-gradient.png","editor/controls/shared/checkbox.png","editor/controls/shared/checkbox-active.png","editor/controls/shared/tiled-background.png"];i._appendControlsAssets();return i}v(t,[{key:"_appendControlsAssets",value:function e(){var t=this._editor.controls.getAvailable();for(var r in t){var n=t[r];if(this._editor.controls.isEnabled(r)){this._assets=this._assets.concat(n.getPreloadAssets(this._editor));this._assets.push(n.iconPath);this._assets.push(n.activeIconPath)}}}},{key:"load",value:function e(){var t=this;var r=this._assets.slice();var n=r.length;var i=0;var a=function e(){i++;t.emit("progress",i/n);if(i===n){t.emit("done")}};var o=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"timed out";f["h"].warn("Preloader",t+" "+r+".");a()};var s=function e(t){return window.setTimeout(function(){o(t)},_)};r.forEach(function(e){var r=true;if(Array.isArray(e)){r=e[1];e=e[0]}var n=true;if(f["q"].isArray(e)){n=e[1];e=e[0]}var i=t._ui.getAssetPath(e,r,!n);var l=new window.Image;var u=s(i);l.addEventListener("load",function(){window.clearTimeout(u);t._assets[e]=l;a()});l.addEventListener("error",function(){window.clearTimeout(u);o(i,"was not found")});l.crossOrigin=f["q"].getCrossOriginValue(t._options.crossOrigin);l.src=i})}},{key:"getAsset",value:function e(t){return this._assets[t]}}]);return t}(f["e"]);t["a"]=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(263);var i=r(37);var a=r(267);var o=r(126);var s=r(268);var l=r(119);var u=r(51);var c=r(50);var f=r(111);var p=r(110);var v=r(117);var h=r(118);var d=r(122);var m=r(77);var _=r(269);var g=r(270);var y=r(271);var b=r(52);var k=r(123);var w=r(273);var C=r(274);var S=r(275);var E=r(78);var x=r(81);var T=r(279);var O=r(285);var R=r(286);var D=r(287);var I=r(23);var P=r(288);var j=r(290);var A=r(49);var B=r(127);r.d(t,"Frame",function(){return l["a"]});r.d(t,"SharedStateComponent",function(){return b["a"]});r.d(t,"ControlsComponent",function(){return k["a"]});r.d(t,"CollapseSectionComponent",function(){return w["a"]});r.d(t,"ScrollableListComponent",function(){return C["a"]});r.d(t,"SliderControlComponent",function(){return S["a"]});r.d(t,"CanvasControlsComponent",function(){return E["a"]});r.d(t,"ValueSelectionComponent",function(){return x["a"]});r.d(t,"ColorSelectionComponent",function(){return T["a"]});r.d(t,"ButtonComponent",function(){return O["a"]});r.d(t,"DropdownComponent",function(){return R["a"]});r.d(t,"TextInputComponent",function(){return D["a"]});r.d(t,"DraggableComponent",function(){return I["a"]});r.d(t,"InvisibleUploadComponent",function(){return P["a"]});r.d(t,"CanvasOverlayControlsComponent",function(){return j["a"]});r.d(t,"Transition",function(){return A["a"]});r.d(t,"CheckboxComponent",function(){return B["a"]});r.d(t,"Library",function(){return n});r.d(t,"ModalManager",function(){return i["a"]});r.d(t,"DelayedJobQueue",function(){return a["a"]});r.d(t,"GroupedControlsStyles",function(){return o});r.d(t,"ControlsStyles",function(){return s});r.d(t,"FontManager",function(){return u["a"]});r.d(t,"StickerManager",function(){return c["a"]});r.d(t,"BrushManager",function(){return f["a"]});r.d(t,"FilterManager",function(){return p["a"]});r.d(t,"FrameManager",function(){return v["a"]});r.d(t,"OverlayManager",function(){return h["a"]});r.d(t,"TextDesignManager",function(){return m["a"]});r.d(t,"TransformRatioManager",function(){return d["a"]});r.d(t,"BaseControls",function(){return _["a"]});r.d(t,"LoadingIndicatorComponent",function(){return g["a"]});r.d(t,"SuffixedTextInputComponent",function(){return y["a"]})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(264);r.d(t,"Provider",function(){return n["a"]});var i=r(265);r.d(t,"Category",function(){return i["a"]});var a=r(266);r.d(t,"Image",function(){return a["a"]})},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(8);var o=r.n(a);var s=r(4);var l=r(48);var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function e(){c(this,e)}u(e,[{key:"_loadJSON",value:function e(t){var r=new l["a"](t);return r.load()}},{key:"getCategories",value:function e(){s["h"].warn(this.constructor.name,"`getCategories` is abstract and not implemented.");return o.a.resolve([])}},{key:"searchImages",value:function e(t){s["h"].warn(this.constructor.name,"`searchImages` is abstract and not implemented.");return o.a.resolve([])}}]);return e}();t["a"]=f},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g=function(e){_(t,e);function t(){var e;d(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=m(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._coverImage=null;a._coverImageLoaded=false;return a}h(t,[{key:"loadCoverImage",value:function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"anonymous";return new c.a(function(e,n){var i=new window.Image;i.addEventListener("load",function(){t._coverImageLoaded=true;e(i)});i.addEventListener("error",function(){n(new Error("Failed to load image at "+t.getCoverImage()))});i.crossOrigin=v["q"].getCrossOriginValue(r);i.src=t.getCoverImage();t._coverImage=i})}},{key:"isCoverImageLoaded",value:function e(){return this._coverImage&&this._coverImageLoaded}}]);return t}(v["p"].Configurable);t["a"]=g;g.prototype.availableOptions={name:{type:v["i"].STRING,required:true},coverImage:{type:v["i"].STRING,required:true}}},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g=function(e){_(t,e);function t(){var e;d(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=m(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._thumbImage=null;a._thumbImageLoaded=false;return a}h(t,[{key:"loadThumb",value:function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"anonymous";return new c.a(function(e,n){var i=new window.Image;i.addEventListener("load",function(){t._thumbImageLoaded=true;e(i)});i.addEventListener("error",function(){n(new Error("Failed to load image at "+t.getThumbUrl()))});i.crossOrigin=v["q"].getCrossOriginValue(r);i.src=t.getThumbUrl();t._thumbImage=i})}},{key:"isThumbLoaded",value:function e(){return this._thumbImage&&this._thumbImageLoaded}},{key:"getThumbImage",value:function e(){return this._thumbImage}}]);return t}(v["p"].Configurable);t["a"]=g;g.prototype.availableOptions={category:{type:v["i"].OBJECT,required:true},title:{type:v["i"].STRING},rawUrl:{type:v["i"].STRING,required:true},thumbUrl:{type:v["i"].STRING},authorName:{type:v["i"].STRING},authorAvatar:{type:v["i"].STRING}}},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var m=function(e){d(t,e);function t(e,r){v(this,t);var n=h(this,(t.__proto__||c()(t)).call(this));n._jobs=e;n._options=f["q"].defaults(r,{minDelay:400});n._running=false;n._currentJob=null;n._currentJobIndex=0;n._tick=n._tick.bind(n);return n}p(t,[{key:"start",value:function e(){this._running=true;this._lastJobFinished=Object(f["y"])();this._tick()}},{key:"_tick",value:function e(){var t=this;if(!this._running)return;if(!this._currentJob){this._currentJob=this._jobs[this._currentJobIndex];if(!this._currentJob){this.emit("done");this.stop();return}this._currentJob.fn().then(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++){r[n]=arguments[n]}var i=function e(){t.emit.apply(t,["job-done",t._currentJob].concat(r));t._lastJobFinished=Object(f["y"])();t._currentJob=null};if(Object(f["y"])()-t._lastJobFinished<t._options.minDelay){var a=t._options.minDelay-(Object(f["y"])()-t._lastJobFinished);setTimeout(i,a)}else{i()}}).catch(function(e){t.emit("error",t._currentJob,e);t._currentJob=null});this._currentJobIndex++}Object(f["z"])(this._tick)}},{key:"stop",value:function e(){this._running=false}},{key:"dispose",value:function e(){this._jobs=[];this._running=false}}]);return t}(f["e"]);t["a"]=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"FullContainer",function(){return i});r.d(t,"ControlItem",function(){return a});r.d(t,"ControlItemTextStyles",function(){return o});r.d(t,"ControlItemTitle",function(){return s});r.d(t,"ControlItemActiveOverlay",function(){return l});r.d(t,"ControlItemOverlay",function(){return u});r.d(t,"Knob",function(){return c});r.d(t,"PlainControlItem",function(){return f});r.d(t,"PlainControlItemBackground",function(){return p});var n=r(4);var i=n["w"].css("vl6nc6","FullContainer");var a=n["w"].css("gxhkr8",{animated:"1cekd0y",selected:"10th7ra",visible:"qtjcwg"},"ControlItem");var o=n["w"].css("1us1ll5","ControlItemTextStyles");var s=n["w"].css("d17ppx",{hovered:"zgbg08"},"ControlItemTitle");var l=n["w"].css("x1p1ki",{visible:"zgbg08",rendered:"2jlos"},"ControlItemActiveOverlay");var u=n["w"].css("1kza12c","ControlItemOverlay");var c=n["w"].css("ywjahx","Knob");var f=n["w"].css("9ej9h0",{threeColumns:"14meo64",twoColumns:"4nk392",withText:"rbroui",selected:"eb0k9a"},"PlainControlItem");var p=n["w"].css("1lmjuk",{selected:"q4p805"},"PlainControlItemBackground")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(8);var l=r.n(s);var u=r(4);var c=r(7);var f=r.n(c);var p=r(78);var v=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var m=function(){function e(t,r,n){d(this,e);this.context=t;this.sharedState=r;this._options=n;this._mediator=t.mediator;this.skipHistory=false;this._initialOptions={};this._onOperationRemoved=this._onOperationRemoved.bind(this);this._onOperationUpdated=this._onOperationUpdated.bind(this)}h(e,[{key:"_getAssetPath",value:function e(){var t;return(t=this.context.ui).getAssetPath.apply(t,arguments)}},{key:"_t",value:function e(t,r){return this.context.ui.translate(t,r)}},{key:"_onOperationRemoved",value:function e(t){var r=t.constructor.identifier;if(this.constructor.updatableOperations.indexOf(r)>=0){if(this.constructor.switchToDefaultControlsOnRemoval){this.skipHistory=true;this.context.screen.switchToControls("default")}else{this.onOperationRemoved(t);this.updateSharedState(true);this.context.editor.render()}}}},{key:"onOperationRemoved",value:function e(t){}},{key:"_onOperationUpdated",value:function e(t,r){var n=t.constructor.identifier;if(this.constructor.updatableOperations.indexOf(n)>=0){this.onOperationUpdated(t,r)}}},{key:"updateSharedState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var r=this.context.editor;var n=this.constructor.mapOperationsToSharedState(r.operations,t,v({},this.sharedState.getState()));this.sharedState.set(n)}},{key:"onOperationUpdated",value:function e(t){var r=this.context.editor;this.updateSharedState(false);r.render()}},{key:"onEnter",value:function e(){var t=this.context.editor;var r=t.history;var n=this.sharedState.get("forceCrop");if(!r.hasInitialState()&&!n){r.addSnapshot("global")}this._saveOperationsOptions();this.updateSharedState(true);this._onEnter();this.updateSharedState(false);this._mediator.on(u["d"].EVENTS.OPERATION_REMOVED,this._onOperationRemoved);this._mediator.on(u["d"].EVENTS.OPERATION_UPDATED,this._onOperationUpdated);this._mediator.on(u["d"].EVENTS.OPERATION_CREATED,this._onOperationUpdated)}},{key:"_saveOperationsOptions",value:function e(){var t=this;var r=this.context.editor.operations;this._initialOptions={};this.constructor.updatableOperations.forEach(function(e){var n=r.get(e);if(n){t._initialOptions[e]=n.serializeOptions()}})}},{key:"_shouldAddGlobalHistorySnapshot",value:function e(){var t=this;var r=this.context.editor,n=r.history,i=r.operations;var a=c["Utils"].Array.last(n.getItems().filter(function(e){return e.scope==="global"}));var o=function e(t,r){if(!t&&!r){return false}if(t&&!r&&t.hasChanges()){return true}if(!t&&r){return true}if(t&&r&&!t.optionsEqual(r)){return true}return false};return this.constructor.updatableOperations.some(function(e){var r=t._initialOptions[e];var n=a?a.snapshot.operations[e]:null;var s=i.get(e);var l=o(s,r)&&o(s,n);return l})}},{key:"_onEnter",value:function e(){}},{key:"onLeave",value:function e(){var t=this;return this.onBeforeLeave().then(function(e){if(typeof e==="boolean"){e={leave:e}}var r=e,n=r.leave,i=r.data;if(!n)return false;t._mediator.off(u["d"].EVENTS.OPERATION_REMOVED,t._onOperationRemoved);t._mediator.off(u["d"].EVENTS.OPERATION_UPDATED,t._onOperationUpdated);t._mediator.off(u["d"].EVENTS.OPERATION_CREATED,t._onOperationUpdated);t._onLeave(i||{});var a=t.context.options;var o=t.context.editor,s=o.history,l=o.operations;if(t._shouldAddGlobalHistorySnapshot()){var c=t._getGlobalHistoryData?t._getGlobalHistoryData():null;t.addGlobalHistorySnapshot(undefined,false,c)}l.removeUnused();if(a.editor.undoMode==="global"){s.removeControls(t.constructor.identifier,"local")}if(a.editor.undoMode==="local"){s.removeControls(t.constructor.identifier,"global")}return true})}},{key:"_getGlobalHistoryData",value:function e(){}},{key:"_onLeave",value:function e(){}},{key:"onBeforeLeave",value:function e(){return this._onBeforeLeave()}},{key:"_onBeforeLeave",value:function e(){return l.a.resolve(true)}},{key:"addLocalHistorySnapshot",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=this.context.editor.history;i.addSnapshot("local",r,t,this.constructor.identifier,n)}},{key:"addGlobalHistorySnapshot",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=this.context.editor.history;i.addSnapshot("global",r,t,this.constructor.identifier,n)}}],[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{}}},{key:"getPreloadAssets",value:function e(){return[]}},{key:"clickAtPosition",value:function e(t){return false}},{key:"isEnabled",value:function e(t){var r=this.constructor.identifier;return t.isToolEnabled(r)&&t.isToolAllowed(r)}}]);return e}();m.identifier=null;m.controlsComponent=null;m.canvasControlsComponent=p["a"];m.defaultOptions={};m.requiredOperations=[];m.updatableOperations=[];m.switchToDefaultControlsOnRemoval=true;t["a"]=m},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var m=function(e){d(t,e);function t(){v(this,t);return h(this,(t.__proto__||c()(t)).apply(this,arguments))}p(t,[{key:"render",value:function e(){var t=function e(t){return{animationDelay:t*.1+"s"}};return f["l"].createElement(_,{styles:this.props.styles},f["l"].createElement(g,{style:t(0)}),f["l"].createElement(g,{style:t(1)}),f["l"].createElement(g,{style:t(2)}))}}]);return t}(f["b"]);m.contextTypes=f["b"].contextTypes;t["a"]=m;var _=f["w"].div("eurrvc","LoadingIndicatorContainer");m.RootElement=_;var g=f["w"].div("vyyzkw","Ball")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(272);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onClick");return a}v(t,[{key:"shouldComponentUpdate",value:function e(t,r){return this.props.value!==t.value||this.props.disabled!==t.disabled}},{key:"_onClick",value:function e(){this._input.focus()}},{key:"render",value:function e(){var t=this;return f["l"].createElement(g,{className:this.props.className,onClick:this._onClick},f["l"].createElement(b,{value:this.props.value,onLiveChange:this.props.onLiveChange,onChange:this.props.onChange,disabled:this.props.disabled,innerRef:function e(r){t._input=r},name:this.props.name}),f["l"].createElement(y,null,this.props.suffix))}}]);return t}(f["b"]);_.contextTypes=f["b"].contextTypes;t["a"]=_;var g=f["w"].div("1bubov","Container");_.RootElement=g;var y=f["w"].div("1ua5bzq","Suffix");var b=Object(f["w"])(p["a"])("6ekjfo","Input")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(53);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var m=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a.state.width=0;return a}d(t,[{key:"_onInputChange",value:function e(r){m(t.prototype.__proto__||p()(t.prototype),"_onInputChange",this).call(this,r);this._adjustWidth(r.target.value)}},{key:"shouldComponentUpdate",value:function e(r,n){return m(t.prototype.__proto__||p()(t.prototype),"shouldComponentUpdate",this).call(this,r,n)||this.state.width!==n.width}},{key:"componentWillReceiveProps",value:function e(t){this._adjustWidth(t.value)}},{key:"componentDidMount",value:function e(){m(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._textRuler=document.createElement("div");v["u"].styleElement(this._textRuler,{position:"absolute",top:"0",left:"0",display:"inline-block",zIndex:10});this._adjustWidth(this.props.value)}},{key:"_getInputStyle",value:function e(){var t=this.state.width;return{width:t,minWidth:t}}},{key:"_adjustWidth",value:function e(t){document.body.appendChild(this._textRuler);var r=v["u"].getStyleObject(this._input);v["u"].styleElement(this._textRuler,{font:r.font});this._textRuler.innerText=t;this.setState({width:this._textRuler.offsetWidth});this._textRuler.parentNode.removeChild(this._textRuler)}}]);return t}(h["a"]);b.contextTypes=v["b"].contextTypes;t["a"]=b;b.RootElement=Object(v["w"])(h["a"].RootElement)("n0hw7r","AutoSizeNumericInputComponent")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(126);var v=r(49);var h=r(127);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var y="production"==="test";var b=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a.state={expanded:a.props.expanded||a.props.alwaysExpanded||false};return a}d(t,[{key:"_onClick",value:function e(){var t=!this.state.expanded;if(!this.props.alwaysExpanded){this.setState({expanded:t})}this.props.onToggle&&this.props.onToggle(t)}},{key:"componentWillReceiveProps",value:function e(t){if(this.props.expanded!==t.expanded){this.setState({expanded:t.expanded})}}},{key:"render",value:function e(){var t=this.props,r=t.alwaysExpanded,n=t.toggleable,i=t.className;var a=this.state.expanded;return f["l"].createElement(k,{styles:this.props.styles,className:i},f["l"].createElement(C,{onClick:this._onClick.bind(this)},!r&&!n&&f["l"].createElement(E,{turnUp:!a}),n&&f["l"].createElement(x,{checked:a,className:y?"js-checkbox":undefined}),f["l"].createElement(w,null,this.props.title)),f["l"].createElement(v["a"],{active:a,enterProp:"rendered",enterDuration:this.context.theme.transitionDuration*1e3,appearProp:"visible",appearDuration:this.context.theme.transitionDuration*1e3,leaveDuration:this.context.theme.transitionDuration*1e3},f["l"].createElement(S,{"data-expanded":a,className:y?"js-content":undefined},this.props.children)))}}]);return t}(f["b"]);b.contextTypes=f["b"].contextTypes;t["a"]=b;var k=Object(f["w"])(p["ControlGroup"]).div("1pofx54","Section");b.RootElement=k;var w=Object(f["w"])(p["ControlGroupTitle"]).div("1b0fixa","SectionTitle");var C=f["w"].div("1b4y7iu","SectionHeader");var S=f["w"].div("10cp0qa",{rendered:"2jlos",visible:"82svov"},"SectionContent");var E=f["w"].div("1bagiey",{turnUp:"gucvcl"},"ArrowDown");var x=Object(f["w"])(h["a"])("15tfhjl","Checkbox")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(79);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var m=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){_(this,t);return g(this,(t.__proto__||p()(t)).apply(this,arguments))}d(t,[{key:"_renderChild",value:function e(r){return m(t.prototype.__proto__||p()(t.prototype),"_renderChild",this).call(this,React.createElement(k,{innerRef:this.props.innerListRef},r))}}]);return t}(h["a"]);b.RootElement=h["a"].RootElement;b.contextTypes=h["a"].contextTypes;var k=v["w"].div("1jtk1eb","ListWrapper");var w=Object(v["w"])(b)("x597uk","ScrollableList");t["a"]=w},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(81);var d=r(125);var m=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function g(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var w=function(e){k(t,e);function t(){y(this,t);return b(this,(t.__proto__||p()(t)).apply(this,arguments))}_(t,[{key:"_buildSliderProps",value:function e(){var t=this.props,r=t.minValue,n=t.maxValue,i=t.middleDot,a=t.onSliderValueChange,o=t.value,s=t.disabled;return{minValue:r,maxValue:n,value:o,middleDot:i,onChange:a,disabled:s}}},{key:"_renderLeftPart",value:function e(){var t=this._buildSliderProps(),r=g(t,[]);return v["l"].createElement(d["a"],m({},r,{darkBackground:true}))}}]);return t}(h["a"]);w.contextTypes=h["a"].contextTypes;t["a"]=w},function(e,t,r){e.exports={default:r(277),__esModule:true}},function(e,t,r){r(278);e.exports=r(9).Number.isNaN},function(e,t,r){var n=r(12);n(n.S,"Number",{isNaN:function e(t){return t!=t}})},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(280);var v=r(49);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g="production"==="test";var y=function(e){_(t,e);function t(){var e;d(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=m(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onDocumentClick","_onColorChange");a.state={colorPickerVisible:false,colors:a._getDefaultColors(a.props.value.clone()),selectedColorIndex:0};return a}h(t,[{key:"componentWillReceiveProps",value:function e(t){if(this.state.colorPickerVisible){return}if(this.props.value.equals(t.value)){return}var r=-1;this.state.colors.forEach(function(e,n){if(e.equals(t.value)){r=n}});if(r===-1){this.setState({selectedColorIndex:0,colors:this._getDefaultColors(t.value.clone())})}else{this.setState({selectedColorIndex:r})}}},{key:"componentDidMount",value:function e(){document.addEventListener("mousedown",this._onDocumentClick)}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("mousedown",this._onDocumentClick)}},{key:"_onDocumentClick",value:function e(t){var r=this;if(!this.state.colorPickerVisible)return;for(var n=t.target;n;n=n.parentNode){if(n===this._root){return}}this.setState({colorPickerVisible:false},function(){r.props.onColorPickerToggle&&r.props.onColorPickerToggle(false)})}},{key:"_onClick",value:function e(t){var r=this;var n={colorPickerVisible:this.state.colorPickerVisible,selectedColorIndex:t};if(t===this.state.selectedColorIndex){n.colorPickerVisible=!this.state.colorPickerVisible}else{n.colorPickerVisible=false}this.props.onChange&&this.props.onChange(this.state.colors[t]);this.setState(n,function(){r.props.onColorPickerToggle&&r.props.onColorPickerToggle(n.colorPickerVisible)})}},{key:"_onColorChange",value:function e(t){this.props.onChange&&this.props.onChange(t);this.state.colors[this.state.selectedColorIndex].copy(t);this.forceUpdate()}},{key:"_getDefaultColors",value:function e(t){return[t,f["c"].fromHex("6688FA"),f["c"].fromHex("8767FA"),f["c"].fromHex("DC67FA"),f["c"].fromHex("FE68C9"),f["c"].fromHex("FE6788"),f["c"].fromHex("FE896B")]}},{key:"_renderColorBubbles",value:function e(){var t=this;var r=this._getAssetPath("editor/controls/shared/tiled-background.png",true);var n=[];this.state.colors.forEach(function(e,i){var a=i===t.state.selectedColorIndex;n.push(f["l"].createElement(k,{key:i,selected:a,className:g?"js-colorBubble":undefined},f["l"].createElement(w,null,f["l"].createElement(C,{style:{backgroundImage:"url("+r+")"}}),f["l"].createElement(S,{style:{backgroundColor:e.toRGBA()},onClick:t._onClick.bind(t,i),className:g?"js-colorBubbleContent":undefined},f["l"].createElement(E,{selected:a}),f["l"].createElement(E,{selected:a}),f["l"].createElement(E,{selected:a}))),f["l"].createElement(v["a"],{active:a&&t.state.colorPickerVisible,enterProp:"rendered",enterDuration:t.context.theme.transitionDuration*1e3,appearProp:"visible",appearDuration:t.context.theme.transitionDuration*1e3,leaveDuration:t.context.theme.transitionDuration*1e3},f["l"].createElement(p["a"],{color:e,onChange:t._onColorChange}))))});return n}},{key:"render",value:function e(){var t=this;return f["l"].createElement(b,{className:g?"js-colorSelection":undefined,styles:this.props.styles,innerRef:function e(r){t._root=r}},this._renderColorBubbles())}}]);return t}(f["b"]);y.contextTypes=f["b"].contextTypes;y.propTypes={colors:f["k"].array,value:f["k"].object.isRequired};t["a"]=y;var b=f["w"].div("9xkrp7","ColorSelection");y.RootElement=b;var k=f["w"].div("qt3fol",{selected:"18i7ofo"},"ColorSelectionBubble");var w=f["w"].div("11cgycr","ColorSelectionPreview");var C=f["w"].div("id1aww","ColorSelectionPreviewContent");var S=Object(f["w"])(C)("nahwei","ColorSelectionBubbleContent");var E=f["w"].div("11la9rb",{selected:"xfn5qu"},"Dot")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(102);var o=r.n(a);var s=r(103);var l=r.n(s);var u=r(0);var c=r.n(u);var f=r(2);var p=r.n(f);var v=r(3);var h=r.n(v);var d=r(1);var m=r.n(d);var _=r(4);var g=r(281);var y=r(282);var b=r(283);var k=r(128);var w=r(284);var C=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var S=function(){function e(e,t){var r=[];var n=true;var i=false;var a=undefined;try{for(var o=l()(e),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){i=true;a=e}finally{try{if(!n&&o["return"])o["return"]()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(o()(Object(t))){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var E=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;c()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function x(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function T(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)p.a?p()(e,t):e.__proto__=t}var R="production"==="test";var D=function(e){O(t,e);function t(){var e;x(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=T(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onHexValueChange","_onAlphaChange","_onHueChange","_onSaturationBrightnessChange");var o=a.props.color.clone();var s=o.toHSV(),l=S(s,3),u=l[0],c=l[1],f=l[2];a.state={color:o,hue:u,saturation:c,brightness:f};return a}E(t,[{key:"_onHexValueChange",value:function e(t){if(!t.match(/^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){return this.forceUpdate()}if(t.length===3)t+=t;var r=_["c"].fromHex(t);var n=this.state.color;n.copy(r);this.props.onChange&&this.props.onChange(n.clone());var i=n.toHSV(),a=S(i,3),o=a[0],s=a[1],l=a[2];this.setState({hue:o,saturation:s,brightness:l})}},{key:"_onAlphaChange",value:function e(t){var r=this.state.color;r.a=t;this.props.onChange&&this.props.onChange(r.clone());this.forceUpdate()}},{key:"_onHueChange",value:function e(t){var r=this.state.color;var n=r.toHSV(),i=S(n,3),a=i[1],o=i[2];var s=r.a;r.fromHSV(t,a,o);r.a=s;this.props.onChange&&this.props.onChange(r.clone());this.setState({color:r,hue:t})}},{key:"_onSaturationBrightnessChange",value:function e(t,r){var n=this.state.color;var i=n.a;n.fromHSV(this.state.hue,t,r);n.a=i;this.props.onChange&&this.props.onChange(n.clone());this.setState({color:n,saturation:t,brightness:r})}},{key:"_changeColorComponent",value:function e(t,r){var n=this.state.color;n[t]=r/255;this.props.onChange&&this.props.onChange(n.clone());var i=n.toHSV(),a=S(i,3),o=a[0],s=a[1],l=a[2];this.setState({hue:o,saturation:s,brightness:l})}},{key:"_renderContent",value:function e(){var t=this.state,r=t.hue,n=t.saturation,i=t.brightness,a=t.color;var o={hue:r,saturation:n,brightness:i};return[_["l"].createElement(P,{key:"arrow"}),_["l"].createElement(j,{key:"colorPicker",className:R?"js-colorPicker":undefined},_["l"].createElement(A,C({},o,{onChange:this._onSaturationBrightnessChange})),_["l"].createElement(B,C({},o,{onChange:this._onHueChange})),_["l"].createElement(M,{value:a.a,color:a,onChange:this._onAlphaChange}),_["l"].createElement(F,null,_["l"].createElement(w["a"],{inputLabel:"Hex",value:a.toHex().substr(1),inputClassName:R?"js-hexInput":undefined,onValueChange:this._onHexValueChange}),_["l"].createElement(k["a"],{inputLabel:"R",value:a.toRGB()[0],minValue:1,maxValue:255,inputClassName:R?"js-redInput":undefined,onValueChange:this._changeColorComponent.bind(this,"r")}),_["l"].createElement(k["a"],{inputLabel:"G",value:a.toRGB()[1],minValue:1,maxValue:255,inputClassName:R?"js-greenInput":undefined,onValueChange:this._changeColorComponent.bind(this,"g")}),_["l"].createElement(k["a"],{inputLabel:"B",value:a.toRGB()[2],minValue:1,maxValue:255,inputClassName:R?"js-blueInput":undefined,onValueChange:this._changeColorComponent.bind(this,"b")})))]}},{key:"render",value:function e(){var t=this.props,r=t.rendered,n=t.visible;return _["l"].createElement(I,{rendered:r,visible:n},r&&this._renderContent())}}]);return t}(_["b"]);D.contextTypes=_["b"].contextTypes;t["a"]=D;var I=_["w"].div("fko51h",{rendered:"2jlos",visible:"zgbg08"},"ColorPickerContainer");var P=_["w"].div("xfcvqs","TopArrow");var j=_["w"].div("1gzvppb","ColorPicker");var A=Object(_["w"])(b["a"])("120drhm","SaturationValueSlider");var B=Object(_["w"])(g["a"])("1cbv91b","HueSlider");var M=Object(_["w"])(y["a"])("tnkwnw","OpacitySlider");var F=_["w"].div("142apfo","ColorValueInputs")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(23);var d=r(82);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var _=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var k="production"==="test";var w=function(e){b(t,e);function t(){var e;g(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=y(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onKnobDragStart","_onKnobDrag","_setValue");a.state={value:a.props.hue};return a}m(t,[{key:"componentDidMount",value:function e(){_(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._renderCanvas()}},{key:"componentWillReceiveProps",value:function e(t){this.setState({value:t.hue})}},{key:"_onKnobDragStart",value:function e(t,r,n){this._sliderWidth=this._slider.offsetWidth;if(n.target===this._knob){this._initialValue=this.state.value}else{this._initialValue=t.x/this._sliderWidth;this._setValue(this._initialValue)}}},{key:"_onKnobDrag",value:function e(t){var r=this._initialValue+t.x/this._sliderWidth;this._setValue(r)}},{key:"_setValue",value:function e(t){var r=Math.min(1,Math.max(0,t));this.setState({value:r});this.props.onChange&&this.props.onChange(r);this.forceUpdate()}},{key:"_renderCanvas",value:function e(){var t=this._canvas;var r=t.getContext("2d");t.width=t.offsetWidth;t.height=t.offsetHeight;for(var n=0;n<t.width;n++){var i=n/t.width;var a=v["c"].fromHSV(i,1,1);r.strokeStyle=a.toRGBA();r.beginPath();r.moveTo(n,0);r.lineTo(n,t.height);r.stroke()}}},{key:"render",value:function e(){var t=this;return v["l"].createElement(h["a"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},v["l"].createElement(C,{styles:this.props.styles,innerRef:function e(r){t._slider=r},className:k?"js-hueControl":undefined},v["l"].createElement(E,{innerRef:function e(r){t._canvas=r}}),v["l"].createElement(S,{style:this._getKnobStyle(),innerRef:function e(r){t._knob=r},className:k?"js-knob":undefined})))}},{key:"_getKnobStyle",value:function e(){return{left:(this.props.hue*100).toFixed(2)+"%"}}}]);return t}(v["b"]);w.contextTypes=v["b"].contextTypes;t["a"]=w;var C=Object(v["w"])(d["a"]).div("120drhm","HueSlider");w.RootElement=C;var S=Object(v["w"])(d["c"]).div("120drhm","Knob");var E=Object(v["w"])(d["b"]).canvas("u98vhm","Background")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(23);var v=r(82);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g="production"==="test";var y=function(e){_(t,e);function t(){var e;d(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=m(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onKnobDragStart","_onKnobDrag","_updateBackgroundColors","_setValue");a.state={color:a.props.color.clone(),value:a.props.value};return a}h(t,[{key:"_updateBackgroundColors",value:function e(){this._transparentColor=this.state.color.clone();this._transparentColor.a=0;this._opaqueColor=this.state.color.clone();this._opaqueColor.a=1}},{key:"componentWillReceiveProps",value:function e(t){this.setState({color:t.color.clone(),value:t.value})}},{key:"_onKnobDragStart",value:function e(t,r,n){this._sliderWidth=this._slider.offsetWidth;if(n.target===this._knob){this._initialValue=this.state.value}else{this._initialValue=1-t.x/this._sliderWidth;this._setValue(this._initialValue)}}},{key:"_onKnobDrag",value:function e(t,r){var n=this._initialValue-t.x/this._sliderWidth;this._setValue(n)}},{key:"_setValue",value:function e(t){var r=Math.min(1,Math.max(0,t));this.props.onChange&&this.props.onChange(r);this.setState({value:r});this.forceUpdate()}},{key:"render",value:function e(){var t=this;this._updateBackgroundColors();var r=this._getAssetPath("editor/controls/shared/tiled-background.png",true);return f["l"].createElement(p["a"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},f["l"].createElement(b,{styles:this.props.styles,innerRef:function e(r){t._slider=r},className:g?"js-opacityControl":undefined},f["l"].createElement(C,{style:{backgroundImage:"url("+r+")"}}),f["l"].createElement(w,{style:{backgroundImage:"linear-gradient(90deg, "+this._opaqueColor.toRGBA()+" 0%, "+this._transparentColor.toRGBA()+" 100%)"}}),f["l"].createElement(k,{style:this._getKnobStyle(),innerRef:function e(r){t._knob=r},className:g?"js-knob":undefined})))}},{key:"_getKnobStyle",value:function e(){return{left:((1-this.state.value)*100).toFixed(2)+"%"}}}]);return t}(f["b"]);y.contextTypes=f["b"].contextTypes;t["a"]=y;var b=Object(f["w"])(v["a"]).div("120drhm","OpacitySlider");y.RootElement=b;var k=Object(f["w"])(v["c"]).div("120drhm","Knob");var w=Object(f["w"])(v["b"]).div("120drhm","Background");var C=Object(f["w"])(w)("m87q12","TiledBackground")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(23);var d=r(82);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var _=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var k="production"==="test";var w=function(e){b(t,e);function t(){var e;g(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=y(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onKnobDragStart","_onKnobDrag");a._lastHue=null;return a}m(t,[{key:"componentDidMount",value:function e(){_(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._renderCanvas()}},{key:"componentDidUpdate",value:function e(){if(this.props.hue!==this._lastHue){this._renderCanvas()}}},{key:"_onKnobDragStart",value:function e(t,r,n){if(n.target===this._knob){this._initialBrightness=this.props.brightness;this._initialSaturation=this.props.saturation}else{this._initialSaturation=t.x/this._canvas.offsetWidth;this._initialBrightness=1-t.y/this._canvas.offsetHeight;this.props.onChange&&this.props.onChange(this._initialSaturation,this._initialBrightness)}}},{key:"_onKnobDrag",value:function e(t){if(this._canvas==null)return;var r=this._canvas.offsetWidth;var n=this._canvas.offsetHeight;var i=this._initialSaturation+t.x/r;i=Math.max(0,Math.min(1,i));var a=this._initialBrightness+t.y/n*-1;a=Math.max(0,Math.min(1,a));this.props.onChange&&this.props.onChange(i,a)}},{key:"_renderCanvas",value:function e(){var t=this._canvas;var r=t.getContext("2d");t.width=t.offsetWidth;t.height=t.offsetHeight;var n=r.getImageData(0,0,t.width,t.height);for(var i=0;i<t.height;i++){var a=(t.height-i)/t.height;for(var o=0;o<t.width;o++){var s=o/t.width;var l=v["c"].fromHSV(this.props.hue,s,a);var u=l.r,c=l.g,f=l.b,p=l.a;var h=(i*t.width+o)*4;n.data[h]=u*255;n.data[h+1]=c*255;n.data[h+2]=f*255;n.data[h+3]=p*255}}r.putImageData(n,0,0);this._lastHue=this.props.hue}},{key:"render",value:function e(){var t=this;return v["l"].createElement(h["a"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},v["l"].createElement(C,{styles:this.props.styles,innerRef:function e(r){t._slider=r},className:k?"js-saturationBrightnessControl":undefined},v["l"].createElement(E,{innerRef:function e(r){t._canvas=r}}),v["l"].createElement(S,{style:this._getKnobStyle(),innerRef:function e(r){t._knob=r},className:k?"js-knob":undefined})))}},{key:"_getKnobStyle",value:function e(){return{left:(this.props.saturation*100).toFixed(2)+"%",top:((1-this.props.brightness)*100).toFixed(2)+"%"}}}]);return t}(v["b"]);w.contextTypes=v["b"].contextTypes;t["a"]=w;var C=Object(v["w"])(d["a"]).div("1jf8fwr","SaturationValueSlider");w.RootElement=C;var S=Object(v["w"])(d["c"]).div("icy3f1","Knob");var E=Object(v["w"])(d["b"]).canvas("15alfoa","Background")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(128);var v=r(53);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g="production"==="test";var y=function(e){_(t,e);function t(){d(this,t);return m(this,(t.__proto__||c()(t)).apply(this,arguments))}h(t,[{key:"_onInputChange",value:function e(t){var r=t.target.value;if(r.match(/^#([A-Fa-f0-9]{6})$/)){return this.setState({value:this.props.value})}this.props.onValueChange&&this.props.onValueChange(r);this.setState({value:r})}},{key:"_renderRightPart",value:function e(){var t=this;var r=g?["js-valueSelection-input"]:[];if(this.props.inputClassName){r.push(this.props.inputClassName)}return f["l"].createElement(b,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:r.join(" "),innerRef:function e(r){t._input=r},disabled:this.props.disabled})}}]);return t}(p["a"]);y.contextTypes=p["a"].contextTypes;t["a"]=y;var b=Object(f["w"])(v["a"])("t0ruqq","InputField")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var m=function(e){d(t,e);function t(){v(this,t);return h(this,(t.__proto__||c()(t)).apply(this,arguments))}p(t,[{key:"render",value:function e(){return f["l"].createElement(_,{onClick:this.props.disabled?undefined:this.props.onClick,disabled:this.props.disabled,className:this.props.className},this.props.title)}}]);return t}(f["b"]);m.contextTypes=f["b"].contextTypes;t["a"]=m;var _=f["w"].button("7lpbp3",{disabled:"1iaw3op"},"Button")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(4);var h=r(80);var d=r(79);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var _=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var k="production"==="test";var w=function(e){b(t,e);function t(){var e;g(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=y(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onDropdownClick","_onDocumentClick");a.state={expanded:false};return a}m(t,[{key:"componentDidMount",value:function e(){_(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);document.addEventListener("click",this._onDocumentClick)}},{key:"componentWillUnmount",value:function e(){_(t.prototype.__proto__||p()(t.prototype),"componentWillUnmount",this).call(this);document.removeEventListener("click",this._onDocumentClick)}},{key:"_onDocumentClick",value:function e(t){if(!this.state.expanded)return;for(var r=t.target;r;r=r.parentNode){if(r===this._root){return}}this.setState({expanded:false})}},{key:"_onDropdownClick",value:function e(){var t=this.state.expanded;this.setState({expanded:!t})}},{key:"_onItemClick",value:function e(t){this.props.onChange&&this.props.onChange(t);this.setState({expanded:false})}},{key:"_renderDropdownItems",value:function e(){var t=this;return this.props.children.map(function(e){var r=v["q"].extend({},e.props,{onClick:t._onItemClick.bind(t,e.props.value),selected:t.props.value===e.props.value,className:k?"js-dropdownItem":undefined});return v["l"].cloneElement(e,r)})}},{key:"render",value:function e(){var t=this;var r=null;this.props.children.forEach(function(e){if(e.props.value===t.props.value){r=e.props.children}});var n=this.props.enableMenu;return v["l"].createElement(C,{innerRef:function e(r){t._root=r},className:this.props.className},v["l"].createElement(S,{onClick:n?this._onDropdownClick:null,styles:this.props.styles,style:this.props.style},r,n?v["l"].createElement(T,null):null),this.state.expanded&&v["l"].createElement(E,{className:k?"js-dropdownOverlay":undefined},v["l"].createElement(d["a"],{direction:"vertical",noGradient:true},v["l"].createElement(x,null,this._renderDropdownItems()))))}}]);return t}(v["b"]);w.contextTypes=v["b"].contextTypes;w.propTypes={enableMenu:v["k"].bool,styles:v["k"].object,style:v["k"].object,onChange:v["k"].func};w.defaultProps={enableMenu:true};t["a"]=w;var C=v["w"].div("13hv8io","DropdownContainer");var S=Object(v["w"])(h["a"]).div("13hv8io","Dropdown");w.RootElement=S;var E=v["w"].div("1fqdopp","DropdownOverlay");var x=v["w"].ul("zy0cu9","DropdownList");var T=v["w"].div("7w2heg",{turnUp:"gucvcl"},"ArrowDown");var O=v["w"].li("cibatp",{selected:"60ro2s"},"DropdownItem");w.Item=O;w.RootElement=Object(v["w"])(h["a"]).input("120drhm","DropdownComponent")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(80);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onKeyDown","_onInputBlur","_onInputChange");a.state={value:""};return a}v(t,[{key:"shouldComponentUpdate",value:function e(t,r){return this.props.value!==t.value||this.props.disabled!==t.disabled||this.state.value!==r.value}},{key:"componentWillReceiveProps",value:function e(t){this.setState({value:t.value})}},{key:"_onInputChange",value:function e(t){this.setState({value:t.target.value});this.props.onLiveChange&&this.props.onLiveChange(t)}},{key:"_onInputBlur",value:function e(t){this.props.onChange&&this.props.onChange(t)}},{key:"_onKeyDown",value:function e(t){if(t.keyCode===13||t.keyCode===27){this._input.blur()}this.props.onKeyDown&&this.props.onKeyDown()}},{key:"focus",value:function e(){this._input.focus()}},{key:"_getInputStyle",value:function e(){return{}}},{key:"render",value:function e(){var t=this;var r=this.constructor.RootElement;return f["l"].createElement(r,{value:this.state.value,placeholder:this.props.placeholder,onChange:this._onInputChange,onBlur:this._onInputBlur,innerRef:function e(r){t._input=r},onKeyDown:this._onKeyDown,name:this.props.name,styles:this.props.styles,className:this.props.className,style:this._getInputStyle(),disabled:this.props.disabled})}}]);return t}(f["b"]);_.contextTypes=f["b"].contextTypes;t["a"]=_;_.RootElement=Object(f["w"])(p["a"]).input("120drhm","TextInputComponent")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(289);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onNewFile");return a}v(t,[{key:"componentDidMount",value:function e(){this._fileLoader=new p["a"](this._fileInput);this._fileLoader.on("file",this._onNewFile)}},{key:"componentWillUnmount",value:function e(){this._fileLoader.off("file",this._onNewFile);this._fileLoader.dispose();this._fileLoader=null}},{key:"_onNewFile",value:function e(t){this.props.onNewFile&&this.props.onNewFile(t)}},{key:"open",value:function e(){this._fileLoader.open()}},{key:"render",value:function e(){var t=this;return React.createElement(g,{type:"file",accept:"image/*",innerRef:function e(r){t._fileInput=r}})}}]);return t}(f["b"]);_.contextTypes=f["b"].contextTypes;t["a"]=_;var g=f["w"].input("19u9mq5","HiddenFileInput")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=r(37);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=function(e){m(t,e);function t(e){h(this,t);var r=d(this,(t.__proto__||c()(t)).call(this));r._input=e;r._onFileChange=r._onFileChange.bind(r);r._input.addEventListener("change",r._onFileChange);return r}v(t,[{key:"open",value:function e(){this._input.value=null;this._input.click()}},{key:"_handleFile",value:function e(t){var r=this;var n=new window.FileReader;n.onload=function(){return function(e){var t=e.target.result;var n=new window.Image;n.addEventListener("load",function(){r.emit("file",n)});n.addEventListener("error",function(e){return p["a"].instance.displayError(r._t("errors.title"),r._t("errors.imageLoadingError.text"))});n.src=t}}(t);n.readAsDataURL(t)}},{key:"_onFileChange",value:function e(){var t=this._input.files;if(!t.length)return;this._handleFile(t[0])}},{key:"dispose",value:function e(){this._input.removeEventListener("change",this._onFileChange)}}]);return t}(f["e"]);t["a"]=_},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(4);var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var m="production"==="test";var _=function(e){d(t,e);function t(){v(this,t);return h(this,(t.__proto__||c()(t)).apply(this,arguments))}p(t,[{key:"_cancelEvent",value:function e(t){t.stopPropagation();t.preventDefault()}},{key:"_onClick",value:function e(t,r){r.stopPropagation();r.preventDefault();t(r)}},{key:"_renderControlItem",value:function e(t,r){var n=this;var i=this._getAssetPath("editor/controls/shared/canvas-overlay-controls/"+t+".png",true);var a=function e(t){n._onClick(r,t)};return f["l"].createElement(y,{style:{backgroundImage:"url("+i+")"},onClick:a,onTouchEnd:a,className:m?"js-canvasOverlayControlItem":undefined,"data-identifier":t})}},{key:"render",value:function e(){var t=this.props.position;return f["l"].createElement(g,{style:{left:t.x,top:t.y},onMouseDown:this._cancelEvent,onTouchStart:this._cancelEvent,className:m?"js-canvasOverlayControl":undefined},this.props.takeToFront&&this._renderControlItem("to-front",this.props.onTakeToFront),this.props.flipHorizontally&&this._renderControlItem("flip-horizontal",this.props.onFlipHorizontally),this.props.duplicate&&this._renderControlItem("duplicate",this.props.onDuplicate),this.props.delete&&this._renderControlItem("delete",this.props.onDelete))}}]);return t}(f["b"]);_.contextTypes=f["b"].contextTypes;t["a"]=_;var g=f["w"].div("1lf1r1r","CanvasOverlayControl");var y=f["w"].div("1l53y3r","ControlItem")},function(e,t){e.exports={editor:{new:"Neu",export:"Exportieren",cancel:"Abbrechen",close:"Schlieen",controls:{library:{title:"Bibliothek",search:"Bibliothek durchsuchen",fileDropZone:"Datei hier hin ziehen oder klicken zum Durchsuchen.",fileDropZoneHovered:"Zum Hochladen loslassen.",noResults:"Keine Ergebnisse"},transform:{title:"Zuschneiden",reset:"Zurcksetzen",dimensions:{width:"b",height:"h"},ratios:{imgly_transforms_common:{name:"Standard",ratios:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch","imgly_transform_common_4-3":"4:3","imgly_transform_common_16-9":"16:9"}},imgly_transforms_facebook:{name:"Facebook",ratios:{imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover",imgly_transform_facebook_profile:"Profilbild"}}}},filter:{title:"Filter",filters:{identity:"Kein Filter",imgly_lut_celsius:"Celsius",imgly_lut_chest:"Chest",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Front",imgly_lut_k2:"K2",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Sin",imgly_lut_texas:"Texas",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Bleached",imgly_lut_bleachedblue:"Bleached Blue",imgly_lut_blues:"Blues",imgly_lut_blueshadows:"Blue Shadows",imgly_lut_breeze:"Breeze",imgly_lut_bw:"B & W",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Cool",imgly_lut_cottoncandy:"Cotton Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Eighties",imgly_lut_elder:"Elder",imgly_lut_evening:"Evening",imgly_lut_fall:"Fall",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"High Contrast",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"KDynamic",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lenin",imgly_lut_litho:"Litho",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"No Green",imgly_lut_orchid:"Orchid",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Plate",imgly_lut_pola669:"Pola 669",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia High",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Sunset",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Winter",imgly_lut_x400:"X400"}},adjustments:{title:"Korrekturen",reset:"Zurcksetzen",sections:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",contrast:"Kontrast",saturation:"Sttigung",exposure:"Belichtung",gamma:"Gamma",shadows:"Schatten",highlights:"Lichter",clarity:"Klarheit"}},focus:{title:"Weichzeichnen",items:{none:"Original",radial:"Kreisfrmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gausch"}},text:{title:"Text",defaultText:"Doppelklick zum Bearbeiten!",new:"Neuer Text",font:"Schriftart",size:"Gre",spacing:"Abstand",line:"Zeile",background:"Hintergrund"},sticker:{title:"Sticker",new:"Neuer Sticker",fill:"Einfrben",opacity:"Transparenz",replace:"Ersetzen",stickerCategories:{},stickers:{}},brush:{title:"Malen",settings:"Pinseleinstellungen",width:"Dicke",hardness:"Hrte"},frame:{title:"Rahmen",opacity:"Transparenz",width:"Dicke",replace:"Ersetzen",fill:"Einfrben",frames:{none:"Kein Rahmen"}},overlay:{title:"Overlay",blendModes:{normal:"Normal",overlay:"Overlay",hardLight:"Hard Light",softLight:"Soft Light",multiply:"Multiply",darken:"Darken",lighten:"Lighten",screen:"Screen",colorBurn:"Color Burn"},overlays:{none:"Kein Overlay",imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"},textdesign:{title:"Text Design"}}}},loading:{loading:"Lade...",exporting:"Exportiere...",resizing:"Bild wird bearbeitet...",fonts:"Lade Schriftarten..."},warnings:{imageResized_maxMegaPixels:{title:"Bild verkleinert",text:"Da dein Bild die maximale Gre von ${maxMegaPixels} Megapixeln berschreitet, wurde es auf ${width}x${height} Pixel verkleinert."},imageResized_maxDimensions:{title:"Bild verkleinert",text:"Aufgrund von Hardware-Beschrnkungen wurde das Bild auf ${width}x${height} Pixel verkleinert."},newImage_changesLost:{title:"Neues Bild",text:"Alle nicht gespeicherten nderungen gehen verloren. Fortfahren?",buttons:{yes:"Ja",no:"Nein"}},discardChanges:{title:"nderungen verwerfen?",text:"Sind Sie sicher, dass Sie die nderungen verwerfen wollen?",buttons:{cancel:"Abbrechen",keep:"nderungen beibehalten",discard:"nderungen verwerfen"}}},errors:{title:"Fehler",renderingError:{text:"Beim Rendern des Bildes ist ein Fehler aufgetreten."},stickerLoadingError:{text:"Laden des Stickers ${path} fehlgeschlagen."},imageLoadingError:{text:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Grnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht untersttzt."},fontLoadingError:{title:"Laden von Schriftarten ist fehlgeschlagen.",text:"Die folgenden Schriftarten konnten nicht geladen werden: ${fonts}."},webcamNotSupported:{text:"Dein Browser untersttzt das Webcam-Feature leider noch nicht."},webcamUnavailable:{text:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})"},invalidFileType:{text:"Der Dateityp ${fileType} wird nicht untersttzt."}}}},function(e,t){e.exports={editor:{new:"New",export:"Export",cancel:"Cancel",close:"Close",controls:{library:{title:"Library",search:"Search Library",fileDropZone:"Drag image here or click to browse for one.",fileDropZoneHovered:"Drop to upload.",noResults:"No results"},transform:{title:"Transform",reset:"Reset Default",dimensions:{width:"w",height:"h"},ratios:{imgly_transforms_common:{name:"Common Crops",ratios:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square","imgly_transform_common_4-3":"4:3","imgly_transform_common_16-9":"16:9"}},imgly_transforms_facebook:{name:"Facebook",ratios:{imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover",imgly_transform_facebook_profile:"Profile Pic"}}}},filter:{title:"Filters",filters:{identity:"None",imgly_lut_celsius:"Celsius",imgly_lut_chest:"Chest",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Front",imgly_lut_k2:"K2",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Sin",imgly_lut_texas:"Texas",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Bleached",imgly_lut_bleachedblue:"Bleached Blue",imgly_lut_blues:"Blues",imgly_lut_blueshadows:"Blue Shadows",imgly_lut_breeze:"Breeze",imgly_lut_bw:"B & W",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Cool",imgly_lut_cottoncandy:"Cotton Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Eighties",imgly_lut_elder:"Elder",imgly_lut_evening:"Evening",imgly_lut_fall:"Fall",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"High Contrast",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"KDynamic",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lenin",imgly_lut_litho:"Litho",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"No Green",imgly_lut_orchid:"Orchid",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Plate",imgly_lut_pola669:"Pola 669",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia High",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Sunset",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Winter",imgly_lut_x400:"X400"}},adjustments:{title:"Adjust",reset:"Reset Default",sections:{basics:"Basics",refinements:"Refinements"},items:{brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",shadows:"Shadows",highlights:"Highlights",clarity:"Clarity"}},focus:{title:"Focus",items:{none:"None",radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"}},text:{title:"Text",defaultText:"Double-click to edit!",new:"New Text",font:"Font",size:"Size",spacing:"Spacing",line:"Line",background:"Background"},sticker:{title:"Stickers",new:"New Sticker",fill:"Fill",opacity:"Opacity",replace:"Replace",stickerCategories:{},stickers:{}},brush:{title:"Brush",settings:"Brush Settings",width:"Width",hardness:"Hardness"},frame:{title:"Frames",opacity:"Opacity",width:"Width",replace:"Replace",fill:"Fill",frames:{none:"None"}},overlay:{title:"Overlays",blendModes:{none:"None",normal:"Normal",overlay:"Overlay",hardLight:"Hard Light",softLight:"Soft Light",multiply:"Multiply",darken:"Darken",lighten:"Lighten",screen:"Screen",colorBurn:"Color Burn"},overlays:{none:"None",imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}},textdesign:{title:"Text Design"}}},loading:{loading:"Loading...",exporting:"Exporting...",resizing:"Resizing...",fonts:"Loading fonts..."},warnings:{imageResized_maxMegaPixels:{title:"Image resized",text:"Your image exceeds the maximum size of ${maxMegaPixels} megapixels and has therefore been resized to ${width}x${height} pixels."},imageResized_maxDimensions:{title:"Image resized",text:"Due to hardware limitations your image has been resized to ${width}x${height} pixels."},newImage_changesLost:{title:"New Image",text:"Any unsaved changes will be lost. Continue?",buttons:{yes:"Yes",no:"No"}},discardChanges:{title:"Discard changes?",text:"You have unsaved changes. Are you sure you want to discard the changes?",buttons:{cancel:"Cancel",keep:"Keep changes",discard:"Discard changes"}}},errors:{title:"Error",renderingError:{text:"An error has occurred while rendering the image."},stickerLoadingError:{text:"Failed to load sticker ${path}."},imageLoadingError:{text:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported."},fontLoadingError:{title:"Failed to load font",text:"The following fonts could not be loaded: ${fonts}."},webcamNotSupported:{text:"The webcam feature is not supported by your browser."},webcamUnavailable:{text:"Unable to display webcam image (Error: ${error})"},invalidFileType:{text:"The file type ${fileType} is not supported."}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5);var i=r.n(n);var a=r(294);var o=r(305);var s=r(308);var l=r(316);var u=r(131);var c=r(326);var f=r(331);var p=r(335);var v=r(342);var h=r(348);var d=r(354);var m=[a["a"],o["a"],s["a"],l["a"],u["a"],c["a"],f["a"],p["a"],v["a"],h["a"],d["a"]];i.a.AllControls=m;t["default"]=m},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(295);var m=r(301);var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var k=function(e){b(t,e);function t(){g(this,t);return y(this,(t.__proto__||p()(t)).apply(this,arguments))}_(t,[{key:"shouldKeepChanges",value:function e(){var t=this;var r=this.context,n=r.editor,i=r.ui;var a=void 0;if(typeof this.keepChanges==="undefined"&&!n.isShallow&&n.history.isUndoAvailable()){a=new c.a(function(e,r){var n=v["ModalManager"].instance.displayWarning(i.translate("warnings.discardChanges.title"),i.translate("warnings.discardChanges.text"),[i.translate("warnings.discardChanges.buttons.keep"),i.translate("warnings.discardChanges.buttons.discard")],true);n.on("button",function(r){var n=r===0;t.keepChanges=n;e(n)})})}else{a=c.a.resolve(this.keepChanges)}return a}},{key:"onImage",value:function e(t){var r=this;this.shouldKeepChanges().then(function(e){if(r._options.switchScreenOnImage){r.context.options.editor.image=t;r.context.appComponent.switchToScreen("editor")}else{var n=r.context.editor;n.setImage(t,!e)}if(r.sharedState.get("webcamEnabled")){r.sharedState.set({webcamEnabled:false});if(!r.context.options.editor.forceCrop){r.context.screen.switchToControls("default")}}})}},{key:"_onEnter",value:function e(){this.sharedState.set({webcamEnabled:false})}}],[{key:"hasLibraryProvider",value:function e(t){var r=t.getOptions().editor.controlsOptions;if(typeof r.library==="undefined")return true;var n=r.library;if(n.provider||n.enableWebcam||n.enableUpload)return true;return false}},{key:"isEnabled",value:function e(r){return t.hasLibraryProvider(r)&&r.isToolEnabled("library")}}]);return t}(v["BaseControls"]);k.clickAtPosition=v["BaseControls"].clickAtPosition;k.getPreloadAssets=v["BaseControls"].getPreloadAssets;k.identifier="library";k.controlsComponent=d["a"];k.canvasControlsComponent=m["a"];k.iconPath="editor/controls/library/icon.png";k.activeIconPath="editor/controls/library/icon-active.png";k.defaultOptions={enableWebcam:true,enableUpload:true,displayUploadInCanvas:false,switchScreenOnImage:false};t["a"]=k;h.a.Controls.LibraryControls=k},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(296);var m=r(298);var _=r(300);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var y=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var C={ROOT:0,SEARCH:1};var S="production"==="test";var E=function(e){w(t,e);function t(){var e;b(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=k(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));var o=a.props.options.provider;if(o){a._library=new o}a._bindAll("_onCategorySelect","_onImageSelect","_onSearchQueryChange","_onWebcamActivated");a.state.currentPanel=C.ROOT;a.state.searchQuery="";return a}g(t,[{key:"_onBackButtonClick",value:function e(){this.setState({currentPanel:C.ROOT,searchQuery:"",backButton:false})}},{key:"_onCategorySelect",value:function e(t){this.setState({currentPanel:C.SEARCH,searchQuery:t.getName(),backButton:true})}},{key:"_onImageSelect",value:function e(t){var r=this;this.setSharedState({webcamEnabled:false});var n=new window.Image;var i=void 0;var a=setTimeout(function(){i=v["ModalManager"].instance.displayLoading(r._t("loading.loading"))},200);n.addEventListener("load",function(){if(i)i.close();if(a){clearTimeout(a);a=null}r.props.controls.onImage(n)});n.addEventListener("error",function(){if(i)i.close();if(a){clearTimeout(a);a=null}v["ModalManager"].instance.displayError(r._t("errors.title"),r._t("errors.imageLoadingError.text"))});n.crossOrigin=this.context.editor.getCrossOrigin();n.src=t.getRawUrl()}},{key:"_onSearchQueryChange",value:function e(t){this.setState({searchQuery:t,currentPanel:C.SEARCH})}},{key:"_onWebcamActivated",value:function e(t){this.setSharedState({webcamEnabled:true})}},{key:"fixStyles",value:function e(){var r=this;if(!this._list)return;this._list.style.height="100%";return y(t.prototype.__proto__||p()(t.prototype),"fixStyles",this).call(this).then(function(){if(v["Utils"].Browser.isIElte(10)){var e=r._container.offsetHeight;r._list.style.height=e+"px"}return r.refs.panel.fixStyles()})}},{key:"_renderCurrentPanel",value:function e(){var t=this;switch(this.state.currentPanel){case C.ROOT:return v["React"].createElement(d["a"],{controls:this.props.controls,innerRef:function e(r){t._list=r},library:this._library,onCategorySelect:this._onCategorySelect,onWebcamActivated:this._onWebcamActivated,options:this.props.options,key:"panel",ref:"panel"});case C.SEARCH:return v["React"].createElement(m["a"],{innerRef:function e(r){t._list=r},library:this._library,onImageSelect:this._onImageSelect,searchQuery:this.state.searchQuery,key:"panel",ref:"panel"})}}},{key:"_getRootProps",value:function e(){return{className:S?"js-libraryControls":undefined,withBorderTop:false}}},{key:"_renderContent",value:function e(){var t=[];if(this._library){t.push(v["React"].createElement(_["a"],{key:"searchHeader",onChange:this._onSearchQueryChange,searchQuery:this.state.searchQuery}))}t.push(this._renderCurrentPanel());return t}}]);return t}(v["ControlsComponent"]);E.contextTypes=v["ControlsComponent"].contextTypes;E.propTypes=v["ControlsComponent"].propTypes;E.RootElement=v["ControlsComponent"].RootElement;t["a"]=E},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(8);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(297);var g=r(129);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var b=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var S="production"==="test";var E=function(e){C(t,e);function t(){var e;k(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=w(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onImage");a.state={loading:true,categories:[]};return a}y(t,[{key:"fixStyles",value:function e(){var t=this;return p.a.resolve().then(function(){if(d["Utils"].Browser.isIElte(10)){Object(d["requestAnimationFrame"])(function(){t._scrollbar.update()})}else{t._scrollbar.update()}})}},{key:"componentDidMount",value:function e(){b(t.prototype.__proto__||h()(t.prototype),"componentDidMount",this).call(this);this._loadCategories()}},{key:"componentWillUnmount",value:function e(){b(t.prototype.__proto__||h()(t.prototype),"componentWillUnmount",this).call(this);if(this._loadCoverImagesQueue){this._loadCoverImagesQueue.dispose()}this._disposed=true}},{key:"_onCategoryClick",value:function e(t){this.props.onCategorySelect&&this.props.onCategorySelect(t)}},{key:"_onImage",value:function e(t){this.props.controls.onImage(t)}},{key:"_loadCoverImages",value:function e(t){var r=this;var n=this.context,i=n.theme,a=n.options;var o=t.map(function(e){return{fn:function t(){return e.loadCoverImage(a.crossOrigin)},index:e}});this._loadCoverImagesQueue=new d["DelayedJobQueue"](o,{minDelay:i.listItemSlideInDelay});this._loadCoverImagesQueue.on("job-done",function(e){if(r._disposed)return;r.forceUpdate();r._scrollbar.update()});this._loadCoverImagesQueue.start()}},{key:"_loadCategories",value:function e(){var t=this;if(!this.props.library){this.setState({loading:false,categories:[]});return p.a.resolve()}return this.props.library.getCategories().then(function(e){t._loadCoverImages(e);t.setState({loading:false,categories:e})})}},{key:"_renderListItems",value:function e(){var t=this;return this.state.categories.map(function(e){return d["React"].createElement(_["a"],{key:e.getName(),category:e,visible:e.isCoverImageLoaded(),onClick:t._onCategoryClick.bind(t,e)})})}},{key:"render",value:function e(){var t=this;if(this.state.loading)return d["React"].createElement(d["LoadingIndicatorComponent"],null);var r=this.props.options,n=r.enableUpload,i=r.displayUploadInCanvas;var a=this.props.innerRef;return d["React"].createElement(x,{innerRef:function e(r){a&&a(r);t._wrapper=r},className:S?"js-rootPanel":undefined},d["React"].createElement(d["ScrollableListComponent"],{direction:"vertical",innerRef:function e(r){t._scrollbar=r}},d["React"].createElement(T,null,n&&!i&&d["React"].createElement(g["a"],{controls:this.props.controls,onImage:this._onImage,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this.props.onWebcamActivated}),this._renderListItems())))}}]);return t}(d["BaseComponent"]);t["a"]=E;var x=d["adonis"].div("rfecls","RootPanelWrapper");var T=d["adonis"].ul("5jg0ou","CategoryList")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=f["ControlsStyles"].ControlItem,g=f["ControlsStyles"].ControlItemTitle;var y="production"==="test";var b=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}v(t,[{key:"render",value:function e(){var t=this.props,r=t.category,n=t.onClick,i=t.visible;var a={backgroundImage:"url('"+r.getCoverImage()+"')"};return f["React"].createElement(k,{animated:true,style:a,visible:i,className:y?"js-categoryListItem":undefined,onClick:n},f["React"].createElement(w,null,r.getName()))}}]);return t}(f["BaseComponent"]);t["a"]=b;var k=Object(f["adonis"])(_).li("prcvvt","ListItem");var w=Object(f["adonis"])(g).div("1ler8h7","ListItemTitle")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(8);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(299);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var y=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var C="production"==="test";var S=function(e){w(t,e);function t(){var e;b(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=k(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));a.state={loading:true,images:[]};return a}g(t,[{key:"fixStyles",value:function e(){var t=this;return p.a.resolve().then(function(){if(d["Utils"].Browser.isIElte(10)){Object(d["requestAnimationFrame"])(function(){t._scrollbar.update()})}else{t._scrollbar.update()}})}},{key:"componentDidMount",value:function e(){y(t.prototype.__proto__||h()(t.prototype),"componentDidMount",this).call(this);this._loadImages(this.props.searchQuery)}},{key:"componentWillReceiveProps",value:function e(t){if(this.props.searchQuery!==t.searchQuery){this._loadImages(t.searchQuery)}}},{key:"componentWillUnmount",value:function e(){y(t.prototype.__proto__||h()(t.prototype),"componentWillUnmount",this).call(this);this._loadThumbsQueue.stop();this._loadThumbsQueue.dispose();this._disposed=true}},{key:"_onImageClick",value:function e(t){this.props.onImageSelect&&this.props.onImageSelect(t)}},{key:"_loadThumbs",value:function e(t){var r=this;var n=this.context,i=n.theme,a=n.options;var o=t.map(function(e){return{fn:function t(){return e.loadThumb(a.crossOrigin)},index:e}});this._loadThumbsQueue=new d["DelayedJobQueue"](o,{minDelay:i.listItemSlideInDelay});this._loadThumbsQueue.on("job-done",function(e){if(r._disposed)return;r.forceUpdate();r._scrollbar&&r._scrollbar.update()});this._loadThumbsQueue.start()}},{key:"_loadImages",value:function e(t){var r=this;if(!t.trim()){this.setState({loading:false,images:[]},function(){return r._scrollbar&&r._scrollbar.update()})}this.setState({loading:true});return this.props.library.searchImages(t).then(function(e){r._loadThumbs(e);r.setState({loading:false,images:e},function(){return r._scrollbar.update()})})}},{key:"_renderListItems",value:function e(){var t=this;var r=this.context.editor;var n=r.getImage();if(this.state.images.length===0){return d["React"].createElement(T,null,this._t("editor.controls.library.noResults"))}return this.state.images.map(function(e){return d["React"].createElement(_["a"],{key:e.getThumbUrl(),image:e,selected:e.getRawUrl()===(n&&n.src),visible:e.isThumbLoaded(),onClick:t._onImageClick.bind(t,e)})})}},{key:"render",value:function e(){var t=this;if(this.state.loading)return d["React"].createElement(d["LoadingIndicatorComponent"],null);var r=this.props.innerRef;return d["React"].createElement(E,{innerRef:function e(n){r&&r(n);t._wrapper=n},className:C?"js-searchPanel":undefined},d["React"].createElement(d["ScrollableListComponent"],{direction:"vertical",innerRef:function e(r){t._scrollbar=r}},d["React"].createElement(x,null,this._renderListItems())))}}]);return t}(d["BaseComponent"]);t["a"]=S;var E=d["adonis"].div("rfecls","RootPanelWrapper");var x=d["adonis"].ul("5jg0ou","ImageList");var T=d["adonis"].div("6kl290","NoResultsText")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=f["ControlsStyles"].ControlItem,g=f["ControlsStyles"].ControlItemActiveOverlay;var y="production"==="test";var b=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a.state={isPortrait:false,hovered:false};return a}v(t,[{key:"componentWillReceiveProps",value:function e(t){if(this.props.visible!==t.visible){var r=this.props.image.getThumbImage();if(r.height>r.width){this.setState({isPortrait:true})}}}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.image,i=r.onClick,a=r.selected,o=r.visible;var s={backgroundImage:"url('"+n.getThumbUrl()+"')"};var l=n.getAuthorAvatar();var u=this.context.theme.transitionDuration;var c=[y?"js-imageListItem":undefined,a&&"is-selected"].filter(function(e){return e});return f["React"].createElement(k,{animated:true,style:s,selected:a,visible:o,className:c.join(" "),onClick:i,portrait:this.state.isPortrait,onMouseEnter:function e(){return t.setState({hovered:true})},onMouseLeave:function e(){return t.setState({hovered:false})}},f["React"].createElement(f["Transition"],{active:this.state.hovered,enterProp:"rendered",enterDuration:u*1e3,appearProp:"visible",appearDuration:u*1e3,leaveDuration:u*1e3},f["React"].createElement(E,{selected:a},l&&f["React"].createElement(C,{src:l}),f["React"].createElement(S,null,n.getAuthorName()))),f["React"].createElement(f["Transition"],{active:a,enterProp:"rendered",enterDuration:u*1e3,appearProp:"visible",appearDuration:u*1e3,leaveDuration:u*1e3},f["React"].createElement(w,{selected:true})))}}]);return t}(f["BaseComponent"]);t["a"]=b;var k=Object(f["adonis"])(_).li("1a5mxw5",{portrait:"otbyv0"},"ListItem");var w=Object(f["adonis"])(g).div("120drhm","ListItemOverlay");var C=f["adonis"].img("1owxkzt","AuthorAvatar");var S=f["adonis"].div("1jylqsv","AuthorName");var E=f["adonis"].div("mchu36",{rendered:"2jlos",visible:"1fmxelx"},"Author")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=250;var g="production"==="test";var y=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onInputChange");a._onDebouncedInputChange=f["Utils"].debounce(a._onDebouncedInputChange,_);a.state={searchQueryInputValue:""};return a}v(t,[{key:"componentWillReceiveProps",value:function e(t){if(this.props.searchQuery!==t.searchQuery){this.setState({searchQueryInputValue:t.searchQuery})}}},{key:"componentWillUnmount",value:function e(){this._disposed=true}},{key:"_onDebouncedInputChange",value:function e(t){if(this._disposed)return;this.props.onChange&&this.props.onChange(t)}},{key:"_onInputChange",value:function e(t){var r=t.target.value;this.setState({searchQueryInputValue:r});this._onDebouncedInputChange(r)}},{key:"render",value:function e(){return f["React"].createElement(b,{key:"header"},f["React"].createElement(k,null,f["React"].createElement(w,{placeholder:this._t("editor.controls.library.search"),onLiveChange:this._onInputChange,className:g?"js-searchInput":undefined,value:this.state.searchQueryInputValue})))}}]);return t}(f["BaseComponent"]);t["a"]=y;var b=f["adonis"].div("1tkmkv6","Header");var k=f["adonis"].div("mz0a5q","InputContainer");var w=Object(f["adonis"])(f["TextInputComponent"])("py3uvl","TextInput")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=r(302);var h=r(304);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var y=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onImage","_onWebcamBack","_onWebcamActivated");a.state.displayHeader=false;return a}d(t,[{key:"_onImage",value:function e(t){this.props.controls.onImage(t)}},{key:"_onWebcamBack",value:function e(){this.setSharedState({webcamEnabled:false})}},{key:"_onWebcamActivated",value:function e(t){this.setSharedState({webcamEnabled:true})}},{key:"_renderControls",value:function e(){var t=this.getSharedState("webcamEnabled");var r=this.props.options.displayUploadInCanvas;if(t){return f["React"].createElement(v["a"],{onImage:this._onImage,onBack:this._onWebcamBack})}else if(r){return f["React"].createElement(b,null,f["React"].createElement(h["a"],{large:true,controls:this.props.controls,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this._onWebcamActivated,onImage:this._onImage}))}}}]);return t}(f["CanvasControlsComponent"]);y.contextTypes=f["CanvasControlsComponent"].contextTypes;t["a"]=y;var b=f["adonis"].div("1up9ikz","LibraryUploadContainer")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(7);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(303);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onWebcamReady","_onWebcamError","_onButtonClick","_onCancelClick");a.state={webcamReady:false};return a}m(t,[{key:"_onWebcamReady",value:function e(){this.props.onReady&&this.props.onReady();this.setState({webcamReady:true})}},{key:"_onWebcamError",value:function e(t){var r=this;var n=v["ModalManager"].instance.displayError(this._t("errors.title"),this._t("errors.webcamUnavailable.text",{error:t}));n.on("close",function(){return r.props.onBack()})}},{key:"_onButtonClick",value:function e(t){t.preventDefault();this._takePhoto()}},{key:"_onCancelClick",value:function e(t){t.preventDefault();this.props.onBack&&this.props.onBack()}},{key:"_takePhoto",value:function e(){var t=this;if(!this.state.webcamReady){return}this._webcam.capture().then(function(e){t.props.onImage&&t.props.onImage(e)})}},{key:"render",value:function e(){var t=this;return v["React"].createElement(k,null,v["React"].createElement(w,null,v["React"].createElement(C,{onClick:this._onCancelClick},this._t("editor.cancel"))),v["React"].createElement(S,null,v["React"].createElement(E,{innerRef:function e(r){t._videoContainer=r}},v["React"].createElement(d["a"],{flashURL:this._getAssetPath("fallback/webcam.swf"),ref:function e(r){t._webcam=r},onWebcamError:this._onWebcamError,onWebcamAvailable:this._onWebcamReady}),v["React"].createElement(T,{onClick:this._onButtonClick}))))}}]);return t}(v["BaseComponent"]);t["a"]=b;var k=v["adonis"].div("dehn6v","Container");var w=v["adonis"].div("4d756t","Gradient");var C=v["adonis"].div("1p4kwwq","CancelButton");var S=v["adonis"].div("1j41msh","OuterVideoContainer");var E=v["adonis"].div("1g72uw9","VideoContainer");var x=v["adonis"].video("1btv3tg",{visible:"jsuk9w"},"Video");var T=v["adonis"].div("1fkab7z","Button")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(42);var h=r.n(v);var d=r(32);var m=r.n(d);var _=r(5);var g=r.n(_);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var C=function(e){w(t,e);function t(e){b(this,t);var r=k(this,(t.__proto__||p()(t)).call(this,e));r._bindAll("_onLoadedMetadata");r.state={webcamAvailable:false,useFlashFallback:false};r._getUserMedia=null;r._webcamStream=null;return r}y(t,[{key:"componentDidMount",value:function e(){var t=this;this._initGetUserMedia();if(this._getUserMedia){this._getUserMedia({video:{optional:[{minWidth:320},{minWidth:640},{minWidth:1024},{minWidth:1280},{minWidth:1920},{minWidth:2560}]},audio:false}).then(function(e){t._webcamStream=e;var r=t._videoElement;if("srcObject"in r){r.srcObject=e}else{r.src=window.URL.createObjectURL(e)}}).catch(function(e){if(t.props.onWebcamError){t.props.onWebcamError(e)}})}else{var r=false;if(!window.Webcam){window.Webcam={};r=true}window.Webcam.flashNotify=function(e,n){switch(e){case"cameraLive":t.setState({webcamAvailable:true},function(){t.props.onWebcamAvailable&&t.props.onWebcamAvailable()});delete window.Webcam.flashNotify;if(r){delete window.Webcam}break;case"error":t.props.onWebcamError&&t.props.onWebcamError(n);delete window.Webcam.flashNotify;if(r){delete window.Webcam}break}}}}},{key:"componentWillUnmount",value:function e(){this._disposeWebcam()}},{key:"_initGetUserMedia",value:function e(){if(navigator.mediaDevices){if(navigator.mediaDevices.getUserMedia){this._getUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)}}if(!this._getUserMedia){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(t){this._getUserMedia=function(e){return new c.a(function(r,n){return t.call(navigator,e,r,n)})}}}if(!this._getUserMedia){this.setState({useFlashFallback:true})}}},{key:"_disposeWebcam",value:function e(){if(this._webcamStream){var t=this._webcamStream;var r=t.getTracks()[0];if(r){r.stop()}else if(t.stop){t.stop()}}else if(this._flashWebcam){this._flashWebcam._releaseCamera()}}},{key:"capture",value:function e(){var t=this;if(!this.state.webcamAvailable){return c.a.reject(new Error("Webcam video not available"))}if(this._videoElement&&!this._flashWebcam){return new c.a(function(e,r){var n=t._videoElement;if(n.readyState===0){r(new Error("Webcam video not available"))}else{var i=document.createElement("canvas");i.width=n.videoWidth;i.height=n.videoHeight;var a=i.getContext("2d");a.drawImage(n,0,0);var o=new window.Image;o.addEventListener("load",function(){e(o)});o.src=i.toDataURL("image/jpeg")}})}else if(this._flashWebcam){return new c.a(function(e,r){var n=t._flashWebcam._snap();var i=new Image;i.onload=function(){e(i)};i.src="data:image/jpeg;base64,"+n})}return c.a.reject(new Error("Webcam video not available"))}},{key:"_getFlashFallbackComponent",value:function e(){var t=this;var r=this._container,n=r.offsetWidth,i=r.offsetHeight;var a=640;var o=480;if(i>n){a=n||640;o=3/4*n}else{a=4/3*i;o=i||480}var s="width="+a+"&height="+o+"&dest_width=1024&dest_height=768&jpeg_quality=100&fps=24";return m.a.createElement("object",{classID:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-shockwave-flash",width:a,height:o,ref:function e(r){t._flashWebcam=r},align:"middle"},m.a.createElement("param",{name:"wmode",value:"transparent"}),m.a.createElement("param",{name:"allowScriptAccess",value:"always"}),m.a.createElement("param",{name:"allowFullScreen",value:"false"}),m.a.createElement("param",{name:"movie",value:this.props.flashURL}),m.a.createElement("param",{name:"loop",value:"false"}),m.a.createElement("param",{name:"menu",value:"false"}),m.a.createElement("param",{name:"quality",value:"best"}),m.a.createElement("param",{name:"bgcolor",value:"#ffffff"}),m.a.createElement("param",{name:"flashvars",value:s}))}},{key:"_onLoadedMetadata",value:function e(){var t=this;this.setState({webcamAvailable:true},function(){t.props.onWebcamAvailable&&t.props.onWebcamAvailable()})}},{key:"render",value:function e(){var t=this;var r=this.state.useFlashFallback?this._getFlashFallbackComponent():m.a.createElement(S,{autoPlay:true,visible:this.state.webcamAvailable&&!this.state.useFlashFallback,innerRef:function e(r){t._videoElement=r},onLoadedMetadata:this._onLoadedMetadata});return m.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"},ref:function e(r){t._container=r}},r)}}]);return t}(_["BaseComponent"]);C.propTypes={flashURL:h.a.string,onWebcamAvailable:h.a.func,onWebcamError:h.a.func};t["a"]=C;var S=_["adonis"].video("145pu2m",{visible:"jsuk9w"},"Video")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=r(129);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g=f["ControlsStyles"].PlainControlItem,y=f["ControlsStyles"].PlainControlItemBackground;var b="production"==="test";var k=function(e){_(t,e);function t(){d(this,t);return m(this,(t.__proto__||c()(t)).apply(this,arguments))}h(t,[{key:"render",value:function e(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",true)+"')"};return f["React"].createElement(w,null,f["React"].createElement(C,null,f["React"].createElement(x,null,f["React"].createElement(S,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},f["React"].createElement(f["InvisibleUploadComponent"],{ref:"upload",onNewFile:this._onNewFile}),this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone"))),!this.state.dropZoneHovered&&this.props.webcamEnabled&&f["React"].createElement(x,null,f["React"].createElement(E,{style:t,className:b?"js-webcamButton":undefined,onClick:this._onWebcamClick}))))}}]);return t}(v["a"]);t["a"]=k;var w=Object(f["adonis"])(g).div("1xesje3","Container");var C=Object(f["adonis"])(y).div("z914p5","Background");var S=f["adonis"].div("yw0i2r",{hovered:"1xndhux"},"DropZone");var E=f["adonis"].div("1jg5y1q","WebcamButton");var x=f["adonis"].div("15u7gri","Row")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=r(306);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g=function(e){_(t,e);function t(){d(this,t);return m(this,(t.__proto__||c()(t)).apply(this,arguments))}h(t,null,[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=t.getOrCreate("adjustments");return{brightness:n.getBrightness(),saturation:n.getSaturation(),contrast:n.getContrast(),gamma:n.getGamma(),exposure:n.getExposure(),shadows:n.getShadows(),highlights:n.getHighlights(),clarity:n.getClarity(),setBrightness:function e(t){n.setBrightness(t)},setSaturation:function e(t){n.setSaturation(t)},setContrast:function e(t){n.setContrast(t)},setGamma:function e(t){n.setGamma(t)},setExposure:function e(t){n.setExposure(t)},setShadow:function e(t){n.setShadow(t)},setHighlights:function e(t){n.setHighlights(t)},setClarity:function e(t){n.setClarity(t)},reset:function e(){n.resetOptions()},setOperationOptions:function e(t){n.set(t)}}}},{key:"isEnabled",value:function e(t){return t.isToolAllowed("adjustment")&&t.isToolEnabled("adjustments")}}]);return t}(f["BaseControls"]);g.clickAtPosition=f["BaseControls"].clickAtPosition;g.getPreloadAssets=f["BaseControls"].getPreloadAssets;g.identifier="adjustments";g.controlsComponent=v["a"];g.canvasControlsComponent=f["BaseControls"].canvasControlsComponent;g.iconPath="editor/controls/adjustments/icon.png";g.activeIconPath="editor/controls/adjustments/icon-active.png";g.requiredOperations=["adjustments"];g.defaultOptions={availableAdjustments:null};g.updatableOperations=["adjustments"];g.switchToDefaultControlsOnRemoval=false;g.SECTIONS=[{identifier:"basics",items:["brightness","saturation","contrast","gamma"]},{identifier:"refinements",items:["clarity","exposure","shadows","highlights"]}];p.a.Controls.AdjustmentsControls=g;t["a"]=g},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=r(307);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var y=f["GroupedControlsStyles"].ControlGroupList;var b="production"==="test";var k=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onResetDefaultClick");return a}h(t,[{key:"_isAdjustmentAvailable",value:function e(t){var r=this.props.options.availableAdjustments;if(r===null)return true;return r.indexOf(t)!==-1}},{key:"_onResetDefaultClick",value:function e(){this.sharedState.reset();this.props.controls.addLocalHistorySnapshot("reset",true)}},{key:"_onValueChange",value:function e(t,r){this.sharedState.setOperationOptions(d({},t,r));this.props.controls.addLocalHistorySnapshot(t,true)}},{key:"_renderAdjustmentsControls",value:function e(){var t=this;var r=function e(r){return f["React"].createElement(f["CollapseSectionComponent"],{key:r.identifier,title:t._t("editor.controls.adjustments.sections."+r.identifier),alwaysExpanded:true},f["React"].createElement(C,{className:(b?"js-sectionItemList-":undefined)+r.identifier},n(r.items)))};var n=function e(r){return r.filter(function(e){return t._isAdjustmentAvailable(e)}).map(function(e){return t._makeItem(e)})};var i=this.props.controls.constructor.SECTIONS;return i.filter(function(e){return e.items.filter(function(e){return t._isAdjustmentAvailable(e)}).length>0}).map(r)}},{key:"_makeItem",value:function e(t){var r=this.sharedState[t];return f["React"].createElement(v["a"],{item:t,value:r,onValueChange:this._onValueChange.bind(this,t),className:b?"js-sliderControl":undefined,key:t})}},{key:"_getRootProps",value:function e(){return{className:b?"js-adjustmentsControls":undefined,withBorderTop:true}}},{key:"_renderContent",value:function e(){var t=this;return f["React"].createElement(f["ScrollableListComponent"],{direction:"vertical",innerListRef:function e(r){t._list=r},innerRef:function e(r){t._scrollbar=r}},f["React"].createElement(w,null,f["React"].createElement(S,null,f["React"].createElement(f["ButtonComponent"],{title:this._t("editor.controls.adjustments.reset"),className:b?"js-adjustmentsResetDefault":undefined,onClick:this._onResetDefaultClick})),this._renderAdjustmentsControls()))}}]);return t}(f["ControlsComponent"]);k.contextTypes=f["ControlsComponent"].contextTypes;k.RootElement=f["ControlsComponent"].RootElement;t["a"]=k;var w=Object(f["adonis"])(y).ul("x32ss4","SectionList");var C=f["adonis"].ul("gz4y54","SectionItemList");var S=f["adonis"].div("7abnmv","BottomSection")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(7);var p=r.n(f);var v=r(5);var h=r.n(v);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var y=p.a.Operations.AdjustmentsOperation;var b=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onValueChange");a._option=y.prototype.availableOptions[a.props.item];return a}d(t,[{key:"shouldComponentUpdate",value:function e(t){return t.value!==this.props.value}},{key:"_onValueChange",value:function e(t){var r=this._option,n=r.minValue,i=r.midValue,a=r.maxValue;t=t<0?i+(i-n)*t/100:i+(a-i)*t/100;this.props.onBeforeValueChange&&this.props.onBeforeValueChange(t);var o=this.context.editor;o.render();this.setState({value:t});this.props.onValueChange&&this.props.onValueChange(t)}},{key:"render",value:function e(){var t=this._option,r=t.minValue,n=t.midValue,i=t.maxValue;var a=this.props.value;var o=(a<=n?(a-r)/(n-r)-1:(a-n)/(i-n))*100;if(a===r)o=-100;return v["React"].createElement(v["SliderControlComponent"],{key:this.props.item,label:this._t("editor.controls.adjustments.items."+this.props.item),minValue:-100,maxValue:100,value:parseInt(o),onSliderValueChange:this._onValueChange,onValueChange:this._onValueChange,className:this.props.className,middleDot:true})}}]);return t}(v["SharedStateComponent"]);b.contextTypes=v["SharedStateComponent"].contextTypes;t["a"]=b},function(e,t,r){"use strict";var n=r(34);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(309);var g=r(311);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function b(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++){r[t]=e[t]}return r}else{return i()(e)}}function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var S=v["Operations"].SpriteOperation?v["Operations"].SpriteOperation:{},E=S.BrushSprite;var x=function(e){C(t,e);function t(e,r,n){k(this,t);var i=w(this,(t.__proto__||p()(t)).call(this,e,r,n));i._onOperationRemoved=i._onOperationRemoved.bind(i);return i}y(t,[{key:"_onEnter",value:function e(){var t=this;var r=this.context.editor;var n=r.operations.getOrCreate("sprite");var i=n.createBrush();n.addSprite(i);r.zoom.auto(false,false,function(){r.features.disable("zoom","drag");var e=r.getOutputDimensions();var n=Math.max(e.min()*.05,1);if(t._options.widthPresets&&t._options.widthPresets.length>0){n=t._options.sizePresets[0]}t.sharedState.set({brushSize:Math.round(n)})});this.sharedState.set({operation:n,brushSprite:i,brushColor:v["Color"].WHITE,brushSize:.1,brushHardness:50})}},{key:"_onLeave",value:function e(){var t=this.context.editor;var r=t.operations.get("sprite");if(r){var n=[].concat(b(r.getSprites()));n.forEach(function(e){if(e instanceof E){if(e.getPaths().length<=0){r.removeSprite(e)}}})}t.features.enable("zoom","drag");t.render()}},{key:"_onOperationRemoved",value:function e(t){var r=this.sharedState.get("operation");if(t===r){var n=this.context.editor.operations.getOrCreate("sprite");var i=n.createBrush();n.addSprite(i);this.sharedState.set({operation:n,brushSprite:i})}}}],[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.getOrCreate("sprite");return{operation:i}}},{key:"isEnabled",value:function e(t){return t.isToolAllowed("brush")&&t.isToolEnabled("brush")}}]);return t}(d["BaseControls"]);x.clickAtPosition=d["BaseControls"].clickAtPosition;x.getPreloadAssets=d["BaseControls"].getPreloadAssets;x.identifier="brush";x.controlsComponent=_["a"];x.canvasControlsComponent=g["a"];x.iconPath="editor/controls/brush/icon.png";x.activeIconPath="editor/controls/brush/icon-active.png";x.requiredOperations=["sprite"];x.defaultOptions={brushes:[],replaceBrushes:false,availableBrushes:null};x.updatableOperations=["sprite"];x.switchToDefaultControlsOnRemoval=false;m.a.Controls.BrushControls=x;t["a"]=x},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(8);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(7);var m=r.n(d);var _=r(5);var g=r.n(_);var y=r(310);var b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var k=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function w(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function C(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function S(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var x=d["Operations"].SpriteOperation;var T=void 0;if(x){T=d["Operations"].SpriteOperation.BrushSprite.Brush}var O=_["GroupedControlsStyles"].ControlGroupTitle,R=_["GroupedControlsStyles"].ControlGroup;var D="production"==="test";var I=function(e){E(t,e);function t(){var e;C(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=S(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onBrushColorChanged","_onBrushHardnessChanged","_onBrushWidthChanged","_onOperationUpdated");a._events=w({},_["Constants"].EVENTS.OPERATION_UPDATED,a._onOperationUpdated);a._initBrushManager();return a}b(t,[{key:"componentDidMount",value:function e(){k(t.prototype.__proto__||h()(t.prototype),"componentDidMount",this).call(this);this._onBrushSelect(this._brushManager.getBrushes()[0])}},{key:"_initBrushManager",value:function e(){this._brushManager=new _["BrushManager"](this.context.ui,this.props.options)}},{key:"_onBrushColorChanged",value:function e(t){var r=this.getSharedState("brushInstance").clone();r.setColor(t.clone());this.setSharedState({brushInstance:r})}},{key:"_onBrushHardnessChanged",value:function e(t){var r=this.getSharedState("brushInstance").clone();r.setHardness(t/100);this.setSharedState({brushInstance:r,brushHardness:Math.round(t)})}},{key:"sharedStateDidChange",value:function e(t,r){if(t.brushSize!==r.brushSize){this._onBrushWidthChanged(r.brushSize)}}},{key:"_onBrushWidthChanged",value:function e(t){var r=this.context.editor;var n=r.getOutputDimensions();var i=this.getSharedState("brushInstance").clone();i.setSize(t/n.min());this.setSharedState({brushInstance:i,brushSize:Math.round(t)})}},{key:"_onOperationUpdated",value:function e(t){var r=this.context.editor;if(t===this.getSharedState("operation")){var n=this.getSharedState("brushSprite");if(n){var i=t.getSprites().filter(function(e){return e.getId()===n.getId()})[0];this.setSharedState({brushSprite:i})}r.render()}}},{key:"_onBrushSelect",value:function e(t){var r=this;var n=this.context.editor;var i=n.getOutputDimensions();var a=this.getSharedState("brushSize")/i.min();var o=this.getSharedState("brushHardness")/100;var s=this.getSharedState("brushColor");var l={size:a,color:s};var u=void 0;if(t.prototype&&t.prototype instanceof T){var c=t;u=new c(l)}else{var f=d["Utils"].extend({},t);delete f.image;var p=function(e){E(t,e);function t(){C(this,t);return S(this,(t.__proto__||h()(t)).apply(this,arguments))}return t}(T);p.identifier=t.identifier;u=new p(d["Utils"].extend({},f,l))}if(u.hasOption("hardness")){u.setHardness(o)}this._loadBrush(t,u).then(function(){r.setSharedState({brushInstance:u,brush:t})})}},{key:"_loadBrush",value:function e(t,r){var n=this;return new p.a(function(e,i){if(t.constructor===Object){var a=new window.Image;a.addEventListener("load",function(){r.setImage(a);e()});a.addEventListener("error",function(){i(new Error("Failed to load image at "+a.src))});a.crossOrigin=n.context.editor.getCrossOrigin();a.src=n._getAssetPath(t.image)}else{e()}})}},{key:"_getRootProps",value:function e(){return{className:D?"js-brushControls":undefined,withBorderTop:true}}},{key:"_renderBrushItems",value:function e(){var t=this;var r=this._brushManager.getBrushes();if(r.length<=1){return null}return r.map(function(e){return _["React"].createElement(y["a"],{key:e.identifier,brush:e,selected:t.getSharedState("brush")===e,onClick:t._onBrushSelect.bind(t,e)})})}},{key:"_renderContent",value:function e(){var t=this;var r=this.getSharedState("brushInstance");return _["React"].createElement(_["ScrollableListComponent"],{direction:"vertical",innerListRef:function e(r){t._list=r},innerRef:function e(r){t._scrollbar=r}},_["React"].createElement(j,null,_["React"].createElement(A,null,this._t("editor.controls.brush.settings")),_["React"].createElement(B,null,_["React"].createElement(_["ColorSelectionComponent"],{value:this.getSharedState("brushColor"),onChange:this._onBrushColorChanged})),_["React"].createElement(P,{label:this._t("editor.controls.brush.width"),minValue:1,maxValue:100,value:this.getSharedState("brushSize"),onSliderValueChange:this._onBrushWidthChanged,onValueChange:this._onBrushWidthChanged,className:D?"js-widthControl":undefined}),_["React"].createElement(P,{label:this._t("editor.controls.brush.hardness"),minValue:0,maxValue:100,disabled:!(r&&r.hasOption("hardness")),value:this.getSharedState("brushHardness"),onSliderValueChange:this._onBrushHardnessChanged,onValueChange:this._onBrushHardnessChanged})),_["React"].createElement(M,null,_["React"].createElement(_["ScrollbarComponent"],{direction:"vertical"},_["React"].createElement(F,null,this._renderBrushItems()))))}}]);return t}(_["ControlsComponent"]);I.contextTypes=_["ControlsComponent"].contextTypes;I.RootElement=_["ControlsComponent"].RootElement;t["a"]=I;var P=Object(_["adonis"])(_["SliderControlComponent"])("6vpx1b","SliderControl");var j=Object(_["adonis"])(R).div("r92vc7","Settings");var A=Object(_["adonis"])(O).div("120drhm","SettingsTitle");var B=_["adonis"].div("yzsuxp","ColorSelection");var M=_["adonis"].div("16dil83","Brushes");var F=_["adonis"].ul("1lb1mg4","BrushList")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(8);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(7);var m=r.n(d);var _=r(5);var g=r.n(_);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var b=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var S=_["ControlsStyles"].PlainControlItemBackground;var E=d["Operations"].SpriteOperation;var x=void 0,T=void 0;if(E){x=E.BrushSprite.Brush;T=E.BrushSprite.Path}var O=d["Math"].Vector2;var R="production"==="test";var D=function(e){C(t,e);function t(){k(this,t);return w(this,(t.__proto__||h()(t)).apply(this,arguments))}y(t,[{key:"_loadBrush",value:function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props.brush;return new p.a(function(e,n){if(r.constructor===Object){var i=new window.Image;i.addEventListener("load",function(){t._brush.setImage(i);e()});i.addEventListener("error",function(){n(new Error("Failed to load image at "+i.src))});i.crossOrigin=t.context.editor.getCrossOrigin();i.src=t._getAssetPath(r.image)}else{e()}})}},{key:"_drawBrush",value:function e(){var t=new T(null,{brush:this._brush},this._canvas);t.addControlPoint(new O(.1,.5));t.addControlPoint(new O(.9,.5));t.render(new O(this._canvas.width,this._canvas.height))}},{key:"_instantiateBrush",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props.brush;var r={color:d["Color"].WHITE,size:.25};if(t.prototype&&t.prototype instanceof x){var n=t;this._brush=new n(r)}else{var i=d["Utils"].extend({},t);delete i.image;var a=function(e){C(t,e);function t(){k(this,t);return w(this,(t.__proto__||h()(t)).apply(this,arguments))}return t}(x);a.identifier=t.identifier;this._brush=new a(d["Utils"].extend({},i,r))}}},{key:"componentDidMount",value:function e(){var r=this;b(t.prototype.__proto__||h()(t.prototype),"componentDidMount",this).call(this);this._instantiateBrush();var n=this._canvas,i=n.offsetWidth,a=n.offsetHeight;this._canvas.width=i;this._canvas.height=a;this._loadBrush().then(function(e){r._drawBrush()})}},{key:"render",value:function e(){var t=this;return _["React"].createElement(I,{onClick:this.props.onClick,selected:this.props.selected,className:R?"js-brushListItem":undefined,"data-selected":this.props.selected},_["React"].createElement(P,{innerRef:function e(r){t._canvas=r}}))}}]);return t}(_["BaseComponent"]);t["a"]=D;var I=Object(_["adonis"])(S).li("8908c2",{selected:"120drhm"},"BrushListItem");var P=_["adonis"].canvas("1ssoezr","Canvas")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(54);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var y=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var C=v["Operations"].SpriteOperation?v["Operations"].SpriteOperation:{},S=C.BrushSprite;var E=v["Math"].Vector2;var x="production"==="test";var T=function(e){w(t,e);function t(){var e;b(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=k(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onMouseEnter","_onMouseLeave","_onMouseMove","_onDrawStart","_onDraw","_onDrawStop");a.state=v["Utils"].extend(a.state,{cursorPosition:new E(0,0),canvasClickDisabled:true});return a}g(t,[{key:"_selectNextSprite",value:function e(){}},{key:"_onDrawStart",value:function e(t){var r=this.context.editor;var n=r.getOutputDimensions();this._initialDrawPosition=t.clone();var i=this.getSharedState("brushSprite");var a=this.getSharedState("brushInstance");var o=this.getSharedState("operation");if(!i){i=o.createBrush();o.addSprite(i);this.setSharedState({brushSprite:i})}this._currentPath=i.createPath(a);this._currentPath.addControlPoint(t.clone().divide(n));this._lastDrawPosition=this._initialDrawPosition.clone();this._lastCursorPosition=this._initialDrawPosition.clone()}},{key:"_onDraw",value:function e(t,r,n){var i=this.context.editor;var a=i.getOutputDimensions();var o=i.getOutputTextureDimensions();var s=this._lastCursorPosition.clone().add(n);var l=i.zoom.level;var u=this.getSharedState("brushSize");var c=s.clone().subtract(this._lastDrawPosition).abs().len();if(c/l>=u/10){this._currentPath.addControlPoint(s.clone().divide(a));this.getSharedState("brushSprite").render(o);this._lastDrawPosition.copy(s)}this._lastCursorPosition.copy(s)}},{key:"_onDrawStop",value:function e(){this._currentPath.setClosed(true);var t=this.context.editor;var r=t.getOutputTextureDimensions();this.getSharedState("brushSprite").render(r);this.props.controls.addLocalHistorySnapshot();this._currentPath=null}},{key:"_onMouseEnter",value:function e(){this.setState({cursorVisible:true})}},{key:"_onMouseLeave",value:function e(){this.setState({cursorVisible:false})}},{key:"_onMouseMove",value:function e(t){var r=d["Utils"].getEventPosition(t);var n=this._innerContainer.getBoundingClientRect();r.subtract(n.left,n.top);this.setState({cursorPosition:r})}},{key:"_getPropsForSprite",value:function e(r){var n=y(t.prototype.__proto__||p()(t.prototype),"_getPropsForSprite",this).call(this,r);if(r instanceof S){n.hideContent=false}return n}},{key:"_getCursorStyle",value:function e(){return{width:this.getSharedState("brushSize")+8,height:this.getSharedState("brushSize")+8,left:this.state.cursorPosition.x,top:this.state.cursorPosition.y,marginLeft:(this.getSharedState("brushSize")+8)*-.5,marginTop:(this.getSharedState("brushSize")+8)*-.5}}},{key:"_renderOverlayControls",value:function e(){return d["React"].createElement(d["DraggableComponent"],{onStart:this._onDrawStart,onDrag:this._onDraw,onStop:this._onDrawStop},d["React"].createElement(O,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseMove:this._onMouseMove,className:x?"js-brushCanvasControls":undefined},d["React"].createElement(R,{style:this._getCursorStyle(),visible:this.state.cursorVisible})))}}]);return t}(_["a"]);T.contextTypes=_["a"].contextTypes;t["a"]=T;var O=d["adonis"].div("1sc5z35","BrushCanvasControls");var R=d["adonis"].div("y4v90o",{visible:"2jlos"},"Cursor")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(6);var l=r.n(s);var u=r(2);var c=r.n(u);var f=r(3);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(55);var g=r(22);var y=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var k=function e(t,r,n){if(t===null)t=Function.prototype;var i=l()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(n)}};function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function C(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function S(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)c.a?c()(e,t):e.__proto__=t}var E=function(e){S(t,e);function t(){var e;w(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=C(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));a.state={renderAsSVG:false,svgAttributes:{}};return a}b(t,[{key:"componentDidMount",value:function e(){var r=this;k(t.prototype.__proto__||h()(t.prototype),"componentDidMount",this).call(this);if(this.props.hideContent)return null;var n=this.props.sprite;if(n.getImage().src.match(/\w+\.svg(?=\?|$)/i)&&n.getTintMode()!=="none"){g["a"].loadXHR(n.getImage().src,"image/svg+xml").then(function(e){var t=e.responseXML.documentElement.attributes;var n={};for(var i=0;i<t.length;i++){var a=t[i],o=a.name,s=a.value;if(o==="xmlns:xlink")o="xmlnsXlink";n[o]=s}var l=e.responseText.match(/<svg\b[^>]*>([\s\S]*?)<\/svg>/im)[1];l=l.replace(/\s+?fill=["'].*?["']/gi,"");r.setState({renderAsSVG:true,svgContent:l,svgAttributes:n})})}}},{key:"_onBeforeScale",value:function e(){var t=this.props.sprite;this._initialOptions={dimensions:t.getDimensions().clone()}}},{key:"_onScale",value:function e(t){var r=this.context.editor;var n=this._initialOptions.dimensions;var i=this.props.sprite;i.set({dimensions:n.clone().multiply(t/r.zoom.level)});this.forceUpdate();r.render()}},{key:"_getSpriteDimensions",value:function e(){var t=this.context.editor;var r=this.props.sprite;return r.getDimensions().clone().multiply(t.zoom.level)}},{key:"_getContainerStyle",value:function e(){var t=this.context.editor;var r=t.getOutputDimensions();var n=this.props.sprite;var i=n.getPosition().clone().multiply(r);var a=n.getRotation()*180/Math.PI;var o="rotateZ("+a.toFixed(2)+"deg)";var s="50% 50%";var l=n.getDimensions().clone().multiply(t.zoom.level);return{width:l.x,height:l.y,left:i.x,top:i.y,marginLeft:l.x*-.5,marginTop:l.y*-.5,transform:o,MozTransform:o,msTransform:o,WebkitTransform:o,transformOrigin:s,MozTransformOrigin:s,msTransformOrigin:s,WebkitTransformOrigin:s}}},{key:"_getContentStyle",value:function e(){var t=this.props.sprite;var r="rotateY("+(t.getFlipHorizontally()?180:0)+"deg) rotateX("+(t.getFlipVertically()?180:0)+"deg)";var n={opacity:t.getAlpha(),transform:r,MozTransform:r,msTransform:r,WebkitTransform:r};if(this.state.renderAsSVG){n.fill=t.getTintColor().toRGBA()}return n}},{key:"_renderContent",value:function e(){if(this.props.hideContent)return null;var t=this.props.sprite;var r=this.state.svgAttributes;return this.state.renderAsSVG?React.createElement(T,y({style:this._getContentStyle(),dangerouslySetInnerHTML:{__html:this.state.svgContent}},r)):React.createElement(x,{src:t.getImage().src,style:this._getContentStyle()})}}]);return t}(_["a"]);E.contextTypes=_["a"].contextTypes;E.MIN_WIDTH=_["a"].MIN_WIDTH;t["a"]=E;var x=d["adonis"].img("1ssoezr","Image");var T=d["adonis"].svg("1ssoezr","SVGImage")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(55);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var y=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function b(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var S=v["Math"].Vector2;var E="production"==="test";var x=function(e){C(t,e);function t(){var e;k(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=w(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onTextChange","_onBlur","_onItemDoubleClick","_onWidthDrag","_onWidthDragStop");a.state={editing:false,updateBecauseIESucks:false};return a}g(t,[{key:"_isDraggingDisabled",value:function e(){return y(t.prototype.__proto__||p()(t.prototype),"_isDraggingDisabled",this).call(this)||this.state.editing}},{key:"enterEditMode",value:function e(){var t=this;var r=this.context.editor;var n=this.props.sprite;n.setVisible(false);r.render();this.setState({editing:true},function(){if(!n._edited){n.setText("");t._textField.value="";n._edited=true;t.forceUpdate()}t._textField.focus();t._textField.select()})}},{key:"leaveEditMode",value:function e(){var t=this.context.editor;var r=this.props.sprite;r.setVisible(true);t.render();this.setState({editing:false})}},{key:"shouldComponentUpdate",value:function e(){return true}},{key:"_onTakeToFront",value:function e(){var r;this.leaveEditMode();for(var n=arguments.length,i=Array(n),a=0;a<n;a++){i[a]=arguments[a]}(r=y(t.prototype.__proto__||p()(t.prototype),"_onTakeToFront",this)).call.apply(r,[this].concat(i))}},{key:"_onFlipHorizontally",value:function e(){var r;this.leaveEditMode();for(var n=arguments.length,i=Array(n),a=0;a<n;a++){i[a]=arguments[a]}(r=y(t.prototype.__proto__||p()(t.prototype),"_onFlipHorizontally",this)).call.apply(r,[this].concat(i))}},{key:"_onDuplicate",value:function e(){var r;this.leaveEditMode();for(var n=arguments.length,i=Array(n),a=0;a<n;a++){i[a]=arguments[a]}(r=y(t.prototype.__proto__||p()(t.prototype),"_onDuplicate",this)).call.apply(r,[this].concat(i))}},{key:"_onSpriteUpdate",value:function e(r,n){var i=this;if(d["Utils"].Browser.isIElte(10)&&n.alignment&&r.getAlignment()!==n.alignment){this.setState({updateBecauseIESucks:true},function(){Object(d["requestAnimationFrame"])(function(){i.setState({updateBecauseIESucks:false})})})}y(t.prototype.__proto__||p()(t.prototype),"_onSpriteUpdate",this).call(this)}},{key:"_onWidthDragStart",value:function e(t,r,n){var i=this.context.editor;var a=this.props.sprite;var o=a.getAnchor();this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect();this._containerOffset=this.props.canvasControls.getContainerOffset();var s=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y);var l=a.getDimensions(i.getSDK(),i.getOutputDimensions());var u=new S(l.width,l.height);var c=s.clone().subtract(u.clone().multiply(o)).add(u.clone().multiply(.5)).round();var f=n.clone().subtract(this._containerOffset).subtract(c);this._initialScaleSettings={maxWidth:a.getMaxWidth(),mouseDistanceFromCenter:f};this.props.onBeforeChange&&this.props.onBeforeChange();this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()}},{key:"_onWidthDrag",value:function e(t){var r=this.props.sprite;var n=r.getRotation();var i=this._initialScaleSettings.mouseDistanceFromCenter;var a=i.clone().add(t);var o=Math.cos(n);var s=Math.sin(n);var l=Math.max(Math.abs((a.x*o+a.y*s)*2),50)/this._imageBoundingBox.width;r.setMaxWidth(l);var u=this.context.editor;u.render()}},{key:"_onWidthDragStop",value:function e(){this.props.onAfterChange&&this.props.onAfterChange();this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()}},{key:"_onBlur",value:function e(){this.leaveEditMode();var t=this.props.sprite;if(t&&t.getText()===""){t.setText(this._t("editor.controls.text.defaultText"));t._edited=false}}},{key:"_onTextChange",value:function e(t){var r=this.props.sprite;r.setText(t.target.value);this.forceUpdate()}},{key:"_onItemDoubleClick",value:function e(){if(!this.props.selected)return;this.enterEditMode()}},{key:"_onBeforeScale",value:function e(){var t=this.props.sprite;this._initialOptions={maxWidth:t.getMaxWidth(),fontSize:t.getFontSize()}}},{key:"_onScale",value:function e(t){var r=this._initialOptions,n=r.maxWidth,i=r.fontSize;var a=this.props.sprite;a.set({maxWidth:n*t,fontSize:i*t});var o=this.context.mediator;o.emit(d["Constants"].EVENTS.TEXT_SCALED,a);this.forceUpdate()}},{key:"_getContainerStyle",value:function e(){var t=this.context.editor;var r=t.getOutputDimensions();var n=this.props.sprite;var i=n.getPosition().clone().multiply(r);var a=n.getRotation()*180/Math.PI;var o="rotateZ("+a.toFixed(2)+"deg)";var s="50% 50%";var l=n.getMaxWidth()*r.x;var u=n.getDimensions(t.getSDK(),r).y;return{width:l,height:u,left:i.x,top:i.y,marginLeft:l*-.5,marginTop:u*-.5,transform:o,MozTransform:o,msTransform:o,WebkitTransform:o,transformOrigin:s,MozTransformOrigin:s,msTransformOrigin:s,WebkitTransformOrigin:s}}},{key:"_getTextStyle",value:function e(){var t=this.context.editor;var r=this.props.sprite;var n=t.getSDK();var i=t.getOutputDimensions();var a=r.getDOMStyle(n,i);var o=this._getAbsoluteSpritePosition();var s=r.getDimensions(n,i);a.height=Math.min(s.y,i.y-o.y+s.y/2);return a}},{key:"_renderKnobs",value:function e(){var r=this;var n=y(t.prototype.__proto__||p()(t.prototype),"_renderKnobs",this).call(this);["left","right"].forEach(function(e){var t="width-"+e;var i=b({},e,true);n.push(d["React"].createElement(d["DraggableComponent"],{key:t,onStart:r._onWidthDragStart.bind(r,e),onDrag:r._onWidthDrag,onStop:r._onWidthDragStop},d["React"].createElement(R,i)))});return n}},{key:"_getItemControlsProps",value:function e(){return{onDoubleClick:this._onItemDoubleClick,onTouchStart:this._onItemTouchStart,onTouchEnd:this._onItemTouchEnd}}},{key:"_renderContent",value:function e(){var t=this;var r=this.props,n=r.sprite,i=r.selected;var a=this.state,o=a.editing,s=a.updateBecauseIESucks;var l=[];if(!(this.props.hideContent&&!this.state.editing)){l.push(d["React"].createElement(T,{key:"text-field",editing:o,innerRef:function e(r){t._textField=r},style:this._getTextStyle(),defaultValue:n.getText(),onBlur:this._onBlur,onChange:this._onTextChange,updateBecauseIESucks:s}))}if(!this.state.editing){l.push(d["React"].createElement(O,{key:"disabled-overlay",className:E?"js-disabledOverlay":undefined,selected:i}))}return l}}]);return t}(_["a"]);x.contextTypes=_["a"].contextTypes;x.MIN_WIDTH=100;t["a"]=x;var T=d["adonis"].textarea("12u5t8c",{updateBecauseIESucks:"ckktkq",editing:"15kzu1c"},"TextField");var O=d["adonis"].div("8gacw5","DisabledOverlay");var R=d["adonis"].div("jqmmm4",{left:"tr97e1",right:"1llojum"},"WidthControl")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(55);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var _=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var k=function(e){b(t,e);function t(){g(this,t);return y(this,(t.__proto__||p()(t)).apply(this,arguments))}m(t,[{key:"componentDidMount",value:function e(){_(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);var r=this.props.sprite.getCanvas();if(this._brush){this._appendCanvas(r)}}},{key:"componentWillReceiveProps",value:function e(t){if(t.sprite!==this.props.sprite){var r=this.props.sprite.getCanvas();r.parentNode.removeChild(r);if(this._brush){var n=t.sprite.getCanvas();this._appendCanvas(n)}}}},{key:"_appendCanvas",value:function e(t){t.style.width="100%";t.style.height="100%";this._brush.appendChild(t)}},{key:"_renderOverlayControls",value:function e(){return null}},{key:"render",value:function e(){var t=this;if(this.props.hideContent)return null;return v["React"].createElement(w,{innerRef:function e(r){t._brush=r}})}}]);return t}(d["a"]);t["a"]=k;var w=v["adonis"].div("8gacw5","BrushItem")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=r(55);var h=r(22);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var y=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._onItemDoubleClick=function(){var e=a.props.canvasControls;var t=e.props.controls;return t.editText()};a.state={};return a}d(t,[{key:"_onBeforeScale",value:function e(){var t=this.props.sprite;this._initialOptions={width:t.getWidth()}}},{key:"_onScale",value:function e(t){var r=this.context.editor;var n=this._initialOptions.width;var i=this.props.sprite;i.set({width:n*(t/r.zoom.level)});this.forceUpdate();r.render()}},{key:"_getSpriteDimensions",value:function e(){var t=this.context.editor;var r=this.props.sprite;return r.getDimensions().clone().multiply(t.zoom.level)}},{key:"_getContainerStyle",value:function e(){var t=this.context.editor;var r=t.getOutputDimensions();var n=this.props.sprite;var i=n.getPosition().clone().multiply(r);var a=n.getRotation()*180/Math.PI;var o="rotateZ("+a.toFixed(2)+"deg)";var s="50% 50%";var l=n.getDimensions().clone().multiply(t.zoom.level);return{width:l.x,height:l.y,left:i.x,top:i.y,marginLeft:l.x*-.5,marginTop:l.y*-.5,transform:o,MozTransform:o,msTransform:o,WebkitTransform:o,transformOrigin:s,MozTransformOrigin:s,msTransformOrigin:s,WebkitTransformOrigin:s}}},{key:"_getContentStyle",value:function e(){}},{key:"_getItemControlsProps",value:function e(){return{onDoubleClick:this._onItemDoubleClick}}},{key:"_renderContent",value:function e(){return null}}]);return t}(v["a"]);y.contextTypes=v["a"].contextTypes;y.MIN_WIDTH=v["a"].MIN_WIDTH;t["a"]=y;var b=f["adonis"].img("1ssoezr","Image");var k=f["adonis"].svg("1ssoezr","SVGImage")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(7);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(317);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){_(this,t);return g(this,(t.__proto__||c()(t)).apply(this,arguments))}m(t,null,[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=t.getOrCreate("filter");return{intensity:n?n.getIntensity()*100:100,identifier:n?n.getIdentifier():null,filter:n?n.filter:null,setIntensity:function e(t){n&&n.setIntensity(t/100)},setFilter:function e(t){n&&n.setFilter(t)},setIdentifier:function e(t){n&&n.setIdentifier(t)},setOperationOptions:function e(t){n.set(t)}}}},{key:"isEnabled",value:function e(t){return t.isToolEnabled("filter")&&t.isToolAllowed("filter")}},{key:"getPreloadAssets",value:function e(t){var r=[];var n=t.getOptions();var i=f["Utils"].defaults(n.editor.controlsOptions.filter,this.defaultOptions);var a=new v["FilterManager"](t.getUI(),i);var o=a.getFiltersForCategory("all");o.forEach(function(e){if(typeof e.lutImage!=="undefined"){r.push([e.lutImage,false])}});return r}}]);return t}(v["BaseControls"]);b.clickAtPosition=v["BaseControls"].clickAtPosition;b.identifier="filter";b.controlsComponent=d["a"];b.canvasControlsComponent=v["BaseControls"].canvasControlsComponent;b.iconPath="editor/controls/filter/icon.png";b.activeIconPath="editor/controls/filter/icon-active.png";b.requiredOperations=["filter","transform"];b.updatableOperations=["filter"];b.switchToDefaultControlsOnRemoval=false;b.defaultOptions={categories:[],replaceCategories:false,availableFilters:null};h.a.Controls.FilterControls=b;t["a"]=b},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(8);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(7);var m=r.n(d);var _=r(5);var g=r.n(_);var y=r(130);var b=r(15);var k=r(318);var w=r(319);var C=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var S=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function E(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function x(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function T(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var O=void 0;if(d["Operations"].FilterOperation){O=d["Operations"].FilterOperation.Filters.IdentityFilter}var R="production"==="test";var D=function(e){T(t,e);function t(){var e;E(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=x(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onIntensityChanged","_onListScroll");var o=a.context,s=o.ui,l=o.editor,u=o.theme;a._loadedFilters=[];a._filterPreviewRenderer=new w["a"](l);a._renderQueue=new y["a"](1,Infinity,u.listItemSlideInDelay);a._filterManager=new _["FilterManager"](s,a.props.options);a._filterPreviewQueue=[];a._filterPreviews=[];a._category="all";return a}C(t,[{key:"fixStyles",value:function e(){var r=this;return S(t.prototype.__proto__||h()(t.prototype),"fixStyles",this).call(this).then(function(){r._onListScroll()})}},{key:"componentDidMount",value:function e(){var r=this;S(t.prototype.__proto__||h()(t.prototype),"componentDidMount",this).call(this);this._filterPreviewRenderer.init();this._renderPreviewsAnimationFrame=Object(b["b"])(function(){r._renderPreviews()})}},{key:"componentWillUnmount",value:function e(){S(t.prototype.__proto__||h()(t.prototype),"componentWillUnmount",this).call(this);if(this._renderPreviewsAnimationFrame){Object(b["a"])(this._renderPreviewsAnimationFrame)}this._renderQueue.dispose();this._filterPreviewRenderer.dispose();this._disposed=true;window.clearInterval(this._interval)}},{key:"_renderPreviews",value:function e(){var t=this;var r=this.context.editor;var n=r.getSDK().getRenderer();var i=this._getVisibleFilters().filter(function(e){return t._loadedFilters.indexOf(e)===-1});if(n.isOfType(m.a.RendererType.WEBGL)){i.forEach(function(e){t._loadedFilters.push(e);t._renderQueue.add(function(){return t._filterManager.instantiateFilterWithIdentifier(e.identifier).then(function(r){if(t._disposed)return;return t._filterPreviewRenderer.render(r).then(function(r){t._filterPreviews[e.identifier]=r;t.forceUpdate()})})})})}else{this._loadedFilters=this._loadedFilters.concat(i);i.forEach(function(e){t._renderQueue.add(function(){return new p.a(function(r){t._filterPreviews[e.identifier]=t._getAssetPath("editor/controls/filter/filters/"+e.identifier+".png",true);t.forceUpdate();r()})})})}}},{key:"_getVisibleFilters",value:function e(){var t=[O].concat(this._filterManager.getFiltersForCategory(this._category));var r=[];var n=this._container.getBoundingClientRect();for(var i=0,a=t.length;i<a;i++){var o=t[i];var s=this.refs["filter-"+o.identifier].container;var l=s.getBoundingClientRect();var u=!(l.top>n.bottom+n.height||l.bottom<n.top);if(u){r.push(o)}else if(r.length){break}}return r}},{key:"_onListScroll",value:function e(t){this._renderPreviews()}},{key:"_onItemClick",value:function e(t){var r=this;if(this.sharedState.identifier===t){return}this._filterManager.instantiateFilterWithIdentifier(t).then(function(e){r.sharedState.setOperationOptions({filter:e,identifier:t,intensity:1});var n=r.context.editor;n.render()})}},{key:"_onIntensityChanged",value:function e(t){this.sharedState.setIntensity(t)}},{key:"_renderListItems",value:function e(){var t=this;var r=this._filterManager.getFiltersForCategory(this._category);var n=this.sharedState.identifier;var i=this.sharedState.intensity;var a=this._filterPreviews;return[O].concat(r).map(function(e,o){var s=e.identifier;var l=!a[s]&&o===t._loadedFilters.length;var u=s===n;return _["React"].createElement(P,{key:s,"data-selected":u,"data-identifier":s,className:R?"js-filterListItem":undefined},_["React"].createElement(k["a"],{ref:"filter-"+s,filter:e,identifier:s,lastChild:e===r[r.length-1],onClick:t._onItemClick.bind(t,s),selected:u,intensity:i,displaySlider:e!==O,onIntensityChanged:t._onIntensityChanged,visible:!!a[s],previewUrl:a[s]}),l&&_["React"].createElement(j,null))})}},{key:"_getRootProps",value:function e(){return{className:R?"js-filterControls":undefined,withBorderTop:true}}},{key:"_renderContent",value:function e(){var t=this;return _["React"].createElement(_["ScrollableListComponent"],{direction:"vertical",onScroll:this._onListScroll,innerRef:function e(r){t._scrollbar=r}},_["React"].createElement(I,null,this._renderListItems()))}}]);return t}(_["ControlsComponent"]);D.contextTypes=_["ControlsComponent"].contextTypes;D.propTypes=_["ControlsComponent"].propTypes;D.RootElement=_["ControlsComponent"].RootElement;t["a"]=D;var I=_["adonis"].ul("9uviv9","List");var P=_["adonis"].li("13hv8io","ListItemContainer");var j=Object(_["adonis"])(_["LoadingIndicatorComponent"])("11ztmqh","LoadingIndicator")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=v["ControlsStyles"].ControlItem,k=v["ControlsStyles"].ControlItemActiveOverlay,w=v["ControlsStyles"].ControlItemTitle;var C=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a.state={hovered:false};return a}m(t,[{key:"shouldComponentUpdate",value:function e(t,r){if(this.props.previewUrl!==t.previewUrl||this.props.selected!==t.selected||this.props.visible!==t.visible||this.state.hovered!==r.hovered||this.props.filter!==t.filter){return true}if(this.props.intensity!==t.intensity){if(t.selected){return true}}return false}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.lastChild,i=r.onClick,a=r.onIntensityChanged,o=r.selected,s=r.intensity,l=r.displaySlider,u=r.visible,c=r.filter;var f=null;if(this.props.previewUrl){f=v["React"].createElement(O,{src:this.props.previewUrl})}var p=this.context.theme.transitionDuration;var h={lastChild:n,onClick:i,visible:u};return v["React"].createElement(S,d({},h,{animated:true,innerRef:function e(r){t._container=r},onMouseEnter:function e(){return t.setState({hovered:true})},onMouseLeave:function e(){return t.setState({hovered:false})}}),v["React"].createElement(x,{selected:o},f,v["React"].createElement(v["Transition"],{active:o&&l,enterProp:"rendered",enterDuration:p*1e3,appearProp:"visible",appearDuration:p*1e3,leaveDuration:p*1e3},o&&l&&v["React"].createElement(E,null,v["React"].createElement(v["SliderComponent"],{minValue:0,maxValue:100,valueUnit:"",middleDot:false,value:s,onChange:a}))),v["React"].createElement(T,{hovered:this.state.hovered},this._t("editor.controls.filter.filters."+c.identifier)||c.defaultName),v["React"].createElement(v["Transition"],{active:o,enterProp:"rendered",enterDuration:p*1e3,appearProp:"visible",appearDuration:p*1e3,leaveDuration:p*1e3},v["React"].createElement(R,{selected:o}))))}},{key:"container",get:function e(){return this._container}}]);return t}(v["BaseComponent"]);C.contextTypes=v["BaseComponent"].contextTypes;t["a"]=C;var S=Object(v["adonis"])(b).div("120drhm",{lastChild:"229bd5"},"Item");var E=v["adonis"].div("19g9ike",{visible:"zgbg08",rendered:"2jlos"},"Slider");var x=v["adonis"].div("rf12k1","ItemContainer");var T=Object(v["adonis"])(w).span("hpn4lp","ItemTitle");var O=v["adonis"].img("3x5zfy","Preview");var R=Object(v["adonis"])(k).div("120drhm","Overlay")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(7);var o=r.n(a);var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=a["Math"].Vector2;var c=new u(180,80);var f=function(){function e(t){l(this,e);this._editor=t;this._disposed=false}s(e,[{key:"init",value:function e(){this._initSDK()}},{key:"render",value:function e(t){var r=this;this._filterOperation.setFilter(t);return this._sdk.render().then(function(){var e=r._sdk.getCanvas();return e.toDataURL("image/png")})}},{key:"_initSDK",value:function e(){var t=this._editor.getOptions();var r=t.logLevel,n=t.debug,i=t.license;var a=t.editor,s=a.smoothDownscaling,l=a.smoothUpscaling,u=a.preferredRenderer;var f=this._editor.getSDK();var p=f.getOperationsStack().getByIdentifier("exif-orientation");var v={logLevel:r,debug:n,pixelRatio:1,smoothDownscaling:s,smoothUpscaling:l,transparent:true,license:i,image:this._editor.getSDK().getImage(),renderMode:"export",versionCheck:false,displayWelcomeMessage:false};this._sdk=new o.a(u,v);this._sdk.resizeTo(c);this._filterOperation=this._sdk.createOperation("filter");if(p){this._sdk.createOperation("exif-orientation",p.serializeOptions())}this._transformOperation=this._sdk.createOperation("transform");var h=this._calculateTransformOptions(),d=h.start,m=h.end,_=h.textureScale;this._transformOperation.set({start:d,end:m,textureScale:_});this._sdk.render()}},{key:"_calculateTransformOptions",value:function e(){var t=this._transformOperation.getInputDimensions();var r=t.x/t.y;var n=new u;var i=new u;var a=c.x/c.y;if(r<=a){var o=1/t.y*(t.x/a);n.set(0,(1-o)/2);i.set(1,1-n.y)}else{var s=1/t.x*(a*t.y);n.set((1-s)/2,0);i.set(1-n.x,1)}var l=i.clone().subtract(n);var f=t.clone().multiply(l);var p=c.x/f.x;return{dimensions:c,start:n,end:i,textureScale:p}}},{key:"dispose",value:function e(){if(this._sdk){this._sdk.dispose()}}},{key:"isDisposed",value:function e(){return this._disposed}}]);return e}();t["a"]=f},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=r(321);var h=r(131);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var y="production"==="test";var b=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onBlurRadiusChanged");return a}d(t,[{key:"_isModeAvailable",value:function e(t){var r=this.props.options.availableModes;if(t==="none"||r===null)return true;return r.indexOf(t)!==-1}},{key:"_onItemClick",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this.sharedState.setSelectedFocus(t)}},{key:"_onBlurRadiusChanged",value:function e(t){this.sharedState.setBlurRadius(t)}},{key:"_renderListItems",value:function e(){var t=this;var r=this.props.controls;var n=this.sharedState.operationIdentifier;var i=this.sharedState.selectedFocus;var a=this.sharedState.blurRadius;return r.constructor.ITEMS.filter(function(e){return t._isModeAvailable(e.identifier)}).map(function(e){var r=t._getAssetPath(e.backgroundImagePath,true);var o=t._getAssetPath(e.activeBackgroundImagePath,true);var s=e.identifier===i;return f["React"].createElement(v["a"],{key:e.identifier,title:t._t("editor.controls.focus.items."+e.identifier),selected:s,showSlider:!!n,blurRadius:a,onBlurRadiusChanged:t._onBlurRadiusChanged,backgroundImagePath:r,activeBackgroundImagePath:o,onClick:t._onItemClick.bind(t,e,true,false)})},this)}},{key:"_getRootProps",value:function e(){return{className:y?"js-focusControls":undefined,withBorderTop:true}}},{key:"_renderContent",value:function e(){var t=this;return f["React"].createElement(f["ScrollableListComponent"],{direction:"vertical",innerListRef:function e(r){t._list=r},innerRef:function e(r){t._scrollbar=r}},f["React"].createElement(k,null,this._renderListItems()))}}]);return t}(f["ControlsComponent"]);b.contextTypes=f["ControlsComponent"].contextTypes;b.propTypes=f["ControlsComponent"].propTypes;b.RootElement=f["ControlsComponent"].RootElement;t["a"]=b;var k=f["adonis"].ul("1snluvd","List")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=f["ControlsStyles"].ControlItem,g=f["ControlsStyles"].ControlItemTitle,y=f["ControlsStyles"].ControlItemActiveOverlay;var b="production"==="test";var k=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onSliderValueChanged");return a}v(t,[{key:"_onSliderValueChanged",value:function e(t){var r=this.props.onBlurRadiusChanged;var n=this.sharedState.inputDimensions;var i=n.min();r&&r(t/i)}},{key:"_renderSlider",value:function e(){var t=this.props,r=t.selected,n=t.showSlider,i=t.blurRadius;if(!(r&&n))return null;var a=this.sharedState.inputDimensions;var o=Math.min(180,Math.round(a.min()*.1));var s=a.min();return f["React"].createElement(f["SliderComponent"],{minValue:0,maxValue:o,valueUnit:"",middleDot:false,value:i*s,onChange:this._onSliderValueChanged})}},{key:"render",value:function e(){var t=this.props,r=t.title,n=t.backgroundImagePath,i=t.activeBackgroundImagePath,a=t.selected,o=t.onClick,s=t.showSlider;var l={backgroundImage:"url('"+(a?i:n)+"')"};var u=this.context.theme.transitionDuration;return f["React"].createElement(w,{selected:a,"data-selected":a,className:b?"js-focusListItem":undefined,onClick:o,style:l},f["React"].createElement(C,{selected:a,withSlider:a&&s},r),f["React"].createElement(E,{visible:a&&s},this._renderSlider()),f["React"].createElement(f["Transition"],{active:a,enterProp:"rendered",enterDuration:u*1e3,appearProp:"visible",appearDuration:u*1e3,leaveDuration:u*1e3},f["React"].createElement(S,{selected:true})))}}]);return t}(f["SharedStateComponent"]);k.contextTypes=f["SharedStateComponent"].contextTypes;t["a"]=k;var w=Object(f["adonis"])(_).li("19qom6j","ListItem");var C=Object(f["adonis"])(g).div("1cwztpc",{selected:"2znik8",withSlider:"fsvvyb"},"ListItemTitle");var S=Object(f["adonis"])(y).div("rctda3","ListItemOverlay");var E=f["adonis"].div("chwlso",{visible:"vpr3tu"},"Slider")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(7);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(323);var m=r(324);var _=r(325);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function y(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var C=function(e){w(t,e);function t(){var e;b(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=k(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onZoomDone");a._events=y({},v["Constants"].EVENTS.ZOOM_DONE,a._onZoomDone);a.state=f["Utils"].extend(a.state,{zoomDone:false});return a}g(t,[{key:"_onZoomDone",value:function e(){this.setState({zoomDone:true})}},{key:"_renderControls",value:function e(){var t=this.sharedState.selectedFocus;var r=void 0;switch(t){case"radial":r=d["a"];break;case"linear":r=m["a"];break;case"mirrored":r=_["a"];break;default:return v["React"].createElement("div",null)}return v["React"].createElement(r,{zoomDone:this.state.zoomDone})}}]);return t}(v["CanvasControlsComponent"]);C.contextTypes=v["CanvasControlsComponent"].contextTypes;t["a"]=C},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(15);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var y=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function b(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var S=d["ControlsStyles"].Knob,E=d["ControlsStyles"].FullContainer;var x=v["Math"].Vector2,T=v["Math"].Rectangle;var O="production"==="test";var R=function(e){C(t,e);function t(){var e;k(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=w(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onCircleDragStart","_onCircleDrag","_onKnobDragStart","_onKnobDrag","_onZoomDone");a.state=v["Utils"].extend(a.state,{circlePosition:new x,circleDimensions:new x,knobPosition:new x,visible:false});a._knobChangedManually=false;a._events=b({},d["Constants"].EVENTS.ZOOM_DONE,a._onZoomDone);if(a.props.zoomDone){Object(_["b"])(function(){a._onZoomDone()})}return a}g(t,[{key:"componentDidMount",value:function e(){y(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._updateOnCanvasControls();this._updatePositionsAndDimensions()}},{key:"sharedStateDidChange",value:function e(t,r){if(!this._operation||!r.operation){return}if(this._operation!==r.operation&&this._operation.constructor===r.operation.constructor){r.operation.set(this._operation.serializeOptions());this._operation=r.operation}}},{key:"_onZoomDone",value:function e(){if(!this.state.visible){this.state.visible=true}this._updateOnCanvasControls();this._updatePositionsAndDimensions()}},{key:"_onCircleDragStart",value:function e(){this._initialPosition=this.sharedState.radialFocus.position.clone();this._initialKnobPosition=this.state.knobPosition.clone()}},{key:"_onCircleDrag",value:function e(t){var r=this.context.editor;var n=r.getOutputDimensions();var i=t.clone().divide(n);var a=this._initialPosition.clone().add(i);var o=this._initialKnobPosition.clone().add(t);this.sharedState.setPosition(a);this.state.knobPosition=o;r.render();this._updatePositionsAndDimensions()}},{key:"_onKnobDragStart",value:function e(t){this._knobChangedManually=true;this._initialKnobPosition=this.state.knobPosition.clone()}},{key:"_onKnobDrag",value:function e(t){var r=this.context.editor;var n=r.getOutputDimensions();var i=this._initialKnobPosition.clone().add(t).clamp(new x(0,0),n);var a=this.sharedState.radialFocus.position.clone().multiply(n);var o=i.clone().subtract(a).abs().len();var s=o/2;this.setState({knobPosition:i,circleDimensions:new x(o*2,o*2)});this.sharedState.setOperationOptions({radius:o/n.min(),gradientRadius:s/n.min()});r.render()}},{key:"_updatePositionsAndDimensions",value:function e(){var t=this.context.editor;var r=t.getOutputDimensions();var n=this.sharedState.radialFocus.position.clone().multiply(r);var i=this.sharedState.radialFocus.radius*r.min();var a=i*2;var o=new x(a,a);var s={circleDimensions:o,circlePosition:n};if(!this._knobChangedManually){s.knobPosition=n.clone().add(i,0)}this.setState(s)}},{key:"_updateOnCanvasControls",value:function e(){var t=this.context.editor;var r=t.getSDK().getSprite().getBounds();var n=this._container.getBoundingClientRect();var i=this.context.appComponent.getBounds();var a=new T(Math.floor(r.x-(n.left-i.left)),Math.floor(r.y-(n.top-i.top)),Math.ceil(r.width)+1,Math.ceil(r.height)+1);d["Utils"].styleElement(this._onCanvasControls,{left:a.x+"px",top:a.y+"px",width:a.width+"px",height:a.height+"px"});this.forceUpdate()}},{key:"_getCircleStyles",value:function e(){return{width:this.state.circleDimensions.x,height:this.state.circleDimensions.y,left:this.state.circlePosition.x,top:this.state.circlePosition.y,marginLeft:this.state.circleDimensions.x*-.5,marginTop:this.state.circleDimensions.y*-.5}}},{key:"_getKnobStyle",value:function e(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}}},{key:"render",value:function e(){var t=this;return d["React"].createElement(D,{innerRef:function e(r){t._container=r}},d["React"].createElement(d["Transition"],{active:this.state.visible,enterProp:"rendered",enterDuration:this.context.theme.transitionDuration*1e3,appearProp:"visible",appearDuration:this.context.theme.transitionDuration*1e3,leaveDuration:this.context.theme.transitionDuration*1e3},d["React"].createElement(I,{innerRef:function e(r){t._onCanvasControls=r}},d["React"].createElement(d["DraggableComponent"],{onStart:this._onCircleDragStart,onDrag:this._onCircleDrag},d["React"].createElement(j,{className:O?"js-radialFocusDraggableCircle":undefined,style:this._getCircleStyles()})),d["React"].createElement(d["DraggableComponent"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},d["React"].createElement(P,{className:O?"js-radialFocusDraggableKnob":undefined,style:this._getKnobStyle()})))))}}]);return t}(d["SharedStateComponent"]);R.contextTypes=d["SharedStateComponent"].contextTypes;t["a"]=R;var D=Object(d["adonis"])(E).div("1rineb","CanvasControls");var I=d["adonis"].div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls");var P=Object(d["adonis"])(S).div("120drhm","Knob");var j=d["adonis"].div("kgwi8g","Circle")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(15);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var y=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function b(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var S=d["ControlsStyles"].Knob,E=d["ControlsStyles"].FullContainer;var x=v["Math"].Vector2,T=v["Math"].Rectangle;var O="production"==="test";var R=function(e){C(t,e);function t(){var e;k(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=w(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onKnobDragStart","_onKnobDrag","_onZoomDone");a.state=v["Utils"].extend(a.state,{visible:false});a._events=b({},d["Constants"].EVENTS.ZOOM_DONE,a._onZoomDone);if(a.props.zoomDone){Object(_["b"])(function(){a._onZoomDone()})}return a}g(t,[{key:"componentDidMount",value:function e(){y(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._updateOnCanvasControls()}},{key:"sharedStateDidChange",value:function e(t,r){if(!this._operation||!r.operation){return}if(this._operation!==r.operation&&this._operation.constructor===r.operation.constructor){r.operation.set(this._operation.serializeOptions());this._operation=r.operation}}},{key:"_onZoomDone",value:function e(){if(!this.state.visible){this.state.visible=true}this._updateOnCanvasControls()}},{key:"_onKnobDragStart",value:function e(t,r){this._initialPosition=this.sharedState.linearFocus["controlPoint"+t]}},{key:"_onKnobDrag",value:function e(t,r){var n=this.context.editor;var i=n.getSDK().getSprite().getBounds();var a=this._container.getBoundingClientRect();var o=this.context.appComponent.getBounds();var s=this._initialPosition.clone().multiply(i.width,i.height);var l=s.add(r).clamp(new x(a.left-o.left-i.x,a.top-o.top-i.y),new x(a.width-(i.x-(a.left-o.left)),a.height-(i.y-(a.top-o.top))));var u=l.divide(i.width,i.height);this.sharedState["setControlPoint"+t](u)}},{key:"_updateOnCanvasControls",value:function e(){var t=this.context.editor;var r=t.getSDK().getSprite().getBounds();var n=this._container.getBoundingClientRect();var i=this.context.appComponent.getBounds();var a=new T(Math.floor(r.x-(n.left-i.left)),Math.floor(r.y-(n.top-i.top)),Math.ceil(r.width)+1,Math.ceil(r.height)+1);d["Utils"].styleElement(this._onCanvasControls,{left:a.x+"px",top:a.y+"px",width:a.width+"px",height:a.height+"px"});this.forceUpdate()}},{key:"_getKnobStyle",value:function e(t){var r=this.context.editor;var n=this.sharedState.linearFocus["controlPoint"+t];var i=r.getSDK().getSprite().getBounds();var a=n.clone().multiply(i.width,i.height);return{left:a.x,top:a.y}}},{key:"_getLineStyle",value:function e(){var t=this.context.editor;var r=t.getSDK().getSprite().getBounds();var n=this.sharedState.linearFocus.controlPoint1.clone();var i=this.sharedState.linearFocus.controlPoint2.clone();var a={1:n.multiply(r.width,r.height),2:i.multiply(r.width,r.height)};var o=a[2].clone().subtract(a[1]);var s=o.len();var l=Math.atan2(o.y,o.x);return{width:s+"px",left:a[1].x+"px",top:a[1].y+"px",transform:"rotate("+l+"rad) translateY(-50%)"}}},{key:"_renderKnobs",value:function e(){var t=[];for(var r=1;r<=2;r++){t.push(d["React"].createElement(d["DraggableComponent"],{onStart:this._onKnobDragStart.bind(this,r),onDrag:this._onKnobDrag.bind(this,r),key:r},d["React"].createElement(P,{style:this._getKnobStyle(r),className:O?r===1?"js-firstLinearFocusDraggableKnob":"js-secondLinearFocusDraggableKnob":undefined})))}return t}},{key:"render",value:function e(){var t=this;return d["React"].createElement(D,{innerRef:function e(r){t._container=r}},d["React"].createElement(d["Transition"],{active:this.state.visible,enterProp:"rendered",enterDuration:this.context.theme.transitionDuration*1e3,appearProp:"visible",appearDuration:this.context.theme.transitionDuration*1e3,leaveDuration:this.context.theme.transitionDuration*1e3},d["React"].createElement(I,{innerRef:function e(r){t._onCanvasControls=r}},this._renderKnobs(),d["React"].createElement(j,{style:this._getLineStyle()}))))}}]);return t}(d["SharedStateComponent"]);R.contextTypes=d["SharedStateComponent"].contextTypes;t["a"]=R;var D=Object(d["adonis"])(E).div("1rineb","CanvasControls");var I=d["adonis"].div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls");var P=Object(d["adonis"])(S).div("120drhm","Knob");var j=d["adonis"].div("1rrhaqy","Line")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(15);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var y=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function b(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var S=d["ControlsStyles"].Knob,E=d["ControlsStyles"].FullContainer;var x=v["Math"].Vector2,T=v["Math"].Rectangle;var O="production"==="test";var R=function(e){C(t,e);function t(){var e;k(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=w(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onCenterDragStart","_onCenterDrag","_onKnobDragStart","_onKnobDrag","_onZoomDone");a.state=v["Utils"].extend(a.state,{areaPosition:new x,areaDimensions:new x,knobPosition:new x,visible:false});a._events=b({},d["Constants"].EVENTS.ZOOM_DONE,a._onZoomDone);if(a.props.zoomDone){Object(_["b"])(function(){a._onZoomDone()})}return a}g(t,[{key:"componentDidMount",value:function e(){y(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._updateOnCanvasControls();this._updatePositionsAndDimensions()}},{key:"sharedStateDidChange",value:function e(t,r){if(!this._operation||!r.operation){return}if(this._operation!==r.operation&&this._operation.constructor===r.operation.constructor){r.operation.set(this._operation.serializeOptions());this._operation=r.operation}}},{key:"_onZoomDone",value:function e(){if(!this.state.visible){this.state.visible=true}this._updateOnCanvasControls();this._updatePositionsAndDimensions()}},{key:"_onCenterDragStart",value:function e(){this._initialStart=this.sharedState.mirroredFocus.start;this._initialEnd=this.sharedState.mirroredFocus.end;this._initialDist=this._initialEnd.clone().subtract(this._initialStart)}},{key:"_onCenterDrag",value:function e(t){var r=this.context.editor;var n=r.getOutputDimensions();var i=t.clone().divide(n);var a=this._initialStart.clone().add(i).clamp(new x(0,0),new x(1,1).subtract(this._initialDist));var o=a.clone().add(this._initialDist);this.sharedState.setOperationOptions({start:a,end:o});this._updatePositionsAndDimensions()}},{key:"_onKnobDragStart",value:function e(t){this._initialKnobPosition=this.state.knobPosition.clone()}},{key:"_onKnobDrag",value:function e(t){var r=this.context.editor;var n=r.getOutputDimensions();var i=this._initialKnobPosition.clone().add(t).clamp(new x(0,0),n);var a=i.clone().subtract(this.state.areaPosition);var o=this.state.areaPosition.clone().add(-a.y,a.x).divide(n);var s=this.state.areaPosition.clone().add(a.y,-a.x).divide(n);var l=a.len()*2;this.sharedState.setOperationOptions({start:o,end:s,size:l/n.min(),gradientSize:l/n.min()});this.setState({knobPosition:i,areaDimensions:new x(this.state.areaDimensions.x,l)})}},{key:"_getAreaStyle",value:function e(){var t=this.state.knobPosition.clone().subtract(this.state.areaPosition);var r=Math.atan2(t.x,t.y)*(180/Math.PI);var n="rotate("+(-r).toFixed(2)+"deg)";return{width:this.state.areaDimensions.x,height:this.state.areaDimensions.y,left:this.state.areaPosition.x,top:this.state.areaPosition.y,marginLeft:this.state.areaDimensions.x*-.5,marginTop:this.state.areaDimensions.y*-.5,transform:n,MozTransform:n,msTransform:n,WebkitTransform:n}}},{key:"_getKnobStyle",value:function e(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}}},{key:"_updatePositionsAndDimensions",value:function e(){var t=this.context.editor;var r=t.getOutputDimensions();var n=this.sharedState.mirroredFocus,i=n.start,a=n.end,o=n.size;i=i.clone().multiply(r);a=a.clone().multiply(r);o=o*r.min();var s=a.clone().subtract(i);var l=i.clone().add(s.clone().divide(2));var u=new x(r.len()*2,o);var c=s.len();var f=s.clone().divide(c).divide(2);this.setState({areaDimensions:u,areaPosition:l.clone(),knobPosition:l.clone().add(-o*f.y,o*f.x)})}},{key:"_updateOnCanvasControls",value:function e(){var t=this.context.editor;var r=t.getSDK().getSprite().getBounds();var n=this._container.getBoundingClientRect();var i=this.context.appComponent.getBounds();var a=new T(Math.floor(r.x-(n.left-i.left)),Math.floor(r.y-(n.top-i.top)),Math.ceil(r.width)+1,Math.ceil(r.height)+1);d["Utils"].styleElement(this._onCanvasControls,{left:a.x+"px",top:a.y+"px",width:a.width+"px",height:a.height+"px"});this.forceUpdate()}},{key:"render",value:function e(){var t=this;return d["React"].createElement(D,{innerRef:function e(r){t._container=r}},d["React"].createElement(d["Transition"],{active:this.state.visible,enterProp:"rendered",enterDuration:this.context.theme.transitionDuration*1e3,appearProp:"visible",appearDuration:this.context.theme.transitionDuration*1e3,leaveDuration:this.context.theme.transitionDuration*1e3},d["React"].createElement(I,{innerRef:function e(r){t._onCanvasControls=r}},d["React"].createElement(d["DraggableComponent"],{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag},d["React"].createElement(j,{className:O?"js-mirroredFocusDraggableArea":undefined,style:this._getAreaStyle()})),d["React"].createElement(d["DraggableComponent"],{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},d["React"].createElement(P,{className:O?"js-mirroredFocusDraggableKnob":undefined,style:this._getKnobStyle()})))))}}]);return t}(d["SharedStateComponent"]);R.contextTypes=d["SharedStateComponent"].contextTypes;t["a"]=R;var D=Object(d["adonis"])(E).div("1rineb","CanvasControls");var I=d["adonis"].div("aovk7s",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls");var P=Object(d["adonis"])(S).div("120drhm","Knob");var j=d["adonis"].div("36haff","Area")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=r(327);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g=function(e){_(t,e);function t(){d(this,t);return m(this,(t.__proto__||c()(t)).apply(this,arguments))}h(t,[{key:"loadFrame",value:function e(t){var r=this;var n=this.context.editor;var i=new f["Frame"](this.context.ui,t);var a=n.operations.getOrCreate("frame");var o=void 0;var s=setTimeout(function(){o=f["ModalManager"].instance.displayLoading(r._t("loading.loading"))},100);return i.load().then(function(){if(o)o.close();if(s){clearTimeout(s);s=null}a.setFrame(i.getFrame())})}}],[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.get("frame")||null;var a=null;if(i){a=i.getFrame()}var o={operation:i,frame:a,frameIdentifier:a?a.identifier:null,tintColor:i?i.getTintColor():null,removeFrame:function e(){i&&t.remove(i)},setTintColor:function e(t){i&&i.setTintColor(t.clone())}};return o}},{key:"isEnabled",value:function e(t){return t.isToolAllowed("frame")&&t.isToolEnabled("frame")}}]);return t}(f["BaseControls"]);g.clickAtPosition=f["BaseControls"].clickAtPosition;g.getPreloadAssets=f["BaseControls"].getPreloadAssets;g.identifier="frame";g.controlsComponent=v["a"];g.canvasControlsComponent=f["BaseControls"].canvasControlsComponent;g.iconPath="editor/controls/frame/icon.png";g.activeIconPath="editor/controls/frame/icon-active.png";g.requiredOperations=["frame"];g.defaultOptions={categories:[],replaceCategories:false,availableFrames:null};g.updatableOperations=["frame"];g.switchToDefaultControlsOnRemoval=false;p.a.Controls.FrameControls=g;t["a"]=g},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(328);var m=r(330);var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var g=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var w="production"==="test";var C={ROOT:1,CATEGORY:2,OPTIONS:3};var S=function(e){k(t,e);function t(){var e;y(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=b(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onFrameClick","_onReplaceClick");a._initFrameManager();a._needsStyleFixes=true;var o=C.ROOT;var s=a.getSharedState("operation");if(s&&s.getFrame()){o=C.OPTIONS}a.state={currentPanel:o};return a}_(t,[{key:"fixStyles",value:function e(){var r=this;this._list.style.height="100%";return g(t.prototype.__proto__||p()(t.prototype),"fixStyles",this).call(this).then(function(){if(v["Utils"].Browser.isIElte(10)){var e=r._container.offsetHeight;r._list.style.height=e+"px"}return r.refs.panel.fixStyles()})}},{key:"componentDidUpdate",value:function e(t,r){if(this.state.currentPanel!==r.currentPanel){this.fixStyles()}}},{key:"_initFrameManager",value:function e(){this._frameManager=new v["FrameManager"](this.context.ui,this.props.options)}},{key:"sharedStateDidChange",value:function e(t,r){var n=this.context.editor;var i=n.operations.get("frame");if(!i||i&&!i.getFrame()){return this.setState({currentPanel:C.ROOT})}else{return this.setState({currentPanel:C.OPTIONS})}}},{key:"_onReplaceClick",value:function e(){this.setState({currentPanel:C.ROOT})}},{key:"_onCategoryClick",value:function e(t){this.setState({currentPanel:C.CATEGORY,category:t})}},{key:"_onFrameClick",value:function e(t){var r=this;if(!t){this.sharedState.removeFrame();this.props.controls.addLocalHistorySnapshot("frame-image",true);return}this.props.controls.loadFrame(t).then(function(){r.props.controls.addLocalHistorySnapshot("frame-image",false);r.setState({currentPanel:C.OPTIONS})})}},{key:"_renderCurrentPanel",value:function e(){var t=this;var r=this.props.controls;switch(this.state.currentPanel){case C.ROOT:return v["React"].createElement(d["a"],{innerRef:function e(r){t._list=r},frameManager:this._frameManager,onFrameClick:this._onFrameClick,controls:r,ref:"panel"});case C.OPTIONS:return v["React"].createElement(m["a"],{innerRef:function e(r){t._list=r},frameManager:this._frameManager,onReplaceClick:this._onReplaceClick,onNewFrameClick:this._onNewFrameClick,controls:r,ref:"panel"})}}},{key:"_getRootProps",value:function e(){return{className:w?"js-frameControls":undefined,withBorderTop:true}}},{key:"_renderContent",value:function e(){return this._renderCurrentPanel()}}]);return t}(v["ControlsComponent"]);S.contextTypes=v["ControlsComponent"].contextTypes;S.RootElement=v["ControlsComponent"].RootElement;t["a"]=S},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(15);var m=r(329);var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var k="production"==="test";var w=function(e){b(t,e);function t(){g(this,t);return y(this,(t.__proto__||p()(t)).apply(this,arguments))}_(t,[{key:"fixStyles",value:function e(){var t=this;return c.a.resolve().then(function(){if(v["Utils"].Browser.isIElte(10)){Object(d["b"])(function(){t._scrollbar.update()})}else{t._scrollbar.update()}})}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.frameManager,i=r.innerRef;return v["React"].createElement(C,{innerRef:function e(r){i&&i(r);t._wrapper=r},className:k?"js-rootPanel":undefined},v["React"].createElement(v["ScrollableListComponent"],{direction:"vertical",innerRef:function e(r){t._scrollbar=r}},v["React"].createElement(m["a"],{frames:n.getFramesForCategory("all"),onFrameClick:this.props.onFrameClick})))}}]);return t}(v["BaseComponent"]);w.contextTypes=v["BaseComponent"].contextTypes;t["a"]=w;var C=v["adonis"].div("rfecls","Wrapper")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=f["ControlsStyles"].PlainControlItem;var g="production"==="test";var y=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}v(t,[{key:"_onFrameClick",value:function e(t){this.props.onFrameClick&&this.props.onFrameClick(t)}},{key:"_renderListItems",value:function e(){var t=this;var r=this.props.frames;var n=this.getSharedState.frameIdentifier;var i=this.getSharedState("selectedSprite");if(i){n=i.getIdentifier()}return r.map(function(e){var r=t._getAssetPath(e.thumbnail);var i={background:"url('"+r+"') no-repeat center center",backgroundSize:"contain"};return f["React"].createElement(k,{selected:e.identifier===n,key:e.identifier,onClick:t._onFrameClick.bind(t,e),className:g?"js-frame":undefined,twoColumns:true},f["React"].createElement(w,{style:i}))})}},{key:"render",value:function e(){var t=this.sharedState.frame;return f["React"].createElement(b,null,f["React"].createElement(k,{selected:!t,onClick:this._onFrameClick.bind(this,null),className:g?"js-frame":undefined,withText:true,twoColumns:true},"None"),this._renderListItems())}}]);return t}(f["SharedStateComponent"]);y.contextTypes=f["SharedStateComponent"].contextTypes;t["a"]=y;var b=f["adonis"].ul("18qztam","FrameList");var k=Object(f["adonis"])(_).li("u8nfgk","FrameListItem");var w=f["adonis"].div("7r0ke8","FrameImage")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(15);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var b=v["ControlsStyles"].PlainControlItemBackground;var k="production"==="test";var w=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange","_onWidthChange");var o=a.sharedState.tintColor;a.state={tintEnabled:o?o.a>0:false,tintColor:o};return a}m(t,[{key:"_onTintToggle",value:function e(t){var r=this.state.tintEnabled;var n=this.sharedState.tintColor.clone();n.a=r?0:1;this.sharedState.setTintColor(n);this.props.controls.addLocalHistorySnapshot("frame-tint-enabled");var i=this.context.editor;i.render();this.setState({tintEnabled:!r})}},{key:"_onTintColorChange",value:function e(t){this.sharedState.setTintColor(t.clone());this.props.controls.addLocalHistorySnapshot("frame-tint-color",true);var r=this.context.editor;r.render()}},{key:"sharedStateDidChange",value:function e(){var t=this.sharedState.tintColor;this.setState({tintEnabled:t?t.a>0:false,tintColor:t?t.clone():null})}},{key:"_onOpacityChange",value:function e(t){var r=this.getSharedState("operation");r.setAlpha(t/100);this.props.controls.addLocalHistorySnapshot("frame-opacity",true);var n=this.context.editor;n.render();this.forceUpdate()}},{key:"_onWidthChange",value:function e(t){var r=this.context.editor;var n=this.getSharedState("operation");var i=n.getInputDimensions().min();n.setScale(t/i);this.props.controls.addLocalHistorySnapshot("frame-width",true);r.render();this.forceUpdate()}},{key:"fixStyles",value:function e(){var t=this;return c.a.resolve().then(function(){if(v["Utils"].Browser.isIElte(10)){Object(d["b"])(function(){t._scrollbar.update()})}else{t._scrollbar.update()}})}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.innerRef,i=r.onReplaceClick;var a=this.getSharedState("operation");var o=a.getFrame();var s=a.getInputDimensions();var l=s.min();var u=o.tintable;var c={background:"url('"+this._getAssetPath(o.thumbnail,false)+"') center center / contain no-repeat"};return v["React"].createElement(C,{innerRef:function e(r){n&&n(r);t._wrapper=r},className:k?"js-optionsPanel":undefined},v["React"].createElement(v["ScrollableListComponent"],{direction:"vertical",innerRef:function e(r){t._scrollbar=r}},v["React"].createElement("div",null,v["React"].createElement(S,null,v["React"].createElement(E,null,v["React"].createElement(x,null,v["React"].createElement(T,{style:c,onClick:i})),v["React"].createElement(O,null,v["React"].createElement(R,null,this._t("editor.controls.frame.frames."+o.identifier)||o.defaultName),v["React"].createElement(D,{onClick:i,className:k?"js-replaceButton":undefined},this._t("editor.controls.frame.replace")))),v["React"].createElement(v["SliderControlComponent"],{minValue:0,value:Math.round(a.getAlpha()*100),maxValue:100,label:this._t("editor.controls.frame.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:false,className:k?"js-opacityControl":undefined}),v["React"].createElement(v["SliderControlComponent"],{minValue:l*.05,value:Math.round(a.getScale()*l),maxValue:l*.3,label:this._t("editor.controls.frame.width"),onSliderValueChange:this._onWidthChange,onValueChange:this._onWidthChange,middleDot:false,className:k?"js-widthControl":undefined})),u&&v["React"].createElement(v["CollapseSectionComponent"],{toggleable:true,title:this._t("editor.controls.frame.fill"),expanded:this.state.tintEnabled,className:k?"js-fillControl":undefined,onToggle:this._onTintToggle},v["React"].createElement(I,{value:this.state.tintColor,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))}}]);return t}(v["SharedStateComponent"]);w.contextTypes=v["SharedStateComponent"].contextTypes;t["a"]=w;var C=v["adonis"].div("rfecls","Wrapper");var S=v["adonis"].div("1vnvjau","TopSection");var E=v["adonis"].div("16woy02","Details");var x=Object(v["adonis"])(b).div("6u8g0p","Thumbnail");var T=v["adonis"].div("7r0ke8","ThumbnailImage");var O=v["adonis"].div("1trlo6v","DetailsContainer");var R=v["adonis"].div("w9mc0y","Title");var D=v["adonis"].div("1rhky7p","ReplaceButton");var I=Object(v["adonis"])(v["ColorSelectionComponent"])("1ouwzwk","ColorSelection")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=r(332);var h=r(22);var d=r(83);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var b=function(e){y(t,e);function t(){_(this,t);return g(this,(t.__proto__||c()(t)).apply(this,arguments))}m(t,[{key:"loadOverlay",value:function e(t){var r=this;var n=this._getAssetPath(t.image);var i=d["a"][t.blendMode];var a=void 0;var o=setTimeout(function(){a=f["ModalManager"].instance.displayLoading(r._t("loading.loading"))},100);return h["a"].load(n).then(function(e){if(a)a.close();if(o){clearTimeout(o);o=null}return{identifier:t.identifier,image:e,blendMode:i,alpha:typeof t.intensity==="undefined"?1:t.intensity}})}}],[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.getOrCreate("overlay");return{operation:i,identifier:i?i.getIdentifier():null,alpha:i?i.getAlpha():1,blendMode:i?i.getBlendMode():d["a"]["normal"],removeOverlay:function e(){i&&i.set({image:null,identifier:null,alpha:1})},setOverlayOptions:function e(t){i&&i.set(t)},setAlpha:function e(t){i&&i.setAlpha(t)},setBlendMode:function e(t){i&&i.setBlendMode(t)}}}},{key:"isEnabled",value:function e(t){return t.isToolAllowed("overlay")&&t.isToolEnabled("overlay")}}]);return t}(f["BaseControls"]);b.clickAtPosition=f["BaseControls"].clickAtPosition;b.getPreloadAssets=f["BaseControls"].getPreloadAssets;b.identifier="overlay";b.controlsComponent=v["a"];b.canvasControlsComponent=f["BaseControls"].canvasControlsComponent;b.iconPath="editor/controls/overlay/icon.png";b.activeIconPath="editor/controls/overlay/icon-active.png";b.requiredOperations=["overlay"];b.defaultOptions={overlays:[],replaceOverlays:false,availableOverlays:null};b.updatableOperations=["overlay"];b.switchToDefaultControlsOnRemoval=false;p.a.Controls.OverlayControls=b;t["a"]=b},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(22);var m=r(130);var _=r(333);var g=r(83);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var b=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var S=v["ControlsStyles"].PlainControlItem,E=v["ControlsStyles"].PlainControlItemBackground,x=v["ControlsStyles"].ControlItemTitle;var T="production"==="test";var O=function(e){C(t,e);function t(){var e;k(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=w(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));var o=a.context,s=o.ui,l=o.theme;a._thumbnailLoadQueue=new m["a"](1,Infinity,l.listItemSlideInDelay);a._thumbnailsLoaded={};a._overlayManager=new v["OverlayManager"](s,a.props.options);a.state={};return a}y(t,[{key:"componentDidMount",value:function e(){b(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._loadThumbnails()}},{key:"componentWillUnmount",value:function e(){b(t.prototype.__proto__||p()(t.prototype),"componentWillUnmount",this).call(this);this._thumbnailLoadQueue.dispose()}},{key:"_loadThumbnails",value:function e(){var t=this;var r=this._overlayManager.getOverlays();r.forEach(function(e){t._thumbnailLoadQueue.add(function(){return d["a"].load(t._getAssetPath(e.thumbnail)).then(function(r){t._thumbnailsLoaded[e.identifier]=r;t.forceUpdate()})})})}},{key:"_onBlendModeChange",value:function e(){this.props.controls.addLocalHistorySnapshot("overlay-blend-mode",false)}},{key:"_onAlphaChange",value:function e(){this.props.controls.addLocalHistorySnapshot("overlay-alpha",true)}},{key:"_onItemClick",value:function e(t){var r=this;if(!t){this.sharedState.removeOverlay();return this.forceUpdate()}if(t.identifier===this.sharedState.identifier)return;this.props.controls.loadOverlay(t).then(function(e){r.sharedState.setOverlayOptions(e);r.props.controls.addLocalHistorySnapshot("overlay-image",false)})}},{key:"_renderListItems",value:function e(){var t=this;var r=this.sharedState.identifier;var n=this._overlayManager.getOverlays();return n.map(function(e){return v["React"].createElement(_["a"],{key:e.identifier,overlay:e,selected:e.identifier===r,visible:!!t._thumbnailsLoaded[e.identifier],onClick:t._onItemClick.bind(t,e),onBlendModeChange:t._onBlendModeChange.bind(t),onAlphaChange:t._onAlphaChange.bind(t)})})}},{key:"_getRootProps",value:function e(){return{className:T?"js-overlayControls":undefined,withBorderTop:true}}},{key:"_renderContent",value:function e(){var t=this;var r=this.getSharedState("operation");var n=!r.getIdentifier();return v["React"].createElement(v["ScrollableListComponent"],{direction:"vertical",innerRef:function e(r){t._scrollbar=r}},v["React"].createElement(R,null,v["React"].createElement(D,{onClick:this._onItemClick.bind(this,null)},v["React"].createElement(I,{selected:n},v["React"].createElement(P,null,this._t("editor.controls.overlay.overlays.none")))),this._renderListItems()))}}]);return t}(v["ControlsComponent"]);O.contextTypes=v["ControlsComponent"].contextTypes;O.propTypes=v["ControlsComponent"].propTypes;O.RootElement=v["ControlsComponent"].RootElement;t["a"]=O;var R=v["adonis"].ul("9uviv9","List");var D=Object(v["adonis"])(S).div("1sgdmny","NoneItem");var I=Object(v["adonis"])(E).div("yogtp1","NoneItemBackground");var P=Object(v["adonis"])(x).span("5krmrh","ItemTitle")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(334);var m=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var k=v["ControlsStyles"].ControlItem,w=v["ControlsStyles"].ControlItemActiveOverlay,C=v["ControlsStyles"].ControlItemTitle;var S="production"==="test";var E=function(e){b(t,e);function t(){var e;g(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=y(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a.state={hovered:false};a._bindAll("_onBlendModeChange","_onAlphaChange");return a}_(t,[{key:"_onBlendModeChange",value:function e(t){this.props.onBeforeBlendModeChange&&this.props.onBeforeBlendModeChange();this.sharedState.setBlendMode(t);this.props.onBlendModeChange&&this.props.onBlendModeChange()}},{key:"_onAlphaChange",value:function e(t){this.props.onBeforeAlphaChange&&this.props.onBeforeAlphaChange();this.sharedState.setAlpha(t);this.props.onAlphaChange&&this.props.onAlphaChange()}},{key:"shouldComponentUpdate",value:function e(t,r){if(this.props.selected!==t.selected||this.props.visible!==t.visible||this.state.hovered!==r.hovered||this.props.overlay!==t.overlay){return true}if(this.props.intensity!==t.intensity){if(t.selected){return true}}return false}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.lastChild,i=r.onClick,a=r.selected,o=r.visible,s=r.overlay;var l=this.sharedState.alpha;var u=this.sharedState.blendMode;var c={lastChild:n,onClick:i,visible:o};c.style={backgroundImage:"url('"+this._getAssetPath(s.thumbnail)+"')"};return v["React"].createElement(x,m({},c,{className:S?"js-overlay":undefined,animated:true,innerRef:function e(r){t._container=r},onMouseEnter:function e(){return t.setState({hovered:true})},onMouseLeave:function e(){return t.setState({hovered:false})}}),v["React"].createElement(O,{selected:a},v["React"].createElement(v["Transition"],{active:!a},v["React"].createElement(I,null,v["React"].createElement(R,{hovered:this.state.hovered},this._t("editor.controls.overlay.overlays."+s.identifier)||s.defaultName))),v["React"].createElement(v["Transition"],{active:a},v["React"].createElement(I,null,v["React"].createElement(D,null,"Blending"),v["React"].createElement(j,{value:u,onChange:this._onBlendModeChange}),a&&v["React"].createElement(T,null,v["React"].createElement(v["SliderComponent"],{minValue:0,maxValue:1,valueUnit:"",middleDot:false,value:l,onChange:this._onAlphaChange})),v["React"].createElement(P,{rendered:true,visible:true})))))}},{key:"container",get:function e(){return this._container}}]);return t}(v["SharedStateComponent"]);E.contextTypes=v["SharedStateComponent"].contextTypes;t["a"]=E;var x=Object(v["adonis"])(k).div("193vjnw",{lastChild:"229bd5"},"Item");var T=v["adonis"].div("12dmntm","Slider");var O=v["adonis"].div("1m161zg","ItemContainer");var R=Object(v["adonis"])(C).span("120drhm","ItemTitle");var D=Object(v["adonis"])(R)("1kbikta","BlendingLabel");var I=v["adonis"].div("tj7k39",{rendered:"cuo4v2",visible:"82svov"},"ItemContent");var P=Object(v["adonis"])(w).div("120drhm","Overlay");var j=Object(v["adonis"])(d["a"])("ii685b","BlendingControl")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(47);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(83);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var w=d["ControlsStyles"].ControlItemTitle;var C=v["Utils"].flipObject(_["a"]);var S=function(e){k(t,e);function t(){var e;y(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=b(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onPreviousClick","_onNextClick");return a}g(t,[{key:"_onPreviousClick",value:function e(t){t.preventDefault();t.stopPropagation();var r=c()(C);var n=r.indexOf(this.props.value.toString());var i=(n+r.length-1)%r.length;var a=parseInt(r[i],10);this.props.onChange&&this.props.onChange(a)}},{key:"_onNextClick",value:function e(t){t.preventDefault();t.stopPropagation();var r=c()(C);var n=r.indexOf(this.props.value.toString());var i=(n+r.length+1)%r.length;var a=parseInt(r[i],10);this.props.onChange&&this.props.onChange(a)}},{key:"render",value:function e(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-left.png",true)+"')"};var r={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-right.png",true)+"')"};var n=this.props.value;return d["React"].createElement(E,{styles:this.props.styles},d["React"].createElement(T,{onClick:this._onPreviousClick,style:t}),d["React"].createElement(x,null,this._t("editor.controls.overlay.blendModes."+C[n])),d["React"].createElement(T,{onClick:this._onNextClick,style:r}))}}]);return t}(d["BaseComponent"]);S.contextTypes=d["BaseComponent"].contextTypes;t["a"]=S;var E=d["adonis"].div("15zte1z","BlendingControlContainer");S.RootElement=E;var x=Object(d["adonis"])(w).div("1v7ogyl","Label");var T=d["adonis"].div("1v32l0l","Arrow")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(336);var g=r(341);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var C=v["Math"].Vector2;var S=void 0;if(v["Operations"].SpriteOperation){S=v["Operations"].SpriteOperation.StickerSprite}var E=function(e){w(t,e);function t(){var e;b(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=k(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._updateStickerCategories=a._updateStickerCategories.bind(a);return a}y(t,[{key:"createSticker",value:function e(t){var r=this;return this.loadStickerImage(t).then(function(e){var n=r.context.editor;var i=n.operations.getOrCreate("sprite");var a=i.getInputDimensions(false);var o=new C(e.width,e.height);var s=new C(a.min()*.5,a.min()*.5);var l=i.createSticker({identifier:t.identifier,image:e,position:new C(.5,.5),dimensions:v["Utils"].resizeVectorToFit(o,s),rotation:0,smoothDownscaling:r._options.smoothDownscaling});r.sharedState.set({selectedSprite:l});i.addSprite(l);r.addLocalHistorySnapshot("sticker-creation",false);return l})}},{key:"loadStickerImage",value:function e(t){var r=this;return new c.a(function(e,n){var i=t.images.mediaBase;var a=d["StickerManager"].getURLForSticker(t,"base");var o=r._getAssetPath(a);var s=new window.Image;var l=void 0;var u=setTimeout(function(){l=d["ModalManager"].instance.displayLoading(r._t("loading.loading"))},100);s.addEventListener("load",function(){if(l)l.close();if(u){clearTimeout(u);u=null}if(typeof i.width!=="undefined"&&typeof i.height!=="undefined"){s.width=i.width;s.height=i.height}e(s)});s.addEventListener("error",function(){if(l)l.close();if(u){clearTimeout(u);u=null}d["ModalManager"].instance.displayError(r._t("errors.title"),r._t("errors.stickerLoadingError.text",{path:s.src}));n(new Error("Loading sticker failed"))});s.crossOrigin=r.context.editor.getCrossOrigin();s.src=o})}},{key:"_updateStickerCategories",value:function e(t){var r=this._options,n=r.categories,i=r.replaceCategories,a=r.availableStickers;if(!t){t=n}var o=new d["StickerManager"](this.context.ui,{categories:t,replaceCategories:i,availableStickers:a});this.sharedState.set({stickerManager:o})}},{key:"_onEnter",value:function e(){var t=this.context.editor;this._updateStickerCategories();this._mediator.on(d["Constants"].EVENTS.ADDED_STICKER,this._updateStickerCategories);t.zoom.auto();t.features.disable("zoom","drag")}},{key:"_onLeave",value:function e(){var t=this.context.editor;this._mediator.off(d["Constants"].EVENTS.ADDED_STICKER,this._updateStickerCategories);t.features.enable("zoom","drag");t.render()}}],[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.getOrCreate("sprite");var a=i.getInputDimensions(false);var o=n.selectedSprite,s=n.stickerManager;if(o&&i.getSprites().indexOf(o)<0){var l=i.getSprites().filter(function(e){return e.getId()===o.getId()})[0];if(l){o=l}}return{operation:i,inputDimensions:a,stickerManager:s,selectedSprite:o,stickerObject:o&&s?s.getStickerByIdentifier(o.getIdentifier()):null,image:o?o.getImage():null,alpha:o?o.getAlpha()*100:0,tintMode:o?o.getTintMode():"",tintColor:o?o.getTintColor():null,setStickerOptions:function e(t){o&&o.set(t)},setStickerImage:function e(t){o&&o.setImage(t)},setAlpha:function e(t){o&&o.setAlpha(t/100)},setTintMode:function e(t){o&&o.setTintMode(t)},setTintColor:function e(t){o&&o.setTintColor(t)}}}},{key:"clickAtPosition",value:function e(t,r){var n=r.operations.get("sprite");if(!n){return false}var i=n.getSpritesAtPosition(t,r.getOutputTextureDimensions()).filter(function(e){return e instanceof S});return i[0]?{selectedSprite:i[0]}:false}},{key:"getPreloadAssets",value:function e(t){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]}},{key:"isEnabled",value:function e(t){return t.isToolAllowed("sticker")&&t.isToolEnabled("sticker")}}]);return t}(d["BaseControls"]);E.identifier="sticker";E.controlsComponent=_["a"];E.canvasControlsComponent=g["a"];E.iconPath="editor/controls/sticker/icon.png";E.activeIconPath="editor/controls/sticker/icon-active.png";E.requiredOperations=["sprite"];E.defaultOptions={categories:[],replaceCategories:false,availableStickers:null,snapRotation:90,snapRotationTolerance:5};E.updatableOperations=["sprite"];E.switchToDefaultControlsOnRemoval=true;m.a.Controls.StickerControls=E;t["a"]=E},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(337);var g=r(339);var y=r(340);var b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var k=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function C(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function S(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var E=v["Math"].Vector2;var x="production"==="test";var T={ROOT:1,CATEGORY:2,OPTIONS:3};var O=function(e){S(t,e);function t(){var e;w(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=C(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onCategoryClick","_onStickerClick","_onBackClick","_onNewStickerClick","_onReplaceClick");a._needsStyleFixes=true;var o=T.ROOT;if(a.sharedState.selectedSprite){o=T.OPTIONS}a.state.currentPanel=o;return a}b(t,[{key:"fixStyles",value:function e(){var r=this;this._list.style.height="100%";return k(t.prototype.__proto__||p()(t.prototype),"fixStyles",this).call(this).then(function(){if(d["Utils"].Browser.isIElte(10)){var e=r._container.offsetHeight;r._list.style.height=e+"px"}return r.refs.panel.fixStyles()})}},{key:"componentDidUpdate",value:function e(t,r){if(this.state.currentPanel!==r.currentPanel){this.fixStyles()}}},{key:"sharedStateDidChange",value:function e(t,r){if(t.stickerObject!==r.stickerObject&&r.selectedSprite&&r.stickerObject){this.setState({currentPanel:T.OPTIONS})}}},{key:"_onReplaceClick",value:function e(){this.setState({currentPanel:T.ROOT})}},{key:"_onNewStickerClick",value:function e(){this.state.currentPanel=T.ROOT;this.setSharedState({selectedSprite:null})}},{key:"_onCategoryClick",value:function e(t){this.setState({currentPanel:T.CATEGORY,category:t})}},{key:"_onBackClick",value:function e(){this.setState({currentPanel:T.ROOT})}},{key:"_onStickerClick",value:function e(t){var r=this;var n=this.sharedState.selectedSprite;var i=function e(){r.setState({currentPanel:T.OPTIONS})};var a=this.context.editor;if(!n){this.props.controls.createSticker(t).then(function(e){i()})}else{this.props.controls.loadStickerImage(t).then(function(e){var o=n.getDimensions().clone();var s=o.max();var l=new E(s,s);var u=new E(e.width,e.height);var c={image:e,identifier:t.identifier,dimensions:v["Utils"].resizeVectorToFit(u,l)};if(n.getTintMode()!=="none"){n.setTintMode(t.tintMode||"none")}r.sharedState.setStickerOptions(c);r.sharedState.setStickerImage(e);r.props.controls.addLocalHistorySnapshot("sticker-image",true);a.render();i()})}}},{key:"_renderCurrentPanel",value:function e(){var t=this;var r=this.props.controls;var n=this.sharedState.stickerManager;var i=this.state.currentPanel;switch(i){case T.ROOT:return d["React"].createElement(_["a"],{innerRef:function e(r){t._list=r},stickerManager:n,onCategoryClick:this._onCategoryClick,onStickerClick:this._onStickerClick,controls:r,ref:"panel"});case T.CATEGORY:return d["React"].createElement(g["a"],{innerRef:function e(r){t._list=r},category:this.state.category,stickerManager:n,onBackClick:this._onBackClick,onStickerClick:this._onStickerClick,controls:r,ref:"panel"});case T.OPTIONS:return d["React"].createElement(y["a"],{innerRef:function e(r){t._list=r},stickerManager:n,onReplaceClick:this._onReplaceClick,onNewStickerClick:this._onNewStickerClick,controls:r,ref:"panel"})}}},{key:"_getRootProps",value:function e(){return{className:x?"js-stickerControls":undefined,withBorderTop:true}}},{key:"_renderContent",value:function e(){return this._renderCurrentPanel()}}]);return t}(d["ControlsComponent"]);O.contextTypes=d["ControlsComponent"].contextTypes;O.RootElement=d["ControlsComponent"].RootElement;t["a"]=O},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(338);var m=r(132);var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var k="production"==="test";var w=function(e){b(t,e);function t(){var e;g(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=y(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a.state={category:"all"};return a}_(t,[{key:"_onCategoryClick",value:function e(t,r){this.props.onCategoryClick&&this.props.onCategoryClick(t)}},{key:"fixStyles",value:function e(){var t=this;return c.a.resolve().then(function(){if(v["Utils"].Browser.isIElte(10)){Object(v["requestAnimationFrame"])(function(){t._scrollbar.update()})}else{t._scrollbar.update()}})}},{key:"_renderListItems",value:function e(){var t=this;var r=this.props.stickerManager;var n=r.getCategories();return n.map(function(e){return v["React"].createElement(d["a"],{key:e.identifier,category:e,onClick:t._onCategoryClick.bind(t,e)})})}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.stickerManager,i=r.innerRef;return v["React"].createElement(C,{innerRef:function e(r){i&&i(r);t._wrapper=r},className:k?"js-rootPanel":undefined},v["React"].createElement(v["ScrollableListComponent"],{direction:"vertical",innerRef:function e(r){t._scrollbar=r}},v["React"].createElement(S,null,this._renderListItems()),v["React"].createElement(m["a"],{stickers:n.getStickersForCategory("all"),onStickerClick:this.props.onStickerClick})))}}]);return t}(v["BaseComponent"]);w.contextTypes=v["BaseComponent"].contextTypes;t["a"]=w;var C=v["adonis"].div("rfecls","Wrapper");var S=v["adonis"].ul("5jg0ou","CategoryList")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=f["ControlsStyles"].ControlItem,g=f["ControlsStyles"].ControlItemTitle;var y="production"==="test";var b=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}v(t,[{key:"render",value:function e(){var t=this.props.category;var r=this._getAssetPath(t.metaData.backgroundImage);var n={backgroundImage:"url('"+r+"')"};return f["React"].createElement(k,{onClick:this.props.onClick,style:n,className:y?"js-category":undefined},f["React"].createElement(C,null,this._t("editor.controls.sticker.stickerCategories."+t.identifier)||t.defaultName),f["React"].createElement(w,null))}}]);return t}(f["BaseComponent"]);b.contextTypes=f["BaseComponent"].contextTypes;t["a"]=b;var k=Object(f["adonis"])(_).li("1dc04zg","StickerCategoryItem");var w=f["adonis"].div("1fxaw8w","Gradient");var C=Object(f["adonis"])(g).div("120drhm","Title")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(132);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var b=v["ControlsStyles"].ControlItemTextStyles;var k="production"==="test";var w=function(e){y(t,e);function t(){_(this,t);return g(this,(t.__proto__||p()(t)).apply(this,arguments))}m(t,[{key:"fixStyles",value:function e(){var t=this;return c.a.resolve().then(function(){if(v["Utils"].Browser.isIElte(10)){Object(v["requestAnimationFrame"])(function(){t._scrollbar.update()})}else{t._scrollbar.update()}})}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.stickerManager,i=r.category,a=r.onBackClick,o=r.onStickerClick,s=r.innerRef;var l=this._getAssetPath(i.metaData.backgroundImage);var u={backgroundImage:"url('"+l+"')",backgroundSize:"cover"};var c={backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/back.png",true)+"')"};var f=n.getStickersForCategory(i.identifier);return v["React"].createElement(C,{innerRef:function e(t){return s&&s(t)},className:k?"js-categoryPanel":undefined},v["React"].createElement(S,{style:u},v["React"].createElement(E,null,v["React"].createElement(T,null,this._t("editor.controls.sticker.stickerCategories."+i.identifier)||i.defaultName),i.metaData.author&&v["React"].createElement(O,null,v["React"].createElement("span",null,"by "),i.metaData.author),v["React"].createElement(R,{style:c,onClick:a.bind(this),className:k?"js-backButton":undefined}))),v["React"].createElement(x,{innerRef:function e(r){t._wrapper=r}},v["React"].createElement(v["ScrollableListComponent"],{direction:"vertical",innerRef:function e(r){t._scrollbar=r}},v["React"].createElement(d["a"],{stickers:f,onStickerClick:o}))))}}]);return t}(v["BaseComponent"]);w.contextTypes=v["BaseComponent"].contextTypes;t["a"]=w;var C=v["adonis"].div("iauaz2","StickerCategoryPanel");var S=v["adonis"].div("2j8ygm","Header");var E=v["adonis"].div("3wd3qf","HeaderContent");var x=v["adonis"].div("zb78lb","Content");var T=Object(v["adonis"])(b).div("kswtk0","Title");var O=Object(v["adonis"])(b).div("1qn5s6u","Subtitle");var R=v["adonis"].button("1t2nim8","BackButton")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var y=v["ControlsStyles"].PlainControlItemBackground;var b="production"==="test";var k=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange");return a}d(t,[{key:"_getStickerObject",value:function e(){return this.sharedState.stickerObject}},{key:"_onChangedOption",value:function e(t,r){t&&this.props.controls.addLocalHistorySnapshot(t,r);var n=this.context.editor;n.render()}},{key:"_onOpacityChange",value:function e(t){this.sharedState.setAlpha(t);this._onChangedOption("sticker-opacity",true)}},{key:"_onTintToggle",value:function e(t){var r=this._getStickerObject();this.sharedState.setTintMode(t?r.tintMode:"none");this._onChangedOption("sticker-tint-toggle",true)}},{key:"_onTintColorChange",value:function e(t){this.sharedState.setTintColor(t.clone());this._onChangedOption("sticker-tint",true)}},{key:"fixStyles",value:function e(){var t=this;return c.a.resolve().then(function(){if(v["Utils"].Browser.isIElte(10)){Object(v["requestAnimationFrame"])(function(){t._scrollbar.update()})}else{t._scrollbar.update()}})}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.innerRef,i=r.onNewStickerClick,a=r.onReplaceClick;var o=this.sharedState,s=o.alpha,l=o.tintMode,u=o.tintColor,c=o.selectedSprite;if(!c)return null;var f=this._getStickerObject();var p={background:"url('"+c.getImage().src+"') center center / contain no-repeat"};var h=!!f.tintMode&&f.tintMode!=="none";return v["React"].createElement(w,{innerRef:function e(r){n&&n(r);t._wrapper=r},className:b?"js-optionsPanel":undefined},v["React"].createElement(v["ScrollableListComponent"],{direction:"vertical",innerRef:function e(r){t._scrollbar=r}},v["React"].createElement("div",null,v["React"].createElement(C,null,v["React"].createElement(v["ButtonComponent"],{title:this._t("editor.controls.sticker.new"),className:b?"js-newStickerButton":undefined,onClick:i}),v["React"].createElement(S,null,v["React"].createElement(E,null,v["React"].createElement(x,{onClick:a,style:p})),v["React"].createElement(T,null,v["React"].createElement(O,null,this._t("editor.controls.sticker.stickers."+f.identifier)||f.defaultName),v["React"].createElement(R,{onClick:a,className:b?"js-replaceButton":undefined},this._t("editor.controls.sticker.replace")))),v["React"].createElement(v["SliderControlComponent"],{minValue:0,value:Math.round(s),maxValue:100,label:this._t("editor.controls.sticker.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:false,className:b?"js-opacityControl":undefined})),h&&v["React"].createElement(v["CollapseSectionComponent"],{toggleable:true,title:this._t("editor.controls.sticker.fill"),expanded:l!=="none",className:b?"js-fillControl":undefined,onToggle:this._onTintToggle},v["React"].createElement(D,{value:u,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))}}]);return t}(v["SharedStateComponent"]);k.contextTypes=v["SharedStateComponent"].contextTypes;t["a"]=k;var w=v["adonis"].div("rfecls","Wrapper");var C=v["adonis"].div("1vnvjau","TopSection");var S=v["adonis"].div("aqfteq","Details");var E=Object(v["adonis"])(y).div("6u8g0p","Thumbnail");var x=v["adonis"].div("7r0ke8","ThumbnailImage");var T=v["adonis"].div("1trlo6v","DetailsContainer");var O=v["adonis"].div("w9mc0y","Title");var R=v["adonis"].div("1rhky7p","ReplaceButton");var D=Object(v["adonis"])(v["ColorSelectionComponent"])("1ouwzwk","ColorSelection")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(54);var m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var _=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var k=v["Operations"].SpriteOperation;var w=void 0;if(k){w=v["Operations"].SpriteOperation.StickerSprite}var C=function(e){b(t,e);function t(){g(this,t);return y(this,(t.__proto__||p()(t)).apply(this,arguments))}m(t,[{key:"_renderSpriteItems",value:function e(r){return _(t.prototype.__proto__||p()(t.prototype),"_renderSpriteItems",this).call(this,r.filter(function(e){return e instanceof w}))}},{key:"_selectNextSprite",value:function e(){var t=this.getSharedState("operation");var r=t.getSprites().slice(0).reverse();var n=void 0,i=void 0;for(var a=0;a<r.length;a++){n=r[a];if(n instanceof w){i=n;break}}if(!i){this.props.controls.skipHistory=true;this.context.screen.switchToControls("default")}this.setSharedState({selectedSprite:i})}},{key:"_createSprite",value:function e(t){var r=this.getSharedState("operation");return r.createSticker(t)}}]);return t}(d["a"]);C.contextTypes=d["a"].contextTypes;t["a"]=C},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(7);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(343);var m=r(347);var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var k=f["Math"].Vector2;var w=void 0,C=void 0;if(f["Operations"].SpriteOperation){w=f["Operations"].SpriteOperation.TextSprite;C=f["Operations"].SpriteOperation.BrushSprite}var S=function(e){b(t,e);function t(){g(this,t);return y(this,(t.__proto__||c()(t)).apply(this,arguments))}_(t,[{key:"createText",value:function e(){var t=this.context.editor;var r=this.sharedState.get("operation");var n=this.sharedState.get("fontManager");var i=n.getDefaultVariation();var a=t.getOutputDimensions();var o=t.getSDK();var s=o.getRenderer();var l=s.getMaxTextureSize();var u=r.createText({text:this.context.ui.translate("editor.controls.text.defaultText"),position:new k(.5,.5),maxWidth:.5,maxHeight:l?l/a.y:3,textMetrics:i.getTextMetrics(),fontIdentifier:i.getIdentifier(),fontSize:.08,fontFamily:i.getFontFamily(),fontWeight:i.getFontWeight(),fontStyle:i.getFontStyle(),color:f["Color"].WHITE,alignment:"center"});this.sharedState.set({selectedSprite:u});r.addSprite(u);this.addLocalHistorySnapshot();return u}},{key:"_onEnter",value:function e(){var t=this.context.editor;var r=this._options,n=r.fonts,i=r.replaceFonts,a=r.availableVariations;var o=new v["FontManager"](this.context.ui,{fonts:n,replaceFonts:i,availableVariations:a});this.sharedState.set({fontManager:o});t.features.disable("zoom","drag");t.zoom.auto();var s=this.sharedState.get("selectedSprite");if(!s){this.createText()}t.render()}},{key:"_onLeave",value:function e(){var t=this.context.editor;t.features.enable("zoom","drag");t.render()}}],[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.getOrCreate("sprite");var a=i.getInputDimensions();var o=n.selectedSprite;if(o&&i.getSprites().indexOf(o)<0){var s=i.getSprites().filter(function(e){return e.getId()===o.getId()})[0];if(s){o=s}}return{operation:i,selectedSprite:o,inputDimensions:a,color:o?o.getColor().clone():null,backgroundColor:o?o.getBackgroundColor().clone():null,alignment:o?o.getAlignment():null,lineHeight:o?o.getLineHeight():0,fontFamily:o?o.getFontFamily():null,setFontSize:function e(t){o&&o.setFontSize(t/a.min())},setColor:function e(t){o&&o.setColor(t.clone())},setBackgroundColor:function e(t){o&&o.setBackgroundColor(t.clone())},setCharacterSpacing:function e(t){o&&o.setCharacterSpacing(t)},setLineHeight:function e(t){o&&o.setLineHeight(t)},setAlignment:function e(t){o&&o.setAlignment(t)},setTextOptions:function e(t){o&&o.set(t)},setVariation:function e(t){o&&o.set({fontIdentifier:t.getIdentifier(),fontFamily:t.getFontFamily(),fontWeight:t.getFontWeight(),fontStyle:t.getFontStyle(),textMetrics:t.getTextMetrics()})}}}},{key:"clickAtPosition",value:function e(t,r){if(!r.operations.exists("sprite"))return false;var n=r.operations.getOrCreate("sprite");var i=n.getSpritesAtPosition(t,r.getOutputTextureDimensions()).filter(function(e){return!(e instanceof C)});if(i.length&&i[0]instanceof w){return{selectedSprite:i[0]}}else{return false}}},{key:"getPreloadAssets",value:function e(t){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]}},{key:"isEnabled",value:function e(t){return t.isToolAllowed("text")&&t.isToolEnabled("text")}}]);return t}(v["BaseControls"]);S.identifier="text";S.controlsComponent=d["a"];S.canvasControlsComponent=m["a"];S.iconPath="editor/controls/text/icon.png";S.activeIconPath="editor/controls/text/icon-active.png";S.requiredOperations=["sprite"];S.defaultOptions={fonts:[],replaceFonts:false,availableVariations:null,snapRotation:90,snapRotationTolerance:5};S.updatableOperations=["sprite"];S.switchToDefaultControlsOnRemoval=true;h.a.Controls.TextControls=S;t["a"]=S},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(344);var m=r(345);var _=r(346);var g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var y=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function b(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var S=v["GroupedControlsStyles"].ControlGroupList;var E="production"==="test";var x=200;var T=function(e){C(t,e);function t(){var e;k(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=w(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onNewTextClick","_onFontChanged","_onFontSizeChanged","_onCharacterSpacingChanged","_onLineSpacingChanged","_onColorChanged","_onBackgroundColorChanged","_onAlignmentChanged","_onVariationChanged","_onTextScaled");a._events=b({},v["Constants"].EVENTS.TEXT_SCALED,a._onTextScaled);a._unavailableFontFamilies=[];return a}g(t,[{key:"componentDidMount",value:function e(){y(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._loadFonts()}},{key:"_loadFonts",value:function e(){var t=this;var r=this.sharedState.fontManager;var n=this.context.ui.getFontLoader();n.setFonts(r.getFonts());var i=void 0;var a=window.setTimeout(function(){i=v["ModalManager"].instance.displayLoading(t._t("loading.fonts"),true)},x);var o=this.sharedState.selectedSprite;this._unavailableFontFamilies=[];return n.load().then(function(){window.clearTimeout(a);if(i)i.close();o.emit("update");var e=t.context.editor;e.render()}).catch(function(e){window.clearTimeout(a);if(i)i.close();e.forEach(function(e){t._unavailableFontFamilies.push(e.font.getFontFamily())});var r=t._unavailableFontFamilies.join(", ");o.emit("update");var n=t.context.editor;n.render();t.forceUpdate();v["ModalManager"].instance.displayError(t._t("errors.fontLoadingError.title"),t._t("errors.fontLoadingError.text",{fonts:r}))})}},{key:"_onChangedOption",value:function e(t,r){t&&this.props.controls.addLocalHistorySnapshot(t,r);var n=this.context.editor;n.render()}},{key:"_onNewTextClick",value:function e(){this.props.controls.createText()}},{key:"_onAlignmentChanged",value:function e(t){this.sharedState.setAlignment(t);this._onChangedOption("text-alignment",true)}},{key:"_onVariationChanged",value:function e(t){this.sharedState.setVariation(t);this._onChangedOption("font-family",true)}},{key:"_onFontChanged",value:function e(t){var r=t.getVariations()[0];this._onVariationChanged(r)}},{key:"_onFontSizeChanged",value:function e(t){this.sharedState.setFontSize(t);this._onChangedOption("font-size",false)}},{key:"_onColorChanged",value:function e(t){this.sharedState.setColor(t);this._onChangedOption("color",true)}},{key:"_onBackgroundColorChanged",value:function e(t){this.sharedState.setBackgroundColor(t);this._onChangedOption("background-color",true)}},{key:"_onCharacterSpacingChanged",value:function e(t){this.sharedState.setCharacterSpacing(t);this._onChangedOption()}},{key:"_onLineSpacingChanged",value:function e(t){this.sharedState.setLineHeight(t);this._onChangedOption("line-spacing",true)}},{key:"_onTextScaled",value:function e(){this.forceUpdate()}},{key:"_renderFontFamilyAndSizeComponent",value:function e(){var t=this;var r=this.sharedState,n=r.selectedSprite,i=r.inputDimensions,a=r.fontManager;var o=v["Utils"].toFixed(n.getFontSize()*i.min(),1);var s=Math.round(i.y);var l=a.getFonts().filter(function(e){return t._unavailableFontFamilies.indexOf(e.getFontFamily())<0});return v["React"].createElement(d["a"],{onValueChange:this._onFontSizeChanged,onFontChange:this._onFontChanged,fonts:l,dropdownValue:n.getFontFamily(),label:this._t("editor.controls.text.font"),inputLabel:this._t("editor.controls.text.size"),className:E?"js-fontFamilyAndSize":undefined,value:o,minValue:10,maxValue:s})}},{key:"_getRootProps",value:function e(){return{className:E?"js-textControls":undefined,withBorderTop:true}}},{key:"_renderContent",value:function e(){var t=this;var r=this.sharedState,n=r.selectedSprite,i=r.fontManager;if(!n)return null;var a=i.getFontByFontFamily(n.getFontFamily());var o=i.getVariationByIdentifier(n.getFontIdentifier());var s=this.sharedState,l=s.color,u=s.backgroundColor,c=s.alignment,f=s.lineHeight;return v["React"].createElement(v["ScrollableListComponent"],{direction:"vertical",innerListRef:function e(r){t._list=r},innerRef:function e(r){t._scrollbar=r}},v["React"].createElement(O,{className:E?"fixed-text-controls":undefined},v["React"].createElement(v["ButtonComponent"],{title:this._t("editor.controls.text.new"),onClick:this._onNewTextClick,className:E?"js-newTextButton":undefined}),v["React"].createElement(D,null,this._renderFontFamilyAndSizeComponent(),v["React"].createElement(m["a"],{alignment:c,variations:a.getVariations(),selectedVariation:o,onAlignmentChange:this._onAlignmentChanged,onVariationChange:this._onVariationChanged})),v["React"].createElement(v["ColorSelectionComponent"],{value:l,onColorPickerToggle:this.fixStyles,onChange:this._onColorChanged})),v["React"].createElement(R,null,v["React"].createElement(v["CollapseSectionComponent"],{key:"background",title:this._t("editor.controls.text.background"),alwaysExpanded:true,className:E?"js-bgColorCollapse":undefined},v["React"].createElement(v["ColorSelectionComponent"],{value:u,onColorPickerToggle:this.fixStyles,onChange:this._onBackgroundColorChanged})),v["React"].createElement(v["CollapseSectionComponent"],{key:"spacing",title:this._t("editor.controls.text.spacing"),alwaysExpanded:true},v["React"].createElement(v["SliderControlComponent"],{label:this._t("editor.controls.text.line"),minValue:.5,maxValue:3,className:E?"js-lineSpacing":undefined,value:v["Utils"].toFixed(f,1),onSliderValueChange:this._onLineSpacingChanged,onValueChange:this._onLineSpacingChanged}))))}}]);return t}(v["ControlsComponent"]);T.contextTypes=v["ControlsComponent"].contextTypes;T.RootElement=v["ControlsComponent"].RootElement;t["a"]=T;var O=v["adonis"].div("1vnvjau","TopSection");var R=Object(v["adonis"])(S).ul("mgrj1m","SectionList");var D=v["adonis"].div("tymb4t","Details")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var m=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b="production"==="test";var k=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._updateFontsMap();return a}d(t,[{key:"componentWillReceiveProps",value:function e(r){m(t.prototype.__proto__||p()(t.prototype),"componentWillReceiveProps",this).call(this,r);if(r.fonts!==this.props.fonts){this._updateFontsMap()}}},{key:"_updateFontsMap",value:function e(){var t=this;this._fontsMap={};this.props.fonts.forEach(function(e){t._fontsMap[e.getFontFamily()]=e})}},{key:"_renderLeftPart",value:function e(){var t=this.sharedState.fontFamily;var r=this._fontsMap[t];return v["React"].createElement("div",{ref:"root",className:b?"js-fontDropdown":undefined},v["React"].createElement(v["DropdownComponent"],{value:r,style:{fontFamily:t},className:b?"js-fontDropdown":undefined,onChange:this.props.onFontChange},this.props.fonts.map(function(e){return v["React"].createElement(v["DropdownComponent"].Item,{value:e,key:e.getFontFamily(),style:{fontFamily:e.getFontFamily()}},e.getFontFamily())})))}}]);return t}(v["ValueSelectionComponent"]);k.contextTypes=v["ValueSelectionComponent"].contextTypes;t["a"]=k},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _="production"==="test";var g=function(e){m(t,e);function t(){h(this,t);return d(this,(t.__proto__||c()(t)).apply(this,arguments))}v(t,[{key:"_onAlignmentItemClick",value:function e(t){this.props.onAlignmentChange&&this.props.onAlignmentChange(t.title)}},{key:"_onStyleItemClick",value:function e(t){switch(t.title){case"bold":this.props.onStyleChange&&this.props.onStyleChange("fontWeight",this.props.bold?"normal":"bold");break;case"italic":this.props.onStyleChange&&this.props.onStyleChange("fontStyle",this.props.italic?"normal":"italic");break}}},{key:"_renderAligmentItems",value:function e(){var t=this;var r=this.props.alignment;var n=[{title:"left",selected:r==="left",iconPath:"editor/controls/text/align-left.png",selectedIconPath:"editor/controls/text/align-left-selected.png"},{title:"center",selected:r==="center",iconPath:"editor/controls/text/align-center.png",selectedIconPath:"editor/controls/text/align-center-selected.png"},{title:"right",selected:r==="right",iconPath:"editor/controls/text/align-right.png",selectedIconPath:"editor/controls/text/align-right-selected.png"}];return n.map(function(e){var r=t._getAssetPath(e.iconPath,true);var n=t._getAssetPath(e.selectedIconPath,true);return f["React"].createElement(k,{key:e.title,className:_?"js-textAlignment":undefined,"data-alignment":e.title,"data-selected":e.selected,onClick:t._onAlignmentItemClick.bind(t,e)},f["React"].createElement(w,{visible:true,src:r}),f["React"].createElement(w,{visible:e.selected,src:n}))},this)}},{key:"_renderStylesDropdown",value:function e(){var t=this.props,r=t.variations,n=t.selectedVariation;return f["React"].createElement(f["DropdownComponent"],{value:n,onChange:this.props.onVariationChange,className:_?"js-styleDropdown":undefined,enableMenu:r.length>1},r.map(function(e){return f["React"].createElement(f["DropdownComponent"].Item,{value:e,key:e.getIdentifier(),style:{fontFamily:e.getFontFamily(),fontStyle:e.getFontStyle(),fontWeight:e.getFontWeight()}},e.getLabel())}))}},{key:"render",value:function e(){return f["React"].createElement(y,{className:_?"js-textStylingControls":undefined},f["React"].createElement(b,null,this._renderStylesDropdown()),f["React"].createElement(b,{right:true},this._renderAligmentItems()))}}]);return t}(f["BaseComponent"]);g.contextTypes=f["BaseComponent"].contextTypes;t["a"]=g;var y=f["adonis"].div("1hzgwcr","TextControlsStyling");var b=f["adonis"].div("64aub5",{right:"9ygmmm"},"Group");var k=f["adonis"].div("tgbgl1",{selected:"zgbg08"},"ItemContainer");var w=f["adonis"].img("7ni881",{visible:"zgbg08"},"ItemImage")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=f["ControlsStyles"].ControlItem,g=f["ControlsStyles"].ControlItemTitle;var y=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onClick","_onMouseEnter","_onMouseLeave","_onIntensityChanged");a.state={selected:false,hovering:false,intensity:50};return a}v(t,[{key:"_onClick",value:function e(){this.setState({selected:true})}},{key:"_onMouseEnter",value:function e(){this.setState({hovering:true})}},{key:"_onMouseLeave",value:function e(){this.setState({hovering:false})}},{key:"_onIntensityChanged",value:function e(t){this.setState({intensity:t})}},{key:"render",value:function e(){var t=this.state,r=t.selected,n=t.hovering,i=t.intensity;return f["React"].createElement(k,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick,selected:r},!(r&&n)&&f["React"].createElement(w,{selected:r},this.props.title),r&&n&&f["React"].createElement(C,null,f["React"].createElement(f["SliderComponent"],{minValue:0,maxValue:100,valueUnit:"",middleDot:false,value:i,onChange:this._onIntensityChanged})))}}]);return t}(f["BaseComponent"]);y.contextTypes=f["BaseComponent"].contextTypes;var b=y;var k=Object(f["adonis"])(_).div("nasu8t",{selected:"120drhm"},"LegibilityPresetItem");var w=Object(f["adonis"])(g).div("1hd9n2f",{selected:"186qcx6"},"Title");var C=f["adonis"].div("8ekz81","Slider")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(7);var p=r.n(f);var v=r(54);var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var g=void 0;if(f["Operations"].SpriteOperation){g=f["Operations"].SpriteOperation.TextSprite}var y=function(e){_(t,e);function t(){d(this,t);return m(this,(t.__proto__||c()(t)).apply(this,arguments))}h(t,[{key:"_selectNextSprite",value:function e(){var t=this.getSharedState("operation");var r=t.getSprites().slice(0).reverse();var n=void 0,i=void 0;for(var a=0;a<r.length;a++){n=r[a];if(n instanceof g){i=n;break}}if(!i){this.props.controls.skipHistory=true;this.context.screen.switchToControls("default")}this.setSharedState({selectedSprite:i})}},{key:"_createSprite",value:function e(t){var r=this.getSharedState("operation");return r.createText(t)}}]);return t}(v["a"]);y.contextTypes=v["a"].contextTypes;t["a"]=y},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(8);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(349);var g=r(351);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var C=v["Math"].Vector2;var S=new C(50,50);var E=function(e){w(t,e);function t(){b(this,t);return k(this,(t.__proto__||p()(t)).apply(this,arguments))}y(t,[{key:"convertOperationOptionsToUI",value:function e(t){var r=t.start,n=t.end,i=t.rotation,a=t.textureScale;var o=this.sharedState.get("transformOperation");var s=o.calculateScale(i);var l=o.getInputDimensions(false);var u=Math.cos(i);var c=Math.sin(i);var f=n.clone().subtract(r).divide(2);var p=r.clone().add(f).multiply(l);var v=p.subtract(l.clone().multiply(.5));var h=new C(v.x*u-v.y*c,v.x*c+v.y*u).multiply(s);var d=l.clone().multiply(.5).add(h);var m=d.clone().divide(l);var _=m.clone().subtract(f.clone().multiply(s));var g=m.clone().add(f.clone().multiply(s));return{start:_,end:g,rotation:i,textureScale:a}}},{key:"_onEnter",value:function e(){var t=this.context.editor;var r=t.operations.exists("transform");var n=t.operations.getOrCreate("transform");n.setEnabled(false,false);var i=t.operations.exists("orientation");var a=t.operations.getOrCreate("orientation");var o={end:new C(1,1),rotation:0,start:new C(0,0),textureScale:1};var s=n.getInputDimensions(false);var l=n.getNewDimensions(s);var u=o;var c=u,f=c.start,p=c.end,h=c.textureScale,d=c.rotation;if(r){u=n.serializeOptions();f=u.start;p=u.end;d=u.rotation;h=u.textureScale;delete u.enabled;var m=this.convertOperationOptionsToUI({start:f,end:p,textureScale:h,rotation:d});f=m.start;p=m.end}t.broadcastTransform(n,o);var _=a.serializeOptions();t.setSpriteScale(n.calculateScale());t.setRotation(d);n.set(o,r);var g=t.features.isEnabledByOptions("export");t.zoom.auto(true,false,function(){t.features.disable("zoom","drag","export")},false);this.sharedState.set({transformOperation:n,initialTransformOptions:u,newTransformOptions:{start:f,end:p,rotation:d,textureScale:h},transformOperationExistedBeforeEntering:r,exportEnabled:g,orientationOperation:a,initialOrientationOptions:_,newOrientationOptions:v["Utils"].cloneOptions(_),orientationOperationExistedBeforeEntering:i,start:C.fromObject(f),end:C.fromObject(p),rotation:d,orientationRotation:a.getRotation(),flipVertically:a.getFlipVertically(),flipHorizontally:a.getFlipHorizontally(),initialDimensions:l,initialRatio:n._ratio||null})}},{key:"_onBeforeLeave",value:function e(){var t=this;var r=this.context.ui.translate.bind(this.context.ui);return new c.a(function(e,n){var i=t.sharedState.get("changesDone");var a=t.sharedState.get("changesAccepted");if(i&&!a){var o=d["ModalManager"].instance.displayWarning(r("warnings.discardChanges.title"),r("warnings.discardChanges.text"),[r("warnings.discardChanges.buttons.cancel"),r("warnings.discardChanges.buttons.discard")]);o.on("button",function(t){if(t===0)return e({leave:false});if(t===1){return e({leave:true,data:{discard:true}})}});return}e({leave:true})})}},{key:"_onLeave",value:function e(t){var r=t.discard;var n=this.context.editor;var i=this.sharedState.get("transformOperation");var a=this.sharedState.get("orientationOperation");var o=this.sharedState.get("transformOperationExistedBeforeEntering");if(r){var s=this.sharedState.get("initialOrientationOptions");a.set(s);var l=this.sharedState.get("initialTransformOptions");n.broadcastTransform(i,l);i.set(l);i.setTextureScale(this._calculateTextureScale());i.setEnabled(true);if(!o){n.operations.remove(i,false)}}else{var u={rotation:0,flipVertically:false,flipHorizontally:false};if(a.optionsEqual(u)){n.operations.remove(a,false)}var c=this.sharedState.get("newTransformOptions");var f=c.start,p=c.end,v=c.textureScale,h=c.rotation;v=this._calculateTextureScale();f=f.clone();p=p.clone();var d=i.calculateScale(h);var m=i.getInputDimensions(false);var _=Math.cos(-h);var g=Math.sin(-h);var y=p.clone().subtract(f).divide(2);var b=f.clone().add(y).multiply(m);var k=b.subtract(m.clone().multiply(.5));var w=new C(k.x*_-k.y*g,k.x*g+k.y*_).divide(d);var S=m.clone().multiply(.5).add(w);var E=S.clone().divide(m);var x=E.clone().subtract(y.clone().divide(d));var T=E.clone().add(y.clone().divide(d));var O={start:new C(0,0),end:new C(1,1),rotation:0,textureScale:1};var R={start:x,end:T,textureScale:v,rotation:h};if(R.start.equals(O.start)&&R.end.equals(O.end)&&R.rotation===O.rotation&&R.textureScale===O.textureScale){n.operations.remove(i,false)}else{i.set(O);n.broadcastTransform(i,R);i.set(R);i.setTextureScale(this._calculateTextureScale());i.setEnabled(true)}}n.setRotation(0);n.setSpriteScale(1);n.features.enable("zoom","drag","export");if(this.sharedState.get("exportEnabled")){n.features.enable("export")}n.zoom.auto(true)}},{key:"_getGlobalHistoryData",value:function e(){return{ratio:this.sharedState.get("ratio")}}},{key:"_onOperationRemoved",value:function e(t){}},{key:"_calculateTextureScale",value:function e(){var t=this.sharedState.get("transformOperation");var r=this.sharedState.get("ratio");if(!r||!r.dimensions){return 1}var n=this.sharedState.get("start");var i=this.sharedState.get("end");var a=i.clone().subtract(n);var o=t.getInputDimensions(false).multiply(a);return r.dimensions.x/o.x}},{key:"fixTransform",value:function e(t,r,n,i){var a=this.context.editor;var o=this.sharedState.get("transformOperation");var s=o.getInputDimensions(false);var l=this.sharedState.get("ratio"),u=l.ratio,c=l.dimensions;if(c&&!u){u=c.x/c.y}var f=new C;f.x=n==="left"?r.x:1-t.x;f.y=i==="top"?r.y:1-t.y;var p=s.clone().multiply(f);var v=r.clone().subtract(t);var h=v.clone().multiply(s);var d=S.clone().divide(a.zoom.targetLevel);var m=new C(Math.min(d.x,s.x*.1),Math.min(d.y,s.y*.1));h.x=Math.min(Math.max(m.x,h.x),p.x);if(u!=="*"){h.y=h.x/u}h.y=Math.min(Math.max(m.y,h.y),p.y);if(u!=="*"){h.x=h.y*u}var _=h.divide(s);if(i==="top"){t.y=r.y-_.y}else{r.y=t.y+_.y}if(n==="left"){t.x=r.x-_.x}else{r.x=t.x+_.x}if(u==="*"){t.multiply(s).round().divide(s);r.multiply(s).round().divide(s)}return{start:t,end:r}}}],[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.get("transform");var a=t.get("orientation");return{transformOperation:i,orientationOperation:a}}},{key:"getPreloadAssets",value:function e(t){var r=t.getOptions();var n=v["Utils"].defaults(r.editor.controlsOptions.transform,this.defaultOptions);var i=["editor/controls/transform/dimensions-cross.png","editor/controls/transform/degree-slider.png","editor/controls/transform/flip.png","editor/controls/transform/lock.png","editor/controls/transform/rotate.png"];var a=new d["TransformRatioManager"](n);var o=a.getCategories();o.forEach(function(e){var t=e.ratios;t.forEach(function(e){var t=e.identifier;i.push("editor/controls/transform/ratios/"+t+"-default.png","editor/controls/transform/ratios/"+t+"-hover.png","editor/controls/transform/ratios/"+t+"-active.png")})});return i}},{key:"isEnabled",value:function e(t){return t.isToolAllowed("transform")&&t.isToolEnabled("transform")}}]);return t}(d["BaseControls"]);E.clickAtPosition=d["BaseControls"].clickAtPosition;E.identifier="transform";E.controlsComponent=g["a"];E.canvasControlsComponent=_["a"];E.iconPath="editor/controls/transform/icon.png";E.activeIconPath="editor/controls/transform/icon-active.png";E.requiredOperations=["transform","orientation"];E.defaultOptions={categories:[],replaceCategories:false,availableRatios:null,enableRotation:true,enableStraighten:true,enableFlip:true};E.updatableOperations=["transform","orientation"];E.switchToDefaultControlsOnRemoval=false;m.a.Controls.TransformControls=E;t["a"]=E},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(7);var h=r.n(v);var d=r(5);var m=r.n(d);var _=r(15);var g=r(350);var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var b=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function k(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function C(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function S(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var E=v["Math"].Vector2;var x="production"==="test";var T=function(e){S(t,e);function t(){var e,r;w(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++){i[a]=arguments[a]}var o=C(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(i)));o._bindAll("_onZoomDone","_onCornerDrag","_onCenterDragStart","_onCenterDrag","_onRotationChange","_onOperationUpdated","_onOperationRemoved","_onAcceptClick","_onAcceptMouseDown");o._events=(r={},k(r,d["Constants"].EVENTS.OPERATION_UPDATED,o._onOperationUpdated),k(r,d["Constants"].EVENTS.OPERATION_REMOVED,o._onOperationRemoved),k(r,d["Constants"].EVENTS.ZOOM_DONE,o._onZoomDone),r);o.state=v["Utils"].extend(o.state,{visible:false});return o}y(t,[{key:"shouldSharedComponentUpdate",value:function e(t,r){return!t.start.equals(r.start)||!t.end.equals(r.end)||t.orientationRotation!==r.orientationRotation||t.ratio!==r.ratio||t.changesDone!==r.changesDone}},{key:"sharedStateDidChange",value:function e(t,r){var n=t.ratio&&t.ratio.ratio;var i=r.ratio&&r.ratio.ratio;if(n!==i){this._calculateRatioFraction()}}},{key:"sharedComponentWillUpdate",value:function e(t,r){if(t.orientationRotation!==r.orientationRotation){this._updateTransformAreaStyles()}}},{key:"componentDidMount",value:function e(){b(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._updateTransformAreaStyles();this._calculateRatioFraction();this.forceUpdate()}},{key:"componentWillUpdate",value:function e(){this._updateTransformAreaStyles()}},{key:"componentDidUpdate",value:function e(){if(!this._transformContainerRect&&this.getSharedState("ratio")){this._updateTransformAreaStyles();this.forceUpdate()}}},{key:"componentWillUnmount",value:function e(){b(t.prototype.__proto__||p()(t.prototype),"componentWillUnmount",this).call(this);if(this._zoomAFRequest){Object(_["a"])(this._zoomAFRequest);this._zoomAFRequest=null}}},{key:"_calculateRatioFraction",value:function e(){var t=this.getSharedState("ratio");if(!t||t.ratio==="*")return;this._ratioFraction=d["Utils"].findIntegerFraction(t.ratio)}},{key:"_onCenterDragStart",value:function e(t){var r=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),areaDimensions:this._transformContainerRect.getSize(),imageDimensions:r.getInputDimensions(false)}}},{key:"_onCenterDrag",value:function e(t){var r=this._dragOptions,n=r.initialStart,i=r.initialEnd,a=r.areaDimensions,o=r.imageDimensions;var s=t.clone().divide(a);var l=i.clone().subtract(n);var u=new E(0,0);var c=new E(1,1).subtract(l);var f=n.clone().add(s).clamp(u,c);var p=f.clone().add(l);f.multiply(o).floor().divide(o);p.multiply(o).floor().divide(o);this.props.controls.fixTransform(f,p,"right","bottom");var v=this.getSharedState("newTransformOptions");v.start=f;v.end=p;this.setSharedState({start:f,end:p,changesDone:this.getSharedState("changesDone")||!(n.equals(f)&&i.equals(p))})}},{key:"_onCornerDragStart",value:function e(t,r,n){var i=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),verticalSide:t,horizontalSide:r,areaDimensions:this._transformContainerRect.getSize(),imageDimensions:i.getInputDimensions(false)};this._currentCorner={vertical:t,horizontal:r}}},{key:"_onCornerDrag",value:function e(t){var r=this._dragOptions,n=r.initialStart,i=r.initialEnd,a=r.verticalSide,o=r.horizontalSide,s=r.areaDimensions;var l=t.clone().divide(s);var u=n.clone();var c=i.clone();(a==="top"?u:c).y+=l.y;(o==="left"?u:c).x+=l.x;this.props.controls.fixTransform(u,c,o,a);var f=this.getSharedState("newTransformOptions");f.start=u;f.end=c;this.setSharedState({start:u,end:c,changesDone:true});this._emitEvent(d["Constants"].EVENTS.TRANSFORM_RESIZE)}},{key:"_onRotationChange",value:function e(t){var r=this.getSharedState("transformOperation");var n=this.context.editor;n.setRotation(t);n.setSpriteScale(r.calculateScale(t));var i=this.getSharedState("newTransformOptions");i.rotation=t;n.render();this.setSharedState({rotation:t,changesDone:true})}},{key:"_onAcceptClick",value:function e(t){t.preventDefault();t.stopPropagation();if(!this.getSharedState("changesDone")){return}this.setSharedState({changesAccepted:true});this.context.screen.switchToControls("default")}},{key:"_onAcceptMouseDown",value:function e(t){t.stopPropagation()}},{key:"_onZoomDone",value:function e(){var t=this;this._zoomAFRequest=Object(_["b"])(function(){t._updateTransformAreaStyles();t.state.visible=true;t.forceUpdate();t._zoomAFRequest=null})}},{key:"_onOperationUpdated",value:function e(t){var r=this.getSharedState("transformOperation");if(t!==r)return;var n=this.context.editor;var i=n.getSDK();i.setRotation(t.getRotation());i.setSpriteScale(t.calculateScale());n.render();this.setSharedState({rotation:t.getRotation()});this.forceUpdate()}},{key:"_onOperationRemoved",value:function e(t){if(t.constructor.identifier==="transform"||t.constructor.identifier==="orientation"){this.forceUpdate()}}},{key:"_onFlipClick",value:function e(t){var r=this.context.editor;var n=this.getSharedState("orientationOperation");var i=t.charAt(0).toUpperCase()+t.slice(1)+"ly";var a=!this.getSharedState("flip"+i);this.setSharedState(k({},"flip"+i,a));n.flip(t);var o=this.getSharedState("newTransformOptions");var s=this.getSharedState("rotation")*-1;r.setRotation(s);var l=this.getSharedState("start").clone();var u=this.getSharedState("end").clone();var c=l.clone();if(t==="horizontal"){l.set(1-u.x,l.y);u.set(1-c.x,u.y)}else if(t==="vertical"){l.set(l.x,1-u.y);u.set(u.x,1-c.y)}o.start=l;o.end=u;o.rotation=s;this.setSharedState({start:l,end:u,rotation:s,changesDone:true,newTransformOptions:o});this.forceUpdate();r.broadcastFlip(t);r.render()}},{key:"_onRotateClick",value:function e(t){var r=this;var n=t==="cw"?90:-90;var i=this.context.editor;var a=this.getSharedState("orientationOperation");var o=(a.getRotation()+n)%360;a.set({rotation:o});var s={orientationRotation:o};var l=this.getSharedState("newTransformOptions");var u=this.getSharedState("ratio");if(u){if(!u.dimensions&&u.ratio==="*"){var c=this.getSharedState("start").clone();var f=this.getSharedState("end").clone();var p=c.clone();if(t==="cw"){c.set(1-f.y,p.x);f.set(1-p.y,f.x)}else if(t==="ccw"){c.set(p.y,1-f.x);f.set(f.y,1-p.x)}s.start=c;s.end=f;l.start=c;l.end=f}else{this._emitEvent(d["Constants"].EVENTS.TRANSFORM_REAPPLY_RATIO);this._emitEvent(d["Constants"].EVENTS.TRANSFORM_RESIZE)}}this.setSharedState({changesDone:true,newTransformOptions:l});i.broadcastRotate(n);i.zoom.auto(true,true,function(){r.setSharedState(s)})}},{key:"_updateTransformAreaStyles",value:function e(){this._transformContainerRect=this.getImageBoundingRect();if(this._imageContainer){d["Utils"].styleElement(this._imageContainer,{left:this._transformContainerRect.x+"px",top:this._transformContainerRect.y+"px",width:this._transformContainerRect.width+"px",height:this._transformContainerRect.height+"px"})}}},{key:"_getAreaStyles",value:function e(){var t=void 0,r=void 0,n=void 0,i=void 0,a=void 0;if(this._transformContainer){t=this._transformContainerRect.getSize();a=this._transformContainerRect.getPosition();r=this.getSharedState("start").clone().multiply(t);n=this.getSharedState("end").clone().multiply(t);i=n.clone().subtract(r)}else{t=new E(0,0);r=new E(0,0);i=new E(0,0);a=new E(0,0)}var o=this._getDimensionsStyles(i.x,i.y);return{topLeft:this._getDimensionsStyles(r.x+a.x,r.y+a.y),topCenter:this._getDimensionsStyles(i.x,r.y+a.y),centerLeft:this._getDimensionsStyles(r.x+a.x,i.y),center:{width:o.width},innerTransformContainer:o}}},{key:"_getDimensionsStyles",value:function e(t,r){return{width:Math.max(1,t),height:Math.max(1,r)}}},{key:"_renderOnCanvasControls",value:function e(){var t=this;var r=this._getAreaStyles();var n=!this.getSharedState("ratio");var i={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/accept.png",true)+"')"};return d["React"].createElement(R,{innerRef:function e(r){t._container=r}},d["React"].createElement(j,{className:"js-imageContainer",innerRef:function e(r){t._imageContainer=r}},d["React"].createElement(q,{className:x?"js-acceptButton":undefined,enabled:this.getSharedState("changesDone"),onClick:this._onAcceptClick,onMouseDown:this._onAcceptMouseDown,style:i})),d["React"].createElement(A,{className:x?"js-outerTransformContainer":undefined,visible:this.state.visible,innerRef:function e(r){t._transformContainer=r}},d["React"].createElement(M,null,d["React"].createElement(z,{style:r.topLeft}),d["React"].createElement(z,{style:r.topCenter}),d["React"].createElement(z,null)),d["React"].createElement(M,null,d["React"].createElement(z,{style:r.centerLeft}),d["React"].createElement(d["DraggableComponent"],{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag,disabled:n},d["React"].createElement(L,{style:r.center,className:x?"js-transformCenterCell":undefined,undraggable:n},!n&&[d["React"].createElement(d["DraggableComponent"],{onStart:this._onCornerDragStart.bind(this,"top","left"),onDrag:this._onCornerDrag,key:"topLeft"},d["React"].createElement(V,{top:true,left:true,className:x?"js-transformTopLeftCorner":undefined})),d["React"].createElement(d["DraggableComponent"],{onStart:this._onCornerDragStart.bind(this,"top","right"),onDrag:this._onCornerDrag,key:"topRight"},d["React"].createElement(V,{top:true,right:true,className:x?"js-transformTopRightCorner":undefined})),d["React"].createElement(d["DraggableComponent"],{onStart:this._onCornerDragStart.bind(this,"bottom","left"),onDrag:this._onCornerDrag,key:"bottomLeft"},d["React"].createElement(V,{bottom:true,left:true,className:x?"js-transformBottomLeftCorner":undefined})),d["React"].createElement(d["DraggableComponent"],{onStart:this._onCornerDragStart.bind(this,"bottom","right"),onDrag:this._onCornerDrag,key:"bottomRight"},d["React"].createElement(V,{bottom:true,right:true,className:x?"js-transformBottomRightCorner":undefined})),d["React"].createElement(B,{style:r.innerTransformContainer,className:x?"js-innerTransformContainer":undefined,key:"inner"},d["React"].createElement(M,null,d["React"].createElement(N,{right:true,bottom:true}),d["React"].createElement(N,{right:true,bottom:true}),d["React"].createElement(N,{bottom:true})),d["React"].createElement(M,null,d["React"].createElement(N,{right:true,bottom:true}),d["React"].createElement(N,{right:true,bottom:true}),d["React"].createElement(N,{bottom:true})),d["React"].createElement(M,null,d["React"].createElement(N,{right:true}),d["React"].createElement(N,{right:true}),d["React"].createElement(N,null)))])),d["React"].createElement(z,null)),d["React"].createElement(M,null,d["React"].createElement(z,null),d["React"].createElement(z,null),d["React"].createElement(z,null))))}},{key:"_renderControls",value:function e(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/flip.png",true)+"')"};var r={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/rotate.png",true)+"')"};var n=this.props.options,i=n.enableRotation,a=n.enableFlip,o=n.enableStraighten;return d["React"].createElement(O,{className:x?"js-transformCanvasControls":undefined},this._renderOnCanvasControls(),d["React"].createElement(D,null,d["React"].createElement(I,{className:x?"js-transformBottomCanvasControls":undefined},a&&[d["React"].createElement(W,{style:t,key:"flip-h",onClick:this._onFlipClick.bind(this,"horizontal"),className:x?"js-flipHorizontallyButton":undefined}),d["React"].createElement(W,{vertical:true,style:t,key:"flip-v",onClick:this._onFlipClick.bind(this,"vertical"),className:x?"js-flipVerticallyButton":undefined})],o&&d["React"].createElement(g["a"],{value:this.getSharedState("rotation"),onChange:this._onRotationChange}),i&&[d["React"].createElement(H,{style:r,key:"rotate-ccw",onClick:this._onRotateClick.bind(this,"ccw"),className:x?"js-rotateCounterClockwiseButton":undefined}),d["React"].createElement(H,{clockwise:true,style:r,key:"rotate-cw",onClick:this._onRotateClick.bind(this,"cw"),className:x?"js-rotateClockwiseButton":undefined})])))}}]);return t}(d["CanvasControlsComponent"]);T.contextTypes=d["CanvasControlsComponent"].contextTypes;t["a"]=T;var O=d["adonis"].div("120drhm","CanvasControls");var R=d["adonis"].div("8gacw5",{draggable:"ovipzq"},"OnCanvasControls");var D=d["adonis"].div("nmw377","BottomControlsContainer");var I=d["adonis"].div("1gk061a","BottomControls");var P=d["adonis"].div("1v9hd4r","TransformContainer");var j=d["adonis"].div("15kzu1c","ImageContainer");var A=Object(d["adonis"])(P)("1kjfwvf",{visible:"zgbg08"},"OuterTransformContainer");var B=Object(d["adonis"])(P)("120drhm","InnerTransformContainer");var M=d["adonis"].div("15u7gri","TransformRow");var F=d["adonis"].div("1q481v0","TransformCell");var N=Object(d["adonis"])(F)("1qh9j3j",{top:"1mup05p",right:"12l7t8k",bottom:"1ebuiz6",left:"txqhsl"},"BorderedTransformCell");var L=Object(d["adonis"])(F)("52h18o",{undraggable:"16s6vgr"},"CenterTransformCell");var z=Object(d["adonis"])(F)("17b4s67","DarkTransformCell");var V=d["adonis"].div("1tai30v",{top:"1stnln8",right:"1wj5vxi",bottom:"17bojqc",left:"1a9ompl"},"Dragger");var U=d["adonis"].button("127b6wl","Button");var W=Object(d["adonis"])(U)("120drhm",{vertical:"12fqiy2"},"FlipButton");var H=Object(d["adonis"])(U)("120drhm",{clockwise:"o7ss47"},"RotateButton");var q=d["adonis"].div("sbdqjz",{enabled:"ro0g1e"},"AcceptButton")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var m=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=217;var k=45;var w="production"==="test";var C=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._bindAll("_onDragStart","_onDrag");a._width=0;a.state={value:a.props.value||0};return a}d(t,[{key:"componentDidMount",value:function e(){m(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this._degreesPerPixel=k*2/b}},{key:"componentWillReceiveProps",value:function e(t){if(this.state.value!==t.value){this.setState({value:t.value})}}},{key:"_onDragStart",value:function e(){this._initialDegrees=this.state.value*180/Math.PI}},{key:"_onDrag",value:function e(t){var r=this._initialDegrees+t.x*this._degreesPerPixel;r=Math.min(k,Math.max(r,k*-1));var n=r*Math.PI/180;this.setState({value:n});this.props.onChange&&this.props.onChange(n)}},{key:"_getValue",value:function e(){return Math.round(this.state.value*180/Math.PI)+""}},{key:"_getIndicatorPosition",value:function e(){var t=k*Math.PI/180;return this._width/2+this.state.value/t*(this._width/2)}},{key:"_getIndicatorStyles",value:function e(){var t=k*Math.PI/180;return{left:{left:b/2+this.state.value/t*(b/2)},right:{right:b/2-this.state.value/t*(b/2)}}}},{key:"render",value:function e(){var t=this._getIndicatorStyles();var r={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",true)+"')",backgroundPosition:t.left.left-4};var n={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",true)+"')",backgroundPosition:t.left.left+35};return v["React"].createElement(v["DraggableComponent"],{onStart:this._onDragStart,onDrag:this._onDrag},v["React"].createElement(S,{className:w?"js-transformRotationSlider":undefined},v["React"].createElement(E,{style:r},v["React"].createElement(x,{style:t.left})),v["React"].createElement(T,{className:w?"js-transformRotationValue":undefined},this._getValue()),v["React"].createElement(E,{style:n},v["React"].createElement(x,{style:t.right}))))}}]);return t}(v["BaseComponent"]);C.contextTypes=v["BaseComponent"].contextTypes;t["a"]=C;var S=v["adonis"].div("tix0xu","Wrapper");var E=v["adonis"].div("6mdana","RotationSlider");var x=v["adonis"].div("nxjpo","Indicator");var T=v["adonis"].div("d97kws","Value")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(7);var p=r.n(f);var v=r(5);var h=r.n(v);var d=r(352);var m=r(353);var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function g(e,t,r){if(t in e){i()(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var w=v["GroupedControlsStyles"].ControlGroupList,C=v["GroupedControlsStyles"].ControlGroup,S=v["GroupedControlsStyles"].ControlGroupTitle;var E=f["Math"].Vector2;var x="production"==="test";var T=function(e){k(t,e);function t(){var e,r;y(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++){i[a]=arguments[a]}var o=b(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));o._bindAll("_reapplyRatio","_onHistoryChange","_onResetDefaultClick","_onOperationRemoved","_onOperationUpdated");o._events=(r={},g(r,v["Constants"].EVENTS.TRANSFORM_REAPPLY_RATIO,o._reapplyRatio),g(r,v["Constants"].EVENTS.OPERATION_REMOVED,o._onOperationRemoved),g(r,v["Constants"].EVENTS.OPERATION_UPDATED,o._onOperationUpdated),g(r,v["Constants"].EVENTS.HISTORY_UNDO,o._onHistoryChange),g(r,v["Constants"].EVENTS.HISTORY_REDO,o._onHistoryChange),r);o._transformRatioManager=new v["TransformRatioManager"](o.props.options);o.state.ratio=null;o._selectInitialRatio(!o.getSharedState("transformOperationExistedBeforeEntering"));return o}_(t,[{key:"shouldSharedComponentUpdate",value:function e(t,r){return t.ratio!==r.ratio}},{key:"_onHistoryChange",value:function e(t){var r=this.context.editor;var n={};var i=r.operations.get("transform");if(!i){return}var a=this.getSharedState("newTransformOptions");var o=this.props.controls.convertOperationOptionsToUI(i.serializeOptions());a.start=o.start;a.end=o.end;a.rotation=o.rotation;a.textureScale=o.textureScale;n.newTransformOptions=a;n.changesDone=true;if(t.data&&t.data.ratio){n.ratio=t.data.ratio}var s={end:new E(1,1),rotation:0,start:new E(0,0),textureScale:1};r.broadcastTransform(i,s);this.setSharedState(n);r.zoom.auto(true,true)}},{key:"_onOperationUpdated",value:function e(t){var r=this.context.editor;var n=this.getSharedState("transformOperation");if(n!==t)return;var i=this.props.controls.convertOperationOptionsToUI(t.serializeOptions());this.setSharedState({rotation:i.rotation,start:i.start,end:i.end});r.zoom.auto(true,true)}},{key:"_onOperationRemoved",value:function e(t){var r=this.context.editor;var n=this.getSharedState("transformOperation");if(n===t){var i=r.operations.getOrCreate("transform",{enabled:false});var a=r.getSDK();a.setRotation(0);a.setSpriteScale(1);this.setSharedState({transformOperation:i,rotation:0,initialTransformOptions:i.serializeOptions(),transformOperationExistedBeforeEntering:false});i._ratio=null;this._selectInitialRatio(true,true)}var o=this.getSharedState("orientationOperation");if(o===t){var s=r.operations.getOrCreate("orientation");this.setSharedState({orientationOperation:s,rotation:0,flipVertically:false,flipHorizontally:false})}}},{key:"_onResetDefaultClick",value:function e(){var t=this.context.editor;var r=this.getSharedState("orientationOperation");var n=this.getSharedState("transformOperation");r.set({flipHorizontally:false,flipVertically:false,rotation:0});var i=this.getSharedState("newTransformOptions");i.start=new E(0,0);i.end=new E(1,1);i.rotation=0;this.setSharedState({ratio:null,start:new E(0,0),end:new E(1,1),orientationRotation:0,rotation:0,flipVertically:false,flipHorizontally:false,changesDone:true});n._ratio=null;this._selectInitialRatio(true,true);this._emitEvent(v["Constants"].EVENTS.TRANSFORM_RESIZE);t.setRotation(0);t.setSpriteScale(1);t.zoom.auto(true,true)}},{key:"_reapplyRatio",value:function e(){var t=this.getSharedState("ratio");this._selectRatio(t)}},{key:"_selectRatio",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var i=this.getSharedState("transformOperation");if(r&&t){this._setDefaultOptionsForRatio(t,n)}i._ratio=t;this.setSharedState({ratio:t},n);if(n){this.setSharedState({changesDone:true})}this._emitEvent(v["Constants"].EVENTS.TRANSFORM_RESIZE)}},{key:"_setDefaultOptionsForRatio",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=t||{},i=n.ratio,a=n.dimensions;var o=new E;var s=new E;if(a&&!i){i=a.x/a.y}if(!i||i==="*"){o=new E(0,0);s=new E(1,1)}else{var l=this.getSharedState("transformOperation");var u=l.getInputDimensions(false);var c=u.x/u.y;var f=void 0,p=void 0;if(c<=i){p=u.x/i;f=p*i;o.set((u.x-f)/2,(u.y-p)/2)}else{f=u.y*i;p=f/i;o.set((u.x-f)/2,(u.y-p)/2)}s.copy(o).add(f,p);o.divide(u);s.divide(u)}var v=this.getSharedState("newTransformOptions");v.start=o;v.end=s;this.setSharedState({start:o,end:s},r)}},{key:"_selectInitialRatio",value:function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=this.getSharedState("transformOperation");var a=null;var o=this._transformRatioManager.getCategories();var s=o.map(function(e){return t._transformRatioManager.getRatiosForCategory(e)}).reduce(function(e,t){return e.concat(t)});var l=i._ratio;if(l){var u=s.filter(function(e){return e===l});a=u[0]}if(!a){var c=s.filter(function(e){return e.selected});a=c.pop()}if(!a){a=s[0];if(a.ratio!=="*"){this.setSharedState({changesDone:true})}}return this._selectRatio(a,r,n)}},{key:"_renderSections",value:function e(){var t=this;var r=function e(r){return v["React"].createElement(D,{key:r.identifier},v["React"].createElement(I,null,t._t("editor.controls.transform.ratios."+r.identifier+".name")||r.defaultName),v["React"].createElement(P,null,n(r)))};var n=function e(r){return t._transformRatioManager.getRatiosForCategory(r).map(function(e){var n=t.getSharedState("ratio")===e;return v["React"].createElement(d["a"],{key:e.identifier,defaultIconPath:"editor/controls/transform/ratios/"+e.identifier+"-default.png",hoverIconPath:"editor/controls/transform/ratios/"+e.identifier+"-hover.png",activeIconPath:"editor/controls/transform/ratios/"+e.identifier+"-active.png",onClick:t._selectRatio.bind(t,e),title:t._t("editor.controls.transform.ratios."+r.identifier+".ratios."+e.identifier)||e.defaultName,identifier:e.identifier,selected:n})})};var i=this._transformRatioManager.getCategories();return i.map(function(e){return t._transformRatioManager.getRatiosForCategory(e).length>0?r(e):null})}},{key:"_getRootProps",value:function e(){return{className:x?"js-transformControls":undefined,withBorderTop:true}}},{key:"_renderContent",value:function e(){var t=this;var r=this.context.options;var n=r.editor.forceCrop;var i=this.getSharedState("ratio");return[v["React"].createElement(v["ScrollableListComponent"],{key:"list",direction:"vertical",innerRef:function e(r){t._scrollbar=r}},v["React"].createElement(R,null,v["React"].createElement(O,null,v["React"].createElement(v["ButtonComponent"],{disabled:n,title:this._t("editor.controls.transform.reset"),className:x?"js-transformResetButton":undefined,onClick:this._onResetDefaultClick})),this._renderSections())),v["React"].createElement(m["a"],{key:"transformDimensions",controls:this.props.controls,disabled:!i||!!i.dimensions})]}}]);return t}(v["ControlsComponent"]);T.contextTypes=v["ControlsComponent"].contextTypes;T.RootElement=v["ControlsComponent"].RootElement;t["a"]=T;var O=v["adonis"].li("7abnmv","SectionListHeader");var R=Object(v["adonis"])(w).ul("x32ss4","SectionList");var D=Object(v["adonis"])(C).li("ber9o0","Section");var I=Object(v["adonis"])(S).div("15ebqhq","SectionTitle");var P=v["adonis"].ul("1klgjyq","SectionGrid")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(5);var p=r.n(f);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var _=f["ControlsStyles"].PlainControlItem;var g="production"==="test";var y=function(e){m(t,e);function t(){var e;h(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));a.state={hovered:false};return a}v(t,[{key:"render",value:function e(){var t=this;var r={backgroundImage:"url('"+this._getAssetPath(this.props.defaultIconPath,true)+"')"};var n={backgroundImage:"url('"+this._getAssetPath(this.props.hoverIconPath,true)+"')"};var i={backgroundImage:"url('"+this._getAssetPath(this.props.activeIconPath,true)+"')"};var a=this.props,o=a.selected,s=a.onClick,l=a.identifier,u=a.title;var c=this.state.hovered;return f["React"].createElement(b,{selected:o,onClick:s,"data-identifier":l,"data-selected":o,onMouseEnter:function e(){return t.setState({hovered:true})},onMouseLeave:function e(){return t.setState({hovered:false})},className:g?"js-transformListItem":undefined},f["React"].createElement(f["Transition"],{active:!o},f["React"].createElement(k,{style:r})),f["React"].createElement(f["Transition"],{active:!o&&c},f["React"].createElement(k,{style:n})),f["React"].createElement(f["Transition"],{active:o},f["React"].createElement(k,{style:i})),f["React"].createElement(w,{selected:o},u))}}]);return t}(f["BaseComponent"]);y.contextTypes=f["BaseComponent"].contextTypes;t["a"]=y;var b=Object(f["adonis"])(_).li("71xi0n","TransformListItem");var k=f["adonis"].div("u0ryhr",{rendered:"2jlos",visible:"82svov"},"Icon");var w=f["adonis"].div("jpjwq7",{selected:"zgbg08"},"Title")},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(2);var o=r.n(a);var s=r(3);var l=r.n(s);var u=r(1);var c=r.n(u);var f=r(7);var p=r.n(f);var v=r(5);var h=r.n(v);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)o.a?o()(e,t):e.__proto__=t}var y="production"==="test";var b=function(e){g(t,e);function t(){var e;m(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(n)));var o=a._getTransformDimensions();a.state={dimensions:o,x:o.x,y:o.y};return a}d(t,[{key:"shouldSharedComponentUpdate",value:function e(t,r){return!t.start.equals(r.start)||!t.end.equals(r.end)||t.ratio!==r.ratio}},{key:"sharedComponentWillUpdate",value:function e(t,r){if(!r.transformOperation)return;var n=this._getTransformDimensions();var i=n.x,a=n.y;this.state.dimensions=n;this.state.x=i;this.state.y=a}},{key:"_onInputLiveChange",value:function e(t,r){var n=r.target.value;if(n.length&&!n.match(/\d+?/i))return;this.state[t]=n&&parseInt(n,10)||"";this.forceUpdate()}},{key:"_onInputChange",value:function e(t,r){var n=this.state[t]||0;var i=this.getSharedState("transformOperation");var a=i.getInputDimensions(false);var o=this.getSharedState("ratio"),s=o.ratio;var l=this.getSharedState("start");var u=this.getSharedState("end");var c=u.clone().subtract(l);var p=c.clone().multiply(a);p[t]=Math.min(a[t],n);if(s!=="*"){if(t==="x"){p.y=p.x/s}else{p.x=p.y*s}}var v=p.clone();if(p.x>a.x||p.y>a.y){v=f["Utils"].resizeVectorToFit(p,a)}var h=this._getTransformDimensions();var d=h.x,m=h.y;this.state.dimensions=h;this.state.x=d;this.state.y=m;this._resizeTransformTo(v);this.forceUpdate()}},{key:"_getTransformDimensions",value:function e(){var t=this.getSharedState("transformOperation");var r=this.getSharedState("ratio")||{ratio:"*"};var n=void 0;if(r.dimensions){n=r.dimensions.clone()}else{var i=t.getInputDimensions(false);var a=this.getSharedState("start");var o=this.getSharedState("end");var s=o.clone().subtract(a);n=s.multiply(i).round()}return n}},{key:"_resizeTransformTo",value:function e(t){var r=this.getSharedState("transformOperation");var n=r.getInputDimensions(false);var i=this.getSharedState("start").clone();var a=this.getSharedState("end").clone();var o=t.divide(n);a.copy(i).add(o);if(a.x>1){i.x-=a.x-1;a.x=1}if(a.y>1){i.y-=a.y-1;a.y=1}var s=this.props.controls;var l=s.fixTransform(i,a,"right","bottom"),u=l.start,c=l.end;var f=this.getSharedState("newTransformOptions");f.start=u;f.end=c;this.setSharedState({start:u,end:c});this._emitEvent(v["Constants"].EVENTS.TRANSFORM_RESIZE)}},{key:"render",value:function e(){return v["React"].createElement(C,{className:y?"js-transformDimensions":undefined},v["React"].createElement(S,null,v["React"].createElement(E,null,v["React"].createElement(x,null,v["React"].createElement(k,{suffix:this._t("editor.controls.transform.dimensions.width"),name:"width",disabled:this.props.disabled,value:this.state.x,onLiveChange:this._onInputLiveChange.bind(this,"x"),onChange:this._onInputChange.bind(this,"x")})),v["React"].createElement(T,null,v["React"].createElement(w,{src:this._getAssetPath("editor/controls/transform/dimensions-cross.png",true)})),v["React"].createElement(x,null,v["React"].createElement(k,{suffix:this._t("editor.controls.transform.dimensions.height"),name:"height",disabled:this.props.disabled,value:this.state.y,onLiveChange:this._onInputLiveChange.bind(this,"y"),onChange:this._onInputChange.bind(this,"y")}))),v["React"].createElement(v["Transition"],{active:this.props.disabled,enterProp:"rendered",enterDuration:300,appearProp:"visible",appearDuration:300,leaveDuration:300},v["React"].createElement(O,{className:y?"js-transformDimensionsLockOverlay":undefined},v["React"].createElement(R,{src:this._getAssetPath("editor/controls/transform/lock.png",true)})))))}}]);return t}(v["SharedStateComponent"]);b.contextTypes=v["SharedStateComponent"].contextTypes;t["a"]=b;var k=Object(v["adonis"])(v["SuffixedTextInputComponent"])("2jlos","DimensionInput");var w=v["adonis"].img("1dew3s1","Cross");var C=v["adonis"].div("1yz821h","TransformDimensions");var S=v["adonis"].div("1dg9k0o","TransformDimensionsWrapper");var E=v["adonis"].div("wlk9p6","Table");var x=v["adonis"].div("1q481v0","Cell");var T=Object(v["adonis"])(x)("13lk3i9","CrossCell");var O=v["adonis"].div("943mx5",{rendered:"2jlos",visible:"rval4i"},"LockOverlay");var R=v["adonis"].img("1hp46pm","Lock")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(109);var p=r.n(f);var v=r(8);var h=r.n(v);var d=r(1);var m=r.n(d);var _=r(7);var g=r.n(_);var y=r(5);var b=r.n(y);var k=r(355);var w=r(356);var C=r(46);var S=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var E=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function x(e){return function(){var t=e.apply(this,arguments);return new h.a(function(e,r){function n(i,a){try{var o=t[i](a);var s=o.value}catch(e){r(e);return}if(o.done){e(s)}else{return h.a.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function T(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function O(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function R(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var D=600;var I=void 0;var P=void 0;if(_["Operations"].SpriteOperation){I=_["Operations"].SpriteOperation.TextDesignSprite;P=I.AssetManager}var j=function(e){R(t,e);function t(){var e;var r,n,i;T(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++){o[s]=arguments[s]}return i=(r=(n=O(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(o))),n),n.toggleTextAsMask=function(){var e=n.context.editor;var t=n.sharedState.get("selectedSprite");if(t){t.setInverted(!t.getInverted());n.addLocalHistorySnapshot("inverted-layout");e.render()}else{n.sharedState.set({textAsMask:!n.sharedState.get("textAsMask")})}},n.setColor=function(e){var t=n.context.editor;var r=n.sharedState.get("selectedSprite");n.sharedState.set("color",e.clone());if(r){r.setColor(e.clone());n.addLocalHistorySnapshot("layout-color");t.render()}else{n.sharedState.set({color:e.clone()})}},r),O(n,i)}E(t,[{key:"_onEnter",value:function e(){var t=this.context.editor;var r=new y["TextDesignManager"](this.context.ui,this._options);var n=new y["FontManager"](this.context.ui,{fonts:y["Constants"].DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});var i=t.operations.getOrCreate("sprite");var a=_["Utils"].Array.find(i.getSprites(),function(e){return e instanceof I});this.sharedState.set({textDesignManager:r,fontManager:n,operation:i,selectedSprite:a,color:_["Color"].WHITE})}},{key:"getLayoutItems",value:function e(){var t=this.sharedState.get("textDesignManager");return this.constructor.TextDesignItems.filter(function(e){return t.getLayoutByIdentifier(e.identifier)})}},{key:"getText",value:function(){var e=x(p.a.mark(function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r;return p.a.wrap(function e(n){while(1){switch(n.prev=n.next){case 0:r=y["ModalManager"].instance.displayInput("Text",t);return n.abrupt("return",new h.a(function(e){r.on("input",e);r.on("close",function(r){return e(t)})}));case 2:case"end":return n.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"editText",value:function(){var e=x(p.a.mark(function e(){var t,r,n,i,a;return p.a.wrap(function e(o){while(1){switch(o.prev=o.next){case 0:t=this.sharedState.get("selectedSprite");r=this.sharedState.get("operation");n=this.context.editor;if(t){o.next=5;break}return o.abrupt("return");case 5:i=t.getText();o.next=8;return this.getText(i);case 8:a=o.sent;if(!(!a||a.trim()==="")){o.next=15;break}r.removeSprite(t);t.dispose();this.sharedState.set({selectedLayout:null,selectedSprite:null});n.render();return o.abrupt("return");case 15:t.setText(a);this.addLocalHistorySnapshot("layout-text");case 17:case"end":return o.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"selectLayout",value:function(){var e=x(p.a.mark(function e(t){var r=this;var n,i,a,o,s,l,u,c,f;return p.a.wrap(function e(p){while(1){switch(p.prev=p.next){case 0:n=this.sharedState.get(),i=n.textDesignManager,a=n.selectedSprite,o=n.operation;s=i.getLayoutByIdentifier(t);l=this.context.editor;if(s){p.next=5;break}return p.abrupt("return",null);case 5:if(a){p.next=16;break}p.next=8;return this.getText();case 8:u=p.sent;if(!(!u||u.trim()==="")){p.next=11;break}return p.abrupt("return");case 11:a=new I(o,{text:u,color:this.sharedState.get("color"),inverted:this.sharedState.get("textAsMask"),width:.8});o.addSprite(a);this.sharedState.set({selectedSprite:a});p.next=17;break;case 16:a.seed();case 17:c=new s;p.prev=18;f=c.getImagePaths().map(function(e){return{path:e,fullPath:r._getAssetPath(e),image:null}});p.next=22;return P.loadImages(f);case 22:c.onImagesLoaded();p.next=29;break;case 25:p.prev=25;p.t0=p["catch"](18);C["a"].error(p.t0);return p.abrupt("return");case 29:a.setLayout(c);this.addLocalHistorySnapshot("layout");l.render();return p.abrupt("return",a);case 33:case"end":return p.stop()}}},e,this,[[18,25]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_loadFonts",value:function(){var e=x(p.a.mark(function e(){var t,r;return p.a.wrap(function e(n){while(1){switch(n.prev=n.next){case 0:t=this.sharedState.get("fontManager");r=this.context.ui.getFontLoader();r.setFonts(t.getFonts());P.setFonts(S({},P.getFonts(),t.getVariationsByIdentifier()));return n.abrupt("return",r.load().catch(function(e){return e.map(function(e){return e.font.getFontFamily()})}));case 5:case"end":return n.stop()}}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFonts",value:function e(){var t=this;var r=void 0;var n=window.setTimeout(function(){r=y["ModalManager"].instance.displayLoading(t._t("loading.fonts"),true)},D);return this._loadFonts().then(function(){window.clearTimeout(n);if(r)r.close()}).catch(function(e){window.clearTimeout(n);if(r)r.close();var i=t._unavailableFontFamilies.join(", ");y["ModalManager"].instance.displayError(t._t("errors.fontLoadingError.title"),t._t("errors.fontLoadingError.text",{fonts:i}))})}}],[{key:"mapOperationsToSharedState",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.getOrCreate("sprite");var a=i.getSprites().filter(function(e){return e instanceof I})[0]||null;var o=a?a.getLayout():null;return{color:a?a.getColor():_["Color"].WHITE,textAsMask:a?a.getInverted():false,selectedLayout:o?o.constructor.identifier:null}}},{key:"clickAtPosition",value:function e(t,r){var n=r.operations.get("sprite");if(!n){return false}var i=n.getSpritesAtPosition(t,r.getOutputTextureDimensions()).filter(function(e){return e instanceof I});return i[0]?{selectedSprite:i[0]}:false}},{key:"isEnabled",value:function e(t){return t.isToolEnabled("textdesign")&&t.isToolAllowed("textdesign")}},{key:"getPreloadAssets",value:function e(t){var r=[];this.TextDesignItems.forEach(function(e){r.push(e.backgroundImagePath)});return r}}]);return t}(y["BaseControls"]);j.identifier="textdesign";j.controlsComponent=k["a"];j.canvasControlsComponent=w["a"];j.iconPath="editor/controls/text-design/icon.png";j.activeIconPath="editor/controls/text-design/icon-active.png";j.requiredOperations=["sprite"];j.updatableOperations=["sprite"];j.switchToDefaultControlsOnRemoval=true;j.defaultOptions={availableLayouts:null};j.TextDesignItems=[{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_fat_face.png",identifier:"imgly_text_design_multiline"}];b.a.Controls.TextDesignControls=j;t["a"]=j},function(e,t,r){"use strict";var n=r(0);var i=r.n(n);var a=r(6);var o=r.n(a);var s=r(2);var l=r.n(s);var u=r(3);var c=r.n(u);var f=r(1);var p=r.n(f);var v=r(5);var h=r.n(v);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;i()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var m=function e(t,r,n){if(t===null)t=Function.prototype;var i=o()(t,r);if(i===undefined){var a=p()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var s=i.get;if(s===undefined){return undefined}return s.call(n)}};function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)l.a?l()(e,t):e.__proto__=t}var b=v["GroupedControlsStyles"].ControlGroupTitle,k=v["GroupedControlsStyles"].ControlGroup;var w="production"==="test";var C="editor/controls/text-design/icons/imgly_icon_next_48pt.png";var S=function(e){y(t,e);function t(){var e;_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=g(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(n)));a._events={};a._unavailableFontFamilies=[];return a}d(t,[{key:"componentDidMount",value:function e(){m(t.prototype.__proto__||p()(t.prototype),"componentDidMount",this).call(this);this.props.controls.loadFonts()}},{key:"shouldSharedComponentUpdate",value:function e(t,r){return true}},{key:"_getRootProps",value:function e(){return{className:w?"js-textDesignControls":undefined,withBorderTop:true}}},{key:"onSelectLayout",value:function e(t){var r=this;this.props.controls.selectLayout(t).then(function(){r.forceUpdate();r.context.editor.render()})}},{key:"_renderContent",value:function e(){var t=this;var r=this.sharedState,n=r.color,i=r.textAsMask,a=r.selectedLayout;var o=this.props.controls;var s=o.getLayoutItems();return v["React"].createElement(E,null,v["React"].createElement(P,null,v["React"].createElement(A,null,v["React"].createElement(v["ColorSelectionComponent"],{value:n,onChange:o.setColor})),v["React"].createElement(D,null,v["React"].createElement(I,{className:w?"js-td-inverted-checkbox":undefined,onClick:o.toggleTextAsMask,checked:i}),v["React"].createElement(R,null,"Text as mask"))),v["React"].createElement(j,null,v["React"].createElement(v["ScrollbarComponent"],{direction:"vertical"},v["React"].createElement(T,null,s.map(function(e){return v["React"].createElement(O,{key:e.identifier,className:w?"js-td-item-"+e.identifier:undefined,selected:e.identifier===a,onClick:function r(){return t.onSelectLayout(e.identifier)}},v["React"].createElement(x,{src:e.identifier===a?t._getAssetPath(C,true):t._getAssetPath(e.backgroundImagePath,true)}))})))))}}]);return t}(v["ControlsComponent"]);S.contextTypes=v["ControlsComponent"].contextTypes;S.RootElement=v["ControlsComponent"].RootElement;t["a"]=S;var E=v["adonis"].div("w4knew","Container");var x=v["adonis"].img("95qw31","Image");var T=v["adonis"].ul("13wctlp","List");var O=v["adonis"].li("18c5asb",{selected:"1eawvu9"},"ListItem");var R=Object(v["adonis"])(b).div("1b0fixa","SectionTitle");var D=v["adonis"].div("1b4y7iu","SectionHeader");var I=Object(v["adonis"])(v["CheckboxComponent"])("15tfhjl","Checkbox");var P=Object(v["adonis"])(k).div("eijhud","Settings");var j=Object(v["adonis"])(k).div("n44ist","SettingsBottom");var A=v["adonis"].div("yzsuxp","ColorSelection")},function(e,t,r){"use strict";var n=r(10);var i=r.n(n);var a=r(0);var o=r.n(a);var s=r(6);var l=r.n(s);var u=r(2);var c=r.n(u);var f=r(3);var p=r.n(f);var v=r(1);var h=r.n(v);var d=r(7);var m=r.n(d);var _=r(54);var g=i.a||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;o()(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var b=function e(t,r,n){if(t===null)t=Function.prototype;var i=l()(t,r);if(i===undefined){var a=h()(t);if(a===null){return undefined}else{return e(a,r,n)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(n)}};function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)c.a?c()(e,t):e.__proto__=t}var S=d["Operations"].SpriteOperation;var E=void 0;if(S){E=d["Operations"].SpriteOperation.TextDesignSprite}var x=function(e){C(t,e);function t(){var e;k(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++){n[i]=arguments[i]}var a=w(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(n)));a.state=g({},a.state,{visible:true});return a}y(t,[{key:"_renderSpriteItems",value:function e(r){return b(t.prototype.__proto__||h()(t.prototype),"_renderSpriteItems",this).call(this,r.filter(function(e){return e instanceof E}))}},{key:"_selectNextSprite",value:function e(){var t=this.getSharedState("operation");var r=t.getSprites().slice(0).reverse();var n=void 0,i=void 0;for(var a=0;a<r.length;a++){n=r[a];if(n instanceof E){i=n;break}}this.setSharedState({selectedSprite:i||null})}},{key:"_createSprite",value:function e(t){}}]);return t}(_["a"]);x.contextTypes=_["a"].contextTypes;t["a"]=x}])});