{"version":3,"file":"core_webrtc.min.js","sources":["core_webrtc.js"],"names":["window","BX","webrtc","this","debug","audioMuted","videoMuted","enabled","detectedBrowser","pcConfig","oneway","lastUserMediaParams","pcConstraints","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","defaultMicrophone","defaultCamera","defaultSpeaker","enableMicAutoParameters","useFallbackConstraints","configVideo","aspectRatio","configVideoGroup","configVideoMobile","configVideoAfterError","callStreamSelf","callStreamMain","callStreamUsers","pc","pcStart","connected","iceCandidates","initiator","callUserId","callChatId","callToGroup","callGroupUsers","callInit","callInitUserId","callActive","callVideo","callRequestUserMedia","needPeerConnection","createAnswerTimeout","initPeerConnectionTimeout","iceCandidateTimeout","pcConnectTimeout","init","setTurnServer","inheritWebrtc","child","prototype","Object","create","constructor","parent","navigator","mediaDevices","getUserMedia","userAgent","substr","indexOf","appVersion","attachMediaStream","element","stream","src","URL","createObjectURL","type","isNotEmptyString","setSinkId","log","ready","params","turnServer","turnServerFirefox","turnServerLogin","turnServerPassword","iceServers","url","credential","username","optional","DtlsSrtpKeyAgreement","toggleAudio","changeVariable","getAudioTracks","length","i","toggleVideo","getVideoTracks","signalingReady","PULL","getPullServerStatus","text","desktop","arguments","JSON","stringify","e","message","console","startGetUserMedia","video","audio","onUserMediaSuccess","deviceId","ideal","echoCancellation","googEchoCancellation","googEchoCancellation2","googDAEchoCancellation","googAutoGainControl","googAutoGainControl2","mozAutoGainControl","googNoiseSuppression","googNoiseSuppression2","googHighpassFilter","googTypingNoiseDetection","googAudioMirroring","constraints","then","delegate","onUserMediaError","getTracks","forEach","track","mediaStreamTrackToString","bind","stopMediaStream","userId","clearTimeout","initPeerConnection","error","createPeerConnection","setTimeout","sendOfferToPeer","setLocalAndSend","desc","setLocalDescription","a","onRemoteStreamAdded","event","setMainVideo","onRemoteStreamRemoved","onIceCandidate","candidates","onIceConnectionStateChange","onSignalingStateChange","peerConnectionError","peerConnectionReconnect","iceConnectionState","signalingState","close","deleteEvents","hasOwnProperty","mergeConstraints","cons1","cons2","merged","name","concat","MozDontOfferDataChannel","prop","createOffer","RTCPeerConnection","onicecandidate","onIceCandidateEvent","onaddstream","onRemoteStreamAddedEvent","onremovestream","onRemoteStreamRemovedEvent","oniceconnectionstatechange","onIceConnectionStateChangeEvent","onsignalingstatechange","onSignalingStateChangeEvent","addStream","signalingPeerData","peerData","signal","parse","createAnswer","setRemoteDescription","RTCSessionDescription","candidate","RTCIceCandidate","sdpMLineIndex","label","addIceCandidate","push","id","sdpMid","setDefaultCamera","setDefaultMicrophone","logDevices","self","enumerateDevices","devices","device","result","key","isFunction","mediaStream","MediaStream","stop"],"mappings":"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"}