; /* /bitrix/js/main/imageeditor/js/locale.min.js?15441273847562*/
; /* /bitrix/js/main/imageeditor/js/editor.min.js?15441273846341*/

; /* Start:"a:4:{s:4:"full";s:59:"/bitrix/js/main/imageeditor/js/locale.min.js?15441273847562";s:6:"source";s:40:"/bitrix/js/main/imageeditor/js/locale.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Main");BX.Main.ImageEditorLocale={editor:{new:BX.message("IMAGE_EDITOR_NEW"),export:BX.message("IMAGE_EDITOR_EXPORT"),cancel:BX.message("IMAGE_EDITOR_CANCEL"),close:BX.message("IMAGE_EDITOR_CLOSE"),controls:{library:{title:BX.message("IMAGE_EDITOR_LIBRARY_TITLE"),search:BX.message("IMAGE_EDITOR_LIBRARY_SEARCH"),fileDropZone:BX.message("IMAGE_EDITOR_LIBRARY_DROP_ZONE"),fileDropZoneHovered:BX.message("IMAGE_EDITOR_LIBRARY_DROP_ZONE_HOVERED")},transform:{title:BX.message("IMAGE_EDITOR_TRANSFORM_TITLE"),reset:BX.message("IMAGE_EDITOR_TRANSFORM_RESET_TO_DEFAULT"),dimensions:{width:BX.message("IMAGE_EDITOR_SIZE_WIDTH"),height:BX.message("IMAGE_EDITOR_SIZE_HEIGHT")},ratios:{imgly_transforms_common:{name:BX.message("IMAGE_EDITOR_COMMON_CROPS"),ratios:{imgly_transform_common_custom:BX.message("IMAGE_EDITOR_RATIOS_CUSTOM"),imgly_transform_common_square:BX.message("IMAGE_EDITOR_RATIOS_SQUARE"),"imgly_transform_common_4-3":"4:3","imgly_transform_common_16-9":"16:9"}},imgly_transforms_facebook:{name:BX.message("IMAGE_EDITOR_TRANSFORM_FACEBOOK"),ratios:{imgly_transform_facebook_ad:BX.message("IMAGE_EDITOR_TRANSFORM_FACEBOOK_AD"),imgly_transform_facebook_post:BX.message("IMAGE_EDITOR_TRANSFORM_FACEBOOK_POST"),imgly_transform_facebook_cover:BX.message("IMAGE_EDITOR_TRANSFORM_FACEBOOK_COVER"),imgly_transform_facebook_profile:BX.message("IMAGE_EDITOR_TRANSFORM_FACEBOOK_PROFILE")}}}},filter:{title:BX.message("IMAGE_EDITOR_FILTERS_TITLE"),filters:{identity:BX.message("IMAGE_EDITOR_FILTERS_NONE"),imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Bleached",imgly_lut_bleachedblue:"Bleached Blue",imgly_lut_blues:"Blues",imgly_lut_blueshadows:"Blue Shadows",imgly_lut_breeze:"Breeze",imgly_lut_bw:"B & W",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Cool",imgly_lut_cottoncandy:"Cotton Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Eighties",imgly_lut_elder:"Elder",imgly_lut_evening:"Evening",imgly_lut_fall:"Fall",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"High Contrast",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"KDynamic",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lenin",imgly_lut_litho:"Litho",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"No Green",imgly_lut_orchid:"Orchid",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Plate",imgly_lut_pola669:"Pola 669",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia High",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Sunset",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Winter",imgly_lut_x400:"X400"}},adjustments:{title:BX.message("IMAGE_EDITOR_ADJUSTMENT"),reset:BX.message("IMAGE_EDITOR_ADJUSTMENT_RESET"),sections:{basics:BX.message("IMAGE_EDITOR_ADJUSTMENT_BASIC"),refinements:BX.message("IMAGE_EDITOR_ADJUSTMENT_REFINEMENTS")},items:{brightness:BX.message("IMAGE_EDITOR_ADJUSTMENT_BRIGHTNESS"),contrast:BX.message("IMAGE_EDITOR_ADJUSTMENT_CONTRAST"),saturation:BX.message("IMAGE_EDITOR_ADJUSTMENT_SATURATION"),exposure:BX.message("IMAGE_EDITOR_ADJUSTMENT_EXPOSURE"),gamma:BX.message("IMAGE_EDITOR_ADJUSTMENT_GAMMA"),shadows:BX.message("IMAGE_EDITOR_ADJUSTMENT_SHADOWS"),highlights:BX.message("IMAGE_EDITOR_ADJUSTMENT_HIGHLIGHTS"),clarity:BX.message("IMAGE_EDITOR_ADJUSTMENT_CLARITY")}},focus:{title:BX.message("IMAGE_EDITOR_FOCUS_TITLE"),items:{none:BX.message("IMAGE_EDITOR_FOCUS_NONE"),radial:BX.message("IMAGE_EDITOR_FOCUS_RADIAL"),mirrored:BX.message("IMAGE_EDITOR_FOCUS_MIRRORED"),linear:BX.message("IMAGE_EDITOR_FOCUS_LINEAR"),gaussian:BX.message("IMAGE_EDITOR_FOCUS_GAUSSIAN")}},text:{title:BX.message("IMAGE_EDITOR_TEXT_TITLE"),defaultText:BX.message("IMAGE_EDITOR_TEXT_DEFAULT_TEXT"),new:BX.message("IMAGE_EDITOR_TEXT_NEW_TEXT"),font:BX.message("IMAGE_EDITOR_TEXT_FONT"),size:BX.message("IMAGE_EDITOR_TEXT_SIZE"),spacing:BX.message("IMAGE_EDITOR_TEXT_PARAMS"),line:BX.message("IMAGE_EDITOR_TEXT_LINE_HEIGHT")},textdesign:{title:BX.message("IMAGE_EDITOR_TEXT_DESIGN")},sticker:{title:BX.message("IMAGE_EDITOR_STICKERS_TITLE"),new:BX.message("IMAGE_EDITOR_STICKERS_NEW"),fill:BX.message("IMAGE_EDITOR_STICKERS_FILL"),opacity:BX.message("IMAGE_EDITOR_STICKERS_OPACITY"),replace:BX.message("IMAGE_EDITOR_STICKERS_REPLACE"),stickerCategories:{},stickers:{}},brush:{title:BX.message("IMAGE_EDITOR_BRUSH_TITLE"),settings:BX.message("IMAGE_EDITOR_BRUSH_SETTINGS"),width:BX.message("IMAGE_EDITOR_BRUSH_WIDTH"),hardness:BX.message("IMAGE_EDITOR_BRUSH_HARDNESS")},frame:{title:BX.message("IMAGE_EDITOR_FRAME_TITLE"),opacity:BX.message("IMAGE_EDITOR_FRAME_OPACITY"),width:BX.message("IMAGE_EDITOR_FRAME_WIDTH"),replace:BX.message("IMAGE_EDITOR_FRAME_REPLACE"),fill:BX.message("IMAGE_EDITOR_FRAME_FILL"),frames:{none:BX.message("IMAGE_EDITOR_FRAME_NONE")}},overlay:{title:BX.message("IMAGE_EDITOR_OVERLAY_TITLE"),blendModes:{none:BX.message("IMAGE_EDITOR_OVERLAY_NONE"),normal:"Normal",overlay:"Overlay",hardLight:"Hard Light",softLight:"Soft Light",multiply:"Multiply",darken:"Darken",lighten:"Lighten",screen:"Screen",colorBurn:"Color Burn"},overlays:{none:BX.message("IMAGE_EDITOR_OVERLAY_NONE"),imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}}}},loading:{loading:BX.message("IMAGE_EDITOR_LOADING"),exporting:BX.message("IMAGE_EDITOR_EXPORTING"),resizing:BX.message("IMAGE_EDITOR_RESIZING"),fonts:BX.message("IMAGE_EDITOR_LOADING_FONTS")},warnings:{imageResized_maxMegaPixels:{title:BX.message("IMAGE_EDITOR_IMAGE_RESIZED_TITLE"),text:BX.message("IMAGE_EDITOR_IMAGE_RESIZED_DESCRIPTION")},imageResized_maxDimensions:{title:BX.message("IMAGE_EDITOR_IMAGE_RESIZED_TITLE"),text:BX.message("IMAGE_EDITOR_IMAGE_RESIZED_DESCRIPTION")},newImage_changesLost:{title:BX.message("IMAGE_EDITOR_IMAGE_NEW_IMAGE_TITLE"),text:BX.message("IMAGE_EDITOR_IMAGE_NEW_IMAGE_DESCRIPTION"),buttons:{yes:BX.message("IMAGE_EDITOR_YES"),no:BX.message("IMAGE_EDITOR_NO")}},discardChanges:{title:BX.message("IMAGE_EDITOR_DISCARD_CHANGES_TITLE"),text:BX.message("IMAGE_EDITOR_DISCARD_CHANGES_DESCRIPTION"),buttons:{cancel:BX.message("IMAGE_EDITOR_DISCARD_CHANGES_CANCEL_BUTTON"),keep:BX.message("IMAGE_EDITOR_DISCARD_CHANGES_KEEP_CHANGES_BUTTON"),discard:BX.message("IMAGE_EDITOR_DISCARD_CHANGES_DISCARD_BUTTON")}}},errors:{title:BX.message("IMAGE_EDITOR_ERROR"),renderingError:{text:BX.message("IMAGE_EDITOR_ERROR_RENDERING_ERROR_DESCRIPTION")},stickerLoadingError:{text:BX.message("IMAGE_EDITOR_ERROR_LOAD_STICKER")},imageLoadingError:{text:BX.message("IMAGE_EDITOR_ERROR_IMAGE_LOADING_ERROR")},fontLoadingError:{text:BX.message("IMAGE_EDITOR_ERROR_FONT_LOADING_ERROR")},webcamNotSupported:{text:BX.message("IMAGE_EDITOR_ERROR_WEBCAM_NOT_SUPPORTED")},webcamUnavailable:{text:BX.message("IMAGE_EDITOR_ERROR_WEBCAM_UNAVAILABLE")},invalidFileType:{text:BX.message("IMAGE_EDITOR_ERROR_UNSUPPORTED_FILE_TYPE")}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:59:"/bitrix/js/main/imageeditor/js/editor.min.js?15441273846341";s:6:"source";s:40:"/bitrix/js/main/imageeditor/js/editor.js";s:3:"min";s:44:"/bitrix/js/main/imageeditor/js/editor.min.js";s:3:"map";s:44:"/bitrix/js/main/imageeditor/js/editor.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Main");var e;var t;var i=JSON.stringify({owner:"Bitrix, Inc.",version:"2.1",enterprise_license:false,available_actions:["magic","filter","transform","sticker","text","adjustments","brush","focus","frames","camera"],features:["adjustment","filter","focus","overlay","transform","text","sticker","frame","brush","camera","library","export"],platform:"HTML5",app_identifiers:[],api_token:"QbbG4guiONSDiVtWkcvw8A",domains:["https://api.photoeditorsdk.com"],issued_at:1534847608,expires_at:null,signature:"QgxAUoamxsnyqgFEQIoyj7168MituWvgVbj8VIr5EBjVG0HZSBmDh3XLU+u3NWTC2GUiZ6FB9GGB0Otf6mZ4VlhiXtyE4Xf61tE+PiFt4LPjGlAURCGl1yT9oGVBdWgb8lu8QhZ224g4TmPzNBeA5lDZwOaS/ESOZjltp0T5RE70NMpSPkSj8HEgO5zX2LnBt0kBpVj7xGxiprFzSn8P30m8+9IX0OuwGJ4AJZnLOB97pz1V1/I50RUgyvRDh7esZ/GdqkewRoGUwkybqHC2oQH15koZThKnEJZ9ufw1JyNVeUDmNvDysDdiLh/zGFgx3yVrBzAxfDAMnQhPpHUhgSlOh1W1YA3TKU7itR2vbXs7sd0syUCvAYMHMjgfUvCBfUKG5d2GOhg1jvd3a+wuVeloTEGwWFnhCpuoY7fHc991inKKCfH4EG4aeAJ5dLnFsZznyOxKMTOWMlmsVMRpW5tjNHP9nSDlj5s5XBX2XVVDkp2gj3oU2znUGY/uc8lczDvHpx7s9PRd7lp5U16QMOXujWWY9iYraNzwyqa2mUrxDhS/PSrlgd8F39iadeIE8bJQHLTVZjlanVZEJwx19MuGEBnYc5SWPkauhVCXFhdlrLj2zIzd1KYEEs1sbMQ4H/IVszF9mHBGJXSZCdOweXiWVHeg0o9UvSyS/sVwZjw="});BX.Main.ImageEditor=function(e){this.predefinedOptions=e||{};this.popup=new BX.PopupWindow("image-editor-"+BX.util.getRandomString(),null,{zIndex:900,width:window.innerWidth-10,height:window.innerHeight-10,overlay:.9,noAllPaddings:true,className:"main-image-editor",animationOptions:{show:{className:"main-image-editor-show",eventType:"animation"},close:{className:"main-image-editor-close",eventType:"animation"}},events:{onPopupClose:this.onPopupClose.bind(this)}});this.loader=new BX.Loader;BX.bind(window,"resize",this.onWindowResize.bind(this))};BX.Main.ImageEditor.ratio={CUSTOM:"imgly_transform_common_custom",SQUARE:"imgly_transform_common_square","4/3":"imgly_transform_common_4-3","16/9":"imgly_transform_common_16-9",PROFILE:"imgly_transform_facebook_profile",FB_AD:"imgly_transform_facebook_ad",FB_POST:"imgly_transform_facebook_post",FB_COVER:"imgly_transform_facebook_cover"};BX.Main.ImageEditor.renderType={BASE64:"data-url",IMAGE:"image",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"};function o(e,t,o){var n="/bitrix/js/main/imageeditor/external/photoeditorsdk/assets";var s=t.forceCrop||false;var r={library:false};if(BX.type.isPlainObject(o)&&BX.type.isPlainObject(o.controlsOptions)){r=o.controlsOptions}if(BX.type.isPlainObject(t.controlsOptions)){r=Object.assign(r,t.controlsOptions);if(BX.type.isPlainObject(r.transform)&&BX.type.isArray(r.transform.categories)){r.transform.categories.forEach(function(e){if(BX.type.isArray(e.ratios)){e.ratios.forEach(function(e){if(BX.type.isPlainObject(e)&&BX.type.isPlainObject(e.dimensions)){var t=e.dimensions;e.dimensions=new PhotoEditorSDK.Math.Vector2(t.width,t.height)}})}})}}var a={type:BX.Main.ImageEditor.renderType.BASE64,download:false};if(BX.type.isPlainObject(o)&&BX.type.isPlainObject(o.export)){a=o.export}if(BX.type.isPlainObject(t.export)){a=Object.assign({},a,t.export)}var p=30;if(BX.type.isNumber(t.megapixels)){p=t.megapixels}return new PhotoEditorSDK.UI.DesktopUI({container:t.container,license:i,assets:Object.assign({},{baseUrl:n},t.assets||{}),showHeader:false,responsive:true,preloader:false,versionCheck:false,logLevel:"error",language:"ru",editor:{preferredRenderer:"canvas",maxMegaPixels:{desktop:p},forceCrop:s,displayCloseButton:true,image:e,export:a,controlsOptions:r},extensions:{languages:{ru:BX.Main.ImageEditorLocale}}})}function n(e,t){return new Promise(function(i,o){if(typeof e==="string"){var n=e;e=new Image;if(!!t&&BX.type.isString(t)){e.src=BX.util.add_url_param(t,{sessid:BX.bitrix_sessid(),url:n})}else{e.src=n}}if(typeof e==="object"&&e instanceof Image){if(e.complete){i(e);return}e.onload=i.bind(null,e);e.onerror=o}})}function s(e){return(""+e).split("/").pop()}BX.Main.ImageEditor.getInstance=function(){return BX.Main.ImageEditor.instance||(BX.Main.ImageEditor.instance=new BX.Main.ImageEditor)};BX.Main.ImageEditor.prototype={edit:function(i){var s;if(BX.type.isPlainObject(i)){s=i.image;delete i.image}else{s=i}if(!s){throw new Error("Image should be a instance of Image or string path")}i=BX.type.isPlainObject(i)?i:{};i.container=this.popup.contentContainer;this.popup.show();document.documentElement.style.overflow="hidden";BX.onCustomEvent(this,"BX.Main.ImageEditor:show",[this]);var r=i.proxy||this.predefinedOptions.proxy;this.loader.show(this.popup.popupContainer);return n(s,r).then(function(n){var s=["main.imageeditor.external.react.production","main.imageeditor.external.photoeditorsdk"];BX.loadExt(s).then(function(){t=n;this.SDKInstance=o(n,i,this.predefinedOptions);this.SDKInstance.on("export",BX.proxy(this.onExport,this));this.SDKInstance.on("close",BX.proxy(this.popup.close,this.popup));this.loader.hide()}.bind(this));return new Promise(function(t){e=t})}.bind(this)).catch(function(){this.loader.hide();this.popup.setContent(this.createErrorMessage());return Promise.reject()}.bind(this))},createErrorMessage:function(){return BX.create("div",{props:{className:"main-image-editor-error"},children:[BX.create("div",{props:{className:"main-image-editor-error-text"},html:BX.message("IMAGE_EDITOR_POPUP_ERROR_MESSAGE_TEXT")}),BX.create("div",{children:[BX.create("button",{props:{className:"ui-btn"},text:BX.message("IMAGE_EDITOR_CLOSE_POPUP"),events:{click:function(){this.popup.close()}.bind(this)}})]})]})},apply:function(){this.SDKInstance.export()},close:function(){this.popup.close()},onPopupClose:function(){if(this.SDKInstance){this.SDKInstance.off("export",BX.proxy(this.onExport,this));this.SDKInstance.off("close",BX.proxy(this.popup.close,this.popup));this.SDKInstance.dispose()}this.popup.contentContainer.innerHTML="";document.documentElement.style.overflow=null;BX.onCustomEvent(this,"BX.Main.ImageEditor:close",[this])},onExport:function(i,o){if(o.getOptions().editor.export.type===BX.Main.ImageEditor.renderType.BASE64){var n=s(t.src);var r=i.split(",");var a=r[1];var p=r[0].match(new RegExp("data:image/(.*);base64"))[1];p=p==="jpeg"?"jpg":p;n=n.replace(/\.[^\.]+$/,"."+p);i=[n,a]}e(i);this.popup.close()},onWindowResize:function(){this.popup.setWidth(window.innerWidth-10);this.popup.setHeight(window.innerHeight-10)}}})();
/* End */
;
//# sourceMappingURL=kernel_main_imageeditor.map.js