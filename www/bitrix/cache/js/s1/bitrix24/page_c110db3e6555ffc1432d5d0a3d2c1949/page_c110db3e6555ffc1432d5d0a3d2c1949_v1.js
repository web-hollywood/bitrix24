
; /* Start:"a:4:{s:4:"full";s:97:"/bitrix/components/bitrix/voximplant.lines.default/templates/.default/script.min.js?1544131466941";s:6:"source";s:79:"/bitrix/components/bitrix/voximplant.lines.default/templates/.default/script.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
BX.namespace("BX.Voximplant");BX.Voximplant.DefaultLine={init:function(t){BX.ready(function(){BX.bind(BX("search_btn"),"click",function(){BX.submit(BX("search_form"));return false});BX.bind(BX("clear_btn"),"click",function(){BX("search_form").elements.FILTER.value="";BX.submit(BX("search_form"));return false});BX.bind(BX("option_btn"),"click",function(){var e=BX.create("SPAN",{props:{className:"wait"}});BX.addClass(BX("option_btn"),"webform-small-button-wait webform-small-button-active");this.appendChild(e);BX.ajax({method:"POST",url:t.ajaxUrl+"?act=option",data:{sessid:BX.bitrix_sessid(),portalNumber:BX("option_form").elements.portalNumber.value},dataType:"json",onsuccess:function(){BX.removeClass(BX("option_btn"),"webform-small-button-wait webform-small-button-active");BX.remove(e)},onfailure:function(){BX.removeClass(BX("option_btn"),"webform-small-button-wait webform-small-button-active");BX.remove(e)}});return false})})}};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:103:"/bitrix/components/bitrix/voximplant.settings.backupline/templates/.default/script.min.js?1544131466849";s:6:"source";s:85:"/bitrix/components/bitrix/voximplant.settings.backupline/templates/.default/script.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
BX.namespace("BX.Voximplant");BX.Voximplant.BackupLine={init:function(a){var e=BX("backup_number_btn");BX.bind(e,"click",function(){var t=BX.create("SPAN",{props:{className:"wait"}});BX.addClass(e,"webform-small-button-wait webform-small-button-active");this.appendChild(t);BX.ajax({method:"POST",url:a+"?action=saveBackupNumber",data:{ACTION:"saveBackupNumber",BACKUP_NUMBER:BX("vi-backup-number").value,BACKUP_LINE:BX("vi-backup-line").value,sessid:BX.bitrix_sessid()},dataType:"json",onsuccess:function(){BX.removeClass(e,"webform-small-button-wait webform-small-button-active");BX.remove(t)},onfailure:function(){BX.removeClass(e,"webform-small-button-wait webform-small-button-active");BX.remove(t)}});return false});BX.bind(BX("vi-backup-number"),"input",function(a){var e=a.target;e.value=e.value.replace(/[^\d+]/g,"");a.preventDefault()})}};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:100:"/bitrix/components/bitrix/voximplant.interface.config/templates/.default/script.min.js?1544131466842";s:6:"source";s:82:"/bitrix/components/bitrix/voximplant.interface.config/templates/.default/script.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
BX.namespace("BX.Voximplant.Numbers");BX.Voximplant.Interface={init:function(t){BX.ready(function(){BX.bind(BX("interface_chat_option_btn"),"click",function(){var a=BX.create("SPAN",{props:{className:"wait"}});BX.addClass(BX("interface_chat_option_btn"),"webform-small-button-wait webform-small-button-active");this.appendChild(a);var e=BX("interface_chat_option_form").elements.chatAction.value;BX.ajax({method:"POST",url:t.ajaxUrl+"?action=save&chatAction="+e,data:{VI_SET_CHAT_ACTION:"Y",ACTION:e,sessid:BX.bitrix_sessid()},dataType:"json",onsuccess:function(){BX.removeClass(BX("interface_chat_option_btn"),"webform-small-button-wait webform-small-button-active");BX.remove(a)},onfailure:function(){BX.removeClass(BX("interface_chat_option_btn"),"webform-small-button-wait webform-small-button-active");BX.remove(a)}});return false})})}};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:96:"/bitrix/components/bitrix/voximplant.settings.crm/templates/.default/script.min.js?1544131466772";s:6:"source";s:78:"/bitrix/components/bitrix/voximplant.settings.crm/templates/.default/script.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
BX.namespace("BX.Voximplant");BX.Voximplant.CRM={init:function(t){var e=BX("interface_crm_option_btn");BX.bind(e,"click",function(){var a=BX.create("SPAN",{props:{className:"wait"}});BX.addClass(e,"webform-small-button-wait webform-small-button-active");this.appendChild(a);var o=BX("interface_crm_option_form").elements.leadWorkflowAction.value;BX.ajax({method:"POST",url:t+"?action=setCrmIntegrationParameters&workflowExecution="+o,data:{VI_SET_WORKFLOW_EXECUTION:"Y",EXECUTION_PARAMETER:o,sessid:BX.bitrix_sessid()},dataType:"json",onsuccess:function(){BX.removeClass(e,"webform-small-button-wait webform-small-button-active");BX.remove(a)},onfailure:function(){BX.removeClass(e,"webform-small-button-wait webform-small-button-active");BX.remove(a)}});return false})}};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:105:"/bitrix/components/bitrix/voximplant.settings.combinations/templates/.default/script.min.js?1544131466852";s:6:"source";s:87:"/bitrix/components/bitrix/voximplant.settings.combinations/templates/.default/script.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
BX.namespace("BX.Voximplant");BX.Voximplant.Combinations={init:function(t){var a=BX("interface_combinations_btn");BX.bind(a,"click",function(){var e=BX.create("SPAN",{props:{className:"wait"}});BX.addClass(a,"webform-small-button-wait webform-small-button-active");this.appendChild(e);BX.ajax({method:"POST",url:t+"?action=saveCombinations",data:{VI_SET_COMBINATIONS:"Y",COMBINATION_INTERCEPT_GROUP:BX("combinationInterceptGroup").value,sessid:BX.bitrix_sessid()},dataType:"json",onsuccess:function(){BX.removeClass(a,"webform-small-button-wait webform-small-button-active");BX.remove(e)},onfailure:function(){BX.removeClass(a,"webform-small-button-wait webform-small-button-active");BX.remove(e)}});return false});BX.bind(BX("combinationInterceptGroup"),"input",function(t){var a=t.target;a.value=a.value.replace(/[^\d#*]/g,"");t.preventDefault()})}};
/* End */
;
; /* Start:"a:4:{s:4:"full";s:94:"/bitrix/components/bitrix/voximplant.blacklist/templates/.default/script.min.js?15441314663032";s:6:"source";s:75:"/bitrix/components/bitrix/voximplant.blacklist/templates/.default/script.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
BX.namespace("BX.Voximplant.Blacklist");BX.Voximplant.Blacklist={ajaxUrl:"",elements:{numbersContainer:null,numberInput:null,addButton:null,settingsForm:null,saveSettingsButton:null},init:function(e){var t=this;this.ajaxUrl=e.ajaxUrl;this.elements.numbersContainer=BX("bl-numbers-container");this.elements.numberInput=BX("bl-new-number");this.elements.addButton=BX("bl-add-number");this.elements.settingsForm=BX("bl-settings-form");this.elements.saveSettingsButton=BX("bl-save-settings");BX.bind(this.elements.addButton,"click",this.onAddButtonClick.bind(this));BX.bind(this.elements.numberInput,"keypress",this.onNumberInputKeyPress.bind(this));BX.bind(this.elements.saveSettingsButton,"click",this.saveSettings.bind(this));if(BX.type.isArray(e.numbers)){e.numbers.forEach(function(e){t.renderNumber(e)})}},saveSettings:function(){var e=this;var t=new FormData(this.elements.settingsForm);t.append("sessid",BX.bitrix_sessid());t.append("ACTION","saveSettings");BX.addClass(this.elements.saveSettingsButton,"webform-small-button-wait webform-small-button-active");BX.ajax({url:this.ajaxUrl+"?ACTION=saveSettings",method:"POST",dataType:"json",data:t,preparePost:false,onsuccess:function(t){BX.removeClass(e.elements.saveSettingsButton,"webform-small-button-wait webform-small-button-active")}})},renderNumber:function(e){var t=BX.create("div",{props:{className:"tel-bl-phone"},dataset:{id:e.ID,number:e.PHONE_NUMBER},children:[BX.create("span",{props:{className:"tel-bl-phone-text"},text:BX.util.htmlspecialchars(e.PHONE_NUMBER)}),BX.create("span",{props:{className:"tel-bl-phone-delete"},events:{click:this.deleteNumber.bind(this)}})]});this.elements.numbersContainer.appendChild(t)},onNumberInputKeyPress:function(e){if(e.key==="Enter"){var t=this.elements.numberInput.value;this.addNumber(t)}},onAddButtonClick:function(e){var t=this.elements.numberInput.value;this.addNumber(t)},addNumber:function(e){var t=this;BX.addClass(this.elements.addButton,"webform-small-button-wait webform-small-button-active");BX.ajax({url:this.ajaxUrl+"?ACTION=addNumber",method:"POST",dataType:"json",data:{sessid:BX.bitrix_sessid(),ACTION:"addNumber",NUMBER:e},onsuccess:function(e){BX.removeClass(t.elements.addButton,"webform-small-button-wait webform-small-button-active");if(e.ERROR){if(e.ERROR=="WRONG_NUMBER"){BX.Voximplant.alert(BX.message("BLACKLIST_ERROR_TITLE"),BX.message("VI_BLACKLIST_NUMBER_ERROR"))}else if(e.ERROR=="NUMBER_ALREADY_EXISTS"){BX.Voximplant.alert(BX.message("BLACKLIST_ERROR_TITLE"),BX.message("VI_BLACKLIST_NUMBER_ALREADY_EXISTS"))}}else{t.renderNumber(e.number);t.elements.numberInput.value=""}}})},deleteNumber:function(e){var t=e.target.parentNode;var s=t.dataset.number;if(confirm(BX.message("BLACKLIST_DELETE_CONFIRM"))){BX.ajax({method:"POST",dataType:"json",url:this.ajaxUrl,data:{sessid:BX.bitrix_sessid(),ACTION:"deleteNumber",NUMBER:s},onsuccess:function(e){if(e.success=="Y"){BX.remove(t)}else if(e.ERROR){BX.Voximplant.alert(BX.message("BLACKLIST_ERROR_TITLE"),BX.message("BLACKLIST_DELETE_ERROR"))}}})}}};
/* End */
;; /* /bitrix/components/bitrix/voximplant.lines.default/templates/.default/script.min.js?1544131466941*/
; /* /bitrix/components/bitrix/voximplant.settings.backupline/templates/.default/script.min.js?1544131466849*/
; /* /bitrix/components/bitrix/voximplant.interface.config/templates/.default/script.min.js?1544131466842*/
; /* /bitrix/components/bitrix/voximplant.settings.crm/templates/.default/script.min.js?1544131466772*/
; /* /bitrix/components/bitrix/voximplant.settings.combinations/templates/.default/script.min.js?1544131466852*/
; /* /bitrix/components/bitrix/voximplant.blacklist/templates/.default/script.min.js?15441314663032*/
